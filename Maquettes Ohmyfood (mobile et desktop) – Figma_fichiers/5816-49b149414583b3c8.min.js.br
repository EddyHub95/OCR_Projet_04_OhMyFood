"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b12714e9-3833-5d69-ad89-3ab8785cf2b5")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5816],{823824:(e,t,r)=>{function n(e){return"backend"in e&&"fullscreen"===e.backend}function i(e){switch(e){case"server_file":case"local_file":case"server_checkpoint":case"pasted_data":return!0;case"server_checkpoint_diff":case"local_diff_file":case"multiplayer_journal":return!1}}function l(e){switch(e.type){case"server_file":case"local_file":case"server_checkpoint":case"pasted_data":return!0;case"server_checkpoint_diff":case"local_diff_file":case"multiplayer_journal":return!1}}function a(e){switch(e.type){case"server_checkpoint_diff":case"local_diff_file":return!0;case"server_file":case"local_file":case"server_checkpoint":case"multiplayer_journal":case"pasted_data":return!1}}r.d(t,{A5:()=>a,MV:()=>n,Uf:()=>i,o5:()=>l})},162860:(e,t,r)=>{r.d(t,{w:()=>S});var n=r(594192),i=r(50451),l=r(762820),a=r(481556),s=r(301828),o=r(851712),u=r(448587),c=r(160335),d=r(136056),h=r(885700),p=r(916924),f=r(256896);function m(e,t){switch(e){case l.iUn.BOOL:return{type:c.e6.Boolean,value:t.boolValue};case l.iUn.TEXT:return{type:c.e6.SensitiveText,value:t.textValue};case l.iUn.INSTANCE_SWAP:return{type:c.e6.NodeId,value:(0,o.i6)(t.instanceSwapValue)};default:if(t.untypedValue)return{type:c.e6.SensitiveText,value:t.untypedValue};return}}function y(e,t){let r=[];return e.error&&r.push((0,d.IH)("Error",{type:c.e6.String,value:e.error})),e.propType&&r.push((0,d.IH)("Prop Type",{type:c.e6.String,value:(0,f.Mx)(e.propType)})),e.explicitDefID&&(r.push((0,d.IH)("Explicit Def ID",{type:c.e6.GenericGuid,value:(0,o.i6)(e.explicitDefID)})),t&&r.push((0,d.Sy)("Explicit Def State Group",t))),r.push((0,d.y4)({label:"Ref Nodes",list:e.refNodes,buildChild:g,expandByDefault:!1})),r}function g(e,t){return{label:e,value:{type:c.e6.NodeId,value:(0,o.i6)(t.refNodeGuid)},children:[{label:e,value:{type:c.e6.String,value:t.nodeField},children:[],expandByDefault:!1}],expandByDefault:!1}}function v(e,t,r){return(0,d.y4)({label:e,list:t,buildChild:(e,t)=>(function(e,{edges:t},r){let n=1===t.length?E(t[0],!1):[(0,d.IH)("Type",{type:c.e6.String,value:"Transitive"}),(0,d.y4)({label:"Edges",list:t,buildChild:(e,t)=>({label:e,children:E(t,!0),expandByDefault:!0}),expandByDefault:!0})];return{label:e,value:{type:c.e6.NodeId,value:(0,o.i6)(r===l.Ir.FROM?t[t.length-1].toGuid:t[0].fromGuid)},children:n,expandByDefault:!1}})(e,t,r),expandByDefault:!1})}function E({fromGuid:e,toGuid:t,type:r,pathToOverride:n,propDefId:i},a){let s=[(0,d.IH)("Type",{type:c.e6.String,value:function(e){switch(e){case l.YJO.PRIMARY_INSTANCE_BACKED_BY_SYMBOL:return"Primary instance backed by symbol";case l.YJO.PRIMARY_INSTANCE_WITH_NESTED_SWAP_TO_SYMBOL:return"Primary instance with nested swap to symbol";case l.YJO.PRIMARY_INSTANCE_WITH_TOP_LEVEL_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with top level prop assignment to symbol";case l.YJO.PRIMARY_INSTANCE_WITH_NESTED_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with nested prop assignment to symbol";case l.YJO.PRODUCT_COMPONENT_WITH_PROP_DEF_TO_SYMBOL:return"Product component with prop def to symbol";case l.YJO.STATE_WITH_PROP_DEF_TO_SYMBOL:return"State with prop def to symbol";case l.YJO.SYMBOL_CONTAINING_PRIMARY_INSTANCE:return"Symbol containing primary instance";case l.YJO.INVALID:return"Invalid";default:(0,p.gy)(e)}}(r)})];a&&(s.push((0,d.Sy)("From",e)),s.push((0,d.Sy)("To",t))),n.length>1&&s.push((0,d.IH)("Path to override",{type:c.e6.OverridePath,value:(0,o.yE)(n)}));let u=(0,o.OQ)(i);return u&&s.push((0,d.IH)("Prop def id",{type:c.e6.GenericGuid,value:(0,o.i6)(u)})),s}class S extends h.D{constructor({inPrototypeViewer:e,...t}){super(t),this.nodesById=new Map,this.stylesById=new Map,this.variablesById=new Map,this.variableCollectionsById=new Map,this.searchDB=new s.m,this.inPrototypeViewer=e}memoryUsage(){if(this._memoryUsage)return this._memoryUsage;let e=this.getRootNodes().reduce((e,t)=>e+t.treeMemoryUsage,0);return this._memoryUsage=e}getRootNodes(){return this.fetchNodesFromFullscreen(()=>l.GyV.getRootNodes())}getNode(e){return this.getNodeFromCache(e)||this.fetchNodeFromFullscreen(()=>l.GyV.getNode((0,o._y)(e)))}getChildren(e){return this.fetchNodesFromFullscreen(()=>l.GyV.getChildren((0,o._y)(e)))}getStyle(e){return this.getStyleFromCache(e)||this.fetchNodeFromFullscreen(()=>l.GyV.getStyle(e))}getVariable(e){return this.getVariableFromCache(e)||this.fetchNodeFromFullscreen(()=>l.GyV.getVariable(e))}getVariableCollection(e){return this.getVariableCollectionFromCache(e)||this.fetchNodeFromFullscreen(()=>l.GyV.getVariableCollection(e))}getStyleConsumers(e){return this.fetchNodesFromFullscreen(()=>l.GyV.getStyleConsumers(e))}getConsumedStyles(e){return this.fetchNodesFromFullscreen(()=>l.GyV.getConsumedStyles((0,o._y)(e)))}getConsumedVariables(e){return this.fetchNodesFromFullscreen(()=>l.GyV.getConsumedVariables((0,o._y)(e)))}getVariablesInCollection(e){return this.fetchNodesFromFullscreen(()=>l.GyV.getVariablesInCollection(e))}getVariableConsumers(e){return this.fetchNodesFromFullscreen(()=>l.GyV.getVariableConsumers(e))}getDirectVariableDependenciesToVariable(e){return this.fetchNodesFromFullscreen(()=>l.GyV.getDirectVariableDependenciesToVariable(e))}getPropDefs(e){let t=(0,o.OQ)(e);return null==t?[]:l.GyV.getPropDefs(t)}getCombinedPropAssignments(e){let t=(0,o.OQ)(e);return null==t?[]:l.GyV.getCombinedPropAssignments(t)}getTransitiveDependencyPaths(e,t){let r=(0,o.OQ)(e);return null==r?[]:l.GyV.getTransitiveDependencyPaths(r,t)}getAllOverridesForLayer(e){let t=(0,o.OQ)(e);return null==t?[]:l.GyV.getLayerOverrides(t).map(e=>({...e,fields:i.O.decodeMessage(e.fields).nodeChanges[0]}))}getAllSublayerInfoForImmutableFrame(e){let t=(0,o.OQ)(e);return null==t?new Map:l.GyV.getImmutableFrameSubLayerInfo(t)}getOverrideStash(e){let t=(0,o.OQ)(e);return null==t?[]:l.GyV.getOverrideStash(t).map(e=>({...e,overrides:e.overrides.map(e=>({...e,fields:i.O.decodeMessage(e.fields).nodeChanges[0]}))}))}getTextInsertionStyle(e){let t;let r=(0,o.OQ)(e);if(null==r)return[];let n=l.GyV.getTextInsertionStyle(r);if(0===n.length)return[];try{t=i.O.decodeMessage(n).nodeChanges}catch(e){return console.warn("FigmaScope: error decoding node changes",e),[]}return t?t.length>1?(console.warn("FigmaScope: more than one node change found for text insertion style"),[]):t:(console.warn("FigmaScope: buffer did not contain node changes"),[])}getBlobByIndex(e){return"showing blob bytes is not implemented"}supportsNodePreviews(){return"show"===this.sensitiveTextPolicy&&!this.inPrototypeViewer}async search(e,t,r){return(await this.indexedSearchDB(r)).search(e,t)}indexedProperties(){return this.searchDB.indexedProperties}getNodeFromCache(e){return this.nodesById.get((0,o._y)(e))??null}getStyleFromCache(e){return this.stylesById.get(e)??null}getVariableFromCache(e){return this.variablesById.get(e)??null}getVariableCollectionFromCache(e){return this.variableCollectionsById.get(e)??null}fetchNodeFromFullscreen(e){let t=this.fetchNodesFromFullscreen(e);return t.length>1&&console.error("FigmaScope: Multiple nodes found",t),t[0]??null}fetchNodesFromFullscreen(e){let t,r;try{t=e()}catch(e){return console.error("FigmaScope: error fetching nodes"),[]}try{r=i.O.decodeMessage(t).nodeChanges}catch(e){return console.error("FigmaScope: error decoding node changes",e),[]}return r?r.map(e=>{let t=(0,o._y)(e.guid),r=this.nodesById.get(t);if(r)return r;let n=new b(e,this);if(this.nodesById.set(t,n),n.isStyle()){let e=n.styleId();e&&this.stylesById.set(e,n)}if(n.isVariable()){let e=n.variableId();e&&this.variablesById.set(e,n)}if(n.isVariableCollection()){let e=n.variableCollectionId();e&&this.variableCollectionsById.set(e,n)}return n}):(console.error("FigmaScope: missing nodeChanges property"),[])}indexedSearchDB(e){if(this._indexedSearchDB)return this._indexedSearchDB;let t=0,r=this.getRootNodes(),n=async()=>{await scheduler.postTask(async()=>{let i=Date.now();for(;Date.now()-i<100;){let n=r.pop();if(!n)return;e&&++t%5e3==0&&e(t),this.searchDB.indexNode(n),r.push(...n.children().filter(e=>e.guid))}await n()})},i=n().then(()=>this.searchDB);return this._indexedSearchDB=i}}class b extends u.e{constructor(e,t){super(e,t),this.memoryUsage=l.GyV.getNodeMemoryUsage(this.guidStr()),this.treeMemoryUsage=l.GyV.getSubtreeMemoryUsage(this.guidStr()),this.hasBeenLoaded=l.GyV.getHasBeenLoaded(this.guidStr())}memoryPercentStr(){return(0,a.iq)(this.treeMemoryUsage,this._scene.memoryUsage(),!1)}transitiveDependencyPaths(e){return this._scene.getTransitiveDependencyPaths(this.guid(),e)}consumedStyleIds(){return this.consumedStyles().map(e=>e.styleId()).filter(n.aI)}consumedStyles(){return this._scene.getConsumedStyles(this.guid())}consumedVariableIds(){return this.consumedVariables().map(e=>e.variableId()).filter(n.aI)}consumedVariables(){return this._scene.getConsumedVariables(this.guid())}variablesThatDirectlyDependOnThisVariable(){let e=this.variableId();return e?this._scene.getDirectVariableDependenciesToVariable(e):[]}propDefs(){return this._scene.getPropDefs(this.guid())}combinedPropAssignments(){return this._scene.getCombinedPropAssignments(this.guid())}allLayerOverrides(){return this._scene.getAllOverridesForLayer(this.guid())}overrideStash(){return this._scene.getOverrideStash(this.guid())}keyForPublish(){return super.key()??(this.isLocalAsset()&&l.GqY?l.GqY.getAssetKeyForPublish(this.guidStr()):void 0)}allImmutableFrameSublayerInfo(e){return this._scene.getAllSublayerInfoForImmutableFrame(e)}textInsertionStyle(e){let t=this._scene.getTextInsertionStyle(e);return 1===t.length?t[0]:null}sublayerOverridesFromContainingImmutableFrame(){let e=this.containingImmutableFrame();if(!e)return null;let t=this.allImmutableFrameSublayerInfo(e.guid());if(!t||0===t.size)return null;let r=Array.from(t).find(e=>e[1].sublayerGuid===this.guidStr());if(!r)return null;let n=e.immutableFrameSublayerOverridesList();return 0===n.length?null:n.find(e=>{var t,n;let i=null==(t=e.guidPath)?void 0:t.guids;return`[${null==(n=null==i?void 0:i.map(e=>(0,o._y)(e)))?void 0:n.join(", ")}]`===r[0]})}generateComputedProperties(){var e,t,r;let i=[(0,d.u_)(this.type())];this.hasBeenLoaded&&i.push((0,d.IH)("Has Been Loaded",{type:c.e6.Boolean,value:this.hasBeenLoaded}));let a=this.keyForPublish(),s=(0,d.aG)(this,a);if(s&&i.push(s),i.push({label:"Memory usage",children:[(0,d.IH)("Node",{type:c.e6.Numeric,value:this.memoryUsage}),(0,d.IH)("Tree",{type:c.e6.Numeric,value:this.treeMemoryUsage})],expandByDefault:!0}),this.isPrimaryInstance()){let e=(0,d._M)(this);e&&i.push(e);let t=(0,d.cd)(this);t&&i.push(t);let r=this.overrideStash();r&&i.push((0,d.y4)({label:"Override stash",list:r,expandByDefault:!1,buildChild:(e,t)=>({label:e,value:t.pathToSwap?{type:c.e6.OverridePath,value:(0,o.yE)(t.pathToSwap)}:void 0,children:[(0,d.y4)({label:e,value:{type:c.e6.NodeId,value:(0,o.i6)(t.symbolId)},list:t.overrides,expandByDefault:!1,buildChild:(e,t)=>(0,d.U$)({label:e,value:{type:c.e6.OverridePath,value:(0,o.yE)(t.overridePath)},object:t.fields,buildChild:(e,t)=>null==t?null:(0,d.eq)(e,t),expandByDefault:!1})})],expandByDefault:!1})}))}let u=this.instanceChain();if(u.length>0){i.push({label:"Instance chain",value:{type:c.e6.Metadata,value:u.length},expandByDefault:!0,children:u.map((e,t)=>(function(e,t){let r=e.isInstance(),i=e.isPrimaryInstance(),l=[];if(r){l.push((0,d.iS)(e));let t=(0,d.wp)(e);t&&l.push(t)}return i||l.push((0,d.IH)("Override path",{type:c.e6.OverridePath,value:t.slice(1).map(e=>e.overrideKey()).filter(n.aI)})),{label:r?i?"Primary instance":"Nested instance":"This sublayer",key:String(t.length),value:{type:c.e6.NodeId,value:e.guid()},children:l,expandByDefault:!1}})(e,u.slice(0,t+1)))});let e=this.allLayerOverrides();if(e){let t=function(e){let t={};for(let{primaryInstanceId:r,containingSymbolId:n,fields:i,savedLevel:l,inheritanceLevel:a}of e)for(let[e,s]of Object.entries(i))t[e]=t[e]||[],t[e][a]={primaryInstanceId:r,containingSymbolId:n,value:s,savedLevel:l};let r=Object.keys(t).sort();return 0===r.length?null:(0,d.y4)({label:"Layer overrides",list:r,expandByDefault:!1,buildChild:(e,r)=>{let i=t[r],l=i.findIndex(n.aI),a=i[l].value;return{label:r,value:{type:c.e6.Metadata,value:0===l?"Direct override":"Inherited override"},expandByDefault:!1,children:[{...(0,d.eq)(r,a),label:"Resolved value",expandByDefault:!0},{label:"Sources",expandByDefault:!1,children:i.map(({primaryInstanceId:e,containingSymbolId:t,value:i,savedLevel:l},a)=>({label:0===a?"Direct override":"Inherited from",key:`Level ${a}`,value:t?{type:c.e6.NodeId,value:(0,o.i6)(t)}:void 0,children:[{...(0,d.eq)(r,i),label:"Value"},l>0?(0,d.IH)("Saved level",{type:c.e6.Numeric,value:l}):null,(0,d.Sy)("Primary instance",e)].filter(n.aI),expandByDefault:!1})).filter(n.aI)}]}}})}(e);t&&i.push(t)}}if((this.isSymbol()||this.isPrimaryInstance())&&(i.push(v("Dependants",this.transitiveDependencyPaths(l.Ir.TO),l.Ir.TO)),i.push(v("Dependencies",this.transitiveDependencyPaths(l.Ir.FROM),l.Ir.FROM))),this.isStateGroup()&&(i.push((0,d.y4)({label:"Dependants By State",list:this.children(),buildChild:(e,t)=>({...v(`State ${e}`,t.transitiveDependencyPaths(l.Ir.TO),l.Ir.TO),value:{type:c.e6.NodeId,value:t.guid()}}),expandByDefault:!0})),i.push((0,d.y4)({label:"Dependencies By State",list:this.children(),buildChild:(e,t)=>({...v(`State ${e}`,t.transitiveDependencyPaths(l.Ir.FROM),l.Ir.FROM),value:{type:c.e6.NodeId,value:t.guid()}}),expandByDefault:!0}))),this.isStyle()&&i.push((0,d.iW)(this.styleConsumers())),this.isVariable()){let e=this._scene.getVariableCollection(this.variableCollectionId());i.push((0,d.Gy)(e)),i.push((0,d.UF)(this.variableConsumers()))}let h=this.variablesDirectlyDependedOnByThisVariable();Object.values(h).some(e=>e.length>0)&&i.push((0,d._z)(h));let p=this.variablesThatDirectlyDependOnThisVariable();p.length>0&&i.push((0,d.Ks)(p));let f=this.consumedStyles();f.length>0&&i.push((0,d.Ut)(f));let g=this.consumedVariables();if(g.length>0&&i.push((0,d.OW)(g)),this.isVariableCollection()&&i.push((0,d.Bi)(this.variablesInCollection())),this.isSymbol()||this.isStateGroup()){let t=this.propDefs();if(t.length>0){let r=this.isState()?null==(e=this.parent())?void 0:e.guidStr():void 0;i.push((0,d.y4)({label:"Component Prop Defs",list:t,buildChild:(e,t)=>(function(e,t){let r=[(0,d.IH)("Is Explicit",{type:c.e6.Boolean,value:e.isExplicit})],n=m(e.propType,e.defaultValue);return n&&r.push((0,d.IH)("Default Value",n)),r.push(...y(e,t)),{label:e.defID,value:{type:e.name?c.e6.SensitiveText:c.e6.String,value:e.name?e.name:"INVALID_PROP"},children:r,expandByDefault:!1}})(t,r),expandByDefault:!1}))}}if(this.isInstance()){let e=this.combinedPropAssignments();e.length>0&&i.push((t=this.backingStateGroup(),(0,d.y4)({label:"Component Prop Assignments",list:e,buildChild:(e,r)=>(function(e,t){let r=[],n=m(e.propType,e.assignmentValue);return n&&r.push((0,d.IH)("Assignment Value",n)),r.push((0,d.IH)("Is Mixed",{type:c.e6.Boolean,value:e.isMixed})),r.push(...y(e,t)),{label:e.assignmentID,value:{type:e.name?c.e6.SensitiveText:c.e6.String,value:e.name?e.name:"INVALID_PROP"},children:r,expandByDefault:!1}})(r,t),expandByDefault:!1})))}let E=this.otherAssetVersions(e=>{var t;return null==(t=this._scene.getNode(e))?void 0:t.keyForPublish()});E.length>0&&i.push((0,d.qy)(E));let S=this.isVariable()||this.isVariableCollection(),b=this.transform();if(b&&!S){let e=(0,d.W6)("Relative transform",b,this.isEditable(),this.guidStr());i.push(e)}let I=this.absoluteTransform();if(I&&!S&&i.push((0,d.W6)("Absolute transform",I)),"TEXT"===this.type()){let e=this.textInsertionStyle(this.guid());if(e){let t=(0,d.KG)(e);t&&i.push(t)}}if(this.isImmutableFrame()){let e=this.allImmutableFrameSublayerInfo(this.guid());if(e){let t=(0,d.qQ)(this,e);t&&i.push(t)}}if(this.isImmutableFrameSublayer()){let e=this.sublayerOverridesFromContainingImmutableFrame();if(e){let t=(0,d.Qz)(this,e);t&&i.push(t)}}return this._scene.supportsNodePreviews()&&this.isPreviewRenderable()&&i.push((r=this.guid(),{label:"Node Preview",children:[(0,d.IH)("",{type:c.e6.Image,value:r})],expandByDefault:!1})),i}}},851712:(e,t,r)=>{r.d(t,{OQ:()=>s,_y:()=>l,i6:()=>a,q_:()=>o,ue:()=>u,yE:()=>c});var n=r(594192),i=r(4596);function l(e){return"string"==typeof e?e:i.MR(e)}function a(e){return"string"==typeof e?i.K0(e):e}function s(e){let t=l(e);return t===i.Q9?null:t}function o(e){return!!function(e){let t=a(e);return i.U3(t)?t:null}(e)}function u(e){return Array.isArray(e)?e.map(l).join(", "):e}function c(e){return"string"==typeof e?e.split(", ").map(i.K0).filter(n.aI):"string"==typeof e[0]?e.map(a).filter(n.aI):e}},758688:(e,t,r)=>{r.d(t,{aq:()=>f,eq:()=>h});var n=r(916924),i=r(843148),l=r(905412),a=r(675695),s=r(4596),o=r(655068),u=r(939540),c=r(851712),d=r(355808);class h{constructor(e){this.nodeChange=e,this.memoryUsage=null,this.treeMemoryUsage=null}memoryPercentStr(){return null}instanceChain(){let e=this.filterAncestors(e=>e.isInstance()).reverse();return(e.length>0||this.isInstance())&&e.push(this),e}followOverridePath(e){let t=this;for(let r of e){if(!t)return;let e=(0,c._y)(r);t=t.findDescendant(t=>t.overrideKeyStr()===e,{includeSelf:!0,shouldSkipAfter:e=>e!==t&&e.isInstance()})}return t}ancestorPath(){return this.mapAncestors(e=>e.guid(),{includeSelf:!0})}ancestorPathStr(){return(0,c.ue)(this.ancestorPath())}guid(){return this.nodeChange.guid??s.WW}guidStr(){return s.MR(this.guid())}key(){var e,t;return(0,a.ae)(this.nodeChange.key??this.nodeChange.componentKey??((null==(e=this.nodeChange.sharedStyleMasterData)?void 0:e.styleKey)||(null==(t=this.nodeChange.sharedStyleReference)?void 0:t.styleKey)||void 0))}version(){return(0,a.Cs)(this.nodeChange.version??this.nodeChange.sharedSymbolVersion)}assetRef(){return a.If.fromKiwi({key:this.key(),version:this.version()})}_assetId(e){if(!this.isSubscribedAsset())return e.fromLocalNodeIdObj(this.guid());{let t=this.assetRef();return t?e.fromRef(t):null}}symbolId(){return this.isSymbol()?this._assetId(l.Q5):null}stateGroupId(){var e;return this.isStateGroup()?this._assetId(l.uu):this.isSymbol()?(null==(e=this.parent())?void 0:e.stateGroupId())??null:null}styleId(){return this.isStyle()?this._assetId(l.sV):null}variableId(){return this.isVariable()?this._assetId(l.Qb):null}variableCollectionId(){return this.isVariableCollection()?this._assetId(l.qk):this.isVariable()&&this.nodeChange.variableSetID?l.qk.fromKiwi(this.nodeChange.variableSetID):null}backingSymbolId(){var e;return this.isInstance()?(null==(e=this.nodeChange.symbolData)?void 0:e.symbolID)??this.nodeChange.overriddenSymbolID??null:null}getFriendlyVariableModeString(e){var t;if(!this.isVariableCollection())return"";let r=s.MR(e),n=null==(t=this.nodeChange.variableSetModes)?void 0:t.find(t=>s.yK(t.id,e));return n?`${n.name} (${r})`:`<missing mode> (${r})`}nodeType(){return this.nodeChange.type??"NONE"}isEditable(){return"CANVAS"!==this.nodeType()&&"DOCUMENT"!==this.nodeType()&&!this.isImmutableFrameSublayer()&&!this.isInstanceSublayer()&&!this.isInternalOnly()}isPreviewRenderable(){return"CANVAS"!==this.nodeType()&&"DOCUMENT"!==this.nodeType()&&!this.isStateGroup()&&!this.isVariableCollection()&&!this.isVariable()}type(){let e=this.nodeType();if("INSTANCE"===e)return this.isPrimaryInstance()?"PRIMARY_INSTANCE":"NESTED_INSTANCE";if("VARIABLE_SET"===e)return"VARIABLE_COLLECTION";if(this.isStateGroup())return"STATE_GROUP";if(this.isState())return"STATE";if(this.isStyle()){let e=this.nodeChange.styleType;switch(e){case"FILL":return"FILL_STYLE";case"STROKE":return"STROKE_STYLE";case"TEXT":return"TEXT_STYLE";case"EFFECT":return"EFFECT_STYLE";case"EXPORT":return"EXPORT_STYLE";case"GRID":return"GRID_STYLE";default:(0,n.GE)(e)}}return e}phase(){return this.nodeChange.phase??"MODIFIED"}transform(){return this.nodeChange.transform}parentGuid(){let e=this.nodeChange.parentIndex;return e?e.guid||(console.warn("Node has parent index but no parent guid",this,e),null):null}nameWithPage(){let e=this.containingPage();return e?`${e.name()} > ${this.name()}`:this.name()}explicitOverrideKey(){return this.nodeChange.overrideKey}overrideKey(){let e=this.explicitOverrideKey();if(e)return e;if(this.isPrimaryInstance()){let e=this.backingSymbol();if(e)return e.isSubscribedAsset()?e.explicitOverrideKey():e.guid()}}overrideKeyStr(){let e=this.overrideKey();return e?(0,c._y)(e):null}treeDiffKey(){let e=this.instanceChain();return e.length>1?e.map((e,t)=>0===t?e.guidStr():e.overrideKeyStr()).join(", "):this.guidStr()}publishId(){return this.nodeChange.publishID??null}publishFile(){return this.nodeChange.publishFile??null}isInstance(){return"INSTANCE"===this.nodeType()}isPrimaryInstance(){return this.isInstance()&&!this.isNestedInstance()}isNestedInstance(){return"INSTANCE"===this.nodeType()&&this.someAncestor(e=>e.isInstance())}isInstanceSublayer(){return this.someAncestor(e=>e.isInstance())}isSwappedNestedInstance(){return this.isNestedInstance()&&null!=this.nodeChange.overriddenSymbolID}isSymbol(){return"SYMBOL"===this.nodeType()}isStateGroup(){return"FRAME"===this.nodeType()&&null!=this.nodeChange.isStateGroup}isState(){var e;return this.isSymbol()&&!!(null==(e=this.parent())?void 0:e.isStateGroup())}isLooseComponent(){return this.isSymbol()&&!this.isState()}isComponentish(){return this.isSymbol()||this.isStateGroup()}isProductComponent(){return this.isStateGroup()||this.isLooseComponent()}isStyle(){return this.nodeChange.styleType&&u.Ky.indexOf(this.nodeChange.styleType)>-1}isVariable(){return"VARIABLE"===this.nodeType()}isVariableCollection(){return this.isRootVariableCollection()||this.isExtendedVariableCollection()}isRootVariableCollection(){return!!("VARIABLE_SET"===this.nodeType()&&!this.nodeChange.backingVariableSetId)}isExtendedVariableCollection(){return!!("VARIABLE_SET"===this.nodeType()&&this.nodeChange.backingVariableSetId)}isVariableOverride(){return"VARIABLE_OVERRIDE"===this.nodeType()}isAsset(){return this.isSymbol()||this.isStateGroup()||this.isStyle()||this.isVariable()||this.isVariableCollection()||this.isVariableOverride()}isLocalAsset(){return this.isAsset()&&!this.isSubscribedAsset()}isSubscribedAsset(){return this.isComponentish()?(0,i.Ub)().ds_publish_file_deprecation?null!=this.nodeChange.publishID:null!=this.nodeChange.publishFile:this.isStyle()?this.nodeChange.key?this.nodeChange.key&&this.nodeChange.version:null!=this.nodeChange.sharedStyleReference:!!(this.isVariable()||this.isVariableCollection())&&!!this.nodeChange.key}isInternalOnly(){var e;return this.nodeChange.internalOnly||(null==(e=this.parent())?void 0:e.isInternalOnly())||!1}isStack(){return null!=this.nodeChange.stackMode&&"NONE"!==this.nodeChange.stackMode}isCanvas(){return"CANVAS"===this.nodeChange.type}isImmutableFrame(){let e=this.nodeType();return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}isImmutableFrameSublayer(){return!this.isImmutableFrame()&&this.someAncestor(e=>e.isImmutableFrame())}containingImmutableFrame(){return this.findAncestor(e=>e.isImmutableFrame())}containingPage(){return this.findAncestor(e=>"CANVAS"===e.type())}derivedOverridesList(){return this.nodeChange.derivedSymbolData??[]}overridesList(){var e;return(null==(e=this.nodeChange.symbolData)?void 0:e.symbolOverrides)??[]}immutableFrameSublayerOverridesList(){var e;return(null==(e=this.nodeChange.nodeGenerationData)?void 0:e.overrides)??[]}imageHashes(){var e,t,r,n,i,l,a;let s=[],u=e=>{(null==e?void 0:e.hash)&&s.push((0,o.wb)(e))},c=e=>{u(e.image),u(e.imageThumbnail),u(e.animatedImage)},d=e=>{if(e)for(let t of e)c(t)};d(this.nodeChange.fillPaints),d(this.nodeChange.strokePaints),d(this.nodeChange.backgroundPaints),d(null==(e=this.nodeChange.widgetHoverStyle)?void 0:e.fillPaints),d(null==(t=this.nodeChange.widgetHoverStyle)?void 0:t.strokePaints);let h=e=>{e&&s.push(e)};return h(null==(r=this.nodeChange.embedData)?void 0:r.thumbnailImageHash),h(null==(n=this.nodeChange.embedData)?void 0:n.faviconImageHash),h(null==(i=this.nodeChange.linkPreviewData)?void 0:i.thumbnailImageHash),h(null==(l=this.nodeChange.linkPreviewData)?void 0:l.faviconImageHash),h(null==(a=this.nodeChange.richMediaData)?void 0:a.mediaHash),s}otherAssetVersions(e){if(!this.isAsset())return[];let t=this.containingPage();if(!t)return[];let r=this.nodeType(),n=this.guidStr(),i=this.key()??(null==e?void 0:e(n));return i?t.children().filter(t=>{if(t.nodeType()!==r)return!1;let l=t.guidStr();return l!==n&&(t.key()??(null==e?void 0:e(l)))===i}):[]}forEachDescendant(e,t){return(0,d.cB)(this,f,e,t)}mapDescendants(e,t){return(0,d.G0)(this,f,e,t)}filterDescendants(e,t){return(0,d.c5)(this,f,e,t)}findDescendant(e,t){return(0,d.u8)(this,f,e,t)}countDescendants(e,t){return(0,d.mG)(this,f,e,t)}someDescendant(e,t){return(0,d.K)(this,f,e,t)}everyDescendant(e,t){return(0,d.I7)(this,f,e,t)}forEachAncestor(e,t){return(0,d.cB)(this,p,e,t)}mapAncestors(e,t){return(0,d.G0)(this,p,e,t)}filterAncestors(e,t){return(0,d.c5)(this,p,e,t)}findAncestor(e,t){return(0,d.u8)(this,p,e,t)}countAncestors(e,t){return(0,d.mG)(this,p,e,t)}someAncestor(e,t){return(0,d.K)(this,p,e,t)}everyAncestor(e,t){return(0,d.I7)(this,p,e,t)}nodeFieldProperties(){return this._nodeFieldProperties?this._nodeFieldProperties:this._nodeFieldProperties=this.generateNodeFieldProperties()}computedProperties(){return this._computedProperties?this._computedProperties:this._computedProperties=this.generateComputedProperties()}}function p(e){let t=e.parent();return t?[t]:[]}function f(e){return e.children()}},355808:(e,t,r)=>{r.d(t,{G0:()=>o,I7:()=>p,K:()=>h,c5:()=>c,cB:()=>s,mG:()=>d,u8:()=>u});var n=r(795188),i=r.n(n);let l=()=>!0,a=e=>Array.isArray(e)?e:[e];function s(e,t,r,{includeSelf:n,shouldSkipAfter:l,shouldBreakAfter:s}={}){let o=a(e),u=n?[...o]:i()(o,t);for(;;){let e=u.pop();if(!e||(r(e),null==s?void 0:s(e)))return;if(!(null==l?void 0:l(e)))for(let r of t(e))u.push(r)}}function o(e,t,r,n={}){let i=[];return s(e,t,e=>i.push(r(e)),n),i}function u(e,t,r,{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:l}={}){let a;return s(e,t,e=>{r(e)&&(a=e)},{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:e=>null!=a||(null==l?void 0:l(e))||!1}),a}function c(e,t,r,n={}){let i=[];return s(e,t,e=>{r(e)&&i.push(e)},n),i}function d(e,t,r=l,n={}){let i=0;return s(e,t,e=>{r(e)&&i++},n),i}function h(e,t,r,n){return null!=u(a(e),t,r,n)}function p(e,t,r,n){return!h(a(e),t,e=>!r(e),n)}},130536:(e,t,r)=>{let n;r.d(t,{W6:()=>l,qS:()=>a,wl:()=>s});var i=r(916924);let l={NONE:"NONE",DOCUMENT:"DOC",CANVAS:"CANV",GROUP:"GROUP",FRAME:"FRAME",BOOLEAN_OPERATION:"BOOL",VECTOR:"VECT",STAR:"STAR",LINE:"LINE",ELLIPSE:"ELLPS",RECTANGLE:"RECT",REGULAR_POLYGON:"POLY",ROUNDED_RECTANGLE:"RRECT",TEXT:"TEXT",SLICE:"SLICE",SYMBOL:"SYMB",STATE:"STATE",PRIMARY_INSTANCE:"PINST",NESTED_INSTANCE:"NINST",STICKY:"STCKY",SHAPE_WITH_TEXT:"SWTXT",CONNECTOR:"CONN",CODE_BLOCK:"CODE",WIDGET:"WIDGT",STAMP:"STAMP",MEDIA:"MEDIA",HIGHLIGHT:"HIGH",SECTION:"SECT",SECTION_OVERLAY:"SECTO",WASHI_TAPE:"WASHI",STATE_GROUP:"STGRP",FILL_STYLE:"FSTYL",STROKE_STYLE:"SSTYL",TEXT_STYLE:"TSTYL",EFFECT_STYLE:"ESTYL",EXPORT_STYLE:"XSTYL",GRID_STYLE:"GSTYL",VARIABLE:"VAR",VARIABLE_COLLECTION:"V_COL",VARIABLE_OVERRIDE:"V_OVR",TABLE:"TABLE",TABLE_CELL:"TCELL",SLIDE:"SLIDE",SLIDE_ROW:"SROW",SLIDE_GRID:"SGRID",ASSISTED_LAYOUT:"ALAYO",INTERACTIVE_SLIDE_ELEMENT:"FLAPP",MODULE:"MOD"};var a=((n=a||{})[n.Grouping=0]="Grouping",n[n.Shape=1]="Shape",n[n.DesignSystems=2]="DesignSystems",n[n.ImmutableFrame=3]="ImmutableFrame",n[n.Media=4]="Media",n[n.Other=5]="Other",n);function s(e){switch(e){case"DOCUMENT":case"CANVAS":case"GROUP":case"FRAME":case"SECTION":case"TABLE_CELL":case"SLIDE":case"SLIDE_ROW":case"SLIDE_GRID":return 0;case"SYMBOL":case"STATE_GROUP":case"STATE":case"FILL_STYLE":case"STROKE_STYLE":case"TEXT_STYLE":case"EFFECT_STYLE":case"EXPORT_STYLE":case"GRID_STYLE":case"PRIMARY_INSTANCE":case"NESTED_INSTANCE":case"VARIABLE":case"VARIABLE_COLLECTION":case"VARIABLE_OVERRIDE":case"MODULE":return 2;case"BOOLEAN_OPERATION":case"VECTOR":case"STAR":case"LINE":case"ELLIPSE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"HIGHLIGHT":return 1;case"WIDGET":case"STAMP":case"WASHI_TAPE":case"INTERACTIVE_SLIDE_ELEMENT":return 4;case"STICKY":case"SHAPE_WITH_TEXT":case"CONNECTOR":case"CODE_BLOCK":case"MEDIA":case"SECTION_OVERLAY":case"TABLE":return 3;case"TEXT":case"NONE":case"SLICE":case"ASSISTED_LAYOUT":return 5;default:return(0,i.GE)(e),5}}},448587:(e,t,r)=>{r.d(t,{e:()=>p});var n=r(216712),i=r.n(n),l=r(594192),a=r(905412),s=r(116428),o=r(287616),u=r(758688);class c extends u.eq{constructor(e,t){super(e.nodeChange),this.node=e,this.frozenParent=t??e.parent(),this.frozenChildren=e.children().map(e=>new c(e,this)),this.frozenAncestorPath=e.ancestorPath(),this.frozenNodeFieldProperties=e.nodeFieldProperties(),this.frozenComputedProperties=e.computedProperties(),this.frozenName=e.name(),this.frozenDisplayName=e.displayName(),this.frozenText=e.text(),this.frozenIconConfig=e.iconConfig(),this.frozenOrphan=e.isOrphan(),this.memoryUsage=e.memoryUsage,this.treeMemoryUsage=e.treeMemoryUsage}freeze(){return this}parent(){return this.frozenParent}children(){return this.frozenChildren}name(){return this.frozenName}displayName(){return this.frozenDisplayName}text(){return this.frozenText}iconConfig(){return this.frozenIconConfig}isOrphan(){return this.frozenOrphan}ancestorPath(){return this.frozenAncestorPath}generateNodeFieldProperties(){return this.frozenNodeFieldProperties}generateComputedProperties(){return this.frozenComputedProperties}backingSymbol(){return this.node.backingSymbol()}consumedStyles(){return this.node.consumedStyles()}consumedStyleIds(){return this.node.consumedStyleIds()}consumedVariables(){return this.node.consumedVariables()}consumedVariableIds(){return this.node.consumedVariableIds()}}var d=r(851712),h=r(136056);class p extends u.eq{constructor(e,t){super(e),this._scene=t}freeze(){return new c(this)}parent(){let e=this.parentGuid();return e?this._scene.getNode(e):null}children(){return this._scene.getChildren(this.guid())}internalOnly(){var e;return this.nodeChange.internalOnly||(null==(e=this.parent())?void 0:e.internalOnly())||!1}backingSymbol(){let e=this.backingSymbolId();return e?this._scene.getNode(e):null}backingStateGroup(){let e=this.backingSymbol();if(!e)return null;let t=e.parent();return t&&t.isStateGroup()?t.guidStr():null}generateNodeFieldProperties(){return Object.keys(this.nodeChange).sort().map(e=>{let t=this.nodeChange[e];return null==t?null:(0,h.eq)(e,t)}).filter(l.aI)}isOrphan(){return!!this._scene.isFullFile()&&"DOCUMENT"!==this.nodeType()&&!this.parent()}name(){return this._name??(this._name=(0,o.u)(this.nodeChange.name??"",this._scene.sensitiveTextPolicy))}displayName(){return this._displayName??(this._displayName=(()=>{if("multiplayer_journal"!==this._scene.type)return this.name();let{editScopeInfo:e}=this.nodeChange,t=[];if(e){for(let r of e.snapshots??[])for(let e of r.frames??[])for(let r of e.stack??[])t.push(r);for(let r of e.editScopeStacks??[])for(let e of r.stack??[])t.push(e)}t=i()(t,e=>e.label);let r=["USER","PLUGIN"];return t.sort((e,t)=>Number(r.includes(e.label))-Number(r.includes(t.label))),t.map(e=>e.label).join(", ")||"No edit scopes"})())}text(){var e;return(0,o.u)((null==(e=this.nodeChange.textData)?void 0:e.characters)??"",this._scene.sensitiveTextPolicy)}iconConfig(){return this._scene.shouldShowNodePhases&&this._scene.shouldShowNodeTypes?{phase:this.phase(),type:this.type()}:this._scene.shouldShowNodePhases?this.phase():this.type()}absoluteTransform(){var e;let t=this.transform(),r=null==(e=this.parent())?void 0:e.absoluteTransform();if(!t||!r)return s.A.identity().toFigMatrix();{let e=s.A.fromFigMatrix(r);return e.multiply(s.A.fromFigMatrix(t)),e.toFigMatrix()}}styleConsumers(){let e=this.styleId();return e?this._scene.getStyleConsumers(e):[]}variableConsumers(){let e=this.variableId();return e?this._scene.getVariableConsumers(e):[]}variablesInCollection(){let e=this.variableCollectionId();return e?this._scene.getVariablesInCollection(e):[]}variablesDirectlyDependedOnByThisVariable(){var e,t;if(!this.isVariable())return{};let r={},n=this._scene,i=n.getVariableCollection(this.variableCollectionId());return null==(t=null==(e=this.nodeChange.variableDataValues)?void 0:e.entries)||t.forEach(e=>{if(e.modeID){let t=(null==i?void 0:i.getFriendlyVariableModeString(e.modeID))??(0,d._y)(e.modeID);r[t]=[],function e(t,i){if((null==i?void 0:i.dataType)==="ALIAS")!function(e,t){var i;if(!(null==(i=null==t?void 0:t.value)?void 0:i.alias))return;let l=a.Qb.fromKiwi(t.value.alias);if(!l)return;let s=n.getVariable(l);s&&r[e].push(s)}(t,i);else if((null==i?void 0:i.dataType)==="EXPRESSION")!function(t,r){var n,i;for(let l of(null==(i=null==(n=null==r?void 0:r.value)?void 0:n.expressionValue)?void 0:i.expressionArguments)??[])e(t,l)}(t,i);else if((null==i?void 0:i.dataType)==="MAP")return function(t,r){var n,i;for(let l of(null==(i=null==(n=null==r?void 0:r.value)?void 0:n.mapValue)?void 0:i.values)??[])e(t,l.value)}(t,i)}(t,e.variableData)}}),r}}},160335:(e,t,r)=>{let n;r.d(t,{MN:()=>u,UW:()=>f,e6:()=>o,iy:()=>c,q4:()=>h});var i=r(868676),l=r(905412),a=r(170840),s=r(467372),o=((n=o||{}).BlobIndex="BlobIndex",n.SensitiveText="SensitiveText",n.Boolean="Boolean",n.Numeric="Numeric",n.String="String",n.Position="Position",n.Color="Color",n.Vector="Vector",n.NodeId="NodeId",n.StyleId="StyleId",n.VariableId="VariableId",n.VariableCollectionId="VariableCollectionId",n.OverrideKey="OverrideKey",n.OverridePath="OverridePath",n.GenericGuid="GenericGuid",n.GenericGuidPath="GenericGuidPath",n.GenericGuidPathMapping="GenericGuidPathMapping",n.Matrix="Matrix",n.ImageHash="ImageHash",n.Bytes="Bytes",n.Metadata="Metadata",n.Error="Error",n.Image="Image",n.EditScope="EditScope",n);function u(e,t,r){var n,o;if((0,a.Oe)(t,e))return{type:"BlobIndex",value:t};if((0,a.UD)(t,e))return{type:"SensitiveText",value:t};if((0,a.am)(t))return{type:"Boolean",value:t};if((0,a.g5)(t))return{type:"Numeric",value:t};if((0,a.L7)(t))return("position"===e||"sortPosition"===e)&&(0,i.U7)(t)?{type:"Position",value:t}:{type:"String",value:t};if((0,a.ML)(t))return{type:"Color",value:t};if((0,a.YK)(t))return{type:"Vector",value:t};if((0,s.Wm)(e)){let e=l.sV.fromKiwi(t);if(e)return{type:"StyleId",value:e}}if("variableSetID"===e){let e=l.qk.fromKiwi(t);if(e)return{type:"VariableCollectionId",value:e}}if("id"===e||"alias"===e){let e=l.Qb.fromKiwi(t);if(e)return{type:"VariableId",value:e}}if((0,a._Q)(t))return"symbolID"===e||"overriddenSymbolID"===e||"endpointNodeID"===e||(0,s.yC)(e)||"guid"===e&&"diagramParentIndex"===r?{type:"NodeId",value:t}:{type:"GenericGuid",value:t};if((0,a.c5)(t)){let{guids:e}=t;return e?{type:"GenericGuidPath",value:e}:{type:"Error",value:"Invalid Fig.GUIDPath"}}if((0,a.ct)(t)){let e=t.id,r=null==(n=null==t?void 0:t.path)?void 0:n.guids;return e&&r?{type:"GenericGuidPathMapping",from:t.id,to:null==(o=t.path)?void 0:o.guids}:{type:"Error",value:"Invalid Fig.GUIDPathMapping"}}return(0,a.sh)(t)?{type:"Matrix",value:t}:(0,a.k1)(t,e)?{type:"ImageHash",value:t}:(0,a.Y9)(t)?{type:"Bytes",value:t}:(0,a.sr)(t)?{type:"EditScope",value:t}:void 0}function c(e){return"bigint"==typeof e||e%1==0?e.toString():e.toFixed(4)}let d={String:function(e){return e.value},Numeric:function(e){return c(e.value)},Vector:function(e){return c(e.value.x)+", "+c(e.value.y)}};function h(e){if(!e||!e.type)return"";let t=d[e.type];return t?t(e):(console.warn("No plaintext formatter implemented yet for property type: "+e.type),"")}let p={String:function(e){return{type:"String",value:e}},Numeric:function(e){let t=parseFloat(e);return isNaN(t)?null:{type:"Numeric",value:t}},Vector:function(e){let[t,r]=e.split(",").map(e=>parseFloat(e));return t&&r&&!isNaN(t)&&!isNaN(r)?{type:"Vector",value:{x:t,y:r}}:null}};function f(e,t){if(!e||!t)return null;let r=p[t];return r?r(e):(console.warn("No FigmaScopeValue formatter implemented yet for property type: "+t),null)}},136056:(e,t,r)=>{r.d(t,{Bi:()=>A,Gy:()=>D,IH:()=>B,KG:()=>N,Kc:()=>R,Ks:()=>P,OW:()=>O,Qz:()=>T,Sy:()=>V,U$:()=>M,UF:()=>x,Ut:()=>k,W6:()=>K,_M:()=>I,_z:()=>w,aG:()=>m,cd:()=>b,eq:()=>y,es:()=>L,iS:()=>g,iW:()=>_,qQ:()=>C,qy:()=>E,u_:()=>f,wp:()=>v,y4:()=>G,ym:()=>F});var n=r(843148),i=r(455200),l=r(594192),a=r(905412),s=r(4596),o=r(907152),u=r(170840),c=r(35088),d=r(851712),h=r(758688),p=r(160335);function f(e){return B("FigmaScope type",{type:p.e6.String,value:e})}function m(e,t){if(!e.isAsset())return null;let r=e.isSubscribedAsset(),i=[B("Status",{type:p.e6.String,value:r?"Subscribed":"Local"}),B("Key",{type:p.e6.String,value:t??e.key()??"[not computed]"}),B("Version",{type:p.e6.String,value:e.version()??"[unknown]"})];return r&&!(0,n.Ub)().ds_publish_file_deprecation&&i.push(B("File",{type:p.e6.String,value:e.publishFile()??"[unknown]"})),{label:"Asset info",children:i,expandByDefault:!1}}function y(e,t,r){let n=(0,p.MN)(e,t,r);if(null!=n)return B(e,n);if(Array.isArray(t))return G({label:e,list:t,buildChild:(e,t)=>y(e,t),expandByDefault:!1});{let r=["connectorStart","connectorEnd","symbolData"].includes(e);return M({label:e,object:t,buildChild:(t,r)=>y(t,r,e),expandByDefault:r})}}function g(e){let t=e.backingSymbol();return t?V("Backing symbol",t):B("Backing symbol ID",{type:p.e6.Error,value:"MISSING"})}function v(e){var t;let r=null==(t=e.backingSymbol())?void 0:t.parent();return r&&r.isStateGroup()?V("Backing state group",r):null}function E(e){return G({label:"Other versions",list:e,buildChild:V,expandByDefault:!1})}function S(e,t,r){return G({label:e,list:[...t].sort((e,t)=>{var r,n,i,l;if(((null==(n=null==(r=e.guidPath)?void 0:r.guids)?void 0:n.length)??0)===((null==(l=null==(i=t.guidPath)?void 0:i.guids)?void 0:l.length)??0)){if("overriddenSymbolID"in e)return -1;if("overriddenSymbolID"in t)return 1;if("componentPropAssignments"in e)return -1;if("componentPropAssignments"in t)return 1}return function(e,t){let r=e.guids??[],n=t.guids??[];for(let e=0;e<Math.min(r.length,n.length);e++){let t=r[e],i=n[e];if(t.sessionID!==i.sessionID)return t.sessionID-i.sessionID;if(t.localID!==i.localID)return t.localID-i.localID}return r.length-n.length}(e.guidPath||{},t.guidPath||{})}),buildChild:(e,{guidPath:t,...n})=>{let i=null==t?void 0:t.guids,l=i?r.followOverridePath(i):void 0;return M({label:e,value:i?{type:p.e6.OverridePath,value:i,targetGuid:null==l?void 0:l.guid()}:{type:p.e6.Error,value:"No override path"},object:n,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})},expandByDefault:!1})}function b(e){let t=e.overridesList();return 0===t.length?null:S("Instance overrides",t,e)}function I(e){let t=e.derivedOverridesList();return 0===t.length?null:S("Instance derived symbol data",t,e)}function C(e,t){let r=e.immutableFrameSublayerOverridesList();return 0===r.length?null:G({label:"Sublayer path overrides",list:r,buildChild:(e,{guidPath:r,...n})=>{var i,l;let a;let s=null==r?void 0:r.guids,o=`[${null==(i=null==s?void 0:s.map(e=>(0,d._y)(e)))?void 0:i.join(", ")}]`;if(t.has(o)){let e=null==(l=t.get(o))?void 0:l.sublayerGuid,r=e?(0,d.i6)(e):void 0;r&&(a=r)}return M({label:e,value:s?{type:p.e6.OverridePath,value:s,targetGuid:a}:{type:p.e6.Error,value:"No override path"},object:n,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})},expandByDefault:!1})}function T(e,t){return M({label:"Sublayer path override from containing immutable frame",object:t,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})}function N(e){return function({label:e,object:t,buildChild:r,expandByDefault:n}){let i=Object.keys(t).sort().map(e=>r(e,t[e])).filter(l.aI);return{label:e,value:{type:p.e6.Metadata,value:i.length},children:i,expandByDefault:n}}({label:"Text insertion style",object:e,buildChild:(e,t)=>null==t?null:y(e,t),expandByDefault:!0})}function _(e){return G({label:"Style consumers",list:e,buildChild:V,expandByDefault:!1})}function D(e){return V("Variable collection",e)}function x(e){return G({label:"Variable consumers",list:e,buildChild:V,expandByDefault:!1})}function O(e){return G({label:"Consumed variables",list:e,buildChild:V,expandByDefault:!1})}function A(e){return G({label:"Variables",list:e,buildChild:V,expandByDefault:!1})}function P(e){return G({label:"Direct dependents on this variable",list:e,buildChild:V,expandByDefault:!1})}function w(e){return M({label:"Variable direct dependencies",object:e,buildChild:(e,t)=>G({label:e,list:t,buildChild:V,expandByDefault:!1}),expandByDefault:!1})}function k(e){return G({label:"Consumed styles",list:e,buildChild:V,expandByDefault:!1})}function F(e){return G({label:"SceneGraph validation errors",list:e,buildChild:(e,t)=>B(e,{type:p.e6.Error,value:t}),expandByDefault:!0})}function L(e){return M({label:"Chunk details",object:e.chunk,buildChild:y,expandByDefault:!1})}function R(e){let t=new c.I;for(let[r,n]of e.entries())for(let e of n)t.add(e,r);return[...t.values()].forEach(e=>e.sort()),G({label:"SceneGraph validation errors (Whole File)",list:[...t.entries()],buildChild:(e,[t,r])=>G({label:t,list:r,buildChild:V,expandByDefault:!0}),expandByDefault:!0})}function V(e,t){if(t instanceof h.eq){let r=t.isStyle()?t.styleId():void 0;if(r)return V(e,r);let n=t.isVariable()?t.variableId():void 0;if(n)return V(e,n);let i=t.isVariableCollection()?t.variableCollectionId():void 0;return i?V(e,i):V(e,t.guid())}if("string"==typeof t){let r=a.sV.fromString(t);if(r)return B(e,{type:p.e6.StyleId,value:r});let n=a.Qb.fromString(t);if(n)return B(e,{type:p.e6.VariableId,value:n});let i=a.qk.fromString(t);if(i)return B(e,{type:p.e6.VariableCollectionId,value:i});let l=(0,d.i6)(t)??s.WW;return B(e,{type:p.e6.NodeId,value:l})}return B(e,{type:p.e6.NodeId,value:t})}function B(e,t,r){return{label:e,value:t,children:[],expandByDefault:!1,onEdit:r}}function G({label:e,value:t,list:r,buildChild:n,expandByDefault:i}){return{label:e,value:t??{type:p.e6.Metadata,value:r.length},children:r.map((e,t)=>{var r;let i=n(`[${t}]`,e,t);return(0,u.YR)(e)&&i?{...i,value:{type:p.e6.OverridePath,value:null==(r=e.guidPath)?void 0:r.guids}}:i}).filter(l.aI),expandByDefault:i}}function M({label:e,value:t,object:r,buildChild:n,expandByDefault:i}){return{label:e,value:t,children:Object.keys(r).sort().map(e=>n(e,r[e])).filter(l.aI),expandByDefault:i}}function K(e,t,r,n){let l={x:t.m02,y:t.m12},a=t.m00*t.m11-t.m01*t.m10,s=Math.atan2(t.m10,t.m00)*(180/Math.PI);s=(0,i.IR)(s,0,1e-4)?0:-1*s;let u="No";a<0&&(u=(0,i.IR)(s,0,1e-4)?"Vertically":(0,i.IR)(Math.abs(s),180,1e-4)?"Horizontally":"Yes");let c=r&&n;return{label:e,children:[B("Offset",{type:p.e6.Vector,value:l},c?e=>{let t=o.TSSceneGraph.instance.get(n);t&&(t.relativeTransform={...t.relativeTransform,m02:e.value.x,m12:e.value.y})}:void 0),B("Angle",{type:p.e6.Numeric,value:s},c?e=>{let t=o.TSSceneGraph.instance.get(n);if(!t)return;let r=e.value*(Math.PI/180),i=Math.sin(r),l=Math.cos(r),{m00:a,m01:s,m02:u,m10:c,m11:d,m12:h}=t.relativeTransform;t.relativeTransform={m00:l*a+i*s,m01:l*s-i*a,m02:u,m10:l*c+i*d,m11:l*d-i*c,m12:h}}:void 0),B("Scale",{type:p.e6.Numeric,value:a}),B("Mirrored",{type:p.e6.String,value:u})],expandByDefault:!0}}},885700:(e,t,r)=>{r.d(t,{D:()=>s});var n=r(823824),i=r(851712),l=r(758688),a=r(355808);class s{constructor({resource:e,sensitiveTextPolicy:t}){this._shouldShowNodeTypes=!0,this._shouldShowNodePhases=!1,this.resource=e,this.sensitiveTextPolicy=t,window.figmaScopeScene=this}get type(){return this.resource.type}isFullFile(){return(0,n.Uf)(this.type)}get shouldShowNodeTypes(){return this._shouldShowNodeTypes}get shouldShowNodePhases(){return this._shouldShowNodePhases}getPages(){return this.filterNodes(e=>"CANVAS"===e.nodeType(),{shouldSkipAfter:e=>"CANVAS"!==e.nodeType()})}getInternalCanvas(){return this.getPages().find(e=>e.isInternalOnly())}forEachNode(e,t={}){return(0,a.cB)(this.getRootNodes(),l.aq,e,{...t,includeSelf:!0})}mapNodes(e,t={}){return(0,a.G0)(this.getRootNodes(),l.aq,e,{...t,includeSelf:!0})}filterNodes(e,t={}){return(0,a.c5)(this.getRootNodes(),l.aq,e,{...t,includeSelf:!0})}findNode(e,t={}){return(0,a.u8)(this.getRootNodes(),l.aq,e,{...t,includeSelf:!0})}countNodes(e,t={}){return(0,a.mG)(this.getRootNodes(),l.aq,e,{...t,includeSelf:!0})}someNode(e,t={}){return(0,a.K)(this.getRootNodes(),l.aq,e,{...t,includeSelf:!0})}everyNode(e,t={}){return(0,a.I7)(this.getRootNodes(),l.aq,e,{...t,includeSelf:!0})}guidToString(e){return(0,i._y)(e)}}},467372:(e,t,r)=>{r.d(t,{FU:()=>i,It:()=>l,Wm:()=>s,yC:()=>a});var n=r(916924);let i=new Set(["inheritFillStyleID","inheritFillStyleIDForStroke","inheritGridStyleID","inheritTextStyleID","inheritEffectStyleID"]),l=new Set(["styleIdForFill","styleIdForStrokeFill","styleIdForText","styleIdForEffect","styleIdForGrid"]);function a(e){return i.has(e)}function s(e){return l.has(e)}(0,n.GE)(i),(0,n.GE)(l)},301828:(e,t,r)=>{r.d(t,{m:()=>b});var n=r(854384),i=r.n(n),l=r(250008),a=r(816876),s=r(905412),o=r(4596),u=r(130536),c=r(35088);class d{constructor(){this.children=new Map,this.value=[]}}class h{constructor(){this.root=new d}insert(e,t){let r=this.root;for(let t=0;t<e.length;t++){let n=e.charAt(t),i=r.children.get(n);i||r.children.set(n,i=new d),r=i}r.value.push(t)}prefixFind(e){let t=[];for(let r of this.keysWithPrefix(e)){let e=this.find(r);if(e)for(let r of e)t.push(r)}return t}find(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t.value}keysWithPrefix(e){let t=[],r=this.findNode(e);return this.collect(r,function(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r);t.push(n)}return t}(e),t),t}collect(e,t,r){if(e)for(let n of(e.value.length>0&&r.push(t.join("")),Array.from(e.children.keys())))t.push(n),this.collect(e.children.get(n),t,r),t.pop()}findNode(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t}}var p=r(168204);class f{constructor({property:e,aliases:t=[]}){this.property=e,this.aliases=t}getValues(e){let t=e[this.property]();return Array.isArray(t)?t:null!=t?[t]:[]}indexNode(e){for(let t of this.getValues(e))this.indexEntry({property:this.property,value:t,node:e})}}class m extends f{constructor(){super(...arguments),this.byKey=new c.I}indexEntry(e){let t=e.value.toLowerCase();this.byKey.add(t,e)}search(e){return this.byKey.get(e.rawValue.toLowerCase()).map(e=>({...e,isExact:!0}))}}class y extends f{constructor(){super(...arguments),this.trie=new h}indexEntry(e){this.trie.insert(e.value.toLowerCase(),e)}search(e){if(e.type===p.c.STRICT_STRING)return(this.trie.find(e.value.toLowerCase())??[]).filter(t=>t.value===e.value).map(e=>({...e,isExact:!0}));{let t=String(e.value);return this.trie.prefixFind(t.toLowerCase()).map(e=>({...e,isExact:e.value===t}))}}}class g extends f{constructor(){super(...arguments),this.bySessionId=new c.q,this.byLocalId=new c.q}indexEntry(e){let{sessionID:t,localID:r}=e.value;this.bySessionId.add(t,e),this.byLocalId.add(r,e)}search(e){if(e.type===p.c.GUID)return this.searchGuid(e.value);if(e.type===p.c.INT)return this.searchInt(e.value);if(e.type===p.c.ASSET_REF)return this.searchRef(e.value);if(e.type===p.c.ASSET_ID){let t=e.fns.toGuidObjIfLocal(e.value);if(t)return this.searchGuid(t);let r=e.fns.toRefIfSubscribed(e.value);if(r)return this.searchRef(r)}return[]}searchGuid(e){return Array.from((0,a.q)(this.bySessionId.get(e.sessionID),this.byLocalId.get(e.localID))).map(e=>({...e,isExact:!0}))}searchRef(e){let t=o.K0(e.version);return t?this.searchGuid(t):[]}searchInt(e){return Array.from((0,a.Ey)(this.bySessionId.get(e),this.byLocalId.get(e))).map(e=>({...e,isExact:!1}))}}class v extends f{constructor({assetIdFns:e,...t}){super(t),this.byAssetId=new c.I,this.bySessionId=new c.q,this.byLocalId=new c.q,this.byKey=new c.q,this.byVersion=new c.q,this.assetIdFns=e}indexEntry(e){this.byAssetId.add(e.value,e);let t=this.assetIdFns.toGuidObjIfLocal(e.value);t&&(this.bySessionId.add(t.sessionID,e),this.byLocalId.add(t.localID,e));let r=this.assetIdFns.toRefIfSubscribed(e.value);r&&(this.byKey.add(r.key,e),this.byVersion.add(r.version,e))}search(e){return e.type===p.c.ASSET_ID?this.searchAssetId(e.value):e.type===p.c.GUID?this.searchGuid(e.value,e.rawValue):e.type===p.c.ASSET_REF?this.searchRef(e.value):e.type===p.c.INT?this.searchInt(e.value):[]}searchAssetId(e){return this.byAssetId.get(e).map(e=>({...e,isExact:!0}))}searchGuid(e,t){let r=Array.from((0,a.q)(this.bySessionId.get(e.sessionID),this.byLocalId.get(e.localID))).map(e=>({...e,isExact:!0})),n=Array.from(this.byVersion.get(t)).map(e=>({...e,isExact:!1}));return r.concat(n)}searchRef(e){return Array.from((0,a.q)(this.byKey.get(e.key),this.byVersion.get(e.version))).map(e=>({...e,isExact:!0}))}searchInt(e){return Array.from((0,a.Ey)(this.bySessionId.get(e),this.byLocalId.get(e))).map(e=>({...e,isExact:!1}))}}class E extends y{constructor(){super({property:"type",aliases:["type","nodeType"]})}getValues(e){let t=e.type();return[t,u.W6[t],e.nodeType()]}}class S extends m{search(e){return e.type!==p.c.HEX_KEY&&e.type!==p.c.INT?[]:super.search(e)}}class b{constructor(){this.indices=[new g({property:"guid",aliases:["id","nodeId"]}),new g({property:"parentGuid",aliases:["parent"]}),new g({property:"overrideKey",aliases:["okey"]}),new g({property:"backingSymbolId",aliases:["symbol","symbolId"]}),new g({property:"publishId"}),new g({property:"consumedStyleIds",aliases:["consumedStyleId","consumedStyle","consumedStyles"]}),new y({property:"name"}),new y({property:"text"}),new E,new S({property:"key"}),new m({property:"version",aliases:["assetVersion","sharedSymbolVersion"]}),new S({property:"publishFile"}),new S({property:"imageHashes"}),new v({assetIdFns:s.Q5,property:"symbolId",aliases:["symbol"]}),new v({assetIdFns:s.uu,property:"stateGroupId",aliases:["stateGroup"]}),new v({assetIdFns:s.sV,property:"styleId",aliases:["style"]}),new v({assetIdFns:s.Qb,property:"variableId",aliases:["variable"]}),new v({assetIdFns:s.qk,property:"variableCollectionId",aliases:["variableSetId","collectionId","variableCollection","variableSet"]})]}indexNode(e){for(let t of this.indices)t.indexNode(e)}indexNodes(e){for(let t of this.indices)for(let r of e)t.indexNode(r)}search(e,t){let r=(0,p.a)(e,t);l.qE.trackDefinedEvent("figmascope.search",{used_operators:r.length>1||null!=r[0].property});let n=this.searchTokens(r);return n.sort(b.compareResults),n}searchTokens(e){let t;for(let r of e){let e=new Map;for(let t of this.getIndicesToSearchForToken(r))for(let n of t.search(r.value)){let{node:t,property:r,value:i,isExact:l}=n;e.has(t)?e.get(t).matches.push({property:r,value:i,isExact:l}):e.set(t,{node:t,matches:[{property:r,value:i,isExact:l}]})}t=t?(0,a.IL)(t,e,(e,t,r)=>({node:e,matches:t.matches.concat(r.matches)})):e}return t?i()(Array.from(t.values())):[]}get indexedProperties(){return this.indices.map(e=>e.property)}getIndicesToSearchForToken({property:e}){return null==e?this.indices.filter(e=>"parentGuid"!==e.property):(e=e.toLowerCase(),this.indices.filter(t=>{if(t.property.toLowerCase()===e)return!0;for(let r of t.aliases)if(r.toLowerCase()===e)return!0;return!1}))}static compareResults(e,t){let r=e.matches.filter(e=>e.isExact).length;return t.matches.filter(e=>e.isExact).length-r||t.matches.length-e.matches.length}}},168204:(e,t,r)=>{let n;r.d(t,{a:()=>o,c:()=>s});var i=r(905412),l=r(675695),a=r(4596),s=((n=s||{}).GUID="GUID",n.ASSET_REF="ASSET_REF",n.ASSET_ID="ASSET_ID",n.INT="INT",n.HEX_KEY="HEX_KEY",n.LOOSE_STRING="LOOSE_STRING",n.STRICT_STRING="STRICT_STRING",n);function o(e,t){var r;let n;let s=[];e=e.trim();let o=/([a-zA-Z0-9_.]+=)?("[^"]*"|'[^']*'|[^\s]+)/g;for(;n=o.exec(e);){let e=(null==(r=n[1])?void 0:r.slice(0,-1))||void 0,t=function(e){if(e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"'))return{type:"STRICT_STRING",value:e=e.slice(1,-1),rawValue:e};let t=(0,a.K0)(e);if(t)return{type:"GUID",value:t,rawValue:e};let r=i.Q5.fromString(e);if(r)return{type:"ASSET_ID",value:r,fns:i.Q5,rawValue:e};let n=i.uu.fromString(e);if(n)return{type:"ASSET_ID",value:n,fns:i.uu,rawValue:e};let s=i.sV.fromString(e);if(s)return{type:"ASSET_ID",value:s,fns:i.sV,rawValue:e};let o=i.Qb.fromString(e);if(o)return{type:"ASSET_ID",value:o,fns:i.Qb,rawValue:e};let u=i.qk.fromString(e);if(u)return{type:"ASSET_ID",value:u,fns:i.qk,rawValue:e};let c=l.If.fromString(e);if(c)return{type:"ASSET_REF",value:c,rawValue:e};if(/^\d+$/.test(e)){let t=parseInt(e);if(!isNaN(t))return{type:"INT",value:t,rawValue:e}}return/^[0-9a-fA-F]+$/.test(e)?{type:"HEX_KEY",value:e,rawValue:e}:{type:"LOOSE_STRING",value:e,rawValue:e}}(n[2]);s.push({property:e,value:t})}return s.length>1&&(s=function(e){let t=[],r=e[0],n=e[1],i=2;for(;;)if(n){if(r.property||n.property||"STRICT_STRING"===r.value.type||"STRICT_STRING"===n.value.type)t.push(r),r=n,n=e[i++];else{let t=`${r.value.rawValue} ${n.value.rawValue}`;r={property:void 0,value:{type:"LOOSE_STRING",value:t,rawValue:t}},n=e[i++]}}else{t.push(r);break}return t}(s)),s=function(e,t){let r=(0,a.K0)(t);return r?e.map(e=>"LOOSE_STRING"===e.value.type&&"$0"===e.value.rawValue?{property:e.property,value:{type:"GUID",value:r,rawValue:e.value.rawValue}}:e):e}(s,t)}},941480:(e,t,r)=>{let n,i;r.d(t,{Ep:()=>d,ID:()=>y,Kq:()=>p,Yf:()=>c,gR:()=>m,kJ:()=>f,sX:()=>g});var l=r(250008),a=r(623131),s=r(372152),o=r(85280),u=r(286175),c=((n=c||{}).None="No Diff",n.Layer="Layer Diff",n.Tree="Tree Diff",n.File="File Diff",n);let d=(0,a.Zf)(null);function h(e){return"Layer Diff"===e?"layer":"tree"}let p=(0,s.CF)((0,a.Zf)(null),(e,t,r)=>{var n;let i,a;let s=new Date;if("clear"===t.type)return e&&l.qE.trackDefinedEvent("figmascope.diff_end",{type:h(e.type),duration_seconds:(s.getTime()-e.time.getTime())/1e3}),null;if("start"===t.type?(i=t.guidStr,a=t.diffType):"refresh"===t.type&&e&&(i=e.node.guidStr(),a=e.type),!i||!a)return null;let u=null==(n=r(o.Qb).getNode(i))?void 0:n.freeze();return u?(l.qE.trackDefinedEvent("figmascope.diff_start",{type:h(a)}),{type:a,node:u,time:new Date}):null}),f=(0,a.Zf)(e=>{let t=e(d);return t?{type:"File Diff",scene:t}:e(p)??{type:"No Diff"}}),m=(0,a.Zf)(e=>{let t=e(u.sr),r=e(f);switch(r.type){case"Layer Diff":return r.node;case"Tree Diff":{let e=null==t?void 0:t.treeDiffKey();return r.node.findDescendant(t=>t.treeDiffKey()===e,{includeSelf:!0})??null}case"File Diff":{let e=null==t?void 0:t.treeDiffKey();return r.scene.findNode(t=>t.treeDiffKey()===e)}default:return null}});var y=((i=y||{}).Changed="CHANGED",i.ChildChanged="CHILD_CHANGED",i.Added="ADDED",i.Removed="REMOVED",i);function g(e,t,r,n){return e?t?r?"CHANGED":n?"CHILD_CHANGED":void 0:"ADDED":"REMOVED"}},85280:(e,t,r)=>{r.d(t,{El:()=>c,OO:()=>h,Qb:()=>u,Yv:()=>d,uO:()=>o});var n=r(916924),i=r(9256),l=r(623131),a=r(752648),s=r(643260);let o=(0,l.Zf)((0,i.Yj)()),u=(0,a.AL)(o,e=>{if(e.status!==s.D.SUCCESS)throw Error("FigmaScope internal code is running before the FigmaScope scene is ready. This is a bug - please report in #figmascope.");return e.value}),c=(0,a.AL)(u,e=>e.resource),d=(0,a.AL)(c,e=>{switch(e.type){case"server_file":return{type:"File",properties:{"File Key":e.key}};case"server_checkpoint":return{type:"File Checkpoint",properties:{"Checkpoint Key":e.key}};case"server_checkpoint_diff":return{type:"Branching Checkpoint Diff",properties:{"Diff Key":e.key}};case"multiplayer_journal":return{type:"Multiplayer Journal",properties:{"File Key":e.fileKey,"End Sequence Number":e.endSequenceNumber??""}};case"local_file":return{type:"Local .fig File",properties:{Filename:e.name}};case"local_diff_file":return{type:"Local .figd File",properties:{Filename:e.name}};case"pasted_data":return{type:"Pasted data",properties:{}};default:(0,n.gy)(e)}}),h=(0,a.AL)(u,e=>e.getRootNodes())},286175:(e,t,r)=>{r.d(t,{E8:()=>S,Ww:()=>y,YR:()=>m,eY:()=>h,io:()=>g,kZ:()=>d,m_:()=>E,sr:()=>v,wV:()=>f});var n=r(307824),i=r(819584),l=r(623131),a=r(372152),s=r(585508),o=r(851712),u=r(85280),c=r(457772);let d=n.createContext(null),h=(0,l.Zf)(e=>e(c.e).followSelection,(e,t,r)=>t(c.e,e=>({...e,followSelection:r}))),{valueAtom:p,undoAtom:f,redoAtom:m,historyAtom:y}=(0,a.M5)("0:0"),g=(0,l.Zf)(e=>e(p),(e,t,r)=>{let n=(0,o.OQ)(r);n&&t(p,n)}),v=(0,l.Zf)(e=>{let t=e(u.Qb),r=e(g);return t.getNode(r)});function E({appSelection:e,setAppSelection:t}){let r=(0,a.m4)(u.Qb),l=(0,a.m4)(h),[o,c]=(0,a.lZ)(g);n.useEffect(()=>{s.CA.setFigmascopeSelectedGuidCallback(c)},[c]);let d=o?r.getNode(o):null,p=(0,i.yC)(()=>d?S(d):null,[d]);n.useEffect(()=>{l&&t&&p&&t(p)},[l,t,p]),n.useEffect(()=>{l&&(null==e?void 0:e.guidStr)&&c(e.guidStr)},[l,null==e?void 0:e.guidStr,c])}function S(e){if(!e.isInternalOnly())return{selectionType:"canvas",guidStr:e.guidStr()};if(e.isStyle()&&e.isLocalAsset()){let t=e.nodeChange.styleType;if(t)return{selectionType:"local_style",guidStr:e.guidStr(),styleType:t}}return null}},457772:(e,t,r)=>{let n;r.d(t,{K:()=>l,e:()=>a});var i=r(372152),l=((n=l||{}).Position="Position",n.Name="Name",n.Memory="Memory",n.NodeId="Node ID",n);let a=(0,i.Ce)("figmascope-settings",{followSelection:!1,sortOrder:"Position"})},170840:(e,t,r)=>{r.d(t,{L7:()=>y,ML:()=>i,Oe:()=>d,UD:()=>v,Y9:()=>u,YK:()=>o,YR:()=>p,_Q:()=>a,am:()=>f,c5:()=>l,ct:()=>h,g5:()=>m,k1:()=>c,sh:()=>s,sr:()=>g});var n=r(287616);function i(e){return["r","g","b","a"].every(t=>t in e)}function l(e){return"guids"in e&&e.guids instanceof Array&&e.guids.every(a)}function a(e){return["sessionID","localID"].every(t=>t in e)}function s(e){return["m00","m01","m02","m10","m11","m12"].every(t=>t in e)}function o(e){return["x","y"].every(t=>t in e)}function u(e){return e instanceof Uint8Array}function c(e,t){return e instanceof Uint8Array&&"hash"===t}function d(e,t){return"number"==typeof e&&("commandsBlob"===t||"dataBlob"===t)}function h(e){return"id"in e&&"path"in e&&a(e.id)&&l(e.path)}function p(e){return"object"==typeof e&&"guidPath"in e&&l(e.guidPath)}function f(e){return"boolean"==typeof e}function m(e){return"number"==typeof e||"bigint"==typeof e}function y(e){return"string"==typeof e}function g(e){return"object"==typeof e&&"type"in e&&"label"in e}function v(e,t){return"string"==typeof e&&n.k.has(t)}},35088:(e,t,r)=>{r.d(t,{I:()=>i,q:()=>l});class n{constructor(){this.map=new Map}has(e){return this.map.has(e)}get size(){return this.map.size}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}}class i extends n{constructor(e){if(super(),e)for(let t of e)this.add(t[0],t[1])}add(e,t){this.has(e)?this.map.get(e).push(t):this.map.set(e,[t])}get(e){return this.map.get(e)??[]}}class l extends n{constructor(e){if(super(),e)for(let t of e)this.add(t[0],t[1])}add(e,t){this.has(e)?this.map.get(e).add(t):this.map.set(e,new Set([t]))}get(e){return this.map.get(e)??new Set}}},473128:(e,t,r)=>{r.d(t,{a:()=>n});let n="https://go/figmascope-docs"},287616:(e,t,r)=>{r.d(t,{k:()=>n,u:()=>l});let n=new Set(["name","characters","symbolDescription","description","url"]),i=RegExp("^(background|column|component|dialog|document|ellipse|frame|group|icon|image|internal only canvas|line|padding|page|path|polygon|rectangle|row|union|vector)\\s*[\\d\\.]*$");function l(e,t){if(""===e)return"";if("show"===t)return e;let r='"'===e[0]&&'"'===e[e.length-1],n=r?e.substring(1,e.length-1):e;if(i.test(n.toLowerCase()))return e;let l=r?'"':"";return l+n[0]+n.substring(1,n.length-1).replace(/\S/g,"\u2022")+n[n.length-1]+l}},433416:(e,t,r)=>{r.d(t,{C6:()=>s,c5:()=>l,cN:()=>a});var n=r(307824),i=r(765064);function l(){return n.createElement(s,null,n.createElement("p",null,"Reading file..."))}function a({error:e}){let t="Oops! Something went wrong";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message,console.error(e)),n.createElement(s,null,n.createElement("p",{style:i.sx.colorTextOndanger.colorBgDanger.p16.font20.$},t))}function s({children:e}){return n.createElement("div",{style:i.sx.fillPositionedContainer.flex.itemsCenter.justifyCenter.flexColumn.lh1_5Lines.font16.$},e)}},454968:(e,t,r)=>{let n,i,l;r.d(t,{Y:()=>rN});var a=r(307824),s=r(250008),o=r(916924),u=r(498472),c=r(167568),d=r(372152),h=r(365224),p=r(87975),f=r(643260),m=r(698240),y=r(765064),g=r(597624),v=r(784740),E=r(136056),S=r(941480),b=r(85280),I=r(286175),C=r(9256),T=r(623131),N=r(557044),_=r(306440),D=r(35088),x=r(988348),O=((n=O||{})[n.Fetched=0]="Fetched",n[n.Fetching=1]="Fetching",n[n.NeverFetched=2]="NeverFetched",n);let A=(0,T.Zf)(e=>{var t;let r=e(_.oZ);return"fullscreen"===r.view?`/api/file/scenegraph_validations/${r.fileKey}`:(0,x.o)(r)&&(null==(t=r.resource)?void 0:t.type)==="server_file"?`/api/admin/scenegraph_validations/${r.resource.key}`:null}),P=(0,T.Zf)(e=>null!=e(A)),w=(()=>{let e=(0,T.Zf)((0,C.Yj)());return(0,T.Zf)(t=>t(e),async(t,r)=>{let n;if(t(e).status===f.D.LOADING)return;let i=t(A);if(i){r(e,(0,C.c$)());try{n=await k(i)}catch(t){r(e,(0,C.a8)(t));return}r(e,(0,C.Ix)(n))}})})();async function k(e){let t=await (0,N.Gg)(e),r=new D.I;for(let e of t.data.meta.data.results.violations)if("always-fail-for-testing"!==e.name)for(let t of e.instances)r.add(t.guid,t.message);return r}var F=r(125504),L=r.n(F),R=r(867084),V=r(905412),B=r(851712),G=r(130536);let M=m.cx.inlineBlock.bRadius4.minW40.w40.h16.flex.alignCenter.justifyCenter.fontSemiBold,K={[G.qS.Grouping]:M.colorBgInverse.colorTextOninverse.$,[G.qS.Shape]:M.colorBgSuccess.colorTextOnsuccess.$,[G.qS.DesignSystems]:M.colorBgComponent.colorTextOncomponent.$,[G.qS.ImmutableFrame]:M.colorBgFigjamTertiary.colorText.$,[G.qS.Media]:M.colorBgWarning.colorTextOnwarning.$,[G.qS.Other]:M.colorBgSecondary.colorBgOnselected.$},$={fontSize:9,lineHeight:"16px",fontStyle:"normal"};function Y({type:e}){let t=(0,G.wl)(e);return a.createElement("div",{title:e,className:K[t],style:$},G.W6[e])}let U={CREATED:"ADD",MODIFIED:"EDIT",REMOVED:"DEL"},q={CREATED:M.minW36.colorBgSuccess.colorTextOnsuccess.$,MODIFIED:M.minW36.colorBgBrandSecondary.colorTextOnbrandSecondary.$,REMOVED:M.minW36.colorBgDanger.colorTextOndanger.$};function H({phase:e}){return a.createElement("div",{title:e,className:q[e],style:$},U[e])}function W({iconConfig:e}){if("string"!=typeof e)return a.createElement(g.g,{width:"hug-contents"},a.createElement(H,{phase:e.phase}),"NONE"!==e.type?a.createElement(Y,{type:e.type}):a.createElement("div",{className:M.$}));switch(e){case"CREATED":case"MODIFIED":case"REMOVED":return a.createElement(H,{phase:e});default:return a.createElement(Y,{type:e})}}function Q({label:e}){return a.createElement("div",{title:e,className:M.b1.colorBorder.colorTextSecondary.$,style:$},e)}let j="figmascope_guid_display--canUnderline--8blSe";function z({guid:e}){let t=(0,d.m4)(b.Qb).getNode(e);return a.createElement(eh,{type:3,targetNode:t,fallbackCopyOnClickText:(0,B._y)(e)},el(e))}function Z({styleId:e}){let t=(0,d.m4)(b.Qb).getStyle(e);return a.createElement(eh,{type:3,targetNode:t,fallbackCopyOnClickText:V.sV.toString(e)},es(e,V.sV))}function X({variableId:e}){let t=(0,d.m4)(b.Qb).getVariable(e);return a.createElement(eh,{type:3,targetNode:t,fallbackCopyOnClickText:V.Qb.toString(e)},es(e,V.Qb))}function J({variableCollectionId:e}){let t=(0,d.m4)(b.Qb).getVariableCollection(e);return a.createElement(eh,{type:3,targetNode:t,fallbackCopyOnClickText:V.qk.toString(e)},es(e,V.qk))}function ee({overrideKey:e}){let t=(0,B.q_)(e);return a.createElement(ed,{type:t?2:0},el(e))}function et({overridePath:e}){let{isValid:t,formatted:r}=ea(e);return a.createElement(ed,{type:t?2:0},r)}function er({overridePath:e,targetGuid:t}){let{isValid:r,formatted:n}=ea(e),i=(0,d.m4)(b.Qb).getNode(t);return a.createElement(eh,{type:r?3:0,targetNode:i,fallbackCopyOnClickText:(0,B.ue)(e)},n)}function en({guid:e}){let t=(0,B.q_)(e);return a.createElement(ed,{type:t?1:0},el(e))}function ei({guidPath:e}){let{isValid:t,formatted:r}=ea(e);return a.createElement(ed,{type:t?1:0},r)}function el(e){return`(${(0,B._y)(e)})`}function ea(e){let t=(0,B.yE)(e);return{isValid:e.length>0&&t.every(B.q_),formatted:`[${t.map(e=>`(${(0,B._y)(e)})`).join(", ")}]`}}function es(e,t){let r=t.toGuidStrIfLocal(e);if(r)return el(r);let n=t.toRefIfSubscribed(e);return n?`${n.key.slice(0,5)}...${n.key.slice(-5)}/${n.version}`:"[unknown_asset_id]"}var eo=((i=eo||{})[i.Invalid=0]="Invalid",i[i.Normal=1]="Normal",i[i.Override=2]="Override",i[i.Link=3]="Link",i);let eu=m.cx.inlineBlock,ec={0:eu.colorTextDanger.$,1:eu.colorText.fontSemiBold.$,2:eu.colorTextSecondary.italic.$,3:eu.colorTextFigjam.fontSemiBold.$};function ed({type:e,children:t}){return a.createElement("span",{className:ec[e]},t)}function eh({type:e,targetNode:t,fallbackCopyOnClickText:r,children:n}){let i=(0,h.my)(I.io),l=t?()=>i(t.guidStr()):()=>{(0,R.CU)(r).then(()=>window.alert(`Copied ${r} to clipboard`)).catch(()=>window.alert(r))},s=t?e:0;return a.createElement("span",{role:"button",className:L()(m.cx.inlineBlock.$,"figmascope_guid_display--guidLink--UKqmp"),onClick:l},a.createElement(g.g,{spacing:4},t&&a.createElement(W,{iconConfig:t.iconConfig()}),a.createElement("span",{className:L()(ec[s],j)},n),t&&a.createElement("span",{className:L()(ec[s],j,m.cx.fontNormal.$)},t.name())))}var ep=r(161600),ef=r(31936),em=r(682372),ey=r(795188),eg=r.n(ey),ev=r(139776),eE=r(819584),eS=r(936756),eb=r(762820),eI=r(78168);function eC(e,t,r){let n={...e},i=!1;for(let e of t)i=i||n[e]!==r,n[e]=r;return i?n:e}function eT(e,t){let r={...e},n=!1;for(let e of t)n=n||e in r,delete r[e];return n?r:e}var eN=((l=eN||{})[l.No=0]="No",l[l.Yes=1]="Yes",l);function e_(e,t,r,n=1){let i=[t,...r];return e[t]?n?eT(e,i):eC(e,i,!1):eC(e,i,!0)}function eD(e=1){let t=(0,T.Zf)({});return(0,T.Zf)(e=>e(t),(r,n,i,l)=>n(t,e_(r(t),i,l??[],e)))}let ex=(e,t)=>{var r;return(null==(r=e.getNode(t))?void 0:r.mapAncestors(e=>e.guidStr()))??[]},eO=(e,t)=>{var r;return(null==(r=e.getNode(t))?void 0:r.mapDescendants(e=>e.guidStr()))??[]},eA=(0,d.CF)((0,T.Zf)({}),(e,t,r)=>{let n=r(b.Qb);switch(t.type){case"toggleNodeExpanded":return e_(e,t.guidStr,t.toggleSubtree?eO(n,t.guidStr):[]);case"expandNodeAncestors":return eC(e,ex(n,t.guidStr),!0);case"expandNodeDescendants":return eC(e,[t.guidStr,...eO(n,t.guidStr)],!0);case"collapseNodeDescendants":return eT(e,[t.guidStr,...eO(n,t.guidStr)])}});var eP=r(457772);let ew=(0,T.Zf)(e=>e(eP.e).sortOrder,(e,t,r)=>t(eP.e,e=>({...e,sortOrder:r}))),ek=(0,T.Zf)(e=>{var t;let r=[eP.K.Position,eP.K.Name,eP.K.NodeId];return(null==(t=e(b.OO)[0])?void 0:t.treeMemoryUsage)!=null&&r.push(eP.K.Memory),r.sort(),r}),eF=(0,T.Zf)(e=>{switch(e(ew)){case eP.K.Position:return eL;case eP.K.Name:return eR;case eP.K.Memory:return eV;case eP.K.NodeId:return eB}});function eL(e,t){var r,n;let i=null==(r=e.nodeChange.parentIndex)?void 0:r.position,l=null==(n=t.nodeChange.parentIndex)?void 0:n.position;return null==i&&null==l?0:null==l?1:null==i||i<l?-1:i>l?1:eB(e,t)}function eR(e,t){return e.displayName().localeCompare(t.displayName())||eB(e,t)}function eV(e,t){return(t.treeMemoryUsage??0)-(e.treeMemoryUsage??0)||eB(e,t)}function eB(e,t){let{sessionID:r,localID:n}=e.guid(),{sessionID:i,localID:l}=t.guid();return r-i||n-l}var eG=r(421428),eM=r(204792),eK=r(560072);let e$=eM.g.Dropdown,eY=eM.g.Option,eU=eM.g.Separator;function eq({contextMenuData:{guidStr:e,position:t},onClose:r}){let n=a.useContext(I.kZ),i=a.useRef(null);(0,eG.M)(i,r);let l=(0,d.m4)(b.Qb).getNode(e),[s,o]=(0,d.lZ)(S.Kq),u=(0,h.my)(eA);if(null==l)return null;let c=e=>()=>{e(),r()},p=l.children().length>0,f=(()=>{if(n){let e=(0,I.E8)(l);if(e)return c(()=>n(e))}})(),m=l.isInternalOnly()||"DOCUMENT"===l.nodeType()||"CANVAS"===l.nodeType(),g=e=>c(()=>eb.i46.triggerAction(e,{guid:l.guidStr()})),v=(null==s?void 0:s.node.guidStr())===l.guidStr();return a.createElement(e$,{style:{...y.sx.fixed.$,...t}},a.createElement("div",{ref:i},f&&a.createElement(eY,{onClick:f},"Jump to node"),p&&a.createElement(eY,{onClick:c(()=>u({type:"expandNodeDescendants",guidStr:e}))},"Expand descendants"),p&&a.createElement(eY,{onClick:c(()=>u({type:"collapseNodeDescendants",guidStr:e}))},"Collapse descendants"),(f||p)&&a.createElement(eU,null),v&&a.createElement(eY,{onClick:c(()=>o({type:"clear"}))},"Stop diffing against this node"),(!v||s.type!==S.Yf.Layer)&&a.createElement(eY,{onClick:c(()=>o({type:"start",diffType:S.Yf.Layer,guidStr:e}))},"Layer diff against this node"),(!v||s.type!==S.Yf.Tree)&&a.createElement(eY,{onClick:c(()=>o({type:"start",diffType:S.Yf.Tree,guidStr:e}))},"Tree diff against this node"),!m&&a.createElement(eU,null),!m&&f&&"DOCUMENT"!==l.nodeType()&&"CANVAS"!==l.nodeType()&&a.createElement(eY,{onClick:g("debug-print-as-test-code")},a.createElement(eK.Tx,{id:"fullscreen_actions.debug-print-as-test-code"})),!m&&f&&"VECTOR"===l.nodeType()&&a.createElement(eY,{onClick:g("debug-print-vector-network-as-test-code")},a.createElement(eK.Tx,{id:"fullscreen_actions.debug-print-vector-network-as-test-code"}))))}var eH=r(733960),eW=r(915880),eQ=r(18432);let ej=a.createContext(()=>!1);function ez({children:e,className:t,style:r}){let n=a.useRef(null),i=a.useCallback(()=>{var e;return!!(null==(e=n.current)?void 0:e.contains(document.activeElement))},[]);return a.createElement(eW.O8,{ref:n,className:t,style:r,allowVim:!0},a.createElement(ej.Provider,{value:i},e))}let eZ="figmascope_tree_item--expansionToggle--cDA3p";function eX({children:e,diffType:t,isExpanded:r,isLeaf:n,isPinned:i,isSelected:l,isChanging:s,indent:o,style:u,keyboardNavigationPath:c,toggleExpanded:d,togglePinned:h,select:p,onContextMenu:f,onMouseEnter:m,onMouseLeave:y,isEditing:g,setIsEditing:v}){let{setKeyboardNavigationElement:E,keyboardNavigationItem:S,isFocused:b}=(0,eW._G)({path:c}),I=a.useContext(ej),C=(0,eH.i)(l);a.useEffect(()=>{!C&&l&&!b&&I()&&(null==S||S.focus())},[b,C,l,S,I]);let T=a.useRef(!1),N=a.useCallback(e=>e.target instanceof Element&&"BUTTON"===e.target.tagName,[]),_=a.useCallback(e=>{var t;return!!(e.target instanceof Element&&(e.target.classList.contains(eZ)||(null==(t=e.target.parentElement)?void 0:t.classList.contains(eZ))))},[]);return a.createElement("button",{ref:E,style:u,className:L()("figmascope_tree_item--treeItem--zf8eH",{"figmascope_tree_item--selected--eG-Br":l||b,"figmascope_tree_item--changing--5zuTD":s,"figmascope_tree_item--disableHover--y2Gw5":g}),onFocus:p,onMouseDown:g?void 0:e=>{(N(e)||_(e))&&e.detail>1&&e.preventDefault(),_(e)?T.current=e.detail>1:T.current=!0},onClick:g?void 0:e=>{T.current?T.current=!1:d(e.metaKey||e.altKey),e.currentTarget.focus()},onMouseEnter:m,onMouseLeave:y,onDoubleClick:e=>{_(e)||(v?v(!0):d(e.metaKey))},onKeyDown:e=>{(r&&(0,eW.uc)(e.code,!0)||!r&&(0,eW.sr)(e.code,!0))&&d(e.metaKey)},onContextMenu:f},a.createElement(eQ.g,null,a.createElement(eJ,{indent:o,isLeaf:n,isExpanded:r}),e,h&&!g&&a.createElement(e1,{isPinned:!!i,togglePinned:h}),t&&a.createElement(e0,{diffType:t}),!1===g&&v&&a.createElement(e6,{onClick:()=>{v(!0)}})))}function eJ({indent:e,isLeaf:t,isExpanded:r}){return a.createElement("div",{className:L()(eZ,!t&&"figmascope_tree_item--clickable--y04JT"),style:{paddingLeft:14*e,width:14,minHeight:14}},a.createElement("span",null,t?"":r?"\u25BC":"\u25B6"))}function e0({diffType:e}){return a.createElement("div",{title:e,className:m.cx.minW16.h16.bRadius2.ml8.font12.fontBold.lh16.alignCenter.cursorDefault.match(e,{[S.ID.Changed]:m.cx.colorBgBrandSecondary.colorTextOnbrandSecondary,[S.ID.ChildChanged]:m.cx.colorBgBrand.colorTextOnbrand,[S.ID.Added]:m.cx.colorBgSuccess.colorTextOnsuccess,[S.ID.Removed]:m.cx.colorBgDanger.colorTextOndanger}).$},e===S.ID.Added&&"+",e===S.ID.Removed&&"-",(e===S.ID.Changed||e===S.ID.ChildChanged)&&"\u2732")}function e1({isPinned:e,togglePinned:t}){return a.createElement("span",{onClick:t,className:e?"figmascope_tree_item--unpinToggle--X5czi figmascope_tree_item--_pinToggleBase--aafwk":"figmascope_tree_item--pinToggle--XSk0J figmascope_tree_item--_pinToggleBase--aafwk"},e?"Unpin":"Pin")}function e6({onClick:e}){return a.createElement("span",{onClick:e,className:"figmascope_tree_item--editButton--Gt2bw figmascope_tree_item--_pinToggleBase--aafwk"},"Edit")}let e4=a.memo(function({diffType:e,guidStr:t,iconConfig:r,indent:n,index:i,isExpanded:l,isLeaf:s,isOrphan:o,isSelected:u,isStack:c,memoryPercent:d,name:h,overrideKeyStr:p,pageSyncingStatus:f,style:y,validationInfo:v,select:E,toggle:S,showContextMenu:b}){let I=a.useCallback(e=>{e.preventDefault(),b({guidStr:t,position:{left:e.clientX,top:e.clientY}})},[t,b]);return a.createElement(eX,{diffType:e,keyboardNavigationPath:[i],isSelected:u,isLeaf:s,isExpanded:l,indent:n,style:y,select:()=>E(t),toggleExpanded:e=>S(t,e),onContextMenu:I,onMouseEnter:()=>{eb.KEP&&eb.KEP.editorState().figmaScopeHighlightedNode.set(t)},onMouseLeave:()=>{eb.KEP&&eb.KEP.editorState().figmaScopeHighlightedNode.set("")}},a.createElement(W,{iconConfig:r}),a.createElement(en,{guid:t}),o&&a.createElement("span",{className:m.cx.ml4.colorTextWarning.$},"(Orphan)"),p&&a.createElement(ee,{overrideKey:p}),a.createElement("div",{title:h,className:m.cx.ellipsis.noWrap.overflowHidden.$},h),a.createElement(g.O,null),c&&a.createElement(Q,{label:"STACK"}),a.createElement(e8,{info:v}),null!=f&&a.createElement(e7,{status:f}),null!=d&&a.createElement("span",{className:m.cx.colorTextSecondary.$,title:"Node memory usage"},d))});function e8({info:e}){if(void 0===e||0===e.forSelf&&0===e.forChildren)return null;let t=[];e.forSelf&&t.push(`${(0,eS.u)(e.forSelf,"scenegraph validation error")} for this node`),e.forChildren&&t.push(`${(0,eS.u)(e.forChildren,"scenegraph validation error")} in this node's children`);let r=m.cx.flex.alignCenter.justifyCenter.if(0===e.forSelf,m.cx.colorTextWarning,m.cx.colorTextDanger.fontSemiBold).$;return a.createElement("div",{title:t.join(", "),className:r},e.forSelf?(0,eS.u)(e.forSelf,"error"):(0,eS.aW)(e.forChildren,"Child error"))}function e5({style:e,data:{displayedLayers:t,pagesList:r,selectedGuid:n,...i},index:l}){let s=t[l],o=(0,eE.ac)(e),u=null;return s.isCanvas&&r&&(u=(0,eI.AF)(r,s.guidStr)),a.createElement(e4,{...s,...i,isSelected:n===s.guidStr,style:o,index:l,pageSyncingStatus:u})}function e2({pagesList:e}){let t=(0,d.m4)(e9),[r,n]=(0,d.lZ)(I.io),[i,l]=a.useState(null),s=a.useRef(null);a.useEffect(()=>{var e;let n=t.findIndex(e=>e.guidStr===r);n>=0&&(null==(e=s.current)||e.scrollToItem(n,"smart"))},[t,r]);let o=(0,h.my)(eA);a.useEffect(()=>{o({type:"expandNodeAncestors",guidStr:r})},[o,r]);let u=a.useCallback((e,t)=>{o({type:"toggleNodeExpanded",guidStr:e,toggleSubtree:t})},[o]);return 0===t.length?a.createElement("div",null,"Empty Scene"):a.createElement(a.Fragment,null,a.createElement(ep.c,{disableWidth:!0},({height:i})=>a.createElement(ef.yq,{itemSize:18,itemCount:t.length,height:i,ref:s,itemData:{displayedLayers:t,selectedGuid:r,pagesList:e,select:n,toggle:u,showContextMenu:l},width:"100%"},e5)),i&&a.createElement(eq,{contextMenuData:i,onClose:()=>{l(null)}}))}function e7({status:e}){let t=m.cx.cursorDefault.font14.lh0.$;switch(e){case eb.Q1C.NOT_LOADED:return a.createElement("span",{className:t,title:"Page not loaded due to incremental loading"},"\u2601\uFE0F");case eb.Q1C.REQUESTED:return a.createElement("span",{className:t,title:"Page loading in progress"},"\u26C5");case eb.Q1C.LOADED:return null}}let e3=(0,T.Zf)(e=>{var t;let r=e(b.Qb),n=e(w),i=new Map;if(n.status!==f.D.SUCCESS)return i;let l=e=>{let t=i.get(e);if(t)return t;let r={forSelf:0,forChildren:0};return i.set(e,r),r};for(let e of n.value.keys()){l(e).forSelf++;let n=null==(t=r.getNode(e))?void 0:t.parent();for(;n&&!i.has(n.guidStr());)l(n.guidStr()).forChildren++,n=n.parent()}return i}),e9=(0,T.Zf)(e=>{let t=e(b.Qb),r=t.getRootNodes(),n=e(S.kJ),i=e(eA),l=e(eF),a=e(e3),s=(()=>{switch(n.type){case S.Yf.Tree:return[n.node];case S.Yf.File:return n.scene.getRootNodes();default:return[]}})(),o="multiplayer_journal"===t.type,u={sortFn:l,expandedGuids:i,guidToValidationInfo:a,showOverrideKeys:!o,computeChildren:!o};return eg()(r,e=>{if(!e)return[];if(0===s.length)return te(e,0,u);let t=tr(e,s);return t?tt(e,t,0,u):function e(t,r,n,i){let l=t.guidStr(),a=i.computeChildren?t.children():[],s=0===a.length,o=!!i.expandedGuids[l],u=!1,c=eg()(a,t=>{var l;let a=(()=>{let l=tr(t,r);if(l)return tt(t,l,n+1,i);let a=r.filter(e=>e.ancestorPathStr().includes(t.guidStr()));return a.length>0?e(t,a,n+1,i):te(t,n+1,i)})();return u=u||(null==(l=a[0])?void 0:l.diffType)!=null,a}),d={diffType:u?S.ID.ChildChanged:void 0,validationInfo:i.guidToValidationInfo.get(l),guidStr:l,iconConfig:t.iconConfig(),indent:n,isExpanded:o,isLeaf:s,isOrphan:t.isOrphan(),name:t.displayName(),overrideKeyStr:i.showOverrideKeys?t.overrideKeyStr():"",memoryPercent:t.memoryPercentStr(),isStack:t.isStack(),isCanvas:t.isCanvas()};return o?[d,...c]:[d]}(e,s,0,u)})});function te(e,t,r){let n=e.guidStr(),i=r.computeChildren?e.children():[],l=0===i.length,a=!!r.expandedGuids[n],s={diffType:void 0,validationInfo:r.guidToValidationInfo.get(n),guidStr:n,iconConfig:e.iconConfig(),indent:t,isExpanded:a,isLeaf:l,isOrphan:e.isOrphan(),name:e.displayName(),overrideKeyStr:r.showOverrideKeys?e.overrideKeyStr():"",memoryPercent:e.memoryPercentStr(),isStack:e.isStack(),isCanvas:e.isCanvas()};return a?[s,...eg()(tn(i,r.sortFn),e=>te(e,t+1,r))]:[s]}function tt(e,t,r,n){let i=e??t;if(!i)throw Error("Diffing two nothings");if(e&&t&&e.treeDiffKey()!==t.treeDiffKey())throw Error("Diffing nodes with mismatched keys");let l=i.guidStr(),a=tn((null==e?void 0:e.children())??[],n.sortFn),s=tn((null==t?void 0:t.children())??[],n.sortFn),o=n.computeChildren?(0,ev.Cy)(a,s,e=>e.treeDiffKey()):[],u=!1,c=eg()(o,({left:e,right:t})=>{var i;let l=tt(e,t,r+1,n);return u=u||(null==(i=l[0])?void 0:i.diffType)!=null,l}),d=e&&t&&(0,em.diff)(e.nodeChange,t.nodeChange,(e,t)=>"commandsBlob"===t),h=(0,S.sX)(e,t,!!d,u),p=null==e?void 0:e.name(),f=null==t?void 0:t.name(),m=null!=p&&null!=f&&p!==f?`${p} <=> ${f}`:i.name(),y=!!n.expandedGuids[l],g={diffType:h,validationInfo:n.guidToValidationInfo.get(l),guidStr:l,iconConfig:i.iconConfig(),indent:r,isExpanded:y,isLeaf:0===o.length,isOrphan:!!(null==e?void 0:e.isOrphan()),name:m,overrideKeyStr:n.showOverrideKeys?i.overrideKeyStr():"",memoryPercent:i.memoryPercentStr(),isStack:i.isStack(),isCanvas:i.isCanvas()};return y?[g,...c]:[g]}function tr(e,t){let r=e.treeDiffKey();return t.find(e=>e.treeDiffKey()===r)}function tn(e,t){return e.slice().sort(t)}var ti=r(755696),tl=r(972920),ta=r(594192),ts=r(204838),to=r(160335),tu=r(868676),tc=r(26708),td=r(287616),th=r(721500),tp=r(673768),tf=r(440112),tm=r(763456);let ty=(0,th.qe)(tm.E1e),tg=(0,th.qe)(tm.Y73),tv=new WeakMap;function tE(e){let t=tv.get(e);if(void 0!==t)return t;let[r,n]=eb.ui7.generateThumbnailForNode((0,B._y)(e),4*tg,4*ty,4,{forceContentsOnly:!0,isDetatchedComponentScene:!1});if(!n||0===n.length||!r)return tv.set(e,null),null;let{width:i,height:l}=r,a={url:URL.createObjectURL(new Blob([n])),renderWidth:i/4,renderHeight:l/4};return tv.set(e,a),a}let tS=(0,th.qe)(tm.E1e),tb=(0,th.qe)(tm.Y73);function tI({thumbnailInput:e}){let t=tE(e),r=(0,tp.Id)((0,B._y)(e));return t?a.createElement("div",{className:m.cx.wFull.flex.flexShrink1.itemsCenter.justifyCenter.$,style:r},a.createElement(tf.O,{className:"figmascope_thumbnail_preview_panel--thumbnailPreview--UmQa0",src:t.url,width:t.renderWidth>tb?tb:t.renderWidth,height:t.renderHeight>tS?tS:t.renderHeight})):a.createElement("span",{className:m.cx.noWrap.colorTextDesign.$},"Error generating thumbnail")}function tC({value:e}){switch(e.type){case to.e6.BlobIndex:return a.createElement(tB,{index:e.value});case to.e6.SensitiveText:return a.createElement(tP,{value:e.value});case to.e6.Boolean:return a.createElement(tO,{value:e.value});case to.e6.Numeric:return a.createElement(tF,{value:e.value});case to.e6.String:return a.createElement(tA,{value:e.value});case to.e6.Position:return a.createElement(tw,{value:e.value});case to.e6.Color:return a.createElement(tk,{value:e.value});case to.e6.Vector:return a.createElement(tL,{value:e.value});case to.e6.Matrix:return a.createElement(tR,{value:e.value});case to.e6.NodeId:return a.createElement(z,{guid:e.value});case to.e6.StyleId:return a.createElement(Z,{styleId:e.value});case to.e6.VariableId:return a.createElement(X,{variableId:e.value});case to.e6.VariableCollectionId:return a.createElement(J,{variableCollectionId:e.value});case to.e6.OverrideKey:return a.createElement(ee,{overrideKey:e.value});case to.e6.OverridePath:return e.targetGuid?a.createElement(er,{overridePath:e.value,targetGuid:e.targetGuid}):a.createElement(et,{overridePath:e.value});case to.e6.GenericGuid:return a.createElement(en,{guid:e.value});case to.e6.GenericGuidPath:return a.createElement(ei,{guidPath:e.value});case to.e6.GenericGuidPathMapping:return a.createElement(a.Fragment,null,a.createElement(en,{guid:e.from})," \u21D4 ",a.createElement(ei,{guidPath:e.to}));case to.e6.ImageHash:return a.createElement(tG,{value:e.value});case to.e6.Bytes:return a.createElement(tV,{value:e.value});case to.e6.Metadata:return a.createElement(t$,{value:e.value});case to.e6.Error:return a.createElement(tY,{value:e.value});case to.e6.Image:return a.createElement(tI,{thumbnailInput:e.value});case to.e6.EditScope:return a.createElement(tK,{value:e.value});default:(0,o.gy)(e)}}let tT=m.cx.noWrap,tN=tT.colorTextDesign,t_=tT.colorTextSuccess,tD=tT.colorTextDanger,tx=tT.colorTextSecondary;function tO({value:e}){return a.createElement("span",{className:t_.$},e?"TRUE":"FALSE")}function tA({value:e}){return a.createElement("span",{className:tN.$},'"',e,'"')}function tP({value:e}){let t=(0,d.m4)(b.Qb).sensitiveTextPolicy;return a.createElement("span",{className:tN.$},'"',(0,td.u)(e,t),'"')}function tw({value:e}){return a.createElement(g.g,{width:"hug-contents"},a.createElement("span",{className:tN.$},(0,tu.Ss)(e)),a.createElement("span",{className:tx.$},"(compressed: `",e,"`)"))}function tk({value:e}){let t=tc.Q.format(e);return a.createElement(g.g,{width:"hug-contents"},a.createElement("span",{className:m.cx.inlineBlock.w12.h12.bRadius2.$,style:{backgroundColor:t}}),a.createElement("span",{className:tN.$},t))}function tF({value:e}){return a.createElement("span",{className:t_.$},(0,to.iy)(e))}function tL({value:e}){return a.createElement("span",{className:t_.$},`<${(0,to.iy)(e.x)}, ${(0,to.iy)(e.y)}>`)}function tR({value:e}){let{m00:t,m01:r,m02:n,m10:i,m11:l,m12:s}=e;return a.createElement("div",{className:t_.$},"[",[[t,r,n],[i,l,s]].map(e=>`[${e.map(to.iy).join(", ")}]`).join(", "),"]")}function tV({value:e}){return a.createElement("span",{className:t_.$},tU(e))}function tB({index:e}){let t=(0,d.m4)(b.Qb).getBlobByIndex(e);return t?a.createElement("span",{className:t_.$},"Blob ",e," ::"," ","string"==typeof t?t:tU(t.bytes)):a.createElement(tY,{value:`Blob ${e} :: [MISSING]`})}function tG({value:e}){let t=tq(e,"");return a.createElement(a.Fragment,null,a.createElement("span",{className:t_.$},t),a.createElement("span",null,a.createElement(tM,{hash:t,name:"staging"})," | ",a.createElement(tM,{hash:t,name:"prod"})))}function tM({hash:e,name:t}){return a.createElement("a",{href:`https://${"staging"===t?"staging-":""}admin.figma.com/admin/image/${e}`},t)}function tK({value:e}){return a.createElement(g.g,{width:"hug-contents"},a.createElement("span",{className:t_.$},e.type),a.createElement("span",{className:tN.$},e.label))}function t$({value:e}){return a.createElement("span",{className:tx.$},"(",e,")")}function tY({value:e}){return a.createElement("span",{className:tD.$},e)}function tU(e){return`binary[${e.length}] = ${tq(e," ")}`}function tq(e,t){let r="";for(let n=0;n<e.length;++n){if(n>=30){r+="...";break}r+=function(e){let t=e.toString(16);return 1===t.length?"0"+t:t}(e[n])+t}return r}function tH({searchRef:e}){let t=(0,d.m4)(b.Qb),[r,n]=(0,d.lZ)(I.io),i=(0,d.m4)(I.Ww),l=a.useMemo(()=>i.map(e=>t.getNode(e)).filter(ta.aI).map(e=>({node:e,matches:[{property:"guid",value:e.guid(),isExact:!0},{property:"name",value:e.name(),isExact:!0}]})).reverse(),[t,i]),{searchState:s,requestSearch:o,clearSearchResults:u,showRecentSelections:c,indexingCount:h}=function(e,t,r){let[n,i]=a.useState({status:"initial"}),l=a.useRef(0),[s,o]=a.useState(0),u=a.useMemo(()=>(0,tl.C)((t,r)=>{let n=++l.current,a=new TaskController({priority:"user-visible"});scheduler.postTask(()=>i({status:"indexing"}),{signal:a.signal,delay:300}).catch(()=>{}),e.search(t,r,o).then(e=>{a.abort(),n===l.current&&i({status:"success",results:e})}).catch(e=>{a.abort(),n===l.current&&i({status:"failure",error:e})})}),[e]),c=a.useCallback(()=>i({status:"initial"}),[]),d=a.useCallback(()=>i({status:"recent",results:r}),[r]);return{searchState:n,requestSearch:a.useCallback(e=>{c(),u(e,t)},[c,u,t]),showRecentSelections:d,clearSearchResults:c,indexingCount:s}}(t,r,l),p=a.useRef(null);(0,eG.M)(p,u);let f=a.useCallback(e=>{u(),n(e.node.guid())},[u,n]);return a.createElement(eW.O8,{className:m.cx.flex1.$,ref:p,allowVim:!0},a.createElement(tW,{searchRef:e,requestSearch:o,showRecentSelections:c}),"initial"!==s.status&&a.createElement(tQ,{searchState:s,selectResult:f,indexingCount:h,sensitiveTextPolicy:t.sensitiveTextPolicy}))}function tW({searchRef:e,requestSearch:t,showRecentSelections:r}){let{setKeyboardNavigationElement:n}=(0,eW._G)({path:[0,0],id:"input"}),i=e=>{let n=e.target.value;n?t(n):r()};return a.createElement("input",{ref:t=>{n(t),e.current=t},type:"text",placeholder:"Search (hover the ? for details)",className:"figmascope_layer_search_bar--searchBar--xYknN",onFocus:i,onChange:i})}function tQ({searchState:e,selectResult:t,indexingCount:r,sensitiveTextPolicy:n}){return a.createElement("div",{className:m.cx.absolute.zIndexModal.colorBg.b1.colorBorder.mt2.overflowAuto.$,style:{maxHeight:450,minWidth:500,boxShadow:"0px 2px 14px var(--color-shadow, rgba(0, 0, 0, 0.15))"}},"indexing"===e.status&&a.createElement(tj,{text:`Indexing search results (this may take a moment)... ${r?`[${r}/???]`:""}`}),"failure"===e.status&&a.createElement(tj,{text:`Error: ${e.error}.`}),"recent"===e.status&&e.results.map((e,r)=>a.createElement(tz,{key:r,result:e,index:r,onClick:()=>t(e)})),"success"===e.status&&(0===e.results.length?a.createElement(tj,{text:["No results.","With view-only permissions, nodes are not loaded until their page is opened.","show"===n?"":"Searching by name or text is disabled because text is being redacted."]}):e.results.map((e,r)=>a.createElement(tz,{key:r,result:e,index:r,onClick:()=>t(e)}))))}function tj({text:e}){return a.createElement(a.Fragment,null,(Array.isArray(e)?e:[e]).map((e,t)=>a.createElement("div",{key:t,className:m.cx.colorBg.colorTextSecondary.px8.py4.$},e)))}function tz({result:e,index:t,onClick:r}){let{node:n,matches:i}=e,{setKeyboardNavigationElement:l,keyboardNavigationItem:s,isFauxFocused:o}=(0,eW._G)({path:[1,t],id:n.guidStr()});return a.useEffect(()=>{s&&0===t&&s.fauxFocus()},[s,t]),a.createElement("button",{ref:l,className:L()(m.cx.block.wFull.px4.py8.colorText.flex.itemsCenter.alignLeft.$,"figmascope_layer_search_bar--searchResult--tW-6s",o&&"figmascope_layer_search_bar--fauxFocus--pmMRc"),onClick:r},a.createElement(g.g,{spacing:4},a.createElement(W,{iconConfig:e.node.iconConfig()}),a.createElement(en,{guid:e.node.guid()}),a.createElement(ts.G,{className:m.cx.overflowHidden.$,text:n.nameWithPage()}),a.createElement(g.O,null),i.filter(({property:e})=>!["guid","name","type"].includes(e)).map(({property:e,value:t},r)=>{let n=(0,to.MN)(e,t);return a.createElement(g.g,{key:r,spacing:4,width:"hug-contents"},a.createElement("div",null,e,":"),n&&a.createElement(tC,{value:n}))})))}var tZ=r(537096);function tX({children:e}){return a.createElement("div",{className:m.cx.colorBorder.px8.py4.bb1.bSolid.$},a.createElement(g.g,null,e))}function tJ(e){let t={className:"figmascope_toolbar_components--iconButton--cvjWZ",children:a.createElement(tZ.A,{svg:e.svg}),title:e.label,"aria-label":e.label};return"href"in e?a.createElement("a",{...t,href:e.href,target:"blank"}):a.createElement("button",{...t,onClick:e.onClick,disabled:e.disabled})}var t0=r(875420),t1=r(467188),t6=r(218568),t4=r(324847);function t8({searchRef:e}){let t=(0,d.m4)(P),[r,n]=(0,d.lZ)(I.wV),[i,l]=(0,d.lZ)(I.YR),o=!!a.useContext(I.kZ),[u,c]=(0,d.lZ)(I.eY),[h,p]=(0,d.lZ)(ew),f=(0,d.m4)(ek);return a.createElement(tX,null,a.createElement(tH,{searchRef:e}),a.createElement("select",{name:"sort",title:"Sets the layers panel sort order",onChange:e=>{let t=e.target.value;s.qE.trackDefinedEvent("figmascope.sort_order_change",{order:function(e){switch(e){case eP.K.Position:return"position";case eP.K.Name:return"name";case eP.K.Memory:return"memory";case eP.K.NodeId:return"node_id"}}(t)}),p(t)},defaultValue:h},f.map(e=>a.createElement("option",{key:e,value:e},e))),a.createElement(tJ,{label:"Select Previous",onClick:()=>{n(),s.qE.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"button"})},disabled:!r,svg:t0.c}),a.createElement(tJ,{label:"Select Next",onClick:()=>{l(),s.qE.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"button"})},disabled:!i,svg:t1.c}),a.createElement(ti.y,{label:"Follow selection",disabled:!o,checked:!!o&&u,onChange:e=>{o&&c(e.currentTarget.checked)}}),t&&a.createElement(t5,null))}function t5(){let[e,t]=(0,d.lZ)(w),r=e.status===f.D.LOADING;return a.useEffect(()=>{t()},[t]),a.createElement(tJ,{label:r?"Fetching scene graph validation failures":"Refetch scenegraph validation failures",onClick:t,svg:r?t6.c:t4.c})}var t2=r(433416),t7=r(562416),t3=r.n(t7),t9=r(886420),re=r(838836),rt=r(577824),rr=r(142548),rn=r(600980);let ri=(0,th.qe)(tm.OuS),rl=(0,th.qe)(tm.aYs),ra=eD(eN.No),rs=eD(),ro=a.memo(function({panel:e,items:t,diffItems:r}){let[n,i]=(0,d.lZ)(ra),[l,s]=(0,d.lZ)(rs),o=a.useMemo(()=>{let e=[],i=rm(t,void 0,l),a=null!=r,s=rm(r??[],void 0,l);for(let t of(0,ev.Cy)(i,s,e=>rp(e,void 0)))e=a?e.concat(rv(t.left,t.right,0,void 0,n,l)):e.concat(rg(t.left??t.right,0,void 0,n,l));return e},[t,r,n,l]),u=a.createRef();function c(e){if(void 0!==o[e]){let t=o[e].value;if(t&&t.type===to.e6.Image){let e=tE(t.value);if(e)return e.renderHeight+rl}}return ri}return a.useEffect(()=>{var e;null==(e=u.current)||e.resetAfterIndex(0)},[u,o]),a.createElement(ep.c,{disableWidth:!0},({height:t})=>a.createElement(ef.qs,{ref:u,itemSize:c,itemCount:o.length,height:t,itemKey:e=>o[e].expansionKey,itemData:{panel:e,displayedProperties:o,togglePropertyExpanded:i,togglePropertyPinned:s},width:"100%"},ru))});function ru({style:e,index:t,data:{panel:r,displayedProperties:n,togglePropertyExpanded:i,togglePropertyPinned:l}}){let s=n[t],o=(0,eH.i)(s),[u,c]=a.useState(!1),d=a.useRef(void 0);a.useEffect(()=>(o&&!(0,t9.QZ)(s.value,o.value)&&(clearTimeout(d.current),c(!0),d.current=setTimeout(()=>{c(!1)},250)),re.Kw),[s,o]),a.useEffect(()=>()=>clearTimeout(d.current),[]);let h=(0,eE.ac)(e);return a.createElement(rd,{...s,style:h,isChanging:u,panel:r,index:t,togglePropertyExpanded:i,togglePropertyPinned:l})}let rc=a.memo(function({diffValue:e,value:t}){return a.createElement(a.Fragment,null,null!=e&&a.createElement(tC,{value:e}),null!=e&&a.createElement("span",null,"\u21E8"),null!=t&&a.createElement(tC,{value:t}))}),rd=a.memo(function({childExpansionKeys:e,expansionKey:t,indent:r,isExpanded:n,isChanging:i,isPinned:l,isLeaf:o,isImage:u,label:c,index:d,style:h,value:p,diffValue:f,diffType:y,panel:v,togglePropertyExpanded:E,togglePropertyPinned:S,onEdit:b}){let[I,C]=a.useState(!1),T=p&&b?I:void 0,N=I&&p&&b;return a.createElement(eX,{keyboardNavigationPath:[d],isLeaf:o,isExpanded:n,isChanging:i,indent:u?0:r,style:u?{...h,height:"fit-content",width:"100%",alignItems:"flex-start"}:h,toggleExpanded:r=>{C(!1),n||s.qE.trackDefinedEvent("figmascope.expand_row",{field:c,panel:v}),E(t,r?e:[])},isPinned:l,togglePinned:u?void 0:()=>{l||s.qE.trackDefinedEvent("figmascope.pin_row",{field:c,panel:v}),S(t)},diffType:y,setIsEditing:e=>{p&&b&&(C(e),s.qE.trackDefinedEvent("figmascope.edit_property",{field:c}))},isEditing:T},u?a.createElement(rc,{diffValue:f,value:p}):a.createElement(a.Fragment,null,a.createElement("span",{className:m.cx.colorText.$},c),a.createElement("div",{className:m.cx.ellipsis.noWrap.overflowHidden.alignCenter.$},N?a.createElement(rh,{onEdit:b,onFinish:()=>{C(!1)},valueForEditing:p}):a.createElement(rc,{diffValue:f,value:p}))),a.createElement(g.O,null))});function rh({onFinish:e,onEdit:t,valueForEditing:r}){let[n,i]=a.useState(!1),l=(0,to.q4)(r),[s,o]=a.useState(l||""),u=()=>{if(t&&r){let n=(0,to.UW)(s,r.type);if(!n){i(!0);return}try{t(n)}catch(e){i(!0);return}e()}};return a.createElement(a.Fragment,null,a.createElement(rt.y,{name:"figmaScopeTreeItem",value:s,type:"string",className:L()("figmascope_properties_panel--editingInput--yqWcf",{"figmascope_properties_panel--editingInputError--rY95m":n}),required:!0,onChange:e=>{i(!1),o(e.target.value)},onKeyDown:t=>{13===t.keyCode?u():27===t.keyCode&&e()},autoFocus:!0}),a.createElement("button",{className:"figmascope_properties_panel--editingInputButtonCancel--cJrnv figmascope_properties_panel--_editingInputButtonBase--CKA0R",onClick:e},"Cancel"),a.createElement("button",{className:"figmascope_properties_panel--editingInputButtonDone--M4EHU figmascope_properties_panel--_editingInputButtonBase--CKA0R",onClick:()=>{u()}},"Done"),a.createElement("div",{className:"figmascope_properties_panel--editingWarningIcon--lTGoK","data-tooltip-type":rr.wL.TEXT,"data-tooltip":"Editing this field will use the plugin API under-the-hood. This may behave differently\n          compared to modifying this field using the UI or Selection Properties.","data-tooltip-offset-y":12},a.createElement(tZ.A,{svg:rn.c,height:"12px",width:"12px",autosize:!0})))}let rp=(e,t)=>{let r=e.key??e.label;return t?[t,r].join("."):r},rf=(e,t)=>!!t[e],rm=(e,t,r)=>[...e.filter(e=>rf(rp(e,t),r)),...e.filter(e=>!rf(rp(e,t),r))],ry=(e,t,r,n)=>{if(e)return!1;let i=n[t];return null!=i?i:r},rg=(e,t,r,n,i)=>{var l;let a=rp(e,r),s=0===e.children.length,o=(null==(l=e.value)?void 0:l.type)===to.e6.Image,u=ry(s,a,e.expandByDefault,n),c=eg()(rm(e.children??[],a,i),e=>rg(e,t+1,a,n,i)),d={label:e.label,value:e.value,isExpanded:u,isLeaf:s,isImage:o,indent:t,expansionKey:a,childExpansionKeys:eg()(c,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rf(a,i),onEdit:e.onEdit};return u?[d,...c]:[d]},rv=(e,t,r,n,i,l)=>{var a;let s=e??t;if(!s)throw Error("Nothing to diff");if(e&&t&&rp(e,n)!==rp(t,n))throw Error("Mismatched keys");let o=rp(s,n),u=rm((null==e?void 0:e.children)??[],o,l),c=rm((null==t?void 0:t.children)??[],o,l),d=(0,ev.Cy)(u,c,e=>rp(e,o)),h=!1,p=eg()(d,({left:e,right:t})=>{let n=rv(e,t,r+1,o,i,l);return h=h||null!=n[0].diffType,n}),f=0===d.length,m=!t3()(null==e?void 0:e.value,null==t?void 0:t.value),y=(0,S.sX)(e,t,m,h),g=ry(f,o,s.expandByDefault,i),v=(null==(a=s.value)?void 0:a.type)===to.e6.Image,E={label:s.label,value:s.value,diffValue:e&&t&&m?null==t?void 0:t.value:void 0,isExpanded:g,isLeaf:f,isImage:v,indent:r,expansionKey:o,childExpansionKeys:eg()(p,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rf(o,l),diffType:y};return g?[E,...p]:[E]};var rE=r(148276),rS=r(473128),rb=r(400660),rI=r(166996);function rC({selectedNode:e,diffNode:t,onClose:r}){return a.createElement(tX,null,e?a.createElement(rT,{selectedNode:e,diffNode:t}):a.createElement(g.O,null),a.createElement(tJ,{label:"Help",href:rS.a,svg:rb.c}),r&&a.createElement(tJ,{label:"Close FigmaScope",onClick:r,svg:rI.c}))}function rT({selectedNode:e,diffNode:t}){let[r,n]=(0,d.lZ)(S.Kq),i=(0,h.my)(I.io);return a.createElement("div",{className:m.cx.flex1.ml10.my4.$},a.createElement("div",null,t&&a.createElement("span",{className:m.cx.colorTextSecondary.$},"Diffing "),a.createElement("span",{className:m.cx.fontSemiBold.$},e.nameWithPage()),t&&a.createElement("span",{className:m.cx.colorTextSecondary.$}," against "),t&&a.createElement("span",{className:m.cx.fontSemiBold.$},t.nameWithPage())),r&&a.createElement("div",{className:m.cx.colorTextSecondary.mt8.$},a.createElement(g.g,{spacing:8,width:"hug-contents",height:"hug-contents",verticalAlignItems:"start"},a.createElement("span",null,"Snapshot of"," ",a.createElement(rE.Gy,{onClick:()=>i(r.node.guidStr()),className:m.cx.colorTextFigjam.fontSemiBold.$,trusted:!0},r.node.name()),r.type===S.Yf.Tree&&" and full subtree"," was taken at"," ",r.time.toLocaleTimeString("en-US")),a.createElement(rE.Gy,{onClick:()=>n({type:"refresh"}),className:m.cx.colorTextDesign.$,trusted:!0},"Refresh"),a.createElement(rE.Gy,{onClick:()=>n({type:"clear"}),className:m.cx.colorTextDanger.$,trusted:!0},"Finish"))))}let rN=a.memo(function({embedded:e=!1,emptyStateContent:t,onClose:r,appSelection:n,setAppSelection:i,pagesList:l}){let s=(0,d.m4)(b.uO);switch(s.status){case f.D.INIT:return t??a.createElement(t2.c5,null);case f.D.LOADING:return a.createElement(t2.c5,null);case f.D.FAILURE:return a.createElement(t2.cN,{error:s.error});case f.D.SUCCESS:{let t=a.createElement(rD,{embedded:e,appSelection:n,setAppSelection:i,onClose:r,pagesList:l});return e?t:a.createElement(r_,null,t)}}});function r_({children:e}){let t=(0,d.m4)(b.Yv);return a.createElement("div",{className:m.cx.hFull.$},a.createElement(g.g,{direction:"horizontal",width:"fill-parent",height:32,padding:8,spacing:32,backgroundColor:"toolbar"},a.createElement(v.a,{fontWeight:"bold",color:"toolbar"},t.type),Object.entries(t.properties).map(([e,t])=>a.createElement("span",{key:e},a.createElement(v.a,{color:"toolbar-secondary"},e,": "),a.createElement(v.a,{color:"toolbar",fontFamily:"monospace",fontWeight:"bold"},t)))),e)}function rD({embedded:e,onClose:t,appSelection:r,setAppSelection:n,pagesList:i}){(0,I.m_)({appSelection:r,setAppSelection:n});let l=a.useRef(null),m=a.useRef(null),{windowInnerWidth:g}=(0,c.U)(),[v,C]=a.useState("35%"),[T,N]=a.useState("50%"),_=a.useRef(null),D=a.useRef(null),{isDragging:x}=(0,u.u)(_.current,a.useCallback(e=>{let t=e.clientX/g;C(`${(100*t).toFixed(2)}%`)},[g])),{isDragging:O}=(0,u.u)(D.current,a.useCallback(e=>{let t=m.current;if(!t)return;let r=(e.clientX-t.getBoundingClientRect().left)/t.clientWidth;N(`${(100*r).toFixed(2)}%`)},[])),A=(0,h.my)(I.wV),P=(0,h.my)(I.YR),k=a.useCallback(e=>{let t=l.current;document.activeElement!==t&&(e.keyCode===p.as.FORWARD_SLASH&&t?(t.focus(),e.preventDefault()):e.keyCode===p.as.BRACKET_LEFT?(s.qE.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"keyboard"}),A()):e.keyCode===p.as.BRACKET_RIGHT&&(s.qE.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"keyboard"}),P()))},[A,P]),F=(0,d.m4)(I.io),L=(0,d.m4)(I.sr),R=(0,d.m4)(S.gR),V=(0,d.m4)(w),B=a.useMemo(()=>{let e;if(L&&(e=L.computedProperties(),V.status===f.D.SUCCESS)){if("DOCUMENT"===L.nodeType())e=[...e,(0,E.Kc)(V.value)];else{let t=V.value.get(L.guidStr());t&&t.length&&(e=[...e,(0,E.ym)(t)])}}return e??[]},[L,V]),G=(0,d.m4)(b.El);return(a.useEffect(()=>{s.qE.trackDefinedEvent("figmascope.used",{scene_type:(()=>{switch(G.type){case"server_checkpoint":return"checkpoint";case"server_checkpoint_diff":case"local_diff_file":return"diff";case"multiplayer_journal":return"multiplayer_journal";case"server_file":case"local_file":case"pasted_data":break;default:(0,o.GE)(G)}return"file"})(),embedded:!!e,backend:"backend"in G?G.backend:"unknown"})},[G,e]),(0,d.m4)(b.OO))?a.createElement(I.kZ.Provider,{value:n??null},a.createElement("div",{className:"figmascope_main_view--root--Bd-g1",style:y.sx.if(x||O,{cursor:"ew-resize"}).$,onKeyDown:k},a.createElement("div",{className:"figmascope_main_view--left--CUYrg",style:{width:v}},a.createElement(t8,{searchRef:l}),a.createElement(ez,{className:"figmascope_main_view--layersPanel---8k3A"},a.createElement("div",{ref:_,style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}}),a.createElement(e2,{pagesList:i}))),a.createElement("div",{className:"figmascope_main_view--right--7jX1p"},a.createElement(rC,{selectedNode:L,diffNode:R,onClose:t}),L&&a.createElement("div",{className:"figmascope_main_view--rightContents--iSsTw",ref:m},a.createElement(ez,{className:"figmascope_main_view--nodeFieldsPanel--spSyC",style:{width:T}},a.createElement("div",{ref:D,style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}}),L?a.createElement(ro,{panel:"middle",items:L.nodeFieldProperties(),diffItems:null==R?void 0:R.nodeFieldProperties(),key:F}):a.createElement("h1",null,"Node not found: ",a.createElement(en,{guid:F}))),a.createElement(ez,{className:"figmascope_main_view--computedPropertiesPanel--No2ua"},L&&a.createElement(ro,{panel:"right",items:B,diffItems:null==R?void 0:R.computedProperties(),key:F})))))):a.createElement(t2.cN,{error:"This scene has no root nodes. This is likely a bug in FigmaScope."})}},498472:(e,t,r)=>{r.d(t,{u:()=>i});var n=r(307824);function i(e,t){let[r,i]=n.useState(!1);return n.useLayoutEffect(()=>{if(!e)return;let r=n=>{i(!1),e.releasePointerCapture(n.pointerId),e.removeEventListener("pointermove",t),e.removeEventListener("pointerup",r)},n=n=>{i(!0),e.setPointerCapture(n.pointerId),e.addEventListener("pointermove",t),e.addEventListener("pointerup",r)};return e.addEventListener("pointerdown",n),()=>{e.removeEventListener("pointerdown",n)}},[t,e]),{isDragging:r}}}}]);

//# debugId=b12714e9-3833-5d69-ad89-3ab8785cf2b5

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/1dbf1b884346701b1d0e82ac394caa0eb5edc9aa/5816-49b149414583b3c8.min.js.map
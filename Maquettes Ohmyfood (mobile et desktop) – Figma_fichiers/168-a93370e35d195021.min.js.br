"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="17b18e98-d04b-52f1-bc26-d4dac1f950d0")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[168],{647460:(e,t,n)=>{n.d(t,{AT:()=>Q,AX:()=>y,EV:()=>r,G1:()=>Y,GO:()=>et,IT:()=>C,IV:()=>M,IX:()=>I,Im:()=>a,JQ:()=>B,KU:()=>E,Ko:()=>O,ML:()=>F,Mh:()=>L,Oo:()=>w,Os:()=>q,Ou:()=>p,QL:()=>W,Qn:()=>R,Qr:()=>d,S:()=>V,SE:()=>b,U3:()=>D,UF:()=>en,Ud:()=>i,Y:()=>N,Y9:()=>k,Yb:()=>S,_P:()=>o,_Q:()=>ee,_q:()=>H,aS:()=>U,aW:()=>G,e3:()=>c,eM:()=>s,iy:()=>v,k$:()=>l,kH:()=>J,kR:()=>z,oL:()=>K,oT:()=>X,ov:()=>_,q6:()=>A,qj:()=>Z,sD:()=>j,sF:()=>T,sQ:()=>P,sd:()=>$,sv:()=>f,ue:()=>x,us:()=>g,w9:()=>m,y3:()=>u,yS:()=>h});let a="canvas_search--searchContainer--LzfSY",r="canvas_search--searchBarHidden--9EJy-",l="canvas_search--searchInput--aCP6B canvas_search--input--aPqLZ",s="canvas_search--searchInputSingleLine--DUHFr",i="canvas_search--searchBar--xhROb canvas_search--input--aPqLZ",o="canvas_search--resultsCount--X8A1s",c="canvas_search--whiteboardSidebarShown--uykZK",u="canvas_search--uiHidden--hLgkP",d="canvas_search--searchSidebarContainer--1tcxd",p="canvas_search--icon32--bmz-L",m="canvas_search--searchBarContainer--rxvLi",g="canvas_search--searchBarRow--9aFwa",h="canvas_search--searchBarRowMinimal--dEN6B canvas_search--searchBarRow--9aFwa",_="canvas_search--searchIconAndInput--3tdWb",f="canvas_search--searchIconPlaceholderFill--MohCt",v="canvas_search--resultsContainer--b0olz",y="canvas_search--resultsList--Hciv7",E="canvas_search--layerIcon--RpNZF",w="canvas_search--selected--Ng41y",b="canvas_search--disabled--dMwG7",S="canvas_search--indirectlySelected--2E-TI",T="canvas_search--symbol--614fP",C="canvas_search--layerIconContainer--IuQxq",N="canvas_search--resultInfoHeader--GM1gm",I="canvas_search--resultInfo--PKQiZ",A="canvas_search--resultsText--ubMAu",k="canvas_search--resultsFooterText--rPxEh",P="canvas_search--dotDivider--zvIFp",M="canvas_search--resultRow--xX8wI",x="canvas_search--isHoverSelecting--LlQSE",O="canvas_search--singletonHoverSelected--pCLSM",R="canvas_search--resultSubheading--XCt-Z",L="canvas_search--offlineIconContainer--qVbhY",D="canvas_search--offlineIcon--F0sbc",F="canvas_search--hoverSelectedTop--mA-fk canvas_search--_hoverSelectedBase--JOTSs",K="canvas_search--hoverSelectedMiddle--OBw7k canvas_search--_hoverSelectedBase--JOTSs",G="canvas_search--hoverSelectedBottom--zH7Va canvas_search--_hoverSelectedBase--JOTSs",U="canvas_search--resultText--RXqeC",B="canvas_search--multiline--1gb-l",V="canvas_search--strikethrough--0xsma",H="canvas_search--otherResults--G94fM",W="canvas_search--searchScopeButton--Grrvz",Y="canvas_search--pageScopeDropdown--K5y-7",q="canvas_search--dropdownOption--dQRr3",X="canvas_search--replaceInput--TmEDS canvas_search--searchBarRow--9aFwa canvas_search--input--aPqLZ",z="canvas_search--replaceButtons--1sbwP",$="canvas_search--collapsableHeaderToggle--kHXh8",j="canvas_search--collapsableHeaderName---qij5",Q="canvas_search--collapsableHeaderCount---NL3l",Z="canvas_search--expandIcon--6eieV",J="canvas_search--loadingSpinner--Y5hDC",ee="canvas_search--loadingSpinnerDelay--Rk3MX",et="canvas_search--searchIconButton--lg-V8",en="canvas_search--searchSidebarMinimal--I1hwg canvas_search--searchSidebarContainer--1tcxd"},768764:(e,t,n)=>{n.d(t,{A5:()=>V,AL:()=>p,Ah:()=>s,G6:()=>en,Gi:()=>I,Gw:()=>r,KI:()=>K,KY:()=>c,Kp:()=>U,M$:()=>x,Mz:()=>W,OC:()=>h,QD:()=>k,QP:()=>F,Qz:()=>G,SA:()=>d,Sm:()=>N,Sx:()=>z,Sy:()=>w,U3:()=>ea,W8:()=>Y,WA:()=>Z,Wm:()=>l,Ws:()=>R,X5:()=>O,YH:()=>E,YN:()=>u,YT:()=>f,Yd:()=>M,Yn:()=>et,_D:()=>B,aC:()=>D,ai:()=>X,cP:()=>o,cl:()=>C,ek:()=>_,g$:()=>J,gd:()=>j,iS:()=>P,iw:()=>m,iy:()=>H,jU:()=>g,kV:()=>a,ke:()=>i,m:()=>T,mY:()=>v,mw:()=>Q,od:()=>ee,ot:()=>y,qQ:()=>A,sl:()=>S,wP:()=>b,wZ:()=>q,yR:()=>L,ys:()=>$});let a="pages_panel--pagesPanel--YVSDg",r="pages_panel--pageChangesCount--ZXLpV",l="pages_panel--verticalFlexContainer--9uwfT",s="pages_panel--objectPanelContent--Zy2S3",i="pages_panel--pagesPanelContent--ZGkcM pages_panel--pagesPanelContentWhiteboard--gUJEi",o="pages_panel--pagesHeaderContainer--i92Ni",c="pages_panel--chevron--VmSv1",u="pages_panel--pagesHeaderContainerWithShadow--sVSKu pages_panel--pagesHeaderContainer--i92Ni",d="pages_panel--pagesHeaderText--4UIwl",p="pages_panel--pagesHeaderTextReadOnly--lwPlL",m="pages_panel--pagesHeaderTextDimmed--GsBV9",g="pages_panel--renaming--IPs-u",h="pages_panel--pagesRowSpacer--2ASia",_="pages_panel--pageRowSpacerInsertBefore--tIfb1 pages_panel--pagesRowSpacer--2ASia",f="pages_panel--pageRowSpacerInsertAfter--6kYkh pages_panel--pagesRowSpacer--2ASia",v="pages_panel--pageRowSpacerInsertBeforeTop--wJ-N- pages_panel--pagesRowSpacer--2ASia",y="pages_panel--pageRowSpacerInsertAfterBottom--vJwL5 pages_panel--pagesRowSpacer--2ASia",E="pages_panel--pagesList--GVSQw",w="pages_panel--pendingPagesList--rKp9D pages_panel--pagesList--GVSQw",b="pages_panel--hoverByMouse---pkjS",S="pages_panel--hoverState--FXSo2",T="pages_panel--pageRow--7h-Lv pages_panel--pageRowBase--d4OsN",C="pages_panel--pageRowSelected--xuzyI",N="pages_panel--flipVertically--O5Tht",I="pages_panel--pageRowSvgV2--y3cIV pages_panel--pageRowSvg--lKPoU",A="pages_panel--pageRowSvgV2Unselected--zlmq5 pages_panel--pageRowSvgV2--y3cIV pages_panel--pageRowSvg--lKPoU",k="pages_panel--renameableNode--Rl1H1",P="pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",M="pages_panel--disabledNodeText--Gar5X pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",x="pages_panel--renameableNodeTextEnd--pdvNO pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",O="pages_panel--renameableNodeTextEndDisabled--TLJxp pages_panel--renameableNodeTextEnd--pdvNO pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",R="pages_panel--newPageButton--P7XZq",L="pages_panel--scrollContainer--aXdXr",D="pages_panel--tab--Uge5B",F="pages_panel--tabActive--BitzC pages_panel--tab--Uge5B",K="pages_panel--sidebarLeftHeadingIcons--VMQcd",G="pages_panel--sidebarLeftHeadingTabStrip--2qRhH",U="pages_panel--pageTab--hc8gz",B="pages_panel--isHidden--Rc54P",V="pages_panel--pageTabViewOnly--ZH2yx",H="pages_panel--pageTabViewOnlySearch--4XmZl",W="pages_panel--pageTabDevHandoff--Bq1-h pages_panel--pageTab--hc8gz",Y="pages_panel--pageExpandToggle--XoZEs",q="pages_panel--pageTabText--ujePC ellipsis--ellipsis--Tjyfa",X="pages_panel--tabsHeaderBordered--f-Lhn pages_panel--tabsHeader--ez-pH",z="pages_panel--assetsTab--OKgP1",$="pages_panel--teamLibraryUpdatesIndicator--ClCmP",j="pages_panel--hidden--dmcG8",Q="pages_panel--pageReady--L9tpk",Z="pages_panel--showAllButtonContainer--I73hV",J="pages_panel--pageRowDividerContainer--NyNS9 pages_panel--pageRowBase--d4OsN",ee="pages_panel--pageRowDivider--NO0-i",et="pages_panel--dividerRowSpacer--5WdCQ",en="pages_panel--offlineContainer--M4S1E",ea="pages_panel--offlineIcon--pf66o"},538524:(e,t,n)=>{n.d(t,{CI:()=>A,CY:()=>S,KO:()=>r,Kc:()=>w,Ki:()=>y,Kq:()=>s,MA:()=>h,Os:()=>E,Qj:()=>g,Qx:()=>o,U7:()=>c,UY:()=>b,_6:()=>f,_k:()=>i,aG:()=>N,aS:()=>_,e2:()=>v,g5:()=>a,gd:()=>m,gt:()=>C,kX:()=>I,mU:()=>u,qA:()=>d,t5:()=>p,w7:()=>T,yK:()=>l});let a="instance_panel--panelTitleRow--TN-S6",r="instance_panel--collapsibleTitleRow--YQUPk",l="instance_panel--instanceNameContainer--DjJ1a",s="instance_panel--isInComponentPlayground--jSk5E",i="instance_panel--instanceIcon--9Rb3Q",o="instance_panel--pickerButtonText--37jAr ellipsis--ellipsis--Tjyfa",c="instance_panel--propPillContainer--uUMdd",u="instance_panel--pickerButton--aETR-",d="instance_panel--selectedPickerButton--PqYr4",p="instance_panel--sublayerPanelWithHover--jgbud",m="instance_panel--sublayerPanelMixedState--h9Vb4",g="instance_panel--chevronIcon--0j2aS",h="instance_panel--viewOnlyPickerButton--70Wl5 instance_panel--pickerButton--aETR-",_="instance_panel--selectInstanceIcon--9lKUr",f="instance_panel--instanceNameTitle--khSFz ellipsis--ellipsis--Tjyfa",v="instance_panel--instanceNameTitleWide--InQRA instance_panel--instanceNameTitle--khSFz ellipsis--ellipsis--Tjyfa",y="instance_panel--titleButtons--8ha4T",E="instance_panel--dropdownOption--g0g2W",w="instance_panel--restoreComponentButtonRow--zPAzH",b="instance_panel--restoreComponentButton--kkxan",S="instance_panel--missingVariantDescription--1OogA",T="instance_panel--missingVariantButtonContainer--T5wE1",C="instance_panel--missingVariantButton--WgVP5",N="instance_panel--updateIcon--4lm0w",I="instance_panel--propsContainer--CPc3n",A="instance_panel--bubbledInstancePropSection--9PzLJ"},912480:(e,t,n)=>{n.d(t,{KY:()=>o,Ow:()=>s,U7:()=>l,aG:()=>c,cn:()=>a,iu:()=>i,k1:()=>u,o9:()=>r});let a="layer_panel--blendMode--ze-EB",r="layer_panel--opacity--8b7LU",l="layer_panel--propPillContainer--HA1XZ",s="layer_panel--visible--O8HLY",i="layer_panel--visibleHintIcon--40eBB",o="layer_panel--chevron--UUQ0D",c="layer_panel--blendModeInput--46kUO",u="layer_panel--opacityVar--wSBBb"},202096:(e,t,n)=>{n.d(t,{CA:()=>_,Eb:()=>g,GC:()=>w,Lj:()=>y,QR:()=>u,UP:()=>v,UX:()=>S,Wi:()=>r,Wu:()=>p,Yh:()=>f,_k:()=>l,ec:()=>a,g7:()=>m,gP:()=>d,gt:()=>o,o3:()=>c,qm:()=>b,sZ:()=>i,uE:()=>E,um:()=>s,uw:()=>h});let a="stack_panel_v4--doubleRow--JWS-N",r="stack_panel_v4--tripleRow--vu288 stack_panel_v4--doubleRow--JWS-N",l="stack_panel_v4--stackModeControl--Hdn8q",s="stack_panel_v4--stackSpacingControlVariables--KlE-F",i="stack_panel_v4--stackCounterSpacingControlVariables--SIIo0",o="stack_panel_v4--stackAlignmentControl--pvRL-",c="stack_panel_v4--layoutDetailsIcon--aBd9A",u="stack_panel_v4--gridLeft--zvUyF",d="stack_panel_v4--gridRight--nE-KR",p="stack_panel_v4--gridTop--y9uDT",m="stack_panel_v4--gridBottom--2Asj6",g="stack_panel_v4--gridLeftLong--d3-sD",h="stack_panel_v4--paddingControlsToggleIcon--X-Ifk",_="stack_panel_v4--inactiveLabel--fcNUD raw_components--iconInsideBorderFocusWithin--2g7fO",f="stack_panel_v4--input--VwHBa raw_components--flushLeft--YH-5P",v="stack_panel_v4--readOnlyText--ecb6J text--fontPos11--2LvXf text--_fontBase--QdLsd",y="stack_panel_v4--updateRow--iDASO",E="stack_panel_v4--migrationUpgradeButton--Z-zTU stack_panel_v4--_migrationButton--Es40L",w="stack_panel_v4--migrationDowngradeButton--JfBHS stack_panel_v4--_migrationButton--Es40L",b="stack_panel_v4--questionMarkIcon--B-faL",S="stack_panel_v4--ui3StackModeControl--GzLVB"},662968:(e,t,n)=>{n.d(t,{CA:()=>r,CS:()=>c,Dr:()=>A,Ep:()=>C,Ir:()=>d,KS:()=>N,Ku:()=>S,M7:()=>b,QR:()=>i,T7:()=>m,UT:()=>h,Ws:()=>v,Yh:()=>a,_M:()=>f,_N:()=>l,a_:()=>w,cZ:()=>T,eS:()=>s,ee:()=>E,gP:()=>o,iw:()=>p,oF:()=>y,qK:()=>I,uS:()=>_,xi:()=>g,yI:()=>u});let a="transform_panel--input--nRDX0 raw_components--flushLeft--YH-5P",r="transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO",l="transform_panel--dropdownIcon--7m7wZ",s="transform_panel--iconButton--EGQDL",i="transform_panel--gridLeft--W4laA",o="transform_panel--gridRight--3nSe7",c="transform_panel--scrubbableInputLeftColNoFocus--PBjfS",u="transform_panel--scrubbableInputRightColNoFocus--oK-l-",d="transform_panel--scrubbableInputLeftCol--AP3qU raw_components--borderFocusWithin--BaipZ transform_panel--scrubbableInputLeftColNoFocus--PBjfS",p="transform_panel--scrubbableInput--2QO5M transform_panel--scrubbableInputLeftCol--AP3qU raw_components--borderFocusWithin--BaipZ transform_panel--scrubbableInputLeftColNoFocus--PBjfS",m="transform_panel--arcToolInputs--dchQV raw_components--borderFocusWithin--BaipZ",g="transform_panel--arcToolInputsUi3--H4Qwg",h="transform_panel--arcToolRatio--G9Dq-",_="transform_panel--arcToolStart--BcMpc",f="transform_panel--arcToolSweep--Rb34n",v="transform_panel--arcToolInput--hhYYv",y="transform_panel--framePresetDropdown--qiajY",E="transform_panel--framePresetDropdownSmall--bsIDl",w="transform_panel--mirroringIcon--fj7AY transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO",b="transform_panel--handleMirroring--pp-Ug",S="transform_panel--handleMirroringInput--NteeH",T="transform_panel--handleMirroringChevron--cJBan",C="transform_panel--checkbox--dxHjN",N="transform_panel--checkboxLabel--sCUAV checkbox--_checkboxLabel--shM0N",I="transform_panel--applyVariableOption--olkGv",A="transform_panel--framePresetDropdownInput--gsuy1"},513252:(e,t,n)=>{n.d(t,{CE:()=>o,In:()=>d,O:()=>u,Oe:()=>c,Wu:()=>l,YX:()=>i,aG:()=>s,o0:()=>a,wt:()=>r});let a="variable_mode_entries--variableSetName--hmoV4",r="variable_mode_entries--ui3VariableSetName--eqW9C variable_mode_entries--variableSetName--hmoV4",l="variable_mode_entries--variableSetModeSelect--P6crF",s="variable_mode_entries--updateIcon--BNz-S",i="variable_mode_entries--dropdownDescription--OQef0",o="variable_mode_entries--row--8OoWO",c="variable_mode_entries--infoIconContainer--DmUPj",u="variable_mode_entries--infoIcon--JylKl",d="variable_mode_entries--infoOption--fKiWW"},600239:(e,t,n)=>{n.d(t,{AX:()=>u,Co:()=>l,MH:()=>a,OA:()=>g,S_:()=>o,c$:()=>s,cn:()=>m,em:()=>d,iw:()=>c,uo:()=>r,wf:()=>h,y8:()=>_,yK:()=>p,yp:()=>i});let a="google_device_try_file_modal--googleDeviceClaimModal--SnMzX",r="google_device_try_file_modal--googleDeviceReceivedEmailModal--wvtHu",l="google_device_try_file_modal--imgContainer--4BUIg",s="google_device_try_file_modal--image--u4Tnt",i="google_device_try_file_modal--textContainer--GamBO",o="google_device_try_file_modal--googleDeviceImage--xfwpW",c="google_device_try_file_modal--googleDeviceClaimHeader--K6jxS text--fontPos20--Bcz97 text--_fontBase--QdLsd",u="google_device_try_file_modal--googleDeviceClaimSubtitle--Whve5 text--fontPos13--xW8hS text--_fontBase--QdLsd",d="google_device_try_file_modal--googleDeviceClaimSubtitleBold--X6Koc text--fontPos13--xW8hS text--_fontBase--QdLsd",p="google_device_try_file_modal--googleDeviceClaimDisclaimer--6nB4d text--fontPos12--YsUAh text--_fontBase--QdLsd",m="google_device_try_file_modal--googleDeviceClaimInlineLink--oLkX-",g="google_device_try_file_modal--googleDeviceClaimError--Ogemp text--fontPos14--OL9Hp text--_fontBase--QdLsd",h="google_device_try_file_modal--googleDeviceClaimInput--9V2zI",_="google_device_try_file_modal--googleDeviceClaimInputError--PsSOq"},98344:(e,t,n)=>{n.d(t,{k:()=>a});let a="highlight_syntax_colors--highlightSyntaxColors--iC7iJ"},788156:(e,t,n)=>{n.d(t,{e:()=>c,n:()=>o});var a=n(4580),r=n(843148),l=n(762820),s=n(563404),i=n(397888);function o(e=!0){let t=(0,s.Ir)(["add-selection-ready-status","remove-selection-ready-status"]);return!(0,i.uc)("isSceneReadOnly")&&(t["add-selection-ready-status"]||t["remove-selection-ready-status"]&&!e)}function c(e){let t=(0,a.q)(e=>e.mirror.appModel.activeCanvasEditModeType);return!!e&&t===l.a_v.DEV_HANDOFF&&(e.isFrame||e.isSymbol||(0,r.Ub)().dt_workflows_cc_sections&&e.isSection)}},656629:(e,t,n)=>{n.d(t,{CS:()=>T,K_:()=>C,Ks:()=>S,a6:()=>N,e4:()=>b,iy:()=>I,kT:()=>w,oh:()=>f,q6:()=>v,zv:()=>E});var a=n(307824),r=n(120304),l=n(703536),s=n.n(l),i=n(139776),o=n(4580),c=n(560072),u=n(762820),d=n(540696),p=n(655068),m=n(392992),g=n(824960);function h(e){return(0,d.Er)(e)?0:e??0}function _(e,t,n){var a;return"NONE"!==e.stackMode?e[t]:null==(a=e.inferredAutoLayoutResult)?void 0:a[n]}function f(){let e;let{selectionProperties:t,sceneGraph:n,sceneGraphSelection:a}=(0,o.q)(e=>({selectionProperties:e.mirror.selectionProperties,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),r=(0,g.mY)(n,(0,g.En)(a)),l=(null==r?void 0:r.parentNode)||null,s=function(e){let t=null==e?void 0:e.borderStrokeWeightsIndependent;if((0,d.EH)(t)&&t){let{borderTopVisible:t,borderBottomVisible:n,borderLeftVisible:a,borderRightVisible:r,borderTopWeight:l,borderBottomWeight:s,borderLeftWeight:i,borderRightWeight:o}=e;return{top:t?h(l):0,bottom:n?h(s):0,left:a?h(i):0,right:r?h(o):0}}let n=null==e?void 0:e.strokePaints;if((0,d.EH)(n)&&Array.isArray(n)&&n.length>0){let t=((null==n?void 0:n.filter(e=>(null==e?void 0:e.visible)&&((null==e?void 0:e.opacity)??!1)))||[]).length>0?h(null==e?void 0:e.strokeWeight):0;return{top:t,bottom:t,left:t,right:t}}return{top:0,bottom:0,left:0,right:0}}(t),i={topLeft:h(t.rectangleTopLeftCornerRadius),topRight:h(t.rectangleTopRightCornerRadius),bottomLeft:h(t.rectangleBottomLeftCornerRadius),bottomRight:h(t.rectangleBottomRightCornerRadius)},c="NONE"!==t.stackMode||t.inferredAutoLayoutResult&&"NONE"!==t.inferredAutoLayoutResult.stackMode;e=c?{top:h(_(t,"stackVerticalPadding","stackPaddingTop")),bottom:h(_(t,"stackPaddingBottom","stackPaddingBottom")),left:h(_(t,"stackHorizontalPadding","stackPaddingLeft")),right:h(_(t,"stackPaddingRight","stackPaddingRight"))}:{top:0,bottom:0,left:0,right:0};let u=c&&t.bordersTakeSpace?{top:e.top+s.top,bottom:e.bottom+s.bottom,left:e.left+s.left,right:e.right+s.right}:{...e},p=h(t.width)-u.left-u.right,m=h(t.height)-u.top-u.bottom;return{distance:l&&"NONE"!==l.stackMode&&(null==r?void 0:r.stackPositioning)!=="ABSOLUTE"?function(e,t){if(!e||!t||"NONE"===t.stackMode)return{};let n=t.childrenNodes.filter(e=>(null==e?void 0:e.stackPositioning)!=="ABSOLUTE").map(e=>null==e?void 0:e.guid),a=n.indexOf(e.guid),r=0===a,l=a===n.length-1;return"HORIZONTAL"===t.stackMode?{top:{distance:t.stackTopPadding,type:"padding"},bottom:{distance:t.stackBottomPadding,type:"padding"},left:r?{distance:t.stackLeftPadding,type:"padding"}:{distance:t.stackSpacing,type:"spacing"},right:l?{distance:t.stackRightPadding,type:"padding"}:{distance:t.stackSpacing,type:"spacing"}}:{top:r?{distance:t.stackTopPadding,type:"padding"}:{distance:t.stackSpacing,type:"spacing"},bottom:l?{distance:t.stackBottomPadding,type:"padding"}:{distance:t.stackSpacing,type:"spacing"},left:{distance:t.stackLeftPadding,type:"padding"},right:{distance:t.stackRightPadding,type:"padding"}}}(r,l):function(e,t){if(!e||!t||"CANVAS"===t.type||"DOCUMENT"===t.type||"SECTION"===t.type)return{};let n=t.absoluteBoundingBox.w,a=t.absoluteBoundingBox.h,r=t.absoluteBoundingBox.y,l=t.absoluteBoundingBox.x,s=e.absoluteBoundingBox.w,i=e.absoluteBoundingBox.h,o=e.absoluteBoundingBox.y,c=e.absoluteBoundingBox.x;return{top:{distance:o-r,type:"distance"},bottom:{distance:r+a-(i+o),type:"distance"},left:{distance:c-l,type:"distance"},right:{distance:n+l-(c+s),type:"distance"}}}(r,l),border:s,radius:i,padding:e,width:p,height:m}}let v=12;function y(e){return e&&e>2?Math.min(e,v):2}function E(e){return{borderTopLeftRadius:y(e.topLeft),borderTopRightRadius:y(e.topRight),borderBottomRightRadius:y(e.bottomRight),borderBottomLeftRadius:y(e.bottomLeft)}}function w(e,t,n){let a=y(n),r="top"===e?"bottom":"top",l="left"===t?"right":"left";return{[`border${s()(e)}${s()(t)}Radius`]:a,top:"top"===e?0:void 0,bottom:"bottom"===e?0:void 0,left:"left"===t?0:void 0,right:"right"===t?0:void 0,[`border${s()(e)}Width`]:"1px",[`border${s()(r)}Width`]:"0px",[`border${s()(t)}Width`]:"1px",[`border${s()(l)}Width`]:"0px"}}function b(e){return!!e&&"-"!==e&&"string"==typeof e}let S=(e="NONE")=>"HORIZONTAL"===e||"VERTICAL"===e;function T(e=0){if(0===e)return"-";let t=`${e}`.indexOf(".");if(-1===t||t>3)return`${Math.round(e)}`;let n=parseFloat(e.toFixed(4-t-1));return 0===n?"-":`${n}`}function C(e=0,t,n){if(!n||(0,d.Er)(t))return e;let a={[u.MXH.FILL_CONTAINER]:(0,c.t)("inspect_panel.properties.fill"),[u.MXH.HUG_CONTENT]:(0,c.t)("inspect_panel.properties.hug"),[u.MXH.FIXED]:(0,c.t)("inspect_panel.properties.fixed")}[t||u.MXH.FIXED],r=(e||0).toLocaleString("en",{maximumFractionDigits:2});return`${a} (${r}px)`}function N(...e){let[t=0,n=0,a=0,r=0]=e;return(0,i.MP)(e)?0!==t?[t]:void 0:[t,n,a,r]}function I(){var e;let t=(0,r.w1)(m.AX),n=(0,r.w1)(e=>e.mirror.selectionProperties.fillPaints)||null,l=a.useMemo(()=>{var e;return null==(e=(0,p.qA)(n))?void 0:e.filter(e=>e.opacity>0&&e.visible)},[n]);if((null==l?void 0:l.length)!==1||!(null==(e=l[0])?void 0:e.image))return null;let s=(0,p.wb)(l[0].image);return t&&s?l[0]:null}},641636:(e,t,n)=>{n.d(t,{M:()=>i});var a=n(307824),r=n(886420),l=n(184252),s=n(219868);function i({minimal:e}){let t=(0,s.gp)();return Object.values(t).filter(e=>!!e.explicitMode).length?a.createElement(l.e_,{title:"Modes",recordingKey:"modes",noBorder:e,snugTitle:e,padding:e?l.CK.LESS_BOTTOM:l.CK.EXTRA_BOTTOM},Object.entries(t).map(([e,t])=>{var n;let s=null==(n=t.modeOptions.find(e=>(0,r.QZ)(e.modeId,t.explicitMode)))?void 0:n.name;return a.createElement(l.GA,{key:e,name:t.collectionName,value:s})})):null}},306892:(e,t,n)=>{function a(e){try{return new URL(e),!0}catch(e){return!1}}function r(e){return e.startsWith("http://")||e.startsWith("https://")}n.d(t,{a:()=>a,l:()=>r})},828524:(e,t,n)=>{let a;n.d(t,{SX:()=>T,c$:()=>E,cr:()=>w,qQ:()=>S});var r=n(307824),l=n(120304),s=n(250008),i=n(103839),o=n(33828),c=n(560072),u=n(619712),d=n(148812),p=n(490820),m=n(762820),g=n(229372),h=n(225512),_=n(4388),f=n(491776),v=n(790184),y=((a=y||{}).GENERIC="GENERIC",a.OFFLINE="OFFLINE",a.THUMBNAIL_TIMEOUT="THUMBNAIL_TIMEOUT",a);function E(e){switch(e){case"GENERIC":return(0,c.t)("design_systems.playground.unable_to_load");case"OFFLINE":return(0,c.t)("design_systems.playground.unable_to_load_while_offline");case"THUMBNAIL_TIMEOUT":return(0,c.t)("design_systems.playground.unable_to_load_thumbnail")}}function w(e){switch(e){case"GENERIC":return(0,c.t)("design_systems.playground.unable_to_load_help_text");case"OFFLINE":return(0,c.t)("design_systems.playground.unable_to_load_while_offline_help_text");case"THUMBNAIL_TIMEOUT":return(0,c.t)("design_systems.playground.unable_to_load_thumbnail_help_hext")}}function b(e){let[t,n]=r.useState(),[a,l]=r.useState(),[s,o]=r.useState(!1),[c,u]=r.useState(!1),[d,p]=r.useState(!1),g=r.useCallback(()=>{var t;let a=m.i46.generatePlaygroundThumbnail(e??null),r=m.i46.getPlaygroundNodeData();(null==(t=a.pixels)?void 0:t.length)>0?(n({src:(0,_.me)(a.pixels,new i.Cg(a.width,a.height)),width:a.width/a.scale,height:a.height/a.scale}),l(r),u(!1)):u(!0)},[e]),f=r.useCallback(e=>{o(e),p(!0)},[p]),{onSetPercentImagesLoaded:v,onResetTracker:y}=function(e){let[t,n]=r.useState(0),[a,l]=r.useState(0),[s,i]=r.useState(null),o=r.useCallback(()=>{n(0),l(0),i(null)},[]);return r.useEffect(()=>{function n(n,r){if(t>n&&t<r&&a<=n){let n=Date.now();(null===s||n-s>1e3)&&(i(n),l(t),e())}}n(.25,.5),n(.5,.75),n(.75,1)},[a,s,e,t]),r.useEffect(()=>{1===t&&(e(),l(1))},[e,t]),r.useMemo(()=>({onSetPercentImagesLoaded:n,onResetTracker:o}),[n,o])}(g);return r.useEffect(()=>(0,h.q)(f),[f]),r.useEffect(()=>()=>m.i46.clearPlaygroundScene(),[]),r.useEffect(()=>{d&&setTimeout(()=>{g(),p(!1)},0)},[d,p,g]),r.useMemo(()=>({setPlaygroundNodeData:l,onSetPercentImagesLoaded:v,onResetTracker:y,thumbnailData:t,playgroundNodeData:a,hasChangesToReset:s,hasThumbnailErrors:c,setHasChangesToReset:o}),[l,v,y,t,a,s,c,o])}function S({canViewPlayground:e,canvasAsset:t,onLoaded:n,onError:a,thumbnailOptions:l}){let[i,c]=r.useState(t),{setPlaygroundNodeData:u,onSetPercentImagesLoaded:h,onResetTracker:_,thumbnailData:f,playgroundNodeData:y,hasChangesToReset:E,hasThumbnailErrors:w,setHasChangesToReset:S}=b(l),T=i!==t||!y,[C,N]=r.useState(null),I=r.useCallback(()=>{m.i46.clearPlaygroundScene(),u(void 0)},[u]),A=r.useCallback(async(e=!0)=>{let n;if(t.type!==v.Af.COMPONENT&&t.type!==v.Af.STATE_GROUP&&t.type!==v.Af.MODULE){I();return}let a=Date.now();if(N(null),t.isLocal)n=null;else try{let e=d.Uv.getCanvas({canvas_url:t.canvas_url});await Promise.race([e,(0,o.Y2)(100)])||(c(t),u(void 0),S(!1)),n=await e}catch(e){0===e.status?N("OFFLINE"):N("GENERIC"),I(),c(t);return}let r=t.type!==v.Af.STATE_GROUP||t.isLocal?null:t.default_state_key;if(n?m.i46.setPlaygroundSceneFromBuffer(t.node_id,n,e,r,t.file_key):m.i46.setPlaygroundSceneFromLocalAsset(t.node_id)){S(!1),u(m.i46.getPlaygroundNodeData()),c(t),s.qE.trackDefinedEvent("playground.set_scene",{duration:Date.now()-a,assetType:t.type,isLocal:t.isLocal??!1,assetKey:(0,p.OC)(t)}),_(),(0,g.KU)().loadAllImagesUnder(["0:0"],m.auT.NON_ANIMATED_ONLY,"playground.initialLoad",(e,t)=>{h((t-e)/t)},m.i46.getPlaygroundScene());return}if(e){c(t),u(void 0),S(!1),setTimeout(()=>{A(!1)},50);return}N("GENERIC"),I()},[I,_,h,t,u,S]);return r.useEffect(()=>{e?A():c(t)},[e,u,t,I,A]),r.useMemo(()=>{let e=w?"THUMBNAIL_TIMEOUT":C;return!e&&T?{state:"LOADING",previousAssetData:{thumbnailData:f,hasChangesToReset:E,refetchAndResetScene:A,nodeData:y,asset:i}}:(n(),e)?(a(),{state:"ERROR",errorType:e,previousAssetData:{thumbnailData:f,hasChangesToReset:E,refetchAndResetScene:A,nodeData:y,asset:i}}):{state:"LOADED",currentAssetData:{hasChangesToReset:E,refetchAndResetScene:A,nodeData:y,thumbnailData:f,asset:i}}},[T,n,w,C,y,f,a,E,A,i])}function T(){let e=(0,l.w1)(f.GW),t=null==e?void 0:e.guid,n=(0,u.k3)(),a="loaded"===n.status?n.result:void 0,{setPlaygroundNodeData:s,thumbnailData:i,playgroundNodeData:o,hasChangesToReset:c}=b(),d=r.useCallback(()=>{let e=!1;a?e=m.i46.setPlaygroundSceneFromDetachedInfo(a.dataComponentId,"temp-scene"===a.dataLocation):t&&(e=m.i46.setPlaygroundSceneFromSelection()),e||(m.i46.clearPlaygroundScene(),s(void 0))},[t,a,s]);return r.useEffect(()=>{d()},[d]),r.useMemo(()=>o&&i?{hasChangesToReset:c,refetchAndResetScene:d,nodeData:o,thumbnailData:i}:null,[o,i,c,d])}},977844:(e,t,n)=>{n.d(t,{A:()=>p});var a=n(307824),r=n(886420),l=n(570464),s=n(560072),i=n(762820),o=n(979144),c=n(84656),u=n(480856),d=n(219868);function p({fill:e,modes:t,recordingKey:n}){let p=(0,c.s5)((0,o.EB)().showGuids),m=Object.entries(t).map(([e,t])=>({...t,setKey:e})).filter(e=>e.modeOptions.length>1).sort((e,t)=>e.collectionName.toLocaleLowerCase().localeCompare(t.collectionName.toLocaleLowerCase()));return 0===m.length?null:a.createElement(a.Fragment,null,a.createElement("div",{className:"playground_modes_section--title--wPRzF text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement(s.Tx,{id:"design_systems.playground.variable_modes_title"})),m.map(t=>a.createElement(u.YH,{fill:e,key:t.setKey,onChange:e=>{e!==d.aO&&e!==d.cs&&((0,r.QZ)(t.explicitMode||t.inheritMode,e)||(e===d.c4||e===d.GC?i.i46.setVariableModeForPlayground(t.setKey,e):i.i46.setVariableModeForPlayground(t.setKey,e.guid)))},showExplicitOnly:!1,variableSetName:t.collectionName,variableSetKey:t.setKey,modeOptions:t.modeOptions,explicitModeID:t.explicitMode,inheritedModeID:t.inheritMode,isShowingGuids:p,showInheritedModeOption:!1,recordingKey:l.Mx(n,`mode-${t.setKey}`)})))}},746514:(e,t,n)=>{n.d(t,{E:()=>h});var a=n(307824),r=n(562200),l=n(63396),s=n(397888),i=n(256896),o=n(339644),c=n(486111),u=n(840460),d=n(828524);let p="playground_props_section--divider--I23uK";var m=n(873956);function g({componentProps:e,bubbledComponentId:t,productComponentGUID:n,sceneGraph:l,instanceSwapPickerInitialHeight:d,instanceSwapPickerInitialPosition:p,recordingKey:m,containerWidth:g}){let h=(0,s.A1)(),{typedPropDefsExcludingHidden:_,variantPropDefs:f,assignmentValuesByDefId:v,allStateVariantProps:y,backingStateVariantProps:E,statePropertyValues:w}=(0,o.e)(t,e,n,h);return _.length||f.length?a.createElement(r.a,{titleClassName:"playground_props_section--bubbledPropsTitle--8SBPC",isInitiallyOpen:_.length<c.WS,title:a.createElement(u.cF,{canCollapse:!0,shouldHideButtons:!0,isInComponentPlayground:!0,instanceAndSublayerGUIDs:[t],containerWide:g===i.mK.WIDE,recordingKey:m})},a.createElement(c.Mx,{typedPropDefs:_,variantPropDefs:f,assignmentValues:v,allStateVariantProps:y,backingStateVariantProps:E,statePropertyValues:w,productComponentGUID:n,propDimension:i.C4.ASSIGNMENT,guids:[t],forBubbledProps:!0,splitVariantAndTypedProps:!1,instanceSwapPickerInitialHeight:d,instanceSwapPickerInitialPosition:p,sceneGraph:l,inPlayground:!0,recordingKey:m,containerWidth:g})):null}function h({componentProps:e,moduleProps:t,moduleFrameData:n,label:r,playgroundGUID:u,productComponentGUID:h,sceneGraph:_,viewOnlyMode:f,instanceSwapPickerInitialHeight:v,instanceSwapPickerInitialPosition:y,recordingKey:E,containerWidth:w,errorData:b,shouldShowDividerAboveProps:S}){let T=(0,s.A1)(),C=u&&e,{typedPropDefsExcludingHidden:N,variantPropDefs:I,assignmentValuesByDefId:A,allStateVariantProps:k,backingStateVariantProps:P,statePropertyValues:M}=(0,o.e)(u??"",e??{},h,T),x=a.useMemo(()=>{var a,r,l;if(!C)return[];let s=null==(a=e[u])?void 0:a.bubbledNestedInstanceGUIDs;if(s)return s;let i=null==(r=null==t?void 0:t[u])?void 0:r.bubbledNestedInstanceGUIDs;if(i)return i;if(null==n?void 0:n.selectedFrameGUID){let e=null==(l=null==t?void 0:t[n.selectedFrameGUID])?void 0:l.bubbledNestedInstanceGUIDs;if(e)return e}return[]},[e,C,n,t,u]);return b?b.shouldHideError?null:a.createElement(a.Fragment,null,a.createElement("div",{className:p}),a.createElement("div",{className:"playground_props_section--errorBannerContainer--d3nQO"},a.createElement(l.O,{orientation:"vertical",iconSrc:m.c,onClose:()=>b.setShouldHideError(!0),variant:"warning",title:(0,d.c$)(b.errorType)},(0,d.cr)(b.errorType)))):C&&(N.length||I.length||x.length)?a.createElement(a.Fragment,null,S&&a.createElement("div",{className:p}),r,a.createElement(c.Mx,{typedPropDefs:N,variantPropDefs:I,assignmentValues:A,allStateVariantProps:k,backingStateVariantProps:P,statePropertyValues:M,productComponentGUID:h,propDimension:i.C4.ASSIGNMENT,guids:[u],viewOnlyMode:f,forBubbledProps:!1,splitVariantAndTypedProps:!!f,instanceSwapPickerInitialHeight:v,instanceSwapPickerInitialPosition:y,sceneGraph:_,inPlayground:!0,recordingKey:E,containerWidth:w}),x.map(t=>{var n,r;let l=(null==(n=e[t])?void 0:n.backingSymbol)||"",s=(null==(r=e[l])?void 0:r.containingStateGroupGUID)||l;return s?a.createElement(g,{key:t,componentProps:e,bubbledComponentId:t,productComponentGUID:s,sceneGraph:_,instanceSwapPickerInitialHeight:v,instanceSwapPickerInitialPosition:y,recordingKey:E,containerWidth:w}):null})):null}},971672:(e,t,n)=>{n.d(t,{c:()=>c});var a=n(268984),r=n(907236),l=n(37864),s=n(356267),i=n(340628),o=n(466872);let c=(0,a.eg)("HIDE_ALL_PICKERS_IF_SHOWING",e=>{var t;let n=e.getState();n.pickerShown&&e.dispatch(r.U5()),n.instanceSwapPickerShown&&e.dispatch((0,l.es)()),n.stylePickerShown&&e.dispatch(r.CI()),n.stylePreviewShown&&e.dispatch(i.eO()),(null==(t=n.variablePickerShown)?void 0:t.isShown)&&e.dispatch((0,o.w)()),n.pickerInStyleCreationShown&&e.dispatch((0,s._)())})},578700:(e,t,n)=>{n.d(t,{K:()=>_,w:()=>f});var a=n(61836),r=n(506616),l=n(326660),s=n(557044),i=n(967540),o=n(560072),c=n(317704),u=n(472956),d=n(886872),p=n(633188),m=n(206944),g=n(268984),h=n(46604);let _=(0,g.M0)(async(e,t,{loadingKey:n})=>{var s;let g=!1;try{let e=await (0,a.k1)(u.MJL,{fileKey:t.file_key});g="loaded"===e.status&&!!(0,r.Fc)(null==(s=e.data)?void 0:s.deviceTryFile)}catch(e){(0,l.WI)("claimFigJamTryFile","Request failed for fetching LG DeviceTryFileView",e,{reportAsSentryError:!0})}try{let a;a=g?m.H.claimDeviceFile({fileKey:t.file_key}):p.kr.claimTryFile({fileKey:t.file_key}),(0,d.o)(a,e,n);let{data:r}=await a,{save_location:l,folder_name:s,org_id:i}=r.meta,{user:u,currentUserOrgId:_,selectedView:f}=e.getState(),v=(0,o.t)("figjam_try.this_file_has_been_saved_to_drafts");if("team"===l&&s&&(v=(0,o.t)("figjam_try.this_file_has_been_saved_to_folder_name",{folder_name:s})),i&&i!==_&&u){let t={userId:u.id,orgId:i};e.dispatch(h.kH({workspace:t,view:f}))}e.dispatch(c.A.enqueue({message:v}))}catch(t){e.dispatch(i.M.error("Unable to save file. Please try again later."))}}),f=(0,g.M0)(async(e,{userName:t,file_key:n},{loadingKey:a})=>{try{await s.cp.put(`/api/try/file/${n}`,{name:(0,o.t)("figjam_try.default_filename",{userName:t})})}catch(e){console.error(e)}})},664004:(e,t,n)=>{n.d(t,{C:()=>d});var a=n(307824),r=n(120304),l=n(250008),s=n(219096),i=n(323576),o=n(790184),c=n(155112),u=n(293580);function d({entrypoint:e,modalType:t,hasUpdatesToAccept:n}){let d=(0,r.OY)(),p=(0,r.w1)(e=>e.modalShown),m=!1;"editor"===t&&(null==p?void 0:p.type)===o.Kq?m=p.data.entrypoint===e:"figjam"===t&&(null==p?void 0:p.type)===c.o.type&&(m=!0);let g=a.useCallback(()=>{(0,l.we)("toggle_library_modal"),m?d(i.oN()):"editor"===t?(d(i.A5({type:u._A,data:{entrypoint:e,initialTab:n?o.Er.UPDATES:o.Er.LIBRARIES}})),d((0,s.wD)())):d(i.A5({type:c.o,data:{tab:o.Er.LIBRARIES}}))},[m,d,t,e,n]);return{isLibraryModalShown:m,onToggleLibraryModal:g}}},985584:(e,t,n)=>{n.d(t,{I5:()=>p,kB:()=>m});var a=n(329956),r=n(268984),l=n(918944),s=n(467412),i=n(907152),o=n(784528),c=n(513048);class u{constructor(){this.indexer={}}next(e){return null==this.indexer[e]?this.indexer[e]=0:this.indexer[e]++,this.indexer[e]}}let d={PNG:".png",JPEG:".jpg",SVG:".svg",PDF:".pdf"};function p(e,t,n,a){let r,l;if("CANVAS"===e)""===(r=n).trim()&&(r="Untitled"),l=r=r.replace(/\//g,"_");else{(r=t).endsWith("/")&&(r=r.substr(0,r.length-1));let e=r.lastIndexOf("/");for(let t of(l=-1!==e?r.substr(e+1,r.length):r,a)){let e=t.substr(0,t.lastIndexOf("/"));e.length>0&&(r=e+"/"+r)}}return{name:r,title:l}}let m=(0,r.M0)(e=>{let t=e.getState(),n=[],r=[],m=t.mirror,g=m.sceneGraph,h=e=>{(null!=e.exportSettings&&e.exportSettings.length>0||(0,i.Ar)(e))&&n.push(e)};if((0,a.t7)(m.sceneGraphSelection)){let e=g.get((0,o.AD)(m.appModel));e&&((0,s.cj)(g,e,h),(0,s.cj)(g,e,e=>{let t=e.parentNode;(0,i.Ar)(e)&&null!=t&&"CANVAS"===t.type&&r.push({nodeID:e.guid,name:e.name})}))}else(0,c.KQ)(g,m.sceneGraphSelection,h),(0,c.Mx)(g,m.sceneGraphSelection,e=>{(0,i.Ar)(e)&&r.push({nodeID:e.guid,name:e.name})});let _="Untitled";t.openFile&&(_=t.openFile.name);let f=[],v=new u,y=new u;for(let e of n){let t=(0,s.C)(m.sceneGraph,e.guid).filter(e=>!e.visible);if(!e.visible||t.length>0)continue;let n=e.exportSettings;if(null!=n)for(let t of n){if(null==t.imageType)continue;let n=(0,s.C)(m.sceneGraph,e.guid).map(e=>e.name),{name:a,title:r}=p(e.type,e.name,_,n),l=function(e,t,n,a){let r=`${e}-${t}-${n.imageType}-${n.suffix}`;return`${r}-${a.next(r)}`}(e.guid,a,t,y),{filename:i,isDuplicate:o}=function(e,t,n,a){let r;let l=!1;""===e.trim()&&(e="Untitled"),r=`${e}${t}${n}`;let s=a.next(`${r}`);return s>0&&(r=`${e}${t}-${s}${n}`,l=!0),{filename:r,isDuplicate:l}}(a,t.suffix||"",d[t.imageType],v);f.push({itemID:l,nodeID:e.guid,title:r,filename:i,exportSetting:t,warning:o?"Name duplicated":void 0,warningTooltip:o?`Renamed to ${i}`:void 0})}}e.dispatch(l.Q({items:f,frames:r}))})},782220:(e,t,n)=>{n.d(t,{m:()=>s});var a=n(570012),r=n(234980),l=n(762820);class s{getValue(){let e=new Map;for(let t of(0,r.Qx)()){let n=this.getValueForNode(t);null!=n&&e.set(t.guid,n)}return e}onChange(e,t,n){let s=!1;for(let l of(0,r.Qx)()){let r=e.get(l.guid);if(null!=r)try{let e=t(r);this.setValueForNode(l,e,n===a.MO.NO),s=!0}catch(e){}}n!==a.MO.NO&&s&&l.i46.triggerAction("commit",{})}}},444636:(e,t,n)=>{function a(e,t){let n=e.get(t);if(!n)return!1;let a=0===n.childrenGuids.length,r=n.childrenAreAllGhosts;return void 0!==n&&!a&&r}function r(e,t){let n=e.get(t);return(null==n?void 0:n.childrenGuids.length)===0&&void 0!==n}n.d(t,{b:()=>a,o:()=>r})},578272:(e,t,n)=>{n.d(t,{oP:()=>i,z4:()=>s}),n(120304);var a=n(623131),r=n(372152),l=n(907152);let s=(0,a.Zf)(l.TSSceneGraph.instance);function i(){return(0,r.m4)(s)}},647567:(e,t,n)=>{n.d(t,{Kw:()=>l,ob:()=>s,wF:()=>i});var a=n(855712),r=n(102628);let l=e=>e.library.localStyleSelection,s=(0,a.M3)([l,(e,t)=>t],(e,t)=>(null==e?void 0:e.type)===t?e:null),i=(0,a.M3)([s,(e,t,n)=>n],(e,t)=>{if(!e)return null;let n=new Set,a=new Set;return e.folderNames.forEach(e=>{let l=t.find(t=>"STYLE_FOLDER"===t.type&&t.name===e);l&&((0,r.U3)(l).forEach(e=>{n.add(e.name)}),(0,r.GS)(l).forEach(e=>{a.add(e.node_id)}))}),{type:e.type,folderNames:n,styleIds:a}})},339644:(e,t,n)=>{n.d(t,{G:()=>m,e:()=>g});var a=n(307824),r=n(120304),l=n(819584),s=n(4596),i=n(540696),o=n(491776),c=n(256896),u=n(959872),d=n(757056),p=n(611852);function m(e,t){let n=a.useMemo(p.Iv,[]),u=(0,r.w1)(o.qs),m=(0,r.w1)(d.A1),g=(0,r.w1)(t=>n(t,e)),y=function(e,t){let n=(0,r.w1)(o.qs);if(t!==c.C4.DEFINITION)return(0,c.Ud)(e,n)||(0,c.xy)(e,n)||"";{let t=(0,c.OE)(e,n);return t&&!(0,i.Er)(t)?t.guid:""}}(e,t),E=(0,l.yC)(()=>m&&y?h(y,e,m):[],[m,e,y]),w=(0,l.yC)(()=>m?_(E,e.filter(e=>{let t=u.get(e);return(null==t?void 0:t.type)==="INSTANCE"}),u,m):{},[e,u,m,E]),b=(0,l.yC)(()=>y&&m?f(y,m,u):[],[y,m,u]),S=(0,l.yC)(()=>{let t=e.reduce((e,t)=>{let n=u.get(t),a=null==n?void 0:n.symbolId;return a&&a!==s.Q9&&e.add(a),e},new Set);return b.filter(e=>t.has(e.guid))},[b,e,u]),T=(0,l.yC)(()=>y&&m?v(y,e,m):{},[y,e,m]);return a.useMemo(()=>({typedPropDefsExcludingHidden:E,variantPropDefs:g,assignmentValuesByDefId:w,allStateVariantProps:b,backingStateVariantProps:S,statePropertyValues:T,productComponentGUID:y}),[E,g,w,b,S,T,y])}function g(e,t,n,r){var s,i;let o;let c=(0,l.yC)(()=>n?h(n,[e],t):[],[e,n,t]),u=(0,l.yC)(()=>n?(0,p.ec)(n,t):[],[n,t]),d=(0,l.yC)(()=>_(c,[e],r,t),[e,t,r,c]),m=(0,l.yC)(()=>{var e;return n&&(null==(e=r.get(n))?void 0:e.isStateGroup)?f(n,t,r):[]},[n,t,r]),g=(0,l.yC)(()=>n?v(n,[e],t):{},[e,n,t]),y=null==(s=r.get(e))?void 0:s.symbolId;return y&&(null==(i=r.get(y))?void 0:i.isState)||(o=[]),o=m.filter(e=>y===e.guid),a.useMemo(()=>({typedPropDefsExcludingHidden:c,variantPropDefs:u,assignmentValuesByDefId:d,allStateVariantProps:m,backingStateVariantProps:o,statePropertyValues:g}),[c,u,d,m,o,g])}function h(e,t,n){let a=(0,c.EL)(t,n);return(0,c.CU)(e,n).filter(e=>!a.has(e.explicitDefID))}function _(e,t,n,a){let r={};return e.forEach(e=>{var l,s;let o=new Set;for(let n of t){let t=null==(s=null==(l=a[n])?void 0:l.assignments)?void 0:s[e.explicitDefID];if(t){if(t.isMixed){o.add(i.ee);continue}null!=t.value&&o.add(t.value)}}r[e.explicitDefID]=(0,c.mk)(e.type,o,n)}),r}function f(e,t,n){let a=n.get(e);return(null==a?void 0:a.isStateGroup)?a.childrenNodes.reduce((e,n)=>{var a;let r=null==(a=t[n.guid])?void 0:a.stateVariantProps;return r?e.push({...r,guid:n.guid}):e.push({propertyValues:n.statePropertyValues,guid:n.guid}),e},[]):[]}function v(e,t,n){var a,r;let l=(null==(r=null==(a=n[e])?void 0:a.stateGroupVariantProps)?void 0:r.propertySortOrder)??[];return(0,u.c)(n,t,l)}},878952:(e,t,n)=>{n.d(t,{U:()=>m});var a=n(307824),r=n(120304),l=n(570464),s=n(853688),i=n(537096),o=n(560072),c=n(39676),u=n(514008),d=n(764124),p=n(448716);function m({onRetry:e,recordingKey:t}){let n=(0,r.w1)(e=>{var t;return(0,c.K0)(e.loadingState,(0,u.iR)(null==(t=e.openFile)?void 0:t.key))});return a.createElement("div",{className:d.warningOfflineContainer},a.createElement("div",{className:d.warning},a.createElement(i.A,{className:d.offlineIcon,svg:p.c}),a.createElement("span",null,(0,o.t)("design_systems.component_properties.cant_show_values")),n?a.createElement("span",{className:d.trying},(0,o.t)("design_systems.component_properties.trying")):a.createElement(s.s,{className:d.tryAgain,onClick:e,role:"button",tabIndex:0,recordingKey:l.Mx(t,"preferredValues","tryAgain")},(0,o.t)("design_systems.component_properties.try_again"))))}},486111:(e,t,n)=>{let a;n.d(t,{WS:()=>tO,UV:()=>tD,Mx:()=>tF,Al:()=>tR,U7:()=>tL});var r=n(307824),l=n(120304),s=n(570464),i=n(562200),o=n(762820),c=n(397888),u=n(918628),d=n(840460),p=n(707576),m=n(51976),g=n(256896),h=n(339644),_=n(266724),f=n(125504),v=n.n(f),y=n(139776),E=n(916924),w=n(143076),b=n(824740),S=n(87975),T=n(594192),C=n(560072),N=n(276628),I=n(37864),A=n(219096),k=n(555168),P=n(138884),M=n(540696),x=n(392992),O=n(84656),R=n(790184),L=n(142548),D=n(777868),F=n(167536),K=n(839046),G=n(24588),U=n(529332),B=n(514008),V=n(878952);let H="prop_assignment_row--propAssignmentRow--OKB5Y prop_assignment_row--_propAssignmentRowBase--Qk4mQ raw_components--flushLeft--YH-5P",W="prop_assignment_row--propAssignmentRowWide--B6bnW prop_assignment_row--_propAssignmentRowBase--Qk4mQ raw_components--flushLeft--YH-5P",Y="prop_assignment_row--propAssignmentRowUnbounded--pdfzN prop_assignment_row--_propAssignmentRowBase--Qk4mQ raw_components--flushLeft--YH-5P",q="prop_assignment_row--componentPropNameContainer--JeWEJ",X="prop_assignment_row--componentPropNameViewOnly--1bJdB prop_assignment_row--componentPropName--ZazSF ellipsis--ellipsis--Tjyfa",z="prop_assignment_row--assignmentValueContainerUi3--z4cZN",$="prop_assignment_row--toggleContainer--ch-lY prop_assignment_row--assignmentValueContainer--rO3FJ raw_components--singleRowHeight--dKM4t",j="prop_assignment_row--variantPropRightColumn--5hpRD";function Q(e){let{index:t,guids:n,typedPropDef:a,forBubbledProps:i,value:c,sceneGraph:u,inPlayground:d,containerWidth:p,viewOnly:m,instanceSwapPickerInitialHeight:h,instanceSwapPickerInitialPosition:_}=e,f=(0,O.s5)(o.KEP.propertiesPanelState().shownPropertiesPanels)[o.uQ8.INSTANCE_ITEM],j=(0,l.OY)(),Q=(0,l.w1)(e=>e.instanceSwapPickerShown),ee=(0,l.w1)(e=>e.selectedComponentPropDefId),et=(0,l.w1)(x.AX),{inputRef:en,inputProps:{onChange:ea,onFocus:er,onMouseLeave:el,onMouseUp:es,onKeyUp:ei}}=(0,b.y)({onFocus:()=>{(0,M.Er)(c)?ec(""):ec(eg)},onChange:e=>ec(e.currentTarget.value)}),[eo,ec]=r.useState(null),[eu,ed]=r.useState(!1),ep=r.useRef(null),em=r.useRef(null),eg=a.type===o.iUn.TEXT?(0,M.Er)(c)?(0,C.t)("design_systems.component_properties.mixed"):c:null;r.useEffect(()=>{ee===a.explicitDefID&&f&&(j(N._0({propDefId:null})),ed(!0),ep.current&&clearTimeout(ep.current),ep.current=setTimeout(()=>{ed(!1)},1e3))},[j,ee,a,f]);let eh=r.useCallback((e,t)=>{k.Pc.user("toggle-bool-prop-assignment",()=>o.i46.setBoolComponentPropAssignment(n,a.explicitDefID,e,i)),(null==Q?void 0:Q.isShown)&&j((0,I.es)())},[Q,n,a.explicitDefID,i,j]),e_=()=>{(0,T.aI)(eo)&&k.Pc.user("set-text-prop-assignment",()=>o.i46.setTextComponentPropAssignment(n,a.explicitDefID,eo,i)),en.current&&(en.current.scrollTop=0,en.current.blur()),ec(null)},ef=e=>{e.keyCode!==S.as.ENTER||e.shiftKey||(e.preventDefault(),e_())},{preferredValues:ev,preferredValuesFetchError:ey,retryPreferredValuesFetch:eE}=(0,B.yu)(a),ew=r.useMemo(()=>ey?r.createElement(V.U,{onRetry:eE,recordingKey:"componentPropAssignment"}):void 0,[ey,eE]),eb=r.useCallback(e=>{j((0,A.QP)({item:e,alwaysFetch:d,targetUpsertScene:d?o.MTb.PLAYGROUND_SCENE:o.MTb.ACTIVE_SCENE,callback:t=>{k.Pc.user("set-instance-prop-assignment",()=>o.i46.setInstanceComponentPropAssignment(n,a.explicitDefID,t,e.type===R.Af.STATE_GROUP?(0,g.W2)(e,t,et):"",i,0===ev.length?o.UFJ.NOT_APPLICABLE:ev.includes(e)?o.UFJ.YES:o.UFJ.NO))}})),P.EJ({nodeIDs:[],defID:""})},[j,i,n,et,d,ev,a]);if(void 0===c)return null;let eS=em.current,eT=!!eS&&eS.offsetWidth<eS.scrollWidth;return r.createElement(G.WA,{className:v()(function(e){switch(e){case g.mK.REGULAR:case void 0:return H;case g.mK.WIDE:return W;case g.mK.UNBOUNDED:return Y;case g.mK.RESIZABLE_SIDEBAR:return"prop_assignment_row--propAssignmentRowUi3--hzT9d prop_assignment_row--_propAssignmentRowBase--Qk4mQ raw_components--flushLeft--YH-5P"}}(p),{"prop_assignment_row--tempSelection--gl3SL":eu}),recordingKey:`componentPropertyRow.${t}`,onMouseEnter:()=>P.EJ({nodeIDs:n,defID:a.explicitDefID}),onMouseLeave:()=>P.EJ({nodeIDs:[],defID:""})},r.createElement("div",{className:v()(q,{"prop_assignment_row--componentPropNameContainerUi3--TcFn9 prop_assignment_row--componentPropNameContainer--JeWEJ":p===g.mK.RESIZABLE_SIDEBAR,"prop_assignment_row--textPropName--le7nN":a.type===o.iUn.TEXT})},r.createElement("div",{ref:em,className:X,"data-tooltip-type":L.wL.TEXT,"data-tooltip":eT?a.name:null},a.name)),(()=>{if(a.type===o.iUn.BOOL)return r.createElement(U.q,{toggleClassName:function(e){switch(e){case g.mK.RESIZABLE_SIDEBAR:return v()(z,$);case g.mK.REGULAR:case g.mK.UNBOUNDED:case g.mK.WIDE:case void 0:return $;default:(0,E.gy)(e)}}(p),on:c,disabled:m,onChange:eh,recordingKey:s.Mx("componentPropAssignmentToggle",n.join("-"),a.explicitDefID),forwardEventsToFullscreen:!0});if(a.type===o.iUn.TEXT)return r.createElement("div",{className:Z(p)},r.createElement("div",{className:J(p)},r.createElement(D.s,{ref:e=>{(null==e?void 0:e.textarea)&&(en.current=e.textarea)},className:v()({"prop_assignment_row--viewOnlyInput--AusfO prop_assignment_row--input---hZFU props_panel--input--pkL0- raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u":m,"prop_assignment_row--blankInput--8cHb6 prop_assignment_row--input---hZFU props_panel--input--pkL0- raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u":""===eg&&!m,"prop_assignment_row--input---hZFU props_panel--input--pkL0- raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u":!m&&""!==eg}),value:null===eo?eg:eo,placeholder:(0,M.Er)(c)?eg:null,onChange:ea,onFocus:er,onMouseLeave:el,onMouseUp:es,onKeyDown:ef,onKeyUp:ei,onBlur:e_,disableInput:m,recordingKey:s.Mx("componentPropAssignmentTextInput",n.join("-"),t)})));if(a.type===o.iUn.INSTANCE_SWAP){let e=(0,y.YX)(n.map(e=>o.i46.getInstanceSublayersControlledByDirectPropAssignment(e,a.explicitDefID).map(e=>w.M.toGuid(e))));return r.createElement("div",{className:Z(p)},r.createElement("div",{className:J(p)},r.createElement(K.M,{fill:p===g.mK.UNBOUNDED,pickerID:`instance-swap-prop-assignment-picker-${n.join("-")}.${a.explicitDefID}`,pickerWidth:218,shouldPerformSwapOnClick:!1,instanceSwapNode:c,title:(0,C.t)("design_systems.component_properties.choose_instance"),disableToggle:m,preferredItems:ev,preferredValuesErrorComponent:ew,onSwapCallback:eb,sceneGraph:u,instanceSwapPickerInitialHeight:h,initialPosition:_})),r.createElement(F.u,{instanceAndSublayerGUIDs:e,showAllInstanceOptions:!1}))}})())}function Z(e){switch(e){case g.mK.REGULAR:case void 0:return"prop_assignment_row--assignmentValueContainer--rO3FJ";case g.mK.WIDE:return"prop_assignment_row--assignmentValueContainerWide--mp3VT prop_assignment_row--assignmentValueContainer--rO3FJ";case g.mK.UNBOUNDED:return"prop_assignment_row--assignmentValueContainerUnbounded--jU7hP";case g.mK.RESIZABLE_SIDEBAR:return z}}function J(e){switch(e){case g.mK.REGULAR:case void 0:return"prop_assignment_row--assignmentValue--cDoaf";case g.mK.WIDE:return"prop_assignment_row--assignmentValueWide--qz5Td prop_assignment_row--assignmentValue--cDoaf";case g.mK.UNBOUNDED:return"prop_assignment_row--assignmentValueUnbounded--gufvh"}}function ee({typedPropDefs:e,guids:t,assignmentValues:n,forBubbledProps:a,sceneGraph:l,inPlayground:s,containerWidth:i,viewOnly:o,instanceSwapPickerInitialHeight:c,instanceSwapPickerInitialPosition:u,recordingKey:d}){return r.createElement(_.u,{listItems:e,updateSelection:void 0,isDragDisabled:!0,renderListItem:(e,d)=>r.createElement(Q,{typedPropDef:e,guids:t,index:d,value:n[e.explicitDefID],containerWidth:i,viewOnly:o,forBubbledProps:a,sceneGraph:l,inPlayground:s,instanceSwapPickerInitialHeight:c,instanceSwapPickerInitialPosition:u}),recordingKey:d})}var et=n(204792),en=n(585508),ea=n(308264),er=n(602216);function el(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0Zm1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-6.35-2.64a.605.605 0 1 0-1.21 0l.078 3.488a.526.526 0 0 0 1.052 0l.08-3.488Zm-1.105 5.793a.685.685 0 0 0 .499.204.67.67 0 0 0 .348-.092.734.734 0 0 0 .256-.256.66.66 0 0 0 .1-.355.66.66 0 0 0-.212-.492.678.678 0 0 0-.492-.205.686.686 0 0 0-.499.205.671.671 0 0 0-.204.492c0 .196.068.362.204.499Z",clipRule:"evenodd"}))}var es=n(880448),ei=n(515724),eo=n(721500),ec=n(4580),eu=n(853688),ed=n(537096),ep=n(968240),em=n(491776),eg=n(760236),eh=n(403132),e_=n(907236),ef=n(525064),ev=n(807200),ey=n(696240);let eE=1/60*1e3;var ew=n(103839),eb=n(71556),eS=n(131748),eT=n(235020),eC=n(101040),eN=n(273472);let eI="edit_component_prop_picker--subheading--JbXut",eA="edit_component_prop_picker--inputContainer--B8MrR",ek="edit_component_prop_picker--fieldContainer--OMz1x",eP="edit_component_prop_picker--input--pTw-O edit_component_prop_picker--baseInput--xQ5tc raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u sf_pro--uiFontWithSFProFallback--m-p9V",eM="edit_component_prop_picker--variantValueInput--i1oj6 edit_component_prop_picker--input--pTw-O edit_component_prop_picker--baseInput--xQ5tc raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u sf_pro--uiFontWithSFProFallback--m-p9V";var ex=n(750012),eO=n(54116);let eR="edit-component-prop-picker";function eL({componentPropDef:e}){let{instanceSwapDefaultValue:t,openFileKey:n,pickerShown:a,dropdownShown:i,allStates:d,propertySortOrder:p,isInstanceSwapPickerShown:h}=(0,ec.q)(t=>({instanceSwapDefaultValue:(null==e?void 0:e.type)===o.iUn.INSTANCE_SWAP?(0,g.OE)([e.defaultValue],t.mirror.sceneGraph):null,openFileKey:(0,x.AX)(t),pickerShown:t.pickerShown,dropdownShown:t.dropdownShown,allStates:(0,m.iS)(t)??[],propertySortOrder:(0,m.ec)(t)??[],isInstanceSwapPickerShown:t.instanceSwapPickerShown.isShown})),_=(0,c.ct)(),f=(0,l.OY)(),[v,y]=r.useState(null),[w,T]=r.useState(e.type===o.iUn.TEXT?e.defaultValue:""),N=r.useCallback(e=>y(e.currentTarget.value),[]),{inputRef:P,inputProps:{onChange:M,onFocus:O,onMouseUp:L,onMouseLeave:F,onKeyUp:G}}=(0,b.y)({onFocus:t=>{y(e.name)},onChange:N,autoFocus:!0}),U=r.useCallback(()=>{v&&v!==e.name&&(e.kind===u.c.TYPED?k.Pc.user("edit-prop-def-name",()=>o.i46.editComponentPropDefName(e.explicitDefID,v)):k.Pc.user("edit-variant-prop-name",()=>(0,ev.IJ)(e.name,v,d,p)))},[e,v,d,p]),H=r.useCallback(()=>{a&&f(e_.is({id:eR,initialX:a.initialX,initialY:a.initialY,data:e.kind===u.c.TYPED?{defID:e.explicitDefID}:{name:v}}))},[a,f,e,v]),W=r.useCallback(e=>{U(),y(null)},[U]),Y=r.useCallback(t=>{e.type===o.iUn.BOOL&&t!==(0,g.jc)(o.iUn.BOOL,e.defaultValue)&&k.Pc.user("edit-prop-default-value",()=>o.i46.editBoolComponentPropDefDefaultValue(e.explicitDefID,t))},[e]),q=r.useCallback(()=>{e.type===o.iUn.TEXT&&w&&w!==e.defaultValue&&k.Pc.user("edit-prop-default-value",()=>o.i46.editTextComponentPropDefDefaultValue(e.explicitDefID,w))},[e,w]),{preferredValues:X,handleSetPreferredValues:z,togglePreferredValues:$,preferredValuesFetchError:j,retryPreferredValuesFetch:Q}=(0,B.yu)(e),Z=r.useMemo(()=>j?r.createElement(V.U,{onRetry:Q,recordingKey:"editComponentPropDef"}):void 0,[j,Q]),J=r.useCallback(()=>{f(e_.U5()),f((0,I.es)())},[f]),ee=e=>{e.stopPropagation(),e.keyCode!==S.as.ENTER||e.shiftKey||e.currentTarget.blur()},et=new ew.Cg(null==a?void 0:a.initialX,null==a?void 0:a.initialY);return r.createElement(eC.G0,{title:(0,C.t)("design_systems.component_properties.edit_component_property",{propType:(0,g.Mx)(e.type).toLocaleLowerCase()}),initialPosition:et,initialWidth:g.iW,headerSize:"small",onClose:J,onClick:h?()=>f((0,I.es)()):void 0,recordingKey:s.Mx("editComponentPropDefPicker",e.kind===u.c.VARIANT?e.name:e.explicitDefID)},r.createElement("div",{className:ek},r.createElement("p",{className:eI},r.createElement(C.Tx,{id:"design_systems.component_properties.name"})),r.createElement(eu.aw,{forwardedRef:P,className:eP,onChange:M,onKeyDown:e=>{e.stopPropagation(),e.keyCode!==S.as.ENTER||e.shiftKey||(e.currentTarget.blur(),H()),e.keyCode===S.as.ESCAPE&&(e.currentTarget.blur(),J()),e.keyCode===S.as.TAB&&H()},onBlur:W,onClick:()=>f((0,I.es)()),onFocus:O,value:null===v?(null==e?void 0:e.name)||"":v,onMouseUp:L,onMouseLeave:F,onKeyUp:G,recordingKey:"editComponentPropName"})),e.kind===u.c.TYPED?r.createElement("div",{className:ek},r.createElement("p",{className:eI},r.createElement(C.Tx,{id:"design_systems.component_properties.default_value"})),(()=>{if(e.kind===u.c.VARIANT)return null;switch(e.type){case o.iUn.BOOL:return r.createElement("div",{className:eA},r.createElement(eT.M1,{id:"edit-component-prop-default-value-select",property:(0,g.jc)(o.iUn.BOOL,e.defaultValue),onChange:Y,dispatch:f,formatter:g.qe,dropdownShown:i,inputClassName:eP,recordingKey:s.Mx("editComponentPropDefaultValue",(0,g.Mx)(e.type))},r.createElement(eT.cb,{value:!0}),r.createElement(eT.cb,{value:!1})));case o.iUn.TEXT:return r.createElement("div",{className:eA},r.createElement(D.s,{className:"edit_component_prop_picker--textArea--SQ8dT edit_component_prop_picker--baseInput--xQ5tc raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u sf_pro--uiFontWithSFProFallback--m-p9V",onChange:e=>k.Pc.user("edit-prop-default-value",()=>T(e.currentTarget.value)),onBlur:q,onKeyDown:ee,value:w,onFocus:e=>{var t;return null==(t=e.currentTarget)?void 0:t.select()},recordingKey:s.Mx("editComponentPropDefaultValue",(0,g.Mx)(e.type))}));case o.iUn.INSTANCE_SWAP:return r.createElement("div",{className:eA},r.createElement(K.M,{pickerID:`edit-instance-swap-prop-picker-${e.explicitDefID}`,pickerWidth:218,shouldPerformSwapOnClick:!0,instanceSwapNode:t,title:(0,C.t)("design_systems.component_properties.choose_default_instance_value"),preferredItems:X,preferredValuesErrorComponent:Z,sceneGraph:_,onSwapCallback:t=>{f((0,A.QP)({item:t,callback:a=>{let r=t.type===R.Af.STATE_GROUP?(0,g.W2)(t,a,n):a;k.Pc.user("edit-prop-default-value",()=>o.i46.editInstanceComponentPropDefDefaultValue(e.explicitDefID,r))}}))}}));default:(0,E.gy)(e)}})()):r.createElement(eD,{def:e}),e.type===o.iUn.INSTANCE_SWAP&&r.createElement(eN.m,{recordingKey:"edit-component-prop-preferred-values-picker",swapPickerId:"edit-component-prop-preferred-values-picker",swapPickerWidth:218,onSetComponents:z,addComponents:e=>$(e,B.AK.ADD),removeComponents:e=>$(e,B.AK.REMOVE),toggleComponent:e=>$([e]),values:X,propDefDefaultValue:(0,g.jc)(e.type,e.defaultValue)}))}function eD({def:e}){var t;let{allStates:n,stateGroup:a,stateGroupPropertySortOrder:l}=(0,ec.q)(e=>({allStates:(0,m.iS)(e),stateGroup:(0,m.gH)(e),stateGroupPropertySortOrder:(0,m.ec)(e)})),[i,c]=r.useState([]),[u,d]=r.useState(null),[p,g]=r.useState(null),h=r.useCallback(t=>{let n=null==a?void 0:a.nodeId;n&&t.length===e.values.length&&k.Pc.user("reorder-variant-prop-values",()=>{for(let a=0;a<t.length;a++)t[a]!==e.values[a]&&o.i46.reorderStateGroupPropertyValue(n,e.name,t[a],a)})},[a,e]),f=r.useMemo(()=>{let t={};return null==n||n.forEach(n=>{let a=n.stateInfo.propertyValues;if(!a)return;let r=a[e.name];r in t||(t[r]=[]),t[r].push(n.symbol.node_id)}),t},[n,e]),v=r.useCallback(e=>{P.mo(),P.aN(f[e]??[]),o.KEP.canvasViewState().temporarilyHoveredNodes.set([])},[f]),y=r.useCallback((t,a)=>{n&&l&&""!==(a=(0,ev.gb)(a))&&(k.Pc.user("rename-variant-prop-value",()=>{n.forEach(n=>{let r=n.stateInfo.propertyValues;r&&r[e.name]===t&&P.gc(n.symbol.node_id,(0,ev.gH)({...r,[e.name]:a},l))})}),en.CA.commit(),eS.qM.reportEditAction("rename-states"),g(null))},[n,e,l]),E=r.useCallback((e,t)=>{e.keyCode===S.as.ENTER&&y(t,e.currentTarget.value)},[y]),w=r.useRef(null),[b,T]=r.useState(!1),N=r.useCallback(()=>T(!0),[]),I=r.useCallback(()=>T(!1),[]);return!function(e,t){let[n,a]=r.useState(0),l=r.useRef(-1);r.useEffect(()=>{t||a(0)},[t]),r.useEffect(()=>{let t;return 0===n?()=>{}:(function a(){if(!e||l.current<0)return;let r=new Date().getTime(),s=r-l.current;e.scrollTop+=s/eE*n,l.current=r,t=requestAnimationFrame(a)}(),()=>{cancelAnimationFrame(t)})},[n,e]),(0,ey.CI)("mousemove",r.useCallback(n=>{if(!t||!e)return;let r=e.scrollTop,{top:s,height:i}=e.getBoundingClientRect();if(i<=0)return;let o=n.clientY-s+r;o<r?(a((o-r)*.5),l.current=new Date().getTime()):o>r+i?(a((o-r-i)*.5),l.current=new Date().getTime()):(a(0),l.current=-1)},[t,e]))}(null==(t=w.current)?void 0:t.getScrollContainer(),b),r.createElement(r.Fragment,null,r.createElement("p",{className:"edit_component_prop_picker--variantValuesSubheading--L0zoU edit_component_prop_picker--subheading--JbXut"},r.createElement(C.Tx,{id:"design_systems.component_properties.values"})),r.createElement(eb.f,{className:"edit_component_prop_picker--variantList--K6wCE",ref:w},r.createElement(_.u,{listItems:e.values,selectedIndices:i,updateSelection:c,onChange:h,onDragStart:N,onDragEnd:I,renderListItem:(t,n,a,l,i,m,h)=>{let w=t in f?f[t]:[],b=w.length,S=p===n;return r.createElement(_.e,{selected:a,singletonRow:1===e.values.length,dragging:l,onMouseDown:i,onMouseMove:m,onMouseUp:h,onMouseEnter:function(){d(n),o.KEP.canvasViewState().temporarilyHoveredNodes.set(w)},onMouseLeave:function(){d(null),o.KEP.canvasViewState().temporarilyHoveredNodes.set([])},recordingKey:s.Mx("variantPropertyValueRow",t),grabberClassName:"edit_component_prop_picker--valueRowGrabber--Bl-te",className:l||a?"edit_component_prop_picker--variantValueRow--83Sb2":"edit_component_prop_picker--variantValueRowWithHover--jS1pH edit_component_prop_picker--variantValueRow--83Sb2"},r.createElement("div",{className:"edit_component_prop_picker--variantValueInputWrapper---9s9m"},S?r.createElement(eu.aw,{className:eM,onKeyDown:e=>E(e,t),onBlur:e=>y(t,e.currentTarget.value),recordingKey:s.Mx("editVariantPropertyValue",n),defaultValue:t,onFocus:e=>{var t;return null==(t=e.target)?void 0:t.select()},autoFocus:!0}):r.createElement(eu.g9,{className:eM,onMouseDown:e=>e.stopPropagation(),onFocus:()=>{g(n),c([n])},tabIndex:0,recordingKey:s.Mx("variantValueName",n)},t)),u===n&&!l&&r.createElement(G.wP,{svg:eO.c,fallbackSvg:ex.c,disabled:!b,onMouseDown:e=>e.stopPropagation(),onClick:()=>v(t),"data-tooltip-type":L.wL.TEXT,"data-tooltip":(0,C.t)("design_systems.component_properties.select_variants_with_property_value",{numVariants:b}),recordingKey:s.Mx("editComponentPropDefPicker","targetButton")}))}})))}var eF=n(757056),eK=n(763456);let eG="component_prop_def_row--input--Heq8r props_panel--input--pkL0- raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u sf_pro--uiFontWithSFProFallback--m-p9V",eU="component_prop_def_row--componentPropDefName--bUVTI ellipsis--ellipsis--Tjyfa sf_pro--uiFontWithSFProFallback--m-p9V",eB="component_prop_def_row--componentPropDefVariantName--vZEqv component_prop_def_row--componentPropDefName--bUVTI ellipsis--ellipsis--Tjyfa sf_pro--uiFontWithSFProFallback--m-p9V",eV="component_prop_def_row--componentPropVariantValues--mTqSx",eH="component_prop_def_row--selectedRowIcon--3uhSg",eW="component_prop_def_row--componentPropIcon--OrfM-",eY="component_prop_def_row--componentPropIconSelected--uZsSM component_prop_def_row--componentPropIcon--OrfM-",eq="component_prop_def_row--componentPropIconError--BikGf",eX="component_prop_def_row--rowAction--rAfBQ",ez="component_prop_def_row--selectedRowAction--P8TAv component_prop_def_row--rowAction--rAfBQ";var e$=n(618745),ej=n(290151),eQ=n(381100),eZ=n(830596);let eJ="typed-prop-def-del-dropdown",e0="variant-prop-def-del-dropdown",e1=e=>{e.stopPropagation()},e2=e=>{e.stopPropagation(),e.preventDefault()};function e4(e){let{index:t,guids:n,componentPropDef:a,isSelected:i,isDragging:c,singletonRow:d,onPropertyMouseDown:p,onPropertyMouseMove:h,onPropertyMouseUp:_,selectRow:f,onKeyDown:v,recordingKey:y}=e,{version:E}=(0,ei.qG)(),w=r.useMemo(eg.Ab,[]),{pickerShown:T,selectedComponentPropDefId:C,componentWithPropDefSelected:A,allStates:M,propertySortOrder:x}=(0,ec.q)(e=>{let t=(0,em.qg)(e),n=1===t.length?w(e,t[0]):[];return{pickerShown:e.pickerShown,selectedComponentPropDefId:e.selectedComponentPropDefId,componentWithPropDefSelected:a.kind===u.c.TYPED&&n.some(e=>e.explicitDefID===a.explicitDefID),allStates:(0,m.iS)(e)??[],propertySortOrder:(0,m.ec)(e)??[]}}),O=(0,l.w1)(eF.mN),R=(0,l.OY)(),L=r.useCallback(e=>Y(e.currentTarget.value),[]),{inputRef:D,inputProps:{onChange:F,onFocus:K,onMouseLeave:G,onMouseUp:U}}=(0,b.y)({onChange:L}),[V,H]=r.useState(!1),[W,Y]=r.useState(null),q=r.useRef(null),X=r.useRef(null),z=a.kind===u.c.TYPED?a.explicitDefID:void 0,$=a.kind===u.c.TYPED?a.type:void 0,j=a.kind===u.c.VARIANT?a.values:void 0,Q=C&&C===z,Z=null!==W,J=r.useMemo(()=>(null==T?void 0:T.id)===eR&&(a.kind===u.c.TYPED?T.data.defID===z:T.data.name===a.name),[a,T,z]);r.useEffect(()=>{var e;Z&&(null==(e=D.current)||e.select())},[Z,D]);let ee=()=>{W&&(Y(null),a.kind===u.c.TYPED?k.Pc.user("edit-prop-def-name",()=>o.i46.editComponentPropDefName(a.explicitDefID,W)):a.kind===u.c.VARIANT&&k.Pc.user("edit-variant-prop-name",()=>(0,ev.IJ)(a.name,W,M,x)))},et=r.useCallback(()=>{R(N._0({propDefId:null})),R((0,I.es)());let e=er.findDOMNode(q.current),t=e?(0,ef.cT)(e,g.iW):{};R(e_.is({id:eR,initialX:null==t?void 0:t.x,initialY:null==t?void 0:t.y,data:a.kind===u.c.TYPED?{defID:z}:{name:a.name}}))},[a,z,R]);r.useEffect(()=>{Q&&A&&!J&&et()},[Q,A,J,et]);let en=r.useCallback(e=>{(null==T?void 0:T.id)!==eR||J||R(e_.U5()),_&&_(e)},[R,J,T,_]),ea=r.useCallback(()=>{J?R(e_.U5()):(et(),f())},[R,J,f,et]),el=r.useCallback(()=>{H(!0),z&&P.EJ({nodeIDs:n,defID:z})},[n,z]),es=r.useCallback(()=>{H(!1),P.EJ({nodeIDs:[],defID:""})},[]),eu=r.useCallback(e=>{if(a.kind===u.c.VARIANT&&d){R(eh.yi());return}(null==T?void 0:T.id)===eR&&R(e_.U5()),R(eh.Qn({type:a.kind===u.c.TYPED?eJ:e0,data:{position:{top:e.clientY,left:Math.min(e.clientX,window.innerWidth-(0,eo.I)(eK._gu)/2)}}}))},[R,a.kind,d,T]),ed=(0,s.S4)(y,"contextmenu",e=>{eu(e)}),ep=(0,s.S4)(y,"mouseenter",e=>{el()}),ey=(0,s.S4)(y,"mouseleave",e=>{es()}),eE=(0,s.S4)(y,"mouseup",e=>{en(e)}),ew=(0,s.S4)(y,"mousedown",e=>{Z&&Y(null),J&&R(e_.U5()),p&&p(e)}),eb=(0,s.S4)(y,"mousemove",e=>{h&&h(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),eS=s.S4(y,"dblclick",()=>{f(),Y(a.name)}),eT=X.current,eC=!!eT&&eT.offsetWidth<eT.scrollWidth,{preferredValues:eN}=(0,B.yu)(a),eI=(0,B.wn)(eN).size>0,eA=!Z&&(a.error!==o._22.NONE||eI),ek=!Z&&(V||J);return r.createElement("ui3"===E?e6:e5,{isSelected:i,singletonRow:d,isDragging:c,handlePropertyMouseDown:ew,handlePropertyMouseMove:eb,handlePropertyMouseUp:eE,handlePropertyMouseEnter:ep,handlePropertyMouseLeave:ey,handleContextMenu:ed,onDoubleClick:eS,onKeyDown:v,rowRef:q,typedPropType:$,isEditingDefName:Z,defNameInputRef:D,componentPropDef:a,defNameInputOnMouseUp:U,defNameInputOnMouseLeave:G,defNameInputOnFocus:K,onInputKeyDown:e=>{e.stopPropagation(),(e.keyCode===S.as.ESCAPE||e.keyCode===S.as.ENTER)&&ee()},defNameInputOnChange:F,submitDefName:ee,defNameRef:X,index:t,isDefNameTruncated:eC,variantPropValues:j,shouldShowEditIcons:ek,editComponentPropPickerShown:J,toggleEditPropPicker:ea,onDeleteProp:()=>{a.kind===u.c.TYPED?k.Pc.user("delete-prop-def",()=>o.i46.deleteComponentPropDefs([a.explicitDefID])):O&&k.Pc.user("delete-variant-prop",()=>(0,ev.Yp)([a.name],M,x,O))},shouldShowErrorIcon:eA,preferredValuesUnpublishedError:eI})}function e5({isSelected:e,singletonRow:t,isDragging:n,handlePropertyMouseDown:a,handlePropertyMouseMove:l,handlePropertyMouseUp:i,handlePropertyMouseEnter:c,handlePropertyMouseLeave:u,handleContextMenu:d,onDoubleClick:p,onKeyDown:m,rowRef:h,typedPropType:f,isEditingDefName:v,defNameInputRef:y,componentPropDef:E,defNameInputOnMouseUp:w,defNameInputOnMouseLeave:b,defNameInputOnFocus:S,onInputKeyDown:T,defNameInputOnChange:N,submitDefName:I,defNameRef:A,index:k,isDefNameTruncated:P,variantPropValues:M,shouldShowEditIcons:x,editComponentPropPickerShown:O,toggleEditPropPicker:R,onDeleteProp:D,shouldShowErrorIcon:F,preferredValuesUnpublishedError:K}){return r.createElement(r.Fragment,null,r.createElement(_.e,{selected:e,singletonRow:t,dragging:n,hideGrabber:!1,onMouseDown:a,onMouseMove:l,onMouseUp:i,onMouseEnter:c,onMouseLeave:u,onContextMenu:d,onDoubleClick:p,onKeyDown:m,tabIndex:0,ref:h},r.createElement("div",{className:"component_prop_def_row--componentPropRow--qb8-e"},r.createElement(ed.A,{svg:f?(0,g.st)(f):e$.c,className:e?eY:eW,"data-tooltip-type":L.wL.TEXT,"data-tooltip":(0,C.t)("design_systems.component_properties.property_icon_tooltip",{propertyType:(0,g.Mx)(f??o.iUn.VARIANT)})}),v?r.createElement(eu.aw,{forwardedRef:y,className:eG,defaultValue:E.name,onMouseUp:w,onMouseLeave:b,onFocus:S,onMouseDown:e=>e1(e),onKeyDown:T,onChange:N,onBlur:I,onContextMenu:e2,recordingKey:"componentPropRowDefNameInput"}):r.createElement(r.Fragment,null,r.createElement(eu.g9,{forwardedRef:A,className:f?eU:eB,recordingKey:s.Mx("componentPropDefName",k),"data-tooltip-type":L.wL.TEXT,"data-tooltip":P?E.name:null},E.name),M&&r.createElement("div",{className:eV},M.join((0,C.t)("design_systems.component_properties.variant_property_values_delimiter")))),x&&r.createElement(r.Fragment,null,r.createElement(G.KM,{svg:ej.c,recordingKey:"componentPropEditButton",className:e&&!O?eH:void 0,onClick:R,onDoubleClick:e1,onMouseDown:e1,onContextMenu:e2,selected:O,"data-tooltip-type":L.wL.TEXT,"data-tooltip":(0,C.t)("design_systems.component_properties.edit_property")}),r.createElement(G.wP,{svg:eZ.c,recordingKey:"componentPropDeleteButton",className:e?eH:void 0,onClick:D,onDoubleClick:e1,onMouseDown:e1,onContextMenu:e2,"data-tooltip-type":L.wL.TEXT,"data-tooltip":(0,C.t)("design_systems.component_properties.delete_property",{numSelected:1})})),F&&r.createElement(ed.A,{svg:eQ.c,className:eq,"data-tooltip-type":L.wL.TEXT,"data-tooltip":(0,g.qO)(E.error,K),"data-tooltip-offset-y":1,"data-tooltip-timeout-delay":50}))),O&&r.createElement(eL,{componentPropDef:E}))}function e6({isSelected:e,singletonRow:t,isDragging:n,handlePropertyMouseDown:a,handlePropertyMouseMove:l,handlePropertyMouseUp:i,handlePropertyMouseEnter:c,handlePropertyMouseLeave:u,handleContextMenu:d,onDoubleClick:p,onKeyDown:m,rowRef:h,typedPropType:f,isEditingDefName:v,defNameInputRef:y,componentPropDef:E,defNameInputOnMouseUp:w,defNameInputOnMouseLeave:b,defNameInputOnFocus:S,onInputKeyDown:T,defNameInputOnChange:N,submitDefName:I,defNameRef:A,index:k,isDefNameTruncated:P,variantPropValues:M,shouldShowEditIcons:x,editComponentPropPickerShown:O,toggleEditPropPicker:R,onDeleteProp:D,shouldShowErrorIcon:F,preferredValuesUnpublishedError:K}){let U=[];return x&&U.push(r.createElement(G.KM,{svg:ej.c,recordingKey:"componentPropEditButton",className:e&&!O?ez:eX,onClick:R,onDoubleClick:e1,onMouseDown:e1,onContextMenu:e2,selected:O,"data-tooltip-type":L.wL.TEXT,"data-tooltip":(0,C.t)("design_systems.component_properties.edit_property")}),r.createElement(G.wP,{svg:eZ.c,recordingKey:"componentPropDeleteButton",className:e?ez:eX,onClick:D,onDoubleClick:e1,onMouseDown:e1,onContextMenu:e2,"data-tooltip-type":L.wL.TEXT,"data-tooltip":(0,C.t)("design_systems.component_properties.delete_property",{numSelected:1})})),F&&U.push(r.createElement(ep.e,{svg:eQ.c,className:eq,"data-tooltip-type":L.wL.TEXT,"data-tooltip":(0,g.qO)(E.error,K),"data-tooltip-offset-y":1,"data-tooltip-timeout-delay":50},r.createElement("span",{className:eq},r.createElement(el,null)))),r.createElement(r.Fragment,null,r.createElement(_.e,{className:"component_prop_def_row--flexibleRow--u0dwW",selected:e,singletonRow:t,dragging:n,hideGrabber:!1,onMouseDown:a,onMouseMove:l,onMouseUp:i,onMouseEnter:c,onMouseLeave:u,onContextMenu:d,onDoubleClick:p,onKeyDown:m,tabIndex:0,ref:h},r.createElement(ep.e,{svg:f?(0,g.st)(f):e$.c,className:e?eY:eW,"data-tooltip-type":L.wL.TEXT,"data-tooltip":(0,C.t)("design_systems.component_properties.property_icon_tooltip",{propertyType:(0,g.Mx)(f??o.iUn.VARIANT)})},f?(0,g.o3)(f):r.createElement(es.k,null)),v?r.createElement(eu.aw,{forwardedRef:y,className:eG,defaultValue:E.name,onMouseUp:w,onMouseLeave:b,onFocus:S,onMouseDown:e=>e1(e),onKeyDown:T,onChange:N,onBlur:I,onContextMenu:e2,recordingKey:"componentPropRowDefNameInput"}):r.createElement(r.Fragment,null,r.createElement(eu.g9,{forwardedRef:A,className:f?eU:eB,recordingKey:s.Mx("componentPropDefName",k),"data-tooltip-type":L.wL.TEXT,"data-tooltip":P?E.name:null},E.name),M&&r.createElement("div",{className:eV},M.join((0,C.t)("design_systems.component_properties.variant_property_values_delimiter")))),...U),O&&r.createElement(eL,{componentPropDef:E}))}let e8=et.g.Dropdown,e7=et.g.Option;function e3({defs:e,guids:t,selectedIndices:n,onSelectIndices:a,recordingKey:i}){let c=(0,l.w1)(e=>e.dropdownShown),u=(null==c?void 0:c.type)===eJ,d=e=>((null==e?void 0:e.key)==="Backspace"||(null==e?void 0:e.key)==="Delete")&&(g(),!0),p=s.ag(i,"keydown",e=>{d(e)}),m=s.cF(`${i}.fullscreen`,"keydown",e=>{d(e.event)&&e.accept()}),g=r.useCallback(()=>{if(!n.length)return;let t=n.map(t=>e[t].explicitDefID);k.Pc.user("delete-prop-defs",()=>o.i46.deleteComponentPropDefs(t))},[e,n]),h=r.useCallback((e,t,n)=>{let a=t?t.explicitDefID:"",r=n?n.explicitDefID:"";k.Pc.user("reorder-prop-defs",()=>e.forEach(e=>{o.i46.insertPropDefBetween(e.explicitDefID,a,r),a=e.explicitDefID})),en.CA.commit()},[]),f=r.useRef(null);return r.useEffect(()=>{var e,t;n.length?null==(e=f.current)||e.focus():null==(t=f.current)||t.blur()},[n]),r.createElement(ea.Sg,{handleKeyDown:m,ref:f,name:"typed-props-list",focusOnMount:!0},r.createElement(_.u,{listItems:e,selectedIndices:n,updateSelection:a,onInsertItemsBetweenValues:h,renderListItem:(n,l,o,c,u,d,m)=>r.createElement(e4,{index:l,guids:t,componentPropDef:n,isSelected:o,isDragging:c,selectRow:()=>a([l]),singletonRow:1===e.length,onPropertyMouseDown:u,onPropertyMouseMove:d,onPropertyMouseUp:m,onKeyDown:p,recordingKey:s.Mx(i,"row",l)}),recordingKey:i}),u&&!!n.length&&r.createElement(e8,{style:c.data.position,positionFixed:!0},r.createElement(e7,{onClick:g,recordingKey:"deleteProp"},r.createElement(C.Tx,{id:"design_systems.component_properties.delete_property",numSelected:n.length}))))}var e9=n(819584),te=n(843148),tt=n(675695),tn=n(971672),ta=n(784340),tr=n(301660),tl=n(162280),ts=n(499752),ti=n(292520),to=n(159624),tc=n(219868),tu=n(580340),td=n(326660),tp=n(967228),tm=n(959872),tg=n(868976),th=n(541384),t_=n(940020);let tf={format:e=>e||ev.y},tv=e=>{let t=(0,l.w1)(em.qs);return(0,te.Ub)().variables_nested_variant_props||e.every(e=>{let n=t.get(e);return!!n&&!n.isSymbolSublayer&&!n.isInstanceSublayer})};function ty(e){let{guids:t,index:n,variantPropDef:a,stateGroupGUID:i,allStateVariantProps:c,backingStateVariantProps:u,statePropertyValues:d,forBubbledProps:p,containerWidth:m,viewOnly:h,selectedPropertyValueHistory:_,sceneGraph:f,updateHistory:y}=e,E=(0,l.OY)(),w=(0,l.w1)(e=>e.instanceSwapPickerShown),b=(0,O.s5)(o.KEP.editorState().inPlaygroundMode),S=(0,ti.S_)(a.name,a.values),N=(0,e9.yC)(()=>(0,tm.s)(t,f),[t,f]),P=r.useRef(null),x=r.useRef(null),{isBound:R,setBinding:D,boundVariableId:F,onExpressionSubmitted:K,variableConsumptionMapValue:U}=function(e){let t=(0,l.OY)(),{variableConsumptionMap:n,setVariableConsumptionMap:a}=(0,tc.Ef)(),{consumedVariable:s,updateVariableConsumption:i,clearVariableConsumption:c}=(0,tc.DT)(["VARIANT_PROPERTIES"]),u=(0,r.useCallback)(n=>{let r={},l=s&&(0,M.EH)(s)&&s.type===o.Tcd.EXPRESSION?s.value.expressionArguments[0]:{type:o.Tcd.MAP,resolvedType:o.y6c.MAP,value:{}};n?t((0,A.Ge)({item:n,callback:t=>{n.resolvedType===o.y6c.STRING?l.value[e]={type:o.Tcd.ALIAS,resolvedType:o.y6c.STRING,value:t}:(n.resolvedType===o.y6c.BOOLEAN||n.resolvedType===o.y6c.FLOAT)&&(l.value[e]={type:o.Tcd.EXPRESSION,resolvedType:o.y6c.STRING,value:{expressionFunction:o.O0M.STRINGIFY,expressionArguments:[(0,tc.R8)(n.resolvedType,t)]}}),r.VARIANT_PROPERTIES={type:o.Tcd.EXPRESSION,resolvedType:o.y6c.SYMBOL_ID,value:{expressionArguments:[l],expressionFunction:o.O0M.RESOLVE_VARIANT}},a(r),(0,tp.ic)(t)}})):(delete l.value[e],0===Object.keys(l.value).length?r.VARIANT_PROPERTIES=null:r.VARIANT_PROPERTIES={type:o.Tcd.EXPRESSION,resolvedType:o.y6c.SYMBOL_ID,value:{expressionArguments:[l],expressionFunction:o.O0M.RESOLVE_VARIANT}},a(r))},[s,a,t,e]),d=(0,r.useCallback)(t=>{let r=n.VARIANT_PROPERTIES&&!n.VARIANT_PROPERTIES.isMixed&&n.VARIANT_PROPERTIES.type===o.Tcd.EXPRESSION&&n.VARIANT_PROPERTIES.value.expressionArguments[0].type===o.Tcd.MAP?n.VARIANT_PROPERTIES.value.expressionArguments[0]:{type:o.Tcd.MAP,resolvedType:o.y6c.MAP,value:{}};return t&&(0,M.EH)(t)?((t.resolvedType===o.y6c.STRING||t.resolvedType===o.y6c.BOOLEAN||t.resolvedType===o.y6c.FLOAT)&&(r.value[e]={type:o.Tcd.EXPRESSION,resolvedType:o.y6c.STRING,value:{expressionFunction:o.O0M.STRINGIFY,expressionArguments:[t.type===o.Tcd.ALIAS?(0,tc.R8)(t.resolvedType,t.value):t]}}),n.VARIANT_PROPERTIES={type:o.Tcd.EXPRESSION,resolvedType:o.y6c.SYMBOL_ID,value:{expressionArguments:[r],expressionFunction:o.O0M.RESOLVE_VARIANT}},a(n),!0):(delete r.value[e],0===Object.keys(r.value).length?n.VARIANT_PROPERTIES=null:n.VARIANT_PROPERTIES={type:o.Tcd.EXPRESSION,resolvedType:o.y6c.SYMBOL_ID,value:{expressionArguments:[r],expressionFunction:o.O0M.RESOLVE_VARIANT}},a(n),!1)},[e,a,n]),p=(0,r.useMemo)(()=>{if(s&&(0,M.EH)(s))try{let t=s.value.expressionArguments[0].value[e];if(!t)return null;if(t.type===o.Tcd.EXPRESSION&&t.value.expressionFunction===o.O0M.STRINGIFY&&(t=t.value.expressionArguments[0]),t.type===o.Tcd.ALIAS)return t.value}catch(e){(0,td.WI)("variables","error checking variant binding map",{message:e.message},{reportAsSentryError:!0})}return null},[s,e]);return{isBound:!!p,setBinding:u,clearBinding:c,boundVariableId:p,onExpressionSubmitted:(0,te.Ub)().prototype_expressions_nodefields?d:void 0,variableConsumptionMapValue:n.VARIANT_PROPERTIES}}(e.variantPropDef.name),B=tv(t);R=R&&B;let[V,z]=(0,to.S0)(["VARIANT_PROPERTIES"],K&&"TOGGLE"===S.type?o.y6c.BOOLEAN:o.y6c.STRING,D,{requestedTypes:"TOGGLE"===S.type?[o.y6c.BOOLEAN]:[o.y6c.STRING,o.y6c.FLOAT],metadata:e.variantPropDef.name},K);function $(e,t){let n=(0,ti.Ww)(_,e,t);if(t===(0,C.t)("proto.assign_variant")){z(x.current);return}let a={};for(let r of u){let{propertyValues:l}=r,s={...l,[e]:t},i=(0,ev.iI)(s,n,c);null!==i&&(a[r.guid]=i)}let r={};for(let e of Object.keys(a)){let t=a[e].guid;r[t]=(r[t]||[]).concat(N[e])}if(b){o.i46.replaceSymbolBackingInstancesInPlayground(r),y(n),(null==w?void 0:w.isShown)&&E((0,I.es)());return}0!==Object.keys(r).length&&((0,ev.g3)("Swapping A Variant",i??"",{source:p?"bubbled_sidebar":"sidebar"}),k.Pc.user("change-variant-prop",()=>(0,tr.cF)(r))),y(n)}let Q=d[S.property],Z=a.values;function J(){D(void 0)}let ee=(0,ta.c1)(F??void 0),et=(0,tc.W4)(),en=r.useMemo(()=>o.sAy.getVariableSetKeyForPublish((null==ee?void 0:ee.variableSetId)??"")??"",[null==ee?void 0:ee.variableSetId]),ea=en in et?et[(0,tt.s8)(en)]:void 0,er=(0,ta.cz)(F??void 0,ea);return r.createElement(G.WA,{className:m===g.mK.WIDE?W:m===g.mK.UNBOUNDED?Y:H,recordingKey:`componentPropertyRow.${n}`,key:`componentPropertyRow.${n}`,forwardedRef:x},r.createElement("div",{className:q},r.createElement("p",{ref:P,className:X,"data-tooltip-type":L.wL.TEXT,"data-tooltip":P.current&&P.current.offsetWidth<P.current.scrollWidth?S.property:null},S.label)),(()=>{if(R&&ee&&(0,T.aI)(er)||(0,te.Ub)().prototype_expressions_nodefields&&K&&U){let t;return(0,T.aI)(er)&&"MIXED"!==er&&(Z.some(e=>e.toLowerCase()===er.value.toString().toLowerCase())?Q.toString().toLowerCase()!==er.value.toString().toLowerCase()&&(t=(0,C.t)("design_systems.component_properties.invalid_variant_binding_state")):t=(0,C.t)("design_systems.component_properties.invalid_variant_binding")),r.createElement("div",{className:j},K&&U?r.createElement(ts._C,{targetVariableData:U.isMixed?void 0:U,onClick:()=>{z(x.current)},isNarrowPanel:!0,isInCell:!1,showVariableThumbnails:!0,isInConditional:!1,isMixed:U.isMixed,variantProperty:e.variantPropDef.name}):ee&&r.createElement("div",{className:"prop_assignment_row--variantPillContainer--I73vy"},r.createElement(tu.Y,{value:(0,M.Er)(Q)?(0,C.t)("design_systems.component_properties.mixed"):ee.name,variableId:(0,M.Er)(Q)?void 0:F??void 0,isStandalone:!0,invalid:void 0!==t,thumbnailValue:"MIXED"===er||t?void 0:er,tooltipOverride:t,isDeleted:(0,tl._q)(ee)})),r.createElement(G.wP,{className:"prop_assignment_row--variantPropDetach--XhRyN",svg:th.c,onClick:J,"data-tooltip":(0,C.t)("design_systems.component_properties.detach_property"),"data-tooltip-type":L.wL.TEXT,recordingKey:s.Mx(e.recordingKey,"detachVariantProp")}))}{let n="TOGGLE"===S.type?r.createElement(tE,{entry:S,selectedOption:Q,viewOnly:h,recordingKey:e.recordingKey,onSelectProperty:$}):r.createElement(tw,{containerWidth:m,allPropertyOptions:Z,entry:S,guids:t,onSelectProperty:$,recordingKey:e.recordingKey,selectedOption:Q,viewOnly:h});return r.createElement("div",{className:j},n,!b&&B&&r.createElement(G.wP,{className:v()("prop_assignment_row--bindingIcon--EAEMs",{"prop_assignment_row--selectedIcon--8fypm":V}),svg:t_.default,onClick:()=>$(S.property,(0,C.t)("proto.assign_variant")),"data-tooltip":(0,C.t)("proto.assign_variant"),"data-tooltip-type":L.wL.TEXT,recordingKey:s.Mx(e.recordingKey,"assignVariantProp")}))}})())}function tE({entry:e,selectedOption:t,onSelectProperty:n,viewOnly:a,recordingKey:l}){return r.createElement(U.q,{toggleClassName:$,on:(0,M.EH)(t)?t===e.toggleTokenPair[0]:M.ee,onChange:t=>{n(e.property,e.toggleTokenPair[t?0:1])},disabled:a,recordingKey:s.Mx(l,`toggle-${e.property}`),forwardEventsToFullscreen:!0})}function tw({entry:e,selectedOption:t,onSelectProperty:n,viewOnly:a,recordingKey:i,containerWidth:o,allPropertyOptions:c,guids:u}){let d=(0,l.OY)(),p=(0,l.w1)(e=>e.dropdownShown);return r.createElement("div",{className:v()("prop_assignment_row--variantPropValueContainer---FbdA",{"prop_assignment_row--variantPropValueContainerWide--i-9HY":o===g.mK.WIDE,"prop_assignment_row--variantPropValueContainerViewOnly--d0Zdv":a})},a?r.createElement("p",{className:"prop_assignment_row--componentPropName--ZazSF ellipsis--ellipsis--Tjyfa"},(0,M.Er)(t)?(0,C.t)("design_systems.component_properties.mixed"):t):r.createElement(eT.M1,{className:tg.GG,fill:o===g.mK.UNBOUNDED,id:`states-property-select-${u.join("-")}-${e.property}`,property:t,formatter:tf,onChange:t=>{n(e.property,t)},dispatch:d,dropdownShown:p,dropdownWidth:200,dropdownAlignment:"right",onMouseDown:()=>d(tn.c),recordingKey:s.Mx(i,`select-${e.property}`)},[...c].map(t=>r.createElement(eT.cb,{key:t,value:t,recordingKey:s.Mx(i,`select-${e.property}-option-${t}`)}))))}function tb({variantPropDefs:e,guids:t,allStateVariantProps:n,backingStateVariantProps:a,statePropertyValues:l,stateGroupGUID:i,forBubbledProps:o,containerWidth:c,viewOnly:u,sceneGraph:d,recordingKey:p}){let[m,g]=r.useState([]);return r.useEffect(()=>{g([])},[t]),r.createElement(_.u,{listItems:e,updateSelection:void 0,isDragDisabled:!0,renderListItem:(e,h)=>r.createElement(ty,{variantPropDef:e,guids:t,index:h,stateGroupGUID:i,allStateVariantProps:n,backingStateVariantProps:a,statePropertyValues:l,selectedPropertyValueHistory:m,updateHistory:g,containerWidth:c,viewOnly:u,forBubbledProps:o,sceneGraph:d,recordingKey:s.Mx(p,"row",t.join("-"),h)}),recordingKey:p})}var tS=n(971152);let tT={__addNewValue__:!0};class tC extends tS.Q1{}class tN extends eT.cb{}let tI=e=>{let t={};for(let n of e)if(n.stateInfo.propertyValues)for(let[e,a]of Object.entries(n.stateInfo.propertyValues))t[e]=t[e]||{},t[e][a]=(t[e][a]||0)+1;return t};function tA({variantPropDef:e,recordingKey:t}){var n;let{dropdownShown:a,allStates:i,propertySortOrder:o,propertyToFocusFullscreen:c,selectedStates:u,selectedStatesPropertyValues:d}=(0,ec.q)(e=>({dropdownShown:e.dropdownShown,allStates:(0,m.iS)(e),propertySortOrder:(0,m.ec)(e),propertyToFocusFullscreen:e.mirror.appModel.statePropertyToFocus,selectedStates:(0,m.QZ)(e),selectedStatesPropertyValues:(0,m.s9)(e)})),g=(0,l.OY)(),h=r.useRef(null),_=r.useRef(null),[f,v]=r.useState(null),y=null!=f,E=()=>{f&&(v(null),k.Pc.user("rename-variant-property",()=>(0,ev.IJ)(O,f,i??[],o??[])))},w=r.useRef({});Object.keys(d??{}).forEach(e=>{w.current[e]=w.current[e]||r.createRef()});let[b,T]=r.useState(""),N=c||b;function I(e,t){""!==(t=t.trim())&&u&&(k.Pc.user("rename-variant-prop",()=>{for(let n of u){let a=n.stateInfo.propertyValues||{};P.gc(n.symbol.node_id,(0,ev.gH)({...a,[e]:t},o||[]))}}),en.CA.commit())}r.useEffect(()=>{var e,t;!a&&N&&((null==(t=null==(e=w.current)?void 0:e[N])?void 0:t.current)&&(w.current[N].current.select(),en.CA.updateAppModel({statePropertyToFocus:""})),T(""))},[N,a]),r.useEffect(()=>{y&&h.current&&(h.current.focus(),h.current.select())},[y,h]);let A=r.useMemo(()=>tI(i??[]),[i]),M=r.useMemo(()=>tI(u??[]),[u]),x=e.values;if(!d)return null;let O=e.name,R=!d[O],D=!!_.current&&_.current.offsetWidth<_.current.scrollWidth;return r.createElement("div",{className:"variant_prop_authoring_row--selectPropertyRow--t4JAp raw_components--_row--rHucX",key:O},y?r.createElement(eu.aw,{forwardedRef:h,className:"variant_prop_authoring_row--selectPropertyNameInput--T02iO variant_prop_authoring_row--selectPropertyName--g8Tfp raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",defaultValue:O,onKeyDown:e=>{e.stopPropagation(),(e.keyCode===S.as.ESCAPE||e.keyCode===S.as.ENTER)&&(E(),e.currentTarget.blur())},onChange:e=>v(e.currentTarget.value),onFocus:()=>{h.current&&(v(O),h.current.select())},onBlur:E,onContextMenu:e=>{e.stopPropagation(),e.preventDefault()},recordingKey:s.Mx(t,`componentPropRowDefNameInput-${O}`)}):r.createElement(eu.g9,{forwardedRef:_,onDoubleClick:e=>v(O),className:"variant_prop_authoring_row--selectPropertyName--g8Tfp","data-tooltip-type":L.wL.TEXT,"data-tooltip":D?O:null,recordingKey:s.Mx(t,`componentPropRowDefName-${O}`)},O),r.createElement(tC,{id:`states-property-select-${O}`,className:R?"variant_prop_authoring_row--missingPropertyComboBox--9wy-0":"variant_prop_authoring_row--propertyComboBox--7f6TZ",dropdownClassName:"variant_prop_authoring_row--propertyComboBoxDropdown--WH-pM",formatter:(n=Object.keys(M[O]||{}).some(e=>M[O][e]===A[O][e]),{format:e=>e!==tT?e||ev.y:n?(0,C.t)("design_systems.component_properties.rename_prompt"):(0,C.t)("design_systems.component_properties.add_new_prompt"),parse:e=>e,autocomplete:e=>{for(let t of x.sort((e,t)=>e.length-t.length))if(t&&t.startsWith(e))return t;return null}}),property:d[O]||"",onChange:e=>{k.Pc.user("add-variant-property",()=>{e!==tT?I(O,e):(I(O,(0,C.t)("design_systems.component_properties.new_value")),T(O))})},dispatch:g,dropdownShown:a,recordingKey:s.Mx(t,`propertyComboBox-${O}`),forwardedRef:w.current[O]},x.map(e=>r.createElement(tN,{key:e,value:e,recordingKey:s.Mx(t,`value-${e}`)})),r.createElement(eT.Wy,null),r.createElement(tN,{key:"add-new-value",value:tT,recordingKey:s.Mx(t,"value-AddNewValue")})),R&&r.createElement(ed.A,{svg:p.GK,className:"variant_prop_authoring_row--missingPropertyNoticeIcon--t7xa0","data-tooltip":(0,C.t)("design_systems.component_properties.missing_property"),"data-tooltip-type":L.wL.TEXT,"data-tooltip-show-left":!0}))}let tk=et.g.Dropdown,tP=et.g.Option;function tM({defs:e,guids:t,selectedIndices:n,onSelectIndices:a,isInStateAuthoringView:i,recordingKey:o}){let c=(0,l.w1)(e=>(0,m.iS)(e)??[]),u=(0,l.w1)(eF.mN),d=(0,l.w1)(e=>(0,m.ec)(e)??[]),p=(0,l.w1)(e=>e.dropdownShown),g=(null==p?void 0:p.type)===e0,h=n.length===e.length,f=e=>!h&&((null==e?void 0:e.key)==="Backspace"||(null==e?void 0:e.key)==="Delete")&&(E(),!0),v=s.ag(o,"keydown",e=>{f(e)}),y=s.cF(`${o}.fullscreen`,"keydown",e=>{f(e.event)&&e.accept()}),E=r.useCallback(()=>{if(!n.length||!u)return;let t=n.map(t=>e[t].name);k.Pc.user("delete-variant-props",()=>(0,ev.Yp)(t,c,d,u))},[c,u,e,d,n]),w=r.useCallback(e=>{let t=e.map(e=>e.name);k.Pc.user("reorder-variant-props",()=>{c.forEach(e=>{let n=e.stateInfo.propertyValues;n&&P.gc(e.symbol.node_id,(0,ev.gH)(n,t))})}),en.CA.commit()},[c]),b=r.useRef(null);return r.useEffect(()=>{var e,t;n.length?null==(e=b.current)||e.focus():null==(t=b.current)||t.blur()},[n]),r.createElement(ea.Sg,{handleKeyDown:y,ref:b,name:"variant-props-list",focusOnMount:!0},r.createElement(_.u,{listItems:e,selectedIndices:n,updateSelection:a,onChange:w,renderListItem:(n,l,c,u,d,p,m)=>i?r.createElement(G.WA,null,r.createElement(tA,{variantPropDef:n,recordingKey:s.Mx(o,"row",l)})):r.createElement(e4,{index:l,guids:t,componentPropDef:n,isSelected:c,isDragging:u,selectRow:()=>a([l]),singletonRow:1===e.length,onPropertyMouseDown:d,onPropertyMouseMove:p,onPropertyMouseUp:m,onKeyDown:v,recordingKey:s.Mx(o,"row",l)}),recordingKey:o}),g&&!!n.length&&!h&&r.createElement(tk,{style:p.data.position,positionFixed:!0},r.createElement(tP,{onClick:E,recordingKey:"deleteProp"},r.createElement(C.Tx,{id:"design_systems.component_properties.delete_property",numSelected:n.length}))))}var tx=n(538524);let tO=20;function tR({guids:e,propDimension:t,containerWidth:n,shouldHideInstanceTitleButtons:a,viewOnlyMode:l,highlightNodesOnHover:s,hideErrors:o,resettableInstanceOverrides:u,instanceNameDisplayOverride:p,forBubbledProps:m,recordingKey:_,errorBoxFlushWithContainer:f}){let{typedPropDefsExcludingHidden:v,variantPropDefs:y,assignmentValuesByDefId:E,allStateVariantProps:w,backingStateVariantProps:b,statePropertyValues:S,productComponentGUID:T}=(0,h.G)(e,t),C=(0,c.ct)();if(!v.length&&!y.length)return null;let N=r.createElement(d.cF,{containerWide:n===g.mK.WIDE,canCollapse:m,resettableInstanceOverrides:u,instanceAndSublayerGUIDs:e,instanceNameDisplayOverride:p,shouldHideButtons:a,highlightNodesOnHover:s,recordingKey:_}),I=r.createElement(tF,{typedPropDefs:v,variantPropDefs:y,guids:e,assignmentValues:E,allStateVariantProps:w,backingStateVariantProps:b,statePropertyValues:S,productComponentGUID:T,propDimension:t,hideErrors:o,containerWidth:n,viewOnlyMode:l,forBubbledProps:!!m,recordingKey:_,errorBoxFlushWithContainer:f,sceneGraph:C});return m?r.createElement(i.a,{isInitiallyOpen:v.length<tO,title:N},r.createElement("div",{className:tx.kX},I)):r.createElement("div",null,N,r.createElement("div",{className:tx.kX},I))}var tL=((a=tL||{})[a.ALL_PROPS=0]="ALL_PROPS",a[a.VARIANT_PROPS=1]="VARIANT_PROPS",a[a.TYPED_PROPS=2]="TYPED_PROPS",a);function tD({propDimension:e,guids:t,containerWidth:n,viewOnlyMode:a,hideErrors:l,forBubbledProps:s,recordingKey:i,errorBoxFlushWithContainer:o,splitVariantAndTypedProps:u}){let{typedPropDefsExcludingHidden:d,variantPropDefs:p,assignmentValuesByDefId:m,allStateVariantProps:g,backingStateVariantProps:_,statePropertyValues:f,productComponentGUID:v}=(0,h.G)(t,e),y=(0,c.ct)();return r.createElement(tF,{typedPropDefs:d,variantPropDefs:p,guids:t,propDimension:e,assignmentValues:m,allStateVariantProps:g,backingStateVariantProps:_,statePropertyValues:f,productComponentGUID:v,hideErrors:l,containerWidth:n,viewOnlyMode:a,forBubbledProps:!!s,recordingKey:i,errorBoxFlushWithContainer:o,splitVariantAndTypedProps:u,sceneGraph:y})}function tF({typedPropDefs:e,variantPropDefs:t,guids:n,propDimension:a,assignmentValues:i,allStateVariantProps:c,backingStateVariantProps:d,statePropertyValues:h,productComponentGUID:_,forBubbledProps:f,hideErrors:v,containerWidth:y,viewOnlyMode:E,recordingKey:w,errorBoxFlushWithContainer:b,splitVariantAndTypedProps:S,sceneGraph:T,inPlayground:C,instanceSwapPickerInitialHeight:N,instanceSwapPickerInitialPosition:I}){let[A,k]=r.useState(void 0),[P,M]=r.useState([]),x=(e,t)=>{k(e),M(t)},O=(0,l.w1)(m.wB)===o.MJr.STATE&&a===g.C4.DEFINITION;r.useEffect(()=>{k(void 0),M([])},[t,e]);let R=!!t.length,L=!!e.length&&!O;return r.createElement(r.Fragment,null,R&&a===g.C4.DEFINITION&&r.createElement(tM,{defs:t,guids:n,selectedIndices:A===u.c.VARIANT?P:[],onSelectIndices:e=>x(u.c.VARIANT,e),isInStateAuthoringView:O,recordingKey:s.Mx(w,"propDefs",u.c.VARIANT)}),R&&_&&a===g.C4.ASSIGNMENT&&r.createElement(tb,{variantPropDefs:t,guids:n,allStateVariantProps:c,backingStateVariantProps:d,stateGroupGUID:_,statePropertyValues:h,forBubbledProps:f,containerWidth:y,sceneGraph:T,viewOnly:0===E||1===E,recordingKey:s.Mx(w,"propDefs",u.c.VARIANT)}),R&&L&&S&&r.createElement("div",{className:"props_section--divider--5xEyL"}),L&&a===g.C4.DEFINITION&&r.createElement(e3,{defs:e,guids:n,selectedIndices:A===u.c.TYPED?P:[],onSelectIndices:e=>x(u.c.TYPED,e),recordingKey:s.Mx(w,"propDefs",u.c.TYPED)}),L&&a===g.C4.ASSIGNMENT&&r.createElement(ee,{typedPropDefs:e,guids:n,assignmentValues:i,forBubbledProps:f,containerWidth:y,viewOnly:0===E||2===E,sceneGraph:T,inPlayground:C,instanceSwapPickerInitialHeight:N,instanceSwapPickerInitialPosition:I,recordingKey:s.Mx(w,"propDefs",u.c.TYPED)}),!v&&r.createElement(p.GM,{flushWithContainer:b}))}},170168:(e,t,n)=>{n.d(t,{Ib:()=>p,We:()=>u,s1:()=>m});var a=n(795188),r=n.n(a),l=n(855712),s=n(843148),i=n(99391),o=n(491776),c=n(757056);let u=(0,i.MJ)([c.A1,c.aA,c.E5,c.cn,c.kH],(e,t,n,a,r)=>r?void 0:e&&n&&e[n]?e[n].primaryInstances:(0,s.Ub)().dse_editor_templates_v1&&t&&a&&t[a]?t[a].primaryInstances:void 0),d=(0,i.MJ)([o.qs,c.A1,c.aA,c.E5,c.cn,c.kH,c.e_],(e,t,n,a,l,i,o)=>{var c,u,d,p;if(i)return;let m=[],g=new Set;if(t&&a&&t[a]){let n=e.get(a);if(!n)return;if(!n.isStateGroup||0===o.length)return r()((null==(c=t[a].primaryInstances)?void 0:c.filter(e=>e.isBubbled))||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)]);for(let e of o)for(let n of(null==(d=null==(u=t[e])?void 0:u.primaryInstances)?void 0:d.filter(e=>e.isBubbled))||[]){if(n.connectedGUIDs&&!g.has(n.connectedGUIDs[0])){for(let e of n.connectedGUIDs)g.add(e);m.push(n.connectedGUIDs)}for(let e of n.bubbledNestedInstances)if(e.connectedGUIDs&&!g.has(e.connectedGUIDs[0])){for(let t of e.connectedGUIDs)g.add(t);m.push(e.connectedGUIDs)}}return m}if((0,s.Ub)().dse_editor_templates_v1&&n&&l&&n[l])return r()((null==(p=n[l].primaryInstances)?void 0:p.filter(e=>e.isBubbled))||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)])}),p=(0,i.MJ)([c.A1,o.GW],(e,t)=>{var n;if(!t||!t.isAlive()||"INSTANCE"!==t.type)return[];let a=t.guid;return e&&a&&e[a]?(null==(n=e[a].bubbledNestedInstanceGUIDs)?void 0:n.map(e=>[e]))??[]:[]}),m=(0,l.M3)([d,p],(e,t)=>e||t||[])},594500:(e,t,n)=>{n.d(t,{GM:()=>w,Ig:()=>y});var a=n(307824),r=n(120304),l=n(760780),s=n(560072),i=n(219096),o=n(600928),c=n(974636),u=n(444636),d=n(251596),p=n(919364),m=n(287540),g=n(362592),h=n(681276),_=n(357532),f=n(101040),v=n(881467);let y="presets_baseline_nudge_onboarding_key",E="seen_presets_baseline_nudge";function w(){let{uniqueId:e,show:t,isShowing:n,complete:w}=(0,c.W)({overlay:v.GMn,priority:g.g.SECONDARY_MODAL,experiment:{check:()=>!1,predicate:e=>e,postCheck:()=>!0}}),b=(0,p.e)(E),S=(0,r.w1)(e=>e.mirror.appModel.currentPage),T=(0,m.eM)((e,t)=>(0,u.o)(e,t),S),C=(0,r.w1)(e=>{var t;return null==(t=e.openFile)?void 0:t.creatorId}),N=(0,d.sX)();return(0,l.u)(()=>{!b&&T&&C===N&&t()}),(0,o.y)(e,[i.Y$,h.y6,h.uI],()=>{w()}),a.createElement(_.Y5,{isShowing:n,targetKey:y,trackingContextName:"Presets Baseline Nudge",userFlagOnShow:E,onClose:w,arrowPosition:f.Wp.LEFT_TITLE,emphasized:!0,description:a.createElement("div",{style:{width:"236px",color:"var(--color-text-onbrand)",letterSpacing:"0.055px"}},a.createElement(s.Tx,{id:"rcs.presets_baseline.find_templates"}))})}},55608:(e,t,n)=>{n.d(t,{aq:()=>C,gC:()=>N});var a=n(307824),r=n(120304),l=n(250008),s=n(656716),i=n(105516),o=n(148276),c=n(537096),u=n(560072),d=n(403132),p=n(191352),m=n(762820),g=n(481556),h=n(514916),_=n(84656),f=n(149756);let v="memory_warning--memoryUsageContainer--CWdMy";var y=n(834312),E=n(187992),w=n(582032),b=n(528008),S=n(124456);function T(e){let t,n,l,s,i;let d=(0,r.w1)(e=>{var t;return!(null==(t=e.openFile)?void 0:t.canEdit)}),p=m.KEP.uiState().isRecovery.getCopy(),h=(0,r.w1)(e=>e.mirror.appModel.activeCanvasEditModeType===m.a_v.HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId),_=e.warningLevel,f=(_===g.Wc.WARNING?(i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_try_removing_unneeded_content"}),p?i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_high_content"}):d&&!h?i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_warning_edit_access_needed"}):d&&h?i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_read_only_view_version_history"}):!d&&h&&(i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_warning_edit_view_version_history"}))):_===g.Wc.ERROR?(i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_to_avoid_losing_file_access"}),p?i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_high_content"}):d&&!h?i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_error_contact_file_owner"}):d&&h?i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_read_only_view_version_history"}):!d&&h&&(i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_error_edit_view_version_history"}))):_===g.Wc.SAFE&&e.previousWarningLevelUnsafe&&(i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_this_file_has_enough_memory"}),p&&(i=a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_low_content"}))),i);if(_===g.Wc.WARNING)t="memory_warning--warningMemoryContentContainerWarning--SUOy5 memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconWarning--7lQhY",l=p?b.c:E.c,s=p?a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_high"}):a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_memory_running_low"});else if(_===g.Wc.ERROR)t="memory_warning--warningMemoryContentContainerError---AmhI memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconError--iWcmQ",l=p?b.c:S.c,s=p?a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_high"}):a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_almost_out_of_memory"});else{if(_!==g.Wc.SAFE||!e.previousWarningLevelUnsafe)return null;t="memory_warning--warningMemoryContentContainerSafe--KUmYN memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconSafe--BHw5o",l=y.c,s=p?a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_low"}):a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_youre_good_to_go"})}return a.createElement("div",{className:"memory_warning--memoryWarningContentBetaContainer--xcDgj"},a.createElement("div",{className:t},a.createElement("div",{className:"memory_warning--memoryWarningContentIconContainer--CeqsI"},a.createElement(c.A,{className:n,svg:l})),a.createElement("div",{className:"memory_warning--memoryWarningContentBodyHeader--HRmSt"},a.createElement("div",{className:"memory_warning--memoryWarningContentHeader--b9El-"},s),a.createElement("p",null,f,(_===g.Wc.ERROR||_===g.Wc.WARNING)&&a.createElement(o.gf,{className:_===g.Wc.ERROR?"memory_warning--learnMoreLinkError--JsmPQ":"memory_warning--learnMoreLinkWarning--AHB-S",href:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files",target:"_blank",trusted:!1,trackingEventName:"memory_warning_learn_more_clicked"}," ",a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_learn_more"}))))))}function C(e){let t=e.showSidePercentage,n=e.warningLevel&&e.warningLevel>=g.Wc.ERROR;return a.createElement(a.Fragment,null,a.createElement("div",{className:"memory_warning--usageBarContainer--F67OB"},a.createElement(c.A,{style:{left:`${g.Q$}%`},className:"memory_warning--icon--HcqCK",svg:w.c}),a.createElement("div",{className:t&&n?"memory_warning--usageBarBorderDanger--3tbol memory_warning--usageBarBorder--RmhaH":"memory_warning--usageBarBorder--RmhaH"},a.createElement("div",{className:t&&n?"memory_warning--usageBarFillDanger--Ew9Tl memory_warning--usageBarFill--ximmI":"memory_warning--usageBarFill--ximmI",style:{width:`${e.memoryUsagePercent}%`}}))),t&&a.createElement("div",{className:n?"memory_warning--usageBarTextDanger--d9-gr memory_warning--usageBarText--6Z1O9":"memory_warning--usageBarText--6Z1O9"},`${Math.trunc(e.memoryUsagePercent).toString()}%`))}function N(e){let t=(0,r.OY)(),[n,l]=(0,a.useState)(!1),{warningLevel:s,memoryUsedPercent:i,usingTestMemory:o,previousWarningLevel:c,previousWarningLevelUnsafe:u,warningTracked:d,setWarningTracked:h}=(0,g.UR)(),v=(0,r.w1)(e=>e.mirror.appModel.topLevelMode),y=(0,r.w1)(e=>{var t;return!(null==(t=e.openFile)?void 0:t.canEdit)}),E=(0,r.w1)(e=>{var t;return null==(t=e.user)?void 0:t.id}),w=(0,r.w1)(e=>e.selectedView),b=(0,p.me)(w),[S,T]=(0,a.useState)(m.KEP.uiState().isRecovery.getCopy());(0,a.useEffect)(()=>{var t,n,a;s===c||d||(null==(t=m.i46)||t.setMemoryWarningLevel(s),o)||(h(!0),n={warningEvent:"BANNER_LEVEL_CHANGE",fileKey:e.fileKey},a={warningLevel:g.Wc[s],memoryUsedPercent:i,topLevelMode:v,isReadOnly:y},(0,f.OU)(n,{warningOnPct:g.Q$,errorOnPct:g.o$,...a}))},[s,c,i,o,e.fileKey,v,y,d,h]),(0,a.useEffect)(()=>{if(s===g.Wc.SAFE){let e=()=>{"hidden"===document.visibilityState&&l(!1)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}m.KEP.uiState().showMemoryUsage.set(!0),m.KEP.uiState().showInFileMemoryPercentage.set(!0),l(!0)},[s,t,E]);let C=(0,_.s5)(m.KEP.uiState().showMemoryUsage);return C||n||m.KEP.uiState().isRecovery.getCopy()?a.createElement(I,{fileKey:e.fileKey,warningLevel:s,previousWarningLevelUnsafe:u,memoryUsedPct:i,showMemoryUsage:C,dispatch:t,closeManageMemoryModal:e.closeManageMemoryModal,toggleManageMemoryModal:e.toggleManageMemoryModal,topLevelMode:v,editorType:b,recoveryMemDisplay:S,setRecoveryMemDisplay:T}):null}class I extends a.Component{constructor(e){super(e),this.renderManageMemoryButton=()=>{let e=(0,u.t)("manage_memory_modal.manage_memory_button"),t=()=>{this.props.toggleManageMemoryModal()};return a.createElement("div",{className:"memory_warning--memoryWarningButtonContainer--GkcGB"},a.createElement(o.Sm,{onClick:()=>t(),trackingProperties:{buttonContext:e}},e))},this.onExitRecoveryMode=e=>{var t,n;let a={view:"fullscreen",editorType:e===h.aE.DESIGN?"design":"whiteboard",fileKey:this.props.fileKey,isRecoveryMode:!1};(0,l.we)("exit_recovery_mode",{currentAllocatedBytes:null==(t=m.Ehi)?void 0:t.getTotalUsedHeapMemory(),maxAllocatedBytes:null==(n=m.Ehi)?void 0:n.getMaxUsedHeapMemory(),fileKey:this.props.fileKey}),this.props.dispatch(d.Ej(a)),s.default.reload("Memory warning panel")}}render(){let{warningLevel:e,previousWarningLevelUnsafe:t,memoryUsedPct:n,showMemoryUsage:r,editorType:s}=this.props,c=e===g.Wc.ERROR;return a.createElement(a.Fragment,null,(r||this.props.recoveryMemDisplay)&&a.createElement("div",{className:v,id:v},a.createElement("div",{className:"memory_warning--memoryUsageHeader--WNS5R"},a.createElement("div",{className:"memory_warning--memoryUsageHeaderTitle--65Nsp"},a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage"})),a.createElement("div",{className:"memory_warning--memoryUsageCloseIcon--6rw0p"},a.createElement(i.CA,{onClick:()=>{var e,t;(0,l.we)("manage_memory_modal_closed",{currentAllocatedBytes:null==(e=m.Ehi)?void 0:e.getTotalUsedHeapMemory(),maxAllocatedBytes:null==(t=m.Ehi)?void 0:t.getMaxUsedHeapMemory(),fileKey:this.props.fileKey}),m.KEP.uiState().showMemoryUsage.set(!1),m.KEP.uiState().showInFileMemoryPercentage.set(!1),this.props.closeManageMemoryModal(),this.props.setRecoveryMemDisplay(!1)},disabled:c,className:c?"memory_warning--memoryUsageCloseButtonError--m6jl7":""}))),a.createElement("div",{className:c?"memory_warning--memoryUsageBodyContainerError--6oxZX":"memory_warning--memoryUsageBodyContainer--NE4lJ"},a.createElement(C,{memoryUsagePercent:n,showSidePercentage:!0,warningLevel:e})),a.createElement(T,{warningLevel:e,previousWarningLevelUnsafe:t,topLevelMode:this.props.topLevelMode}),this.renderManageMemoryButton(),m.KEP.uiState().isRecovery.getCopy()&&n<g.Uf&&a.createElement("div",{className:r?"memory_warning--recoveryModeBannerExitButtonContainer--7A1pw":"memory_warning--recoveryModeExitButtonContainer--Y21eB"},a.createElement(o.Uv,{onClick:()=>this.onExitRecoveryMode(s)},a.createElement(u.Tx,{id:"fullscreen.pages_panel.memory_usage_recovery_mode_exit"})))))}}},666332:(e,t,n)=>{n.d(t,{E$:()=>B,EJ:()=>U,IJ:()=>R,K8:()=>x,KA:()=>L,YF:()=>D,Yh:()=>O,gp:()=>G,kv:()=>F});var a=n(307824),r=n(120304),l=n(404920),s=n(288136),i=n(505935),o=n(937620),c=n(372152),u=n(87975),d=n(148380),p=n(936756),m=n(327112),g=n(4596),h=n(560072),_=n(852768),f=n(191352),v=n(657452),y=n(762820),E=n(713620),w=n(526768),b=n(138884),S=n(768820),T=n(907152),C=n(397888),N=n(78168),I=n(84656),A=n(885908),k=n(639512),P=n(151444),M=n(836492);let x=a.createContext(!1);function O({onChange:e,className:t,query:n,focusedByButtons:r,innerRef:l,onKeyDown:s,onKeyUp:i,onPasteCapture:o,onFocus:c,editorType:d}){return a.createElement(P.U,{className:t,innerRef:l,value:n,placeholder:(0,h.t)("canvas_search.search_placeholder"),onFocus:e=>{c&&c(e),r.current||e.target.select(),r.current=!1},onPasteCapture:o,onKeyDown:e=>{e.keyCode===u.as.F?(0,u.y2)(e)?(e.currentTarget.select(),e.preventDefault()):(0,E.eI)(e,E.fh.NO,E.wB.NO)&&e.stopPropagation():s(e)},onKeyUp:i,onChange:e,dataTestId:"canvas-search-input",recordingKey:`${d}.canvas_search.search`})}function R(e,t,n){let r=(0,a.useCallback)(({direction:a,shouldSelectInput:r})=>{var l,s;r?null==(s=e.current)||s.select():(n.current=!0,null==(l=e.current)||l.focus()),a&&t(a,"keyboard")},[n,e,t]);(0,i.Y)(v.E.FocusEvent,r)}function L(){let e=(0,a.useRef)(!1),[t,n]=(0,a.useState)(!0),{query:l}=(0,r.w1)(e=>e.canvasSearch),{total:s}=(0,c.m4)(m.MJ);return{focusedByButtons:e,hidden:t,setHidden:n,inputRef:a.useRef(null),navDisabled:!l||s<=1,showUi:(0,C.uc)("showUi")}}function D(){let e=(0,w.i)("canvas_search_navigate"),t=(0,r.w1)(e=>e.canvasSearch.scope);return(0,a.useCallback)((n,a)=>{e(y.mMU.setActiveResultAndGetViewportSettings(n,a),{additionalTrackEventParams:{searchScope:y.o$U[t]}})},[e,t])}function F(){var e;let t=(0,w.i)("canvas_search_navigate"),{query:n,scope:i,filters:c,mode:u}=(0,r.w1)(e=>e.canvasSearch),m=(0,r.OY)(),h=(0,a.useRef)(!1),f=(0,C.uc)("currentPage"),v=(0,I.s5)(y.KEP.uiState().showCanvasSearch),E=(0,C.uc)("pagesList"),[T,A]=(0,a.useState)(!1),[k,P]=(0,a.useState)(y.KEP.uiState().isRecovery.getCopy()),[M,x]=(0,a.useState)(!1),O=K(),R=(0,o.e6)(),L=(0,d.Q7)(),D=(0,a.useMemo)(()=>L&&(0,N.IV)(E),[L,E])||L&&(null==(e=y.Abq)?void 0:e.isValidatingIncremental()),F=(0,a.useMemo)(()=>!L&&(0,N.IV)(E),[L,E]);(0,a.useLayoutEffect)(()=>{i!==y.o$U.ALL_PAGES||M||!D&&k?y.mMU.setSearchScope(i):(x(!0),scheduler.postTask(async()=>{D&&await (0,S.uU)(y.uxq.FIND_AND_REPLACE),y.mMU.setSearchScope(i),P(!0)},{priority:"user-blocking"}))},[k,E,i,M,D]);let G=(0,a.useCallback)(async(e,n=!0)=>{s.sr.start("canvas_search_time_to_results"),x(!0);let{nav:a,resultsByPage:r}=await O(e,n);Object.keys(r).filter(e=>e!==f&&e!==g.s5).length?A(!0):A(!1),x(!1),n&&t(a,{additionalTrackEventParams:{searchScope:y.o$U[i]}});let l=s.sr.tryStop("canvas_search_time_to_results");l&&R("canvas_search_time_to_results",{timeElapsedMs:l,searchScope:y.o$U[i],resultCount:Object.values(r).reduce((e,t)=>e+=t.length,0)})},[f,t,i,O,R]),U=(0,l.c)(G,300),B=(0,a.useCallback)((e,t=!0)=>{m(_.Su(e)),x(!!e&&!(0,p.Oc)(e)),U(e,t)},[m,U]);return(0,a.useEffect)(()=>{v&&n&&(i!==y.o$U.ALL_PAGES||!D&&k)&&G(n,!1)},[c,u,i,v,E,k,D]),{query:n,showSearch:v,resultsOnOtherPages:T,search:B,next:(0,a.useCallback)((e,n)=>{(0,b.cX)(""),y.mMU.setHoveredResult(g.Q9,-1);let a=!h.current;h.current=!1,t(y.mMU.setNextSearchResultAndGetViewportSettings(e,a),{additionalTrackEventParams:{source:n}})},[t]),exit:(0,a.useCallback)(()=>{var e;null==(e=y.mMU)||e.exitSearchMode(y.OQ8.NONE)},[]),setNavigateNearestOnce:function(){h.current=!0},mode:u,isLoading:M,allInstancesExpanded:k,missingResultsOnSomePages:F}}function K(){let{scope:e,filters:t,mode:n}=(0,r.w1)(e=>e.canvasSearch),l=(0,C.uc)("currentPage"),s=(0,o.e6)(),i=(0,f.CM)(),c=(0,r.w1)(e=>e.mirror.appModel.pagesList);return(0,a.useCallback)(async(a,r=!0,o)=>{let u=o??l;if(!a||(0,p.Oc)(a)){let{nav:e}=y.mMU.setSearchResultsAndGetViewportSettings([],u,"",{categories:[],mode:n});return{nav:e,resultsByPage:{}}}let d=!!t[k.qO.MatchCase],m=!!t[k.qO.WholeWords],{resultsByPage:h,metrics:_}=await A.e_.search(a,{searchLayerNames:"design"===i,matchCase:d,wholeWords:m}),f=(0,M.Ud)(t),v=e===y.o$U.ACTIVE_PAGE?h[u]?[{pageId:u,results:h[u]}]:[]:Object.keys(h).map(e=>({pageId:e,results:h[e]}));if(e===y.o$U.ACTIVE_PAGE&&h[g.s5]){let e=h[g.s5];e.length&&v.push({pageId:g.s5,results:e})}if(1===a.length){let e=0,t=[],n=v.findIndex(e=>e.pageId===g.s5);for(let a of(n>-1&&t.push(v[n]),c)){let n=v.findIndex(e=>e.pageId===a.nodeId);if(-1===n)continue;let r=v[n];if(r.results.length>1e3-e){t.push({results:r.results.slice(0,1e3-e),pageId:r.pageId});break}e+=r.results.length,t.push(r)}v=t}let{nav:E,...w}=y.mMU.setSearchResultsAndGetViewportSettings(v,u,a,{categories:f,mode:n}),b=f.map(e=>k.qO[e]);return s("canvas_search_results",{..._,...w,nodeTypes:b,searchScope:y.o$U[e],matchCase:d,wholeWords:m}),{nav:E,resultsByPage:h}},[l,i,t,n,c,e,s])}function G(){let e=(0,I.s5)(y.KEP.uiState().showCanvasSearch),t=y.mMU.hasDirtyPrimaryInstances(),n=(0,c.m4)(m.MJ),r=(0,a.useRef)([]),l=t&&r.current.length,s=(0,a.useMemo)(()=>{if(!e||!n.total||l)return[];let t=y.mMU.getSearchResults(),a=[];return t.forEach(e=>{let t=e.results.map(e=>{let t=T.TSSceneGraph.instance.get(e.guid);return t?{...e,textContent:t.textContent,name:t.name}:e});a.push({results:t,pageId:e.pageId})}),r.current=a,a},[n,e,l]);return l?r.current:s}function U(e){return!e.clientX&&!e.clientY}function B(){let{query:e,scope:t}=(0,r.w1)(e=>e.canvasSearch),n=K();return(0,a.useCallback)(a=>{let r=y.mMU.getActiveResult(),l=r.type===y.__k.CANVAS,s=a||l&&r.guid;return!!s&&(T.TSSceneGraph.instance.setCurrentPageAsync(s).then(()=>{t===y.o$U.ACTIVE_PAGE?n(e,!1,s):y.mMU.setActiveResultAndGetViewportSettings(s,0)}),!0)},[e,t,n])}},974836:(e,t,n)=>{n.d(t,{s:()=>m});var a=n(307824),r=n(590659),l=n(515724),s=n(125504),i=n.n(s),o=n(968240),c=n(142548),u=n(241645),d=n(647460),p=n(113025);function m({onClick:e}){let t="ui3"===(0,l.qG)().version,n=a.createElement("div",{className:i()(d.Ou,{[d.sv]:t})},a.createElement(o.e,{svg:p.c},a.createElement(r.u,null)));return a.createElement(u.wP,{"data-onboarding-key":"canvas-search","data-tooltip-type":c.wL.LOOKUP,"data-tooltip":"canvas-search",onClick:e,recordingKey:"canvas_search.search_icon_button",isBackgroundTransparent:!0,className:d.GO},n)}},151444:(e,t,n)=>{n.d(t,{U:()=>d});var a=n(307824),r=n(125504),l=n.n(r),s=n(87975),i=n(838836),o=n(888932),c=n(777868),u=n(647460);function d({innerRef:e,className:t,value:n,placeholder:r,onChange:d,onFocus:p,onKeyDown:m,onKeyUp:g,shiftEnterInsertsNewline:h,dataTestId:_,recordingKey:f,onPasteCapture:v}){let y=(0,a.useCallback)(t=>{e&&(e.current=(null==t?void 0:t.textarea)??null)},[e]),E=n.includes("\n");return a.createElement(c.s,{className:l()(t,u.k$,{[u.eM]:!E}),ref:y,focusOnMount:!0,placeholder:r,value:n,spellCheck:!1,recordingKey:f,dataTestId:_,onEscape:i.Kw,disableBorderStyles:!0,onFocus:p,onPasteCapture:v,onKeyDown:e=>{switch(e.keyCode){case s.as.ENTER:if(e.preventDefault(),h&&(e.shiftKey||o.cp.mac&&e.ctrlKey)){let{selectionStart:t,selectionEnd:n}=e.currentTarget;e.currentTarget.setRangeText("\n",t,n,"end"),e.currentTarget.scrollLeft=0,e.stopPropagation(),d(e.currentTarget.value);return}break;case s.as.UP_ARROW:case s.as.DOWN_ARROW:if(E)return}m(e)},onKeyUp:g,onChange:e=>d(e.currentTarget.value)})}},321512:(e,t,n)=>{n.d(t,{m:()=>T});var a=n(307824),r=n(120304),l=n(288136),s=n(937620),i=n(372152),o=n(87975),c=n(570464),u=n(327112),d=n(537096),p=n(560072),m=n(317704),g=n(250016),h=n(191352),_=n(762820),f=n(555168),v=n(713620),y=n(526768),E=n(696240),w=n(151444),b=n(647460),S=n(792336);function T({query:e,value:t,onChange:n,onFocus:T,recordingKey:C,hasMultipleSelections:N}){let I=(0,r.OY)(),A=(0,E.Ed)(),k=(0,y.i)("canvas_search_navigate"),P=(0,r.w1)(e=>e.canvasSearch.scope),{total:M}=(0,i.m4)(u.MJ),x="whiteboard"===(0,h.CM)(),[O,R]=(0,a.useState)(!1),L=e.toLocaleLowerCase()!==t.toLocaleLowerCase(),D=(0,s.e6)(),F=!e||!M,K=f.wH.user("canvas-search-replace",n=>{if(N){let{numReplaced:a,timeMs:r}=_.mMU.replaceInMultipleResults(t,{preserveCase:L},_.S6F.ONLY_ACTIVE);D("canvas_search_multi_replace",{source:n,timeMs:r,numReplaced:a,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),R(!0);return}let a=_.mMU.replaceInActiveResult(t,{preserveCase:L});R(!0),D("canvas_search_replace",{source:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),k(a,{delay:300,additionalTrackEventParams:{searchScope:_.o$U[P]}})});return a.createElement("div",null,a.createElement("div",{className:b.oT},!x&&a.createElement("div",{className:b.Ou},a.createElement(d.A,{svg:S.c})),a.createElement(w.U,{value:t,placeholder:(0,p.t)("canvas_search.replace_placeholder"),recordingKey:c.Mx(C,"replace_input"),onChange:n,onFocus:e=>{null==T||T(e,!A())},onKeyDown:e=>{e.keyCode===o.as.ENTER?(K("enter"),e.stopPropagation()):O&&(0,o.Mr)(e)&&(0,v.eI)(e,v.fh.YES)&&e.stopPropagation()},shiftEnterInsertsNewline:!0})),a.createElement("div",{className:b.kR},a.createElement(g.q,{disabled:F,onClick:()=>K("button"),recordingKey:c.Mx(C,"replace_one")},a.createElement(p.Tx,{id:"canvas_search.replace_one"})),a.createElement(g.q,{disabled:F,onClick:f.wH.user("canvas-search-replace-all",()=>{l.sr.start("canvas_search_replace_all");let{numReplaced:n,timeMs:a}=_.mMU.replaceInMultipleResults(t,{preserveCase:L},_.S6F.ALL);n>0&&(R(!0),I(m.A.enqueue({type:"canvas-search-replace-all",message:(0,p.t)(x?"canvas_search.replace_all_message_figjam":P===_.o$U.ACTIVE_PAGE?"canvas_search.replace_all_message":"canvas_search.replace_all_message_all_pages",{count:n})}))),D("canvas_search_replace_all",{source:"button",timeMs:a,numReplaced:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),l.sr.tryStop("canvas_search_replace_all")}),recordingKey:c.Mx(C,"replace_all")},a.createElement(p.Tx,{id:"canvas_search.replace_all"}))))}},739360:(e,t,n)=>{n.d(t,{w:()=>D,y:()=>G});var a=n(307824),r=n(120304),l=n(125504),s=n.n(l),i=n(139776),o=n(372152),c=n(888932),u=n(570464),d=n(327112),p=n(204792),m=n(537096),g=n(560072),h=n(852768),_=n(282528),f=n(191352),v=n(762820),y=n(833492),E=n(397888),w=n(639512),b=n(142548),S=n(740718),T=n(241645),C=n(836492),N=n(243568),I=n(122112),A=n(667212),k=n(954484),P=n(931376),M=n(808100),x=n(290151),O=n(203276),R=n(627956),L=n(392596);function D({lean:e,minWidth:t,recordingKey:n}){let l=(0,r.OY)(),s=(0,y.s)("CANVAS_SEARCH_FILTER_DROPDOWN"),i=a.useRef(null),m=(0,E.uc)("isReadOnly"),C=(0,o.m4)(d.BX),N=(0,r.w1)(e=>e.canvasSearch.filters),I=(0,r.w1)(e=>e.canvasSearch.mode),k="whiteboard"===(0,f.CM)(),P=a.useMemo(()=>{let e=m?[]:[a.createElement(p.g.CheckableTwoColumnOption,{key:"find",primaryText:(0,g.t)("canvas_search.search"),checked:I===v.W_0.FIND,onClick:()=>{l(h.kp(v.W_0.FIND)),s.hide()},recordingKey:u.Mx(n,"settings.find")}),a.createElement(p.g.CheckableTwoColumnOption,{key:"replace",primaryText:(0,g.t)("canvas_search.replace"),checked:I===v.W_0.REPLACE,onClick:()=>{l(h.kp(v.W_0.REPLACE)),s.hide()},recordingKey:u.Mx(n,"settings","replace")}),a.createElement(p.g.Separator,{key:"sep1"})],t=(t,r=!1)=>{let i=!!N[t];e.push(a.createElement(F,{key:t,option:t,checked:i,counts:C,onClick:e=>{r||e.shiftKey||e.altKey||c.cp.mac&&e.metaKey?(l(h.Y9(t)),r&&s.hide()):(l(h.a6(t)),s.hide())},recordingKey:n}))};if(I===v.W_0.FIND&&!k){let r=!w.Km.some(e=>!!N[e]),i=Object.values(C).reduce((e,t)=>e+t,0);e.push(a.createElement(K,{checked:r,icon:A.c,label:(0,g.t)("canvas_search.filter.all"),count:i,onClick:()=>{l(h.Wy()),s.hide()},recordingKey:u.Mx(n,"settings","All")})),w.Km.forEach(e=>t(e)),e.push(a.createElement(p.g.Separator,{key:"sep2"}))}return w.__.forEach(e=>t(e,!0)),e},[l,s,N,k,m,I,C,n]);return(0,a.useEffect)(()=>{m&&I===v.W_0.REPLACE&&l(h.kp(v.W_0.FIND))},[l,m,I]),a.createElement("div",{role:"none",onClick:_.Ii,onMouseUp:_.Ii},a.createElement("div",{ref:i},a.createElement(T.KM,{svg:x.c,selected:s.showing,"data-tooltip-type":b.wL.TEXT,"data-tooltip":(0,g.t)("canvas_search.settings"),onClick:e=>s.showing&&e.stopPropagation(),onMouseDown:s.toggle,recordingKey:u.Mx(n,"settings")})),s.showing&&i.current&&a.createElement(S.uq,{showPoint:!0,targetRect:i.current.getBoundingClientRect(),options:P,hideDropdown:s.hide,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,autofocusPrevElementOnTab:!1,lean:e,minWidth:t,recordingKey:u.Mx(n,"settings"),propagateCloseClick:!0}))}function F(e){let t=e.counts[e.option],n=function(e){switch(e){case w.qO.Text:return M.c;case w.qO.FrameOrGroup:return N.c;case w.qO.Component:return k.c;case w.qO.Instance:return I.c;case w.qO.Image:return R.c;case w.qO.Shape:return P.c;case w.qO.Other:return O.c;case w.qO.MatchCase:case w.qO.WholeWords:return null}}(e.option),r=B(e.option);return a.createElement(K,{checked:e.checked,icon:n,label:r,count:t,onClick:e.onClick,buttonRef:e.buttonRef,recordingKey:u.Mx(e,"settings",w.qO[e.option])})}function K({checked:e,icon:t,label:n,count:r,onClick:l,buttonRef:s,recordingKey:i}){return a.createElement(p.g.CheckableOption,{checked:e,onClick:l,recordingKey:i,buttonRef:s},a.createElement("div",{className:"canvas_search_settings--optionRow--KS01b"},t&&a.createElement(m.A,{className:"canvas_search_settings--optionIcon---0QYX",svg:t}),a.createElement("span",{className:"canvas_search_settings--optionLabel--Ygpmi"},n),!!r&&a.createElement("span",{className:"canvas_search_settings--optionCount--BzzTP"},r)))}function G({short:e,mode:t,recordingKey:n}){let l=(0,r.OY)(),o=(0,r.w1)(e=>e.canvasSearch.filters),c=t===v.W_0.FIND?C.g3:C.Ir,u=(0,i.iA)(c,e=>o[e]?a.createElement(U,{key:e,option:e,onClose:()=>{l(h.Y9(e))},recordingKey:n}):null);return 0===u.length?null:a.createElement("div",{className:s()("canvas_search_settings--filterPills--tbdih",{"canvas_search_settings--filterPillsShort--GX-Rn":e})},u)}function U({option:e,onClose:t,recordingKey:n}){return a.createElement("div",{className:"canvas_search_settings--filterPill--hjIaF"},B(e),a.createElement(T.wP,{className:"canvas_search_settings--pillRemove--Om1tg",svg:L.c,onClick:t,isBackgroundTransparent:!0,"data-tooltip-type":b.wL.TEXT,"data-tooltip":(0,g.t)("canvas_search.filter.remove"),tooltipForScreenReadersOnly:!0,recordingKey:u.Mx(n,w.qO[e],"remove")}))}function B(e){switch(e){case w.qO.Text:return(0,g.t)("canvas_search.filter.text");case w.qO.FrameOrGroup:return(0,g.t)("canvas_search.filter.frame_or_group");case w.qO.Component:return(0,g.t)("canvas_search.filter.component");case w.qO.Instance:return(0,g.t)("canvas_search.filter.instance");case w.qO.Image:return(0,g.t)("canvas_search.filter.image");case w.qO.Shape:return(0,g.t)("canvas_search.filter.shape");case w.qO.Other:return(0,g.t)("canvas_search.filter.other");case w.qO.MatchCase:return(0,g.t)("canvas_search.filter.match_case");case w.qO.WholeWords:return(0,g.t)("canvas_search.filter.whole_words")}}},34560:(e,t,n)=>{let a,r;n.d(t,{G:()=>eh,Q:()=>e_});var l=n(307824),s=n(120304),i=n(413552),o=n(590659),c=n(515724),u=n(125504),d=n.n(u),p=n(937620),m=n(667492),g=n(372152),h=n(87975),_=n(838836),f=n(148380),v=n(888932),y=n(570464),E=n(853688),w=n(849408),b=n(936756),S=n(327112),T=n(204792),C=n(760700),N=n(577824),I=n(703520),A=n(71556),k=n(537096),P=n(968240),M=n(240228),x=n(4596),O=n(560072),R=n(317704),L=n(852768),D=n(585508),F=n(657452),K=n(220180),G=n(762820),U=n(713620),B=n(526768),V=n(138884),H=n(833492),W=n(397888),Y=n(78168),q=n(219476),X=n(142548),z=n(142088),$=n(740718),j=n(241645),Q=n(666332),Z=n(974836),J=n(321512),ee=n(739360),et=n(836492),en=n(647460),ea=n(599628),er=n(1196),el=n(210424),es=n(191140),ei=n(131128),eo=n(400103),ec=n(919564),eu=n(284548),ed=n(113025),ep=n(166996),em=((a=em||{})[a.NONE=0]="NONE",a[a.SINGLE=1]="SINGLE",a[a.MULTI=2]="MULTI",a),eg=((r=eg||{})[r.NONE=0]="NONE",r[r.TOP=1]="TOP",r[r.MIDDLE=2]="MIDDLE",r[r.BOTTOM=3]="BOTTOM",r[r.ALL=4]="ALL",r);let eh=l.memo(function(e){let{onFocus:t}=e;return l.createElement("div",{className:en.UF},l.createElement("div",{className:en.w9},l.createElement("div",{className:en.yS},l.createElement(Z.s,{onClick:e.onFocus}),l.createElement(N.y,{className:en.k$,onFocus:t,placeholder:(0,O.t)("canvas_search.search_placeholder")}))))}),e_=l.memo(function({showFilter:e}){let{query:t,resultsOnOtherPages:n,next:a,exit:r,setNavigateNearestOnce:s,search:i,showSearch:u,mode:p,isLoading:m,allInstancesExpanded:_,missingResultsOnSomePages:f}=(0,Q.kv)(),[v,y]=(0,l.useState)(""),{focusedByButtons:E,inputRef:w}=(0,Q.KA)(),T=(0,l.useRef)(null),C=(0,B.i)("canvas_search_navigate"),N=(0,g.m4)(S.c3),A=(0,g.m4)(S.Si),k=(0,l.useContext)(Q.K8),[R,L]=(0,l.useState)(null),[F,U]=(0,l.useState)(0),[V,H]=(0,l.useState)(!1);(0,l.useLayoutEffect)(()=>{if(k){if(A.size>1||N.size>1){H(!0);return}for(let e of N.values())e.size>1&&H(!0)}},[N,k,A]);let W=(e,t)=>{H(!1),a(e,t)},Y=function(e,t,n){if(!n)return!1;if(t.size>1||e.size>1)return!0;for(let t of e.values())return t.size>1;return!1}(N,A,k),z=function(e,t,n,a,r){let s=eC(e,n,e=>{var n;let a=(e.keyCode===h.as.D||e.keyCode===h.as.F)&&(0,h.Mr)(e)&&e.shiftKey;eI(e)&&!a&&(null==(n=t.current)||n.focus())},r);return(0,l.useCallback)(e=>{var r;let l=eA(e);switch(e.keyCode){case h.as.RIGHT_ARROW:case h.as.LEFT_ARROW:(0,h.y2)(e)||s(e);break;case h.as.C:case h.as.X:(0,h.y2)(e)&&window.getSelection&&!window.getSelection().toString()&&(D.CA.triggerAction(e.keyCode===h.as.C?"copy":"cut"),e.preventDefault(),e.stopPropagation(),e.keyCode===h.as.X&&(null==(r=t.current)||r.focus()));break;case h.as.V:case h.as.Z:break;default:s(e)}n||l===x.Q9||a(G.mMU.setActiveResultAndGetViewportSettings(l,0),{delay:300})},[n,s,t,a])}(W,T,Y,C,U),$=eN(U);(0,Q.IJ)(w,a,E);let Z="ui3"===(0,c.qG)().version;if(!u)return null;let et=l.createElement(l.Fragment,null,l.createElement("div",{className:d()(en.Ou,{[en.sv]:Z&&""===t})},l.createElement(P.e,{svg:ed.c},l.createElement(o.u,null))),l.createElement(Q.Yh,{onChange:e=>{H(!1),i(e)},query:t,focusedByButtons:E,onKeyDown:z,onKeyUp:$,innerRef:w,onPasteCapture:e=>{var t;(0,K.qy)(e)&&(D.CA.triggerActionInUserEditScope("paste"),e.preventDefault(),null==(t=T.current)||t.focus())},editorType:q.aE.DESIGN}));return l.createElement(M.a,{fullHeight:!0},l.createElement("div",{className:en.Qr,onBlurCapture:e=>{e.relatedTarget&&!e.currentTarget.contains(e.relatedTarget)&&(G.mMU.setOverlayVisible(!1),s(),U(0))}},l.createElement("div",{className:en.w9},l.createElement("div",{className:en.us},Z?l.createElement("div",{className:en.ov},et):et,e&&l.createElement(ee.w,{lean:"right",recordingKey:"figma_design_search"}),l.createElement(j.wP,{svg:ep.c,onClick:r,"data-tooltip-type":X.wL.TEXT,"data-tooltip":(0,O.t)("canvas_search.close"),tooltipForScreenReadersOnly:!0,recordingKey:"figma_design_search.close"})),l.createElement(ee.y,{mode:p,short:p===G.W_0.REPLACE,recordingKey:"figma_design_search.filterPills"}),p===G.W_0.REPLACE&&l.createElement(J.m,{query:t,value:v,onChange:y,onFocus:(e,n)=>{var a;!t&&n&&(null==(a=w.current)||a.focus())},hasMultipleSelections:Y,recordingKey:"figma_design_search"})),m?l.createElement("div",{className:d()(en.kH,en._Q)},l.createElement(I.Y1,{size:"medium",testId:"canvas-search-loading-spinner"})):t&&!(0,b.Oc)(t)&&l.createElement(ef,{onNext:W,navigate:C,replacement:p===G.W_0.REPLACE?v:void 0,resultsOnOtherPages:n,allInstancesExpanded:_,resultInputHandlerRef:T,hoveredResult:R,hasMultipleSelections:Y,isInMultiselectMode:V,hoverSelectMode:F,missingResultsOnSomePages:f,setIsInMultiselectMode:H,setHoverSelectMode:U,setHoveredResult:L})))});function ef({onNext:e,navigate:t,replacement:n,resultsOnOtherPages:a,resultInputHandlerRef:r,hoveredResult:o,hasMultipleSelections:c,isInMultiselectMode:u,missingResultsOnSomePages:f,hoverSelectMode:v,setIsInMultiselectMode:y,setHoverSelectMode:w,setHoveredResult:b,allInstancesExpanded:T}){let C=(0,s.OY)(),N=(0,Q.gp)(),k=(0,Q.E$)(),P=(0,W.uc)("currentPage"),M=(0,l.useRef)(null),R=(0,s.w1)(e=>e.canvasSearch.scope),F=G.mMU.hasDirtyPrimaryInstances(),K=(0,g.m4)(S.MJ),U=(0,g.m4)(S.Aj),V=(0,g.m4)(S.c3),H=(0,g.m4)(S.Si),Y=(0,g.m4)(S.I1),q=(0,l.useContext)(Q.K8),z=!u,$=null==n,Z=(0,Q.YF)(),J=function(e,t){let n=(0,B.i)("canvas_search_navigate"),a=(0,s.w1)(e=>e.canvasSearch.scope),r=(0,p.e6)(),i=(0,l.useContext)(Q.K8),o=(0,l.useCallback)((l,s,i)=>{let{nav:o,numNewNodes:c,numNewTextMatches:u}=G.mMU.addActiveResultAndGetViewportSettings(l,s,i);e&&r("canvas_search_enter_multi_select",{numberOfNodes:c,numberOfTextMatches:u,source:"cmd/ctrl+click",mode:t?"find":"replace"}),n(o,{additionalTrackEventParams:{searchScope:G.o$U[a]}})},[t,n,a,r,e]);return i?o:_.Kw}(z,$),ee=function(e,t){let n=(0,B.i)("canvas_search_navigate"),a=(0,s.w1)(e=>e.canvasSearch.scope),r=(0,p.e6)(),i=(0,l.useContext)(Q.K8),o=(0,l.useCallback)(l=>{let{nav:s,numNewNodes:i,numNewTextMatches:o}=G.mMU.addActiveResultsAndGetViewportSettings(l);e&&r("canvas_search_enter_multi_select",{numberOfNodes:i,numberOfTextMatches:o,source:"shift+click",mode:t?"find":"replace"}),n(s,{additionalTrackEventParams:{searchScope:G.o$U[a]}})},[t,n,a,r,e]);return i?o:_.Kw}(z,$),ea=function(){let e=(0,B.i)("canvas_search_navigate"),t=(0,s.w1)(e=>e.canvasSearch.scope),n=(0,l.useContext)(Q.K8),a=(0,l.useCallback)((n,a,r)=>{e(G.mMU.removeActiveResultAndGetViewportSettings(n,a,r),{additionalTrackEventParams:{searchScope:G.o$U[t]}})},[e,t]);return n?a:_.Kw}(),[er,el]=function(...e){let[t,n]=(0,l.useState)(()=>e.reduce((e,t)=>(e[t]=!0,e),{}));return[t,(0,l.useCallback)((e,t=!0)=>{n(n=>n[e]!==t?{...n,[e]:t}:n)},[])]}(x.s5,P),eo=(0,l.useRef)({}),ec=(0,l.useMemo)(()=>{let e=[],t=N.find(e=>e.pageId===x.s5),n=R===G.o$U.ALL_PAGES||!!t,a=N.find(e=>e.pageId===P),r=N;R===G.o$U.ACTIVE_PAGE&&(r=[],t&&r.push(t),a&&r.push(a));let l=0;for(let{pageId:t,results:a}of(eo.current={},r)){if(0===a.length)continue;let r=!!er[t];if(n&&(e.push({type:"header",data:{pageId:t,open:r,numResults:a.reduce((e,t)=>e+=t.textMatches.length,0)}}),++l),n&&!r)continue;eo.current[t]=l;let s=0;for(let n of a){let{textMatches:a,...r}=n;a.forEach((n,a)=>{e.push({type:"result",data:{...r,matchIndex:a,textMatch:n,index:s,pageId:t}}),++s,++l})}}return e},[P,er,R,N]);(0,l.useEffect)(()=>{null!=U&&el(U.pageId)},[U,el]);let eu=(0,i.b)({size:ec.length,parentRef:M,overscan:10}),ed=e=>{if(null==U||null==U.index)return[];let t=eo.current[U.pageId];if(null==t)return[];let n=t+U.index;if(n===e)return[];let a=[],r=Math.min(n,e),l=Math.max(n,e);if("header"===ec[e].type)return a;for(let e=r;e<=l;e++)"result"===ec[e].type&&a.push(ec[e].data);return a},ep=(0,l.useCallback)(e=>!!q&&"header"!==e.type&&(!!u||0!==v)&&(e.data.textMatch.matchType===G.Sw6.TEXT_MATCH&&H.has(e.data.resultGuid)&&!V.has(e.data.resultGuid)||Y.has(e.data.resultGuid)),[V,q,H,v,Y,u]),em=(0,l.useCallback)(e=>{var t;return"header"!==e.type&&(q?e.data.textMatch.matchType===G.Sw6.PAGE_MATCH?e.data.index===(null==U?void 0:U.index)&&e.data.pageId===(null==U?void 0:U.pageId):e.data.textMatch.matchType===G.Sw6.LAYER_MATCH?H.has(e.data.resultGuid)&&!V.get(e.data.resultGuid):(null==(t=V.get(e.data.resultGuid))?void 0:t.has(e.data.matchIndex))??!1:e.data.index===(null==U?void 0:U.index)&&e.data.pageId===(null==U?void 0:U.pageId))},[null==U?void 0:U.index,null==U?void 0:U.pageId,V,q,H]),eg=(0,l.useCallback)((e,t,n)=>{let a=e+n,r=t+n,l=e=>"result"===e.type&&(em(e)||ep(e));for(;a>0&&a<=ec.length&&l(ec[a-1]);)a-=1;for(;r<ec.length&&l(ec[r]);)r+=1;return[a-n,r-n]},[ep,em,ec]),eh=(0,l.useCallback)((e,t)=>{if(e+t>=ec.length)return!1;let n=ec[e+t];return!em(n)&&!ep(n)},[ep,em,ec]),e_=(0,l.useCallback)((e,t,n)=>{let a=!1;for(let r=e;r<=t&&!(r+n>=ec.length);r+=1){let e=ec[r+n];if(!em(e)&&!ep(e)){a=!0;break}}return a},[ep,em,ec]),[ef,ev]=(0,l.useMemo)(()=>{let e=(null==o?void 0:o.nodeGuid)??x.Q9,t=(null==U?void 0:U.pageId)!=null?eo.current[U.pageId]:null;if(q&&0!==v&&o&&e!==x.Q9&&o.pageId===(null==U?void 0:U.pageId)&&null!=t){let n=o.index,a=o.matchIndex;if((1===v||(null==U?void 0:U.index)==null)&&eh(n,t))return[n,G.mMU.getSingleHoveredSelectionEndIndex(e,a)];if(2===v&&(null==U?void 0:U.index)!=null&&U.index!==o.index){let r=n>U.index?U.index:n;return e_(r,n>U.index?n:U.index,t)?eg(r,G.mMU.getMultiHoveredSelectionEndIndex(e,a),t):[null,null]}}return[null,null]},[null==U?void 0:U.index,null==U?void 0:U.pageId,q,eg,v,o,e_,eh]),eb=(0,l.useCallback)(e=>!q||null==ef||null==ev||e<ef||e>=ev?0:e===ef&&e===ev-1?4:e===ef?1:e===ev-1?3:2,[q,ef,ev]),eS=(0,m.C)(U);(0,l.useEffect)(()=>{if(u||0!==v||null==U||null==U.index||0===ec.length||!eS)return;let e=eo.current[U.pageId];if(null==e)return;let t=e+U.index,n=t>=eu.virtualItems[0].index&&t<=eu.virtualItems[eu.virtualItems.length-1].index,a=!1;if(n){let e=eu.virtualItems.find(e=>e.index===t);if(e){let{start:t,size:n}=e;a=function(e,t){if(!t)return!0;let n=t.scrollTop,a=n+t.clientHeight;return e.top>=n&&e.bottom<=a}({top:t,bottom:t+n},M.current)}}a||F||eu.scrollToIndex(t,{align:"center"})},[U,eS,r,u,ec,F,eu,v]);let eT=(e,t,n,a)=>{let r=()=>{a?ea(t.resultGuid,t.matchIndex,t.textMatch.matchType):J(t.resultGuid,t.matchIndex,t.textMatch.matchType)};t.pageId===x.s5?(k(t.guid),el(t.guid),y(!1)):q&&t.pageId===(null==U?void 0:U.pageId)?e.shiftKey&&(null==U?void 0:U.index)==null?(a||r(),y(!0)):e.shiftKey?((()=>{let e=ed(n),t=[];e.forEach(e=>{let n=t.length?t[t.length-1]:void 0;(null==n?void 0:n.nodeId)===e.resultGuid&&(null==n?void 0:n.searchResultType)===G.Sw6.TEXT_MATCH?n.matchIndices.push(e.matchIndex):t.push({nodeId:e.resultGuid,matchIndices:[e.matchIndex],searchResultType:e.textMatch.matchType})}),ee(t)})(),y(!0)):(0,h.Mr)(e)&&t.textMatch.matchType!==G.Sw6.PAGE_MATCH?(r(),y(!0)):(Z(t.resultGuid,t.matchIndex),y(!1)):(Z(t.resultGuid,t.matchIndex),y(!1))},ek=function(e,t,n,a,r,i,o){let c=function(e,t){let n=(0,B.i)("canvas_search_navigate"),a=(0,s.w1)(e=>e.canvasSearch.scope),r=(0,p.e6)(),i=(0,l.useContext)(Q.K8),o=(0,l.useCallback)(()=>{let{nav:l,numNewNodes:s,numNewTextMatches:i}=G.mMU.setAllResultsAsActiveAndGetViewportSettings();e&&r("canvas_search_enter_multi_select",{numberOfNodes:s,numberOfTextMatches:i,source:"cmd/ctrl+A",mode:t?"find":"replace"}),n(l,{additionalTrackEventParams:{searchScope:G.o$U[a]}})},[t,n,a,r,e]);return i?o:_.Kw}(n,a),u=(0,l.useContext)(Q.K8),d=eC(e,r,eI,i);return(0,l.useCallback)(e=>{let n=eA(e);switch(e.keyCode){case h.as.UP_ARROW:case h.as.DOWN_ARROW:case h.as.RIGHT_ARROW:case h.as.LEFT_ARROW:r?(function(){var e;let t=null==(e=document.getElementById("fullscreen-root"))?void 0:e.getElementsByClassName("focus-target");if(null!=t&&0!==t.length){for(let e of t)if(e.hasAttribute("readonly")&&"application"===e.getAttribute("role")){null==e||e.focus();break}}}(),eI(e,!0)):d(e);break;case h.as.A:if(u&&(0,h.y2)(e)){c(),o(!0),e.stopPropagation(),e.preventDefault();break}eI(e);break;case h.as.C:(0,h.y2)(e)?(D.CA.triggerActionInUserEditScope("copy"),e.stopPropagation()):eI(e);break;case h.as.V:(0,h.y2)(e)?(D.CA.triggerActionInUserEditScope("paste"),e.stopPropagation()):eI(e);break;case h.as.X:(0,h.y2)(e)?(D.CA.triggerActionInUserEditScope("cut"),e.stopPropagation()):eI(e);break;case h.as.DELETE:case h.as.BACKSPACE:eI(e,!0);break;default:d(e)}r||n===x.Q9||t(G.mMU.setActiveResultAndGetViewportSettings(n,0),{delay:300})},[r,u,d,c,o,t])}(e,t,z,$,c,w,y),eP=eN(w);return l.createElement("div",{className:en.iy},l.createElement("div",{className:en.Y},l.createElement(ey,{totalOnActivePage:K.total,resultsOnOtherPages:a,allInstancesExpanded:T}),0!==ec.length&&l.createElement(l.Fragment,null,l.createElement(j.wP,{svg:ei.c,onClick:t=>{e(et.wN.PREV,"button")},"data-tooltip-type":X.wL.TEXT,"data-tooltip":(0,O.t)("canvas_search.previous"),"data-tooltip-shortcut-key":"canvas-search-prev",recordingKey:"figma_design_search.previous",disabled:K.total<=1}),l.createElement(j.wP,{svg:es.c,onClick:t=>{e(et.wN.NEXT,"button")},"data-tooltip-type":X.wL.TEXT,"data-tooltip":(0,O.t)("canvas_search.next"),"data-tooltip-shortcut-key":"canvas-search-next",recordingKey:"figma_design_search.next",disabled:K.total<=1}))),l.createElement(A.f,{className:en.AX,scrollContainerRef:M},l.createElement(E.g9,{style:{height:eu.totalSize,position:"relative"},tabIndex:0,role:"listbox",recordingKey:"figma_design_search.results_list",onKeyDown:ek,onKeyUp:eP,forwardedRef:r},eu.virtualItems.map(e=>{let t=ec[e.index];if(!t)return null;let a=em(t),s="result"===t.type&&t.data.pageId===(null==U?void 0:U.pageId)?eb(t.data.index):0;return l.createElement("div",{key:"header"===t.type?t.data.pageId:`${t.data.pageId}#${t.data.index}`,ref:e.measureRef,className:d()({[en.ML]:1===s,[en.oL]:2===s,[en.aW]:3===s,[en.sF]:(1===v||(null==U?void 0:U.index)==null)&&(null==o?void 0:o.isPurple)}),style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`}},"header"===t.type?l.createElement(eE,{...t.data,setOpen:e=>el(t.data.pageId,e)}):l.createElement(ew,{activePageId:null==U?void 0:U.pageId,onSelect:n=>eT(n,t.data,e.index,a),onDoubleClick:()=>{G.mMU.exitSearchMode(G.OQ8.SELECT_ACTIVE)},resultInputHandlerRef:r,result:t.data,replacement:n,selected:a,indirectlySelected:ep(t),singletonHoverSelected:4===s,isInMultiselectMode:u,isInHoveredSelectMode:0!==v&&!!o,hasMultipleSelections:c,setHoveredResult:b}))})),F&&l.createElement("div",{className:en.kH},l.createElement(I.Y1,{size:"medium"})),a&&R===G.o$U.ACTIVE_PAGE&&l.createElement(E.iH,{recordingKey:"figma_design_search.other_pages_button",className:d()(en._q,en.IV),onClick:()=>{C(L.qE(G.o$U.ALL_PAGES))}},l.createElement(O.Tx,{id:"canvas_search.results_other_pages"})),f&&R===G.o$U.ALL_PAGES&&l.createElement("div",{className:en.Y9},l.createElement(O.Tx,{id:"canvas_search.results_unavailable_offline"}))))}let ev={[G.o$U.ACTIVE_PAGE]:()=>l.createElement(O.Tx,{id:"canvas_search.this_page"}),[G.o$U.ALL_PAGES]:()=>l.createElement(O.Tx,{id:"canvas_search.all_pages"})};function ey({totalOnActivePage:e,resultsOnOtherPages:t,allInstancesExpanded:n}){let a=(0,s.OY)(),r=(0,H.s)("CANVAS_SEARCH_PAGE_SCOPE_DROPDOWN"),i=(0,l.useRef)(null),o=(0,s.w1)(e=>e.canvasSearch.scope),c=(0,s.w1)(e=>e.mirror.appModel.pagesList),u="";u=0===e?(0,Y.IV)(c)||!n?(0,O.t)("canvas_search.no_results_on_page"):t?(0,O.t)("canvas_search.no_results"):(0,O.t)("canvas_search.no_results_in_file"):(0,O.t)("canvas_search.results_count",{total:e});let d=e>0||t||(0,Y.IV)(c)||!n;return l.createElement("div",{className:en.IX},l.createElement("span",{"data-testid":"canvas-search-info",className:en.q6},u),d&&l.createElement(l.Fragment,null,l.createElement("span",{className:en.sQ},"\xb7"),l.createElement("div",{role:"none",onClick:e=>e.stopPropagation()},l.createElement(E.iH,{forwardedRef:i,recordingKey:"figma_design_search_page_scope_dropdown",className:en.QL,"data-testid":"figma-design-search-scope-dropdown",onClick:e=>r.showing&&e.stopPropagation(),onMouseDown:()=>r.toggle(),onKeyDown:e=>{(e.keyCode===h.as.ENTER||e.keyCode===h.as.SPACE)&&(e.preventDefault(),r.toggle())}},l.createElement(l.Fragment,null,ev[o](),l.createElement(k.A,{svg:eu.c}))),i.current&&r.showing&&l.createElement($.uq,{showPoint:!1,maxWidth:160,minWidth:160,className:en.G1,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,lean:"right",leanPadding:0,targetRect:i.current.getBoundingClientRect(),hideDropdown:r.hide,recordingKey:"figma_design_search_page_scope",propagateCloseClick:!0,options:[G.o$U.ACTIVE_PAGE,G.o$U.ALL_PAGES].map(e=>l.createElement(T.g.CheckableOption,{recordingKey:`figma_design_search_page_scope.${e}`,key:e,checked:e===o,onClick:()=>{a(L.qE(e)),r.hide()}},l.createElement("div",{className:en.Os},ev[e]())))}))))}function eE({pageId:e,open:t,setOpen:n,numResults:a}){let r=(0,W.ct)().get(e),s=e===x.s5?(0,O.t)("fullscreen.canvas_search.pages"):r.name;return l.createElement(E.iH,{className:en.sd,onClick:()=>n(!t)},l.createElement(k.A,{className:en.qj,svg:t?ea.c:er.c}),l.createElement("span",{className:en.sD},s),l.createElement("span",{className:en.AT},a))}function ew({result:e,replacement:t,activePageId:n,resultInputHandlerRef:a,selected:r,indirectlySelected:i,singletonHoverSelected:o,onSelect:c,onDoubleClick:u,isInMultiselectMode:p,isInHoveredSelectMode:m,hasMultipleSelections:g,setHoveredResult:h}){var w;let b=(0,W.ct)(),S=(0,W.uc)("currentPage"),T=e.textMatch.matchType===G.Sw6.TEXT_MATCH,C=null!=t&&T&&((null==(w=b.get(e.guid))?void 0:w.hasMissingFont)||!1),N=!(0,f.Q7)(),I=(0,s.w1)(e=>e.mirror.appModel.pagesList),A=N&&e.textMatch.matchType===G.Sw6.PAGE_MATCH&&G.Abq.isIncrementalSession()&&(0,Y.AF)(I,e.resultGuid)!==G.Q1C.LOADED,P=(0,s.OY)(),M=d()(en.KU,{[en.sF]:e.isPurple,[en.Oo]:r,[en.SE]:A}),L=l.createElement(z.ue,{className:M,guid:e.guid});return C?L=l.createElement("div",{className:en.Ou+" "+M},l.createElement(k.A,{svg:ec.c})):e.guid===S&&(L=l.createElement("div",{className:en.Ou+" "+M},l.createElement(k.A,{svg:el.c}))),l.createElement(E.iH,{className:d()({[en.IV]:!0,[en.Oo]:r,[en.Yb]:!r&&i,[en.Ko]:o,[en.ue]:m,[en.sF]:e.isPurple,[en.SE]:A}),onMouseDown:e=>{e.preventDefault()},onClick:t=>{var n;A?P(R.A.enqueue({type:"offline-page-switch",message:(0,O.t)("fullscreen.pages_panel.unavailable_offline")})):(null==(n=a.current)||n.focus(),p||!r||(v.cp.mac?t.metaKey:t.ctrlKey)||e.textMatch.matchType===G.Sw6.PAGE_MATCH?c(t):g||G.mMU.setOverlayVisible(!0)),t.preventDefault(),t.stopPropagation()},onDoubleClick:p||A?_.Kw:u,onMouseEnter:()=>{e.pageId===x.s5||e.pageId!==n?h(null):h({nodeGuid:e.resultGuid,pageId:e.pageId,index:e.index,matchIndex:e.matchIndex,isPurple:e.isPurple}),T?G.mMU.setHoveredResult(e.resultGuid,e.matchIndex):e.textMatch.matchType===G.Sw6.LAYER_MATCH&&(0,V.cX)(e.resultGuid)},onMouseLeave:()=>{(0,V.cX)(""),h(null),G.mMU.setHoveredResult(x.Q9,-1)},recordingKey:y.Mx("figma_design_search","result",e.pageId,e.index)},l.createElement("div",{className:en.IT},L),l.createElement("div",{className:d()(en.aS,{[en.JQ]:T})},e.textContent&&T?l.createElement(eS,{text:e.textContent,match:e.textMatch,replacement:C?void 0:t,multiline:!0}):l.createElement(eb,{result:e})),A&&l.createElement("div",{className:en.Mh,"data-tooltip-type":X.wL.TEXT,"data-tooltip":(0,O.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"},l.createElement(k.A,{className:en.U3,svg:eo.c})))}function eb({result:e}){var t;let{query:n}=(0,s.w1)(e=>e.canvasSearch),a=e.name&&e.stateGroupName?(0,w.I)(e.name):e.name;if(!a)return null;let r=e.stateGroupName||e.containerName,i=-1;e.textContent&&(a=e.textContent,i=(null==(t=e.name)?void 0:t.toLowerCase().indexOf(n))??-1,r=e.name);let o=a.toLowerCase().indexOf(n)??-1;return l.createElement("div",null,a&&o>-1?l.createElement(eS,{text:a,match:{start:o,end:o+n.length,matchType:G.Sw6.LAYER_MATCH},multiline:!0}):l.createElement(C.s$,{text:a}),r&&l.createElement("div",{className:en.Qn},i>-1?l.createElement(eS,{text:r,match:{start:i,end:i+n.length,matchType:G.Sw6.LAYER_MATCH}}):l.createElement(C.s$,{text:r})))}function eS({text:e,match:t,replacement:n,multiline:a}){let[r,s]=(0,l.useState)(e),[i,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s(e)},[e]),(0,l.useEffect)(()=>{if(!i||r!==e)return;let n=t.start,a=0;for(let t=n-1;t>=0;--t)if(/\s/.test(e[t])&&a++,3===a){n=t;break}a<3&&(n=0),s(e.slice(n))},[i,r,e,t.start]);let c=(0,l.useMemo)(()=>l.createElement(eT,{text:r,replacement:n,fullString:e,match:t}),[r,t,n,e]);return l.createElement(C.s$,{className:a?en.JQ:"",text:c,multiline:a,onTruncationChange:o})}function eT({text:e,replacement:t,fullString:n,match:a}){let r=0;n&&e!==n&&(r=n.length-e.length);let s=a.start-r,i=a.end-r,o=e.substring(0,s),c=e.substring(s,i),u=e.substring(i);if(t&&c.toLocaleLowerCase()!==t.toLocaleLowerCase()){let e=F.E.detectTextTransform(c);t=F.E.applyTextTransform(t,e)}return l.createElement(l.Fragment,null,r?"\u2026":"",o,t?l.createElement(l.Fragment,null,l.createElement("span",{className:en.S},c),l.createElement("b",null,t)):l.createElement("b",null,c),u)}function eC(e,t,n,a){let r=(0,Q.E$)(),i=function(){let e=(0,B.i)("canvas_search_navigate"),t=(0,s.w1)(e=>e.canvasSearch.scope),n=(0,p.e6)(),a=(0,l.useContext)(Q.K8),r=(0,l.useCallback)(()=>{n("canvas_search_multi_hierarchy",{order:"down"}),e(G.mMU.moveActiveResultsDownOneLevelAndGetViewportSettings(),{additionalTrackEventParams:{searchScope:G.o$U[t]}})},[e,t,n]);return a?r:_.Kw}(),o=function(){let e=(0,B.i)("canvas_search_navigate"),t=(0,s.w1)(e=>e.canvasSearch.scope),n=(0,p.e6)(),a=(0,l.useContext)(Q.K8),r=(0,l.useCallback)(()=>{n("canvas_search_multi_hierarchy",{order:"up"}),e(G.mMU.moveActiveResultsUpOneLevelAndGetViewportSettings(),{additionalTrackEventParams:{searchScope:G.o$U[t]}})},[e,t,n]);return a?r:_.Kw}(),c=(0,l.useContext)(Q.K8);return(0,l.useCallback)(l=>{switch(c?(0,h.Mr)(l)&&!l.shiftKey?a(1):l.shiftKey?a(2):a(0):a(0),l.keyCode){case h.as.P:case h.as.UP_ARROW:(l.keyCode!==h.as.P||v.cp.mac&&(0,h.MP)(l,h.Cs.CONTROL))&&(e(et.wN.PREV,"keyboard"),l.stopPropagation(),l.preventDefault());break;case h.as.N:case h.as.DOWN_ARROW:(l.keyCode!==h.as.N||v.cp.mac&&(0,h.MP)(l,h.Cs.CONTROL))&&(e(et.wN.NEXT,"keyboard"),l.stopPropagation(),l.preventDefault());break;case h.as.ENTER:if((0,h.Mr)(l)){G.mMU.exitSearchMode(G.OQ8.SELECT_ACTIVE);break}if(r())break;l.shiftKey?t?o():e(et.wN.PREV,"keyboard"):t?i():e(et.wN.NEXT,"keyboard"),l.stopPropagation(),l.preventDefault();break;case h.as.ESCAPE:G.mMU.exitSearchMode(G.OQ8.NONE),l.preventDefault(),l.stopPropagation();break;default:n(l)}},[c,a,r,n,e,t,o,i])}function eN(e){return(0,l.useCallback)(t=>{if(t.keyCode===h.as.SHIFT){(!v.cp.mac||t.metaKey)&&(v.cp.mac||t.ctrlKey)||e(0);return}let n=v.cp.mac&&"Meta"===t.key,a=!v.cp.mac&&t.keyCode===h.as.CTRL;(n||a)&&!t.shiftKey&&e(0)},[e])}function eI(e,t=!1){if(t||(0,U.CE)(e,U.fh.YES)){let t=(0,U.Mz)(e);return t&&e.stopPropagation(),t}return!1}function eA(e){switch(e.keyCode){case h.as.DELETE:case h.as.BACKSPACE:return G.mMU.getNextResultForActiveResultRemoval();case h.as.X:if((0,h.y2)(e))return G.mMU.getNextResultForActiveResultRemoval();break;case h.as.H:case h.as.R:if((0,h.Mr)(e)&&e.shiftKey)return G.mMU.getNextResultForActiveResultRemoval()}return x.Q9}},576448:(e,t,n)=>{n.d(t,{Av:()=>G,po:()=>D});var a=n(307824),r=n(120304),l=n(763976),s=n(515724),i=n(125504),o=n.n(i),c=n(916924),u=n(843148),d=n(372152),p=n(570464),m=n(853688),g=n(326660),h=n(204792),_=n(968240),f=n(560072),v=n(883528),y=n(589440),E=n(859264),w=n(982868),b=n(833492),S=n(491776),T=n(142548),C=n(784528),N=n(7674),I=n(740718),A=n(563040),k=n(896784),P=n(705595),M=n(308568),x=n(153180);function O(e){return`flyout-dropdown-${e}`}let R=e=>{switch(e){case"move-flyout":return(0,f.t)("fullscreen.flyout.move_tools");case"region-flyout":return(0,f.t)("fullscreen.flyout.region_tools");case"pen-flyout":return(0,f.t)("fullscreen.flyout.drawing_tools");case"shape-flyout":return(0,f.t)("fullscreen.flyout.shape_tools");case"boolean-flyout":return(0,f.t)("fullscreen.flyout.boolean_groups");case"styles-flyout":return(0,f.t)("fullscreen.flyout.styles");case"symbol-flyout":return(0,f.t)("fullscreen.flyout.components");case"prototype-view-flyout":return(0,f.t)("fullscreen.flyout.prototype_view");default:return""}};function L(e,t,n){var r,s;return"currentTool"===e?{icon:(0,w.Wq)(t),ui3Icon:(null==(r=(0,w.ot)(t))?void 0:r.ui3Icon)||a.createElement(l.A,null)}:{icon:(0,w.iG)(n),ui3Icon:(null==(s=(0,w.O1)(n))?void 0:s.ui3Icon)||a.createElement(l.A,null)}}function D(e){let[t,n]=a.useState(null),l=(0,b.g)(),s=(0,r.OY)(),i=(0,y.O)(),u=a.useCallback(()=>{n(null)},[]);a.useEffect(()=>(p.In(u),()=>p._F(u)));let d=(e,t)=>e&&t?e.action===t.action:!e&&!t,h=(0,r.w1)(t=>e.item.children.find(e=>{if((0,A.iw)(e)){let n=e.property&&t.mirror.appModel[e.property]===e.propertyValue,a=e.isActive&&e.isActive(t);return n||a}return!1}),d),f=(0,r.w1)(n=>{let a=e.item.children.find(e=>(0,A.iw)(e)&&(0,C.Ib)(n.mirror.appModel,e.action));return"symbol-flyout"===e.item.name?a:h||(t&&(0,C.Ib)(n.mirror.appModel,t.action)?t:a)},d),v=(0,r.w1)(e=>!!f&&(0,C.Ib)(e.mirror.appModel,f.action));if(!f)return null;v||(0,g.WI)("FlyoutView",`Expected defaultItem with action ${f.action} to be enabled`);let w=!!h&&!(0,C.SY)(l)&&!e.disabled&&e.styleActiveItem,S=(null==l?void 0:l.type)===O(e.item.name),I=L(f.property,f.propertyValue,f.action);(0,c.kz)(null!==I.icon,"No icon for tool or action");let P=!0;if(S){for(let t of e.item.children)if((0,A.iw)(t)&&(void 0!==t.property||void 0!==t.isActive)){P=!1;break}}return a.createElement("div",null,a.createElement("div",{className:o()(i?x.fullHeightSidebarFlyout:x.flyout,(0,k.i)(!0,w),S?x.flyoutDropdownShown:null),"data-tooltip-type":T.wL.LOOKUP,"data-tooltip":f.action,"data-onboarding-key":e.item.onboardingKey,"data-testid":f.action},a.createElement(m.g9,{className:i?x.fullHeightSidebarFlyoutButton:x.flyoutButton,recordingKey:p.Mx(e.recordingKey,"default",f.recordingKey),onMouseDown:E.Qb.get(f.action,"toolbar")},I&&I.icon&&a.createElement(_.e,{svg:I.icon},I.ui3Icon)),a.createElement(N.k,{svgContainerClassName:x.chevron,dispatch:s,showingDropdown:S,dropdownKey:O(e.item.name),tooltipText:R(e.item.name),additionalDispatchData:{items:e.item.children},recordingKey:p.Mx(e.recordingKey,"chevron"),dataTestId:`${e.item.name}-chevron`,rcsHandlerId:"flyout_dropdown_opened",dataOnboardingKey:e.item.name,isUI3:i,className:o()({[x.fullHeightSidebarFlyoutChevron]:i,[x.fullHeightSidebarFlyoutDropdownShown]:i&&S})})),S&&a.createElement(F,{item:e.item,onFlyoutItemClick:(e,t)=>{n(e);let a=e.actionOnFlyoutItemClick??e.action;E.Qb.get(a,"toolbar")(t)},hideCheck:P,recordingKey:e.recordingKey}))}function F(e){var t,n;let l=(0,r.w1)(e=>e.dropdownShown),i="ui3"===(0,s.qG)().version,o=(0,y.O)(),c=(0,d.m4)(P.eI);if(!l||!(null==(t=l.data)?void 0:t.targetRect))return a.createElement(a.Fragment,null);let u=e.item.flyoutShowItemIcons||void 0===e.item.flyoutShowItemIcons;return a.createElement(I.Mx,{targetRect:i&&"prototype-view-flyout"===e.item.name?{top:l.data.targetRect.top,right:l.data.targetRect.right,bottom:l.data.targetRect.bottom+(o?4:0),left:l.data.targetRect.left-91,width:l.data.targetRect.width,height:l.data.targetRect.height}:l.data.targetRect,className:x.pointingDropdown,showPoint:!i,propagateCloseClick:!0},(null==(n=l.data)?void 0:n.items)&&l.data.items.map((t,n)=>a.createElement(K,{key:n,item:t,showItemIcon:u,hideCheck:e.hideCheck,simulatedHoverActionName:c,onFlyoutItemClick:e.onFlyoutItemClick,recordingKey:e.recordingKey})))}function K({item:e,showItemIcon:t,hideCheck:n,simulatedHoverActionName:l,onFlyoutItemClick:s,recordingKey:i}){let o=(0,r.w1)(S._o),c=!!(0,r.w1)(t=>(0,A.iw)(e)&&e.isActive&&e.isActive(t));if((0,A.yS)(e))return a.createElement(h.g.Separator,null);let{action:d,property:m,propertyValue:g}=e,f=(0,C.Ib)(o,d),y=void 0!==g&&o[m]===g,E=t?L(m,g,d):null,w=e.text||G(d)||(0,v.W)(d),b=(0,C.O0)(o.keyboardShortcuts,d);return a.createElement(M.w,{key:e.action,text:w,shortcut:b,isEnabled:f,isChecked:y||c,onPointerUp:(0,u.Ub)().ce_flyout_pointer_up_enabled?t=>{s(e,t)}:void 0,onClick:(0,u.Ub)().ce_flyout_pointer_up_enabled?void 0:t=>{s(e,t)},hideCheck:n,recordingKey:p.Mx(i,"flyout",e.recordingKey),onboardingKey:e.onboardingKey,simulateHover:e.action===l},E&&E.icon?a.createElement(_.e,{svg:E.icon},E.ui3Icon):null)}function G(e){let t;try{t=(0,f.t)(`fullscreen_actions.${e}`)}catch(e){}return t}},33416:(e,t,n)=>{n.d(t,{w:()=>eu,E:()=>ed});var a=n(307824),r=n(120304),l=n(515724),s=n(899116),i=n(980068),o=n(570464),c=n(82660),u=n(288448),d=n(403132),p=n(560900),m=n(753432),g=n(854096),h=n(883528),_=n(233272),f=n(441388),v=n(894764),y=n(787848),E=n(417184),w=n(596496),b=n(859264),S=n(762820),T=n(555168),C=n(713620),N=n(31160),I=n(563404),A=n(481556),k=n(291336),P=n(553432),M=n(13468),x=n(97007),O=n(784528),R=n(187044),L=n(927976),D=n(108688),F=n(843148),K=n(778524),G=n(323576),U=n(392992),B=n(514916),V=n(103839),H=n(540696),W=n(142548),Y=n(203736),q=n(513568),X=n(894432),z=n(101040);function $(e){let[t,n]=a.useState(e.initialValue),l=a.useCallback(e=>{(0,H.Er)(e)||n(e.valueOf())},[n]),s=(0,r.OY)();return a.useEffect(()=>{(0,X.kV)({[e.configPropertyName]:t})},[t,e.configPropertyName]),a.createElement(q.gv,{className:"comment_debug_settings_modal--input--wSHX-","data-tooltip-type":W.wL.TEXT,min:e.minVal,max:e.maxVal,bigNudgeAmount:e.bigNudgeAmount,smallNudgeAmount:e.smallNudgeAmount,"data-tooltip":e.propertyDescription,dispatch:s,value:t,onValueChange:l},a.createElement("span",{className:"comment_debug_settings_modal--label--Gf3r8"},e.displayName))}let j=(0,Y.U9)(function(){let e=(0,r.OY)(),t=a.useCallback(()=>{e(G._g())},[e]);return a.createElement(z.G0,{title:"Comments Debug Settings",headerSize:"small",initialPosition:new V.Cg(0,0),onClose:t},a.createElement("div",{className:"comment_debug_settings_modal--container--NLPWv",onMouseDown:e=>{e.stopPropagation()}},a.createElement($,{configPropertyName:"minZoomPercentage",initialValue:X.kH.minZoomPercentage,displayName:"Clustering Zoom Level Threshold",propertyDescription:"The zoom level threshold at which we will no longer apply clustering",minVal:1,maxVal:25600,bigNudgeAmount:5,smallNudgeAmount:.1}),a.createElement($,{configPropertyName:"zoomScaleOverlap",initialValue:X.kH.zoomScaleOverlap,displayName:"Pin Overlap",propertyDescription:"The base number of pixels we check for overlapping pins when clustering, this value is multiplied by the current zoomScale to compute bounding box",minVal:1,maxVal:2e4,bigNudgeAmount:100,smallNudgeAmount:10}),a.createElement($,{configPropertyName:"clusterClickResultViewportPercentage",initialValue:X.kH.clusterClickResultViewportPercentage,displayName:"Cluster Click Result Viewport Percentage",propertyDescription:"After a cluster click, one of the pins in the cluster will be positioned this percentage between the center of the viewport and the edge of the viewport. However, we will always zoom in far enough to break the cluster, even if one of the pins ends up being positioned farther away than this percentage.",minVal:1,maxVal:100,bigNudgeAmount:5,smallNudgeAmount:1}),a.createElement($,{configPropertyName:"rebuildClustersZoomDelay",initialValue:X.kH.rebuildClustersZoomDelay,displayName:"Rebuild Cluster User Zoom Delay",propertyDescription:"Delay in ms that occurs between a zoomScale change and the clusters rebuilding",minVal:0,maxVal:1e4,bigNudgeAmount:100,smallNudgeAmount:10})))},"CommentDebugSettingsModal");var Q=n(557044),Z=n(670384),J=n(23024);class ee extends Error{}async function et({dispatch:e,fileKey:t,log:n=()=>{}}){var a;try{n("Generating file version...");let r=null==(a=await (0,Z.y)(t,"Exported to ML account","",e,!0))?void 0:a.id;if(void 0===r)throw Error("undefined versionId");n(`Exporting file version ${r}...`);let{meta:{run_key:l}}=(await Q.cp.post(`/api/ml/export/file_version/${r}`)).data;n(`Waiting for run ${l}...`);for(let e=30;e>=0;e--){await new Promise(e=>setTimeout(e,1e3));let{meta:{ready:t,s3_uri:a}}=(await (0,Q.cp)({url:`/api/ml/export/status/${encodeURIComponent(l)}`})).data;if(t){n(`Export manifest is ready at ${a}`);break}if(0===e){n("Timed out!");return}}n("Succeeded!")}catch(e){if(e instanceof ee)return;n("Failed!"),n(`${e}`)}}let en=(0,Y.U9)(function(){let e=(0,r.OY)(),t=a.useCallback(()=>{e(G._g())},[e]),[n,l]=a.useState([]),s=(0,U.K0)();return a.useEffect(()=>{let n=!1,a=e=>{if(n)throw new ee;l(t=>t.concat([e]))};return null===s?a("No open file"):et({dispatch:e,fileKey:s,log:a}),()=>{n=!0,t()}},[t,e,s]),a.createElement(J.Cc,{title:"ML Export",headerSize:"large",minWidth:300,onClose:t},a.createElement("div",{className:"ml_export_modal--container--Yt5uZ"},n.join("\n")))},"MLExportModal");var ea=n(540636);let er=()=>{let e=(0,r.OY)(),t=(0,U.K_)({useSinatraType:!0});return(0,a.useMemo)(()=>{var n;let a=[{name:"toggle-comments-debug-settings",callback:()=>{e((0,G.mC)({type:j,data:{}}))}},{name:"toggle-comments-debug-disable-sidebar",callback:()=>{(0,X.kV)(e=>({disableSidebar:!e.disableSidebar}))}}];return(null==(n=window.INITIAL_OPTIONS)?void 0:n.cluster_name)==="local"&&a.push({name:"debug-ml-export",callback:()=>{e((0,G.mC)({type:en,data:{}}))}}),(0,F.Ub)().cursor_bot&&(null==t?void 0:t.editor_type)===B.aE.DESIGN&&a.push({name:"toggle-cursor-bot",callback:()=>{(0,K.Y9)({id:ea.kX})}}),a},[e,null==t?void 0:t.editor_type])};var el=n(492496);let es="preferences-menu",ei=(0,N.AT)();class eo extends o.UR{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.onKeyDown=o.Yh(this,"keydown",e=>{(0,C.eI)(e,C.fh.NO)}),this.selectPreferencesMenu=()=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(this.getPathToPreferences())},this.getPathToPreferences=()=>[(0,h.W)(es)]}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),this.props.selectionToUpdate&&this.props.selectionToUpdate===S.fF.PREFERENCES){let e=this.multilevelDropdown&&this.multilevelDropdown.getActiveItemAtDepth(0);!e||(0,g.uM)(e)||(0,g.Yr)(e)||(0,g.QD)(e)||!e.name||e.name!==es?(this.selectPreferencesMenu(),this.props.dispatch(d.Mh({type:O.EX,data:{selectionToUpdate:null}}))):this.props.dispatch(d.yi())}}menuItems(){let e={appModel:this.props.appModel,openFile:this.props.openFile,publishedPlugins:this.props.publishedPlugins,publishedWidgets:this.props.publishedWidgets,allSavedPlugins:this.props.allSavedPlugins,recentlyUsedPlugins:this.props.recentlyUsedPlugins,localExtensions:this.props.localExtensions,orgEntity:this.props.orgEntity,org:this.props.org,isReadOnly:this.props.appModel.isReadOnly,userCanRunPlugins:this.props.userCanRunPlugins,editorType:this.props.editorType,widgetSelectionInfo:this.props.widgetSelectionInfo,activeTextReviewPlugin:this.props.activeTextReviewPlugin,orgSavedPlugins:this.props.orgSavedPlugins,orgPrivatePlugins:this.props.orgPrivatePlugins,pluginAllowlist:this.props.pluginAllowlist};return(0,g.gD)({fileMenuArgs:{branchingActionsStatus:this.props.branchingActionsStatus,saveAsState:this.props.saveAsState,topLevelMode:this.props.appModel.topLevelMode,unreadCommentCount:this.props.unreadCommentCount,isOrgMember:this.props.isOrgMember},pluginAndWidgetMenuArgs:e,additionalDebugItems:this.props.debugMenuItems,theme:this.props.theme,backToFileArgs:{shouldShowBackToFiles:!ei&&!s.sZ,isDisabled:!this.props.userStateLoaded},zoomArgs:{canZoomOut:this.props.canZoomOut,canZoomIn:this.props.canZoomIn},publishingModalArgs:{isPublishingModalDisabled:this.props.selectIsPublishingModalDisabled}})}render(){var e,t;let n=this.props.positionOnChevron&&(null==(t=null==(e=this.props.chevronRef)?void 0:e.current)?void 0:t.getBoundingClientRect())||null;return a.createElement("div",{className:`${m.cp}`},a.createElement(ed,{recordingKey:"mainMenu",ref:this.multilevelDropdownRef,menuItems:this.menuItems(),onKeyDown:this.onKeyDown,controlledByID:this.props.controlledByID,"aria-labelledby":this.props["aria-labelledby"],activatePathOnMount:this.props.dropdown.data.togglePreferences?this.getPathToPreferences():void 0,showPoint:!this.props.isUI3&&this.props.appModel.showUi,targetRect:n??(this.props.appModel.showUi?this.props.dropdown.data.targetRect:{top:0,left:0}),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:"design"===this.props.selectedView.editorType,lean:this.props.isUI3?"right":void 0,...this.props}))}}eo.displayName="FullscreenMainMenu";let ec=(0,r.Ul)((e,t)=>{var n,a,r;let l={view:"recentFiles"},s=e.openFile;s&&s.folderId&&(0,w.eA)(e.folders,s.folderId)&&(l={view:"folder",folderId:s.folderId});let i=e.selectedView;return{appModel:e.mirror.appModel,userStateLoaded:e.userStateLoaded,openFile:e.openFile,selectedView:i,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,allSavedPlugins:t.allSavedPlugins,recentlyUsedPlugins:t.recentlyUsedPlugins,localExtensions:e.localPlugins,userCanRunPlugins:(0,k.gp)(e),orgEntity:(0,E.or)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,backToFilesHref:(0,M.gv)(e,l),saveAsState:e.saveAsState,dropdown:t.dropdown,branchingActionsStatus:t.branchingActionsStatus,memoryWarningLevel:t.memoryWarningLevel,debugMenuItems:t.debugMenuItems,editorType:i.editorType,widgetSelectionInfo:null==(n=e.mirror.selectionProperties)?void 0:n.selectedWidgetInfo,selectionToUpdate:null==(r=null==(a=e.dropdownShown)?void 0:a.data)?void 0:r.selectionToUpdate,theme:e.theme.themePreference,unreadCommentCount:t.unreadCommentCount,canZoomIn:t.canZoomIn,canZoomOut:t.canZoomOut,activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin,isOrgMember:(0,P.canMemberOrg)(e.currentUserOrgId,e),isLimitedDevMode:(0,L.ie)(e.selectedView)&&!(0,u.y2)(e),selectIsPublishingModalDisabled:(0,x._0)(e)}})(eo);function eu(e){let{warningLevel:t}=(0,A.UR)(),n=er(),r=(0,v.i4)(),s=(0,y.TZ)(),i=(0,p.EB)(),o=(0,I.mY)("zoom-in"),c=(0,I.mY)("zoom-out"),u="ui3"===(0,l.qG)().version;(0,_.kf)();let d=(0,v.qK)(),m=d.orgPlugins,g=(0,v.Yv)(),h=(0,v.u_)();return a.createElement(ec,{...e,allSavedPlugins:d.plugins,memoryWarningLevel:t,debugMenuItems:n,branchingActionsStatus:s,recentlyUsedPlugins:r,unreadCommentCount:i,canZoomIn:o,canZoomOut:c,orgSavedPlugins:m,orgPrivatePlugins:g,pluginAllowlist:h,isUI3:u})}class ed extends a.Component{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.getActiveItemAtDepth=e=>this.multilevelDropdown?this.multilevelDropdown.getActiveItemAtDepth(e):null,this.setActiveItemPath=e=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(e)},this.onSelectItem=(e,t)=>{T.Pc.user(`fullscreen-menu-${e.name??e.action??"unknown"}`,()=>{if(e.callback&&e.callback((0,g.CB)(e),e.args,this.props.dispatch,t),e.action&&!e.input){let n=e.action;e.loadingIndicatorString?this.props.dispatch(c.v.set({message:e.loadingIndicatorString,callback:()=>{b.Qb.get(n,"menu",e.args)(t)}})):b.Qb.get(n,"menu",e.args)(t)}})},this.transformMenuItems=(0,i.ei)(e=>(0,el.MT)(e,{appModel:this.props.appModel,selectedView:this.props.selectedView,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,removeDisabledItems:this.props.removeDisabledItems,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,isLimitedDevMode:this.props.isLimitedDevMode}))}componentDidMount(){this.closeIfNoItems()}componentDidUpdate(){this.closeIfNoItems()}componentWillUnmount(){var e;this.props.controlledByID&&(null==(e=document.getElementById(this.props.controlledByID))||e.focus())}hasMenuValidItems(){let e=this.transformMenuItems(this.props.menuItems);return e.length>0&&e.some(e=>!e.separator&&(this.props.allowDisabledOnly||!e.disabled))}closeIfNoItems(){this.hasMenuValidItems()||this.props.dispatch(d.yi())}render(){let e=this.transformMenuItems(this.props.menuItems);return this.hasMenuValidItems()?a.createElement(f.kH,{name:R.i8.EDITOR_MENU},a.createElement(D.I,{ref:this.multilevelDropdownRef,items:e,onKeyDown:this.props.onKeyDown,onSelectItem:this.onSelectItem,parentRect:this.props.targetRect,activatePathOnMount:this.props.activatePathOnMount,lean:this.props.lean,...this.props})):null}}ed.displayName="FullscreenMultilevelDropdown"},540636:(e,t,n)=>{n.d(t,{MX:()=>y,kX:()=>f});var a=n(307824),r=n(51408),l=n(804420),s=n(372152),i=n(698240),o=n(919364),c=n(514916),u=n(888684),d=n(705595),p=n(682076),m=n(741800),g=n(890288),h=n(777264);let _="Figma",f="cursor_bot_debug_menu_clicked";function v(){return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"25",fill:"none"},a.createElement("g",{filter:"url(#a)"},a.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M15 6a1 1 0 0 0-2 0v5h-1V4a1 1 0 0 0-1-1 1 1 0 0 0-1 1v7H9V5a1 1 0 0 0-2 0v6H6V8a1 1 0 0 0-2 0v8a5 5 0 0 0 5 5h1c1.55 0 2.94-.7 3.86-1.82l.1-.1 5.01-4.7c.52-.48.57-1.3.12-1.85a1.27 1.27 0 0 0-1.74-.22L15 14.05V6Zm.34 14.55 5-4.71a3.37 3.37 0 0 0 .29-4.59 3.27 3.27 0 0 0-3.63-1V6a3 3 0 0 0-3.17-3 3 3 0 0 0-5.14-.92A3 3 0 0 0 5 5a3 3 0 0 0-3 3v8a7 7 0 0 0 7 7h1a6.99 6.99 0 0 0 5.34-2.45Z",clipRule:"evenodd"})),a.createElement("path",{fill:"#0D99FF",fillRule:"evenodd",d:"M11 3a1 1 0 0 1 1 1v7h1V6a1 1 0 1 1 2 0v8.05l2.35-1.74c.55-.4 1.3-.31 1.74.22.45.54.4 1.37-.12 1.85l-5 4.7-.11.1A4.99 4.99 0 0 1 10 21H9a5 5 0 0 1-5-5V8a1 1 0 1 1 2 0v3h1V5a1 1 0 0 1 2 0v6h1V4a1 1 0 0 1 1-1Z",clipRule:"evenodd"}),a.createElement("path",{fill:"#000",fillOpacity:".8",fillRule:"evenodd",d:"M3 10v6a6 6 0 0 0 6 6h1a5.99 5.99 0 0 0 4.65-2.18l5-4.7c.9-.86 1-2.28.2-3.23a2.27 2.27 0 0 0-3.1-.38l-.75.55V6a2 2 0 0 0-3-1.73V4a2 2 0 0 0-3.89-.66A2 2 0 0 0 6 5v1.27A2 2 0 0 0 3 8v2Zm3 1V7.98A1 1 0 0 0 4 8v8a5 5 0 0 0 5 5h1c1.55 0 2.94-.7 3.86-1.82l.1-.1 5.01-4.7c.52-.48.57-1.3.12-1.85a1.27 1.27 0 0 0-1.74-.22L15 14.05V6a1 1 0 1 0-2 0v5h-1V4a1 1 0 1 0-2 0v7H9V4.98A1 1 0 0 0 7 5v6H6Z",clipRule:"evenodd"}),a.createElement("defs",null,a.createElement("filter",{id:"a",width:"22.4",height:"25",x:".5",y:"0",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),a.createElement("feOffset",{dy:".5"}),a.createElement("feGaussianBlur",{stdDeviation:".75"}),a.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),a.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_1_43"}),a.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_1_43",result:"shape"}))))}function y(){let e=(0,l.C)(),t=(0,m.kZ)((0,s.m4)(d.K6)),n=!(0,o.e)("cursor_bot_v2_has_greeted_with_wave"),r=(0,s.m4)(d.sx),i=(0,s.m4)(d.aE),g=(0,s.m4)(d.Os),f=(0,s.m4)(d.qM),v=(0,s.m4)(d.qA),y=(0,s.m4)(d.sp)===p.Ss.RIGHT,w={display:"block",willChange:"transform",opacity:t?"1":"0",transform:`translate3D(${r}px, ${i}px, 0)`,transition:"opacity 300ms"+(f?`, transform ${f}ms cubic-bezier(0.14, 0, 0.32, 1)`:"")};return a.createElement("div",{className:h.A5,style:w,"data-testid":"cursor-bot","aria-hidden":"true"},n?a.createElement(E,null):a.createElement(u.Ko,{cursorType:v,chatMessage:[g],name:_,color:m.aW,isHighFiving:!1,temporarilyHide:!1,isCursorHandOnRight:!1,isCursorPointingRight:y,focusOnTextCursor:!1,editorType:c.aE.DESIGN,isCursorAndChatAreaOffscreen:!1,prefersReducedMotion:e,isHighFivingSupported:!1,useChatAnimation:!0,disableMessageFade:!0,isHoveringWidgetWithHiddenCursors:!1}))}function E(){let e=a.useRef(null);return a.useEffect(()=>{e.current&&e.current.animate([{transform:"rotate(-45deg)"},{transform:"rotate(50deg)"},{transform:"rotate(-45deg)"}],{duration:m.Kx,easing:"ease-in-out"})},[]),a.createElement("div",{className:i.cx.absolute.top0.left0.w20.$},a.createElement("div",{className:h.qW,ref:e,"data-testid":"cursor-bot-high-five"},a.createElement(v,null)),a.createElement("div",{className:g.oZ,style:{color:m.aW}},a.createElement("div",{className:g.UH,style:{color:r.Kg}},_),a.createElement("div",{className:g.Gi,style:{backgroundColor:m.aW}})))}},185864:(e,t,n)=>{let a;n.d(t,{GK:()=>sF,A3:()=>sA});var r=n(307824),l=n(602216),s=n(120304),i=n(491440),o=n(240060),c=n(275712),u=n(515724),d=n(125504),p=n.n(d),m=n(250008),g=n(721500),h=n(972920),_=n(161400),f=n(843148),v=n(372152),y=n(570464),E=n(853688),w=n(901676),b=n(180976),S=n(102184),T=n(71556),C=n(626416),N=n(537096),I=n(560072),A=n(317704),k=n(288448),P=n(403132);function M(e,t){(0,f.Ub)().dt_dev_mode_workflows&&"fullscreen"===t.view&&e(P.Ej({...t,showOverview:!1}))}var x=n(4580),O=n(309812),R=n(762820),L=n(84656),D=n(13468),F=n(59608);let K="overview_entry--isSelected--E6mSl";var G=n(210424),U=n(529204);function B(){let e=(0,s.OY)(),t=(0,x.q)(e=>"fullscreen"===e.selectedView.view?{...e.selectedView,showOverview:!0}:e.selectedView),n=(0,s.w1)(e=>(0,D.gv)(e,t)),a=(0,F.yO)(),l=function(){let e=(0,L.s5)(R.KEP.editorState().nodesWithStatusForFile)||[],t=(0,F.oB)();if(!(0,f.Ub)().dt_dev_mode_workflows)return null;let n=e.filter(e=>e.status===R.s9M.BUILD),a=n.length;return 0!==n.length||0!==(a=e.filter(e=>e.status===R.s9M.COMPLETED).length)||t?a:null}(),i=(0,O.Ci)();return(0,f.Ub)().dt_dev_mode_workflows&&null!==l?r.createElement("a",{className:p()("overview_entry--entryRow--l-Ofr",a&&K),onClick:function(n){n.preventDefault(),e((0,P.Ej)(t))},href:n},r.createElement("div",{className:p()("overview_entry--entryRowInner--fPECV",a&&K)},r.createElement("div",{className:"overview_entry--leftSide--0zNy- text--fontPos11--2LvXf text--_fontBase--QdLsd"},!i&&a&&r.createElement(N.A,{className:"overview_entry--checkIconUI2--YlrIs",svg:G.c}),r.createElement(N.A,{className:"overview_entry--readyIcon--QwDeG",svg:U.c}),r.createElement("div",null,"Development")),l>0&&r.createElement("div",{className:"overview_entry--numStatuses--7Dr3F text--fontPos11--2LvXf text--_fontBase--QdLsd"},l))):null}var V=n(907236),H=n(323576),W=n(623908),Y=n(753432),q=n(373224),X=n(589440),z=n(131748),$=n(650584),j=n(90340),Q=n(202613),Z=n(596496),J=n(585508),ee=n(555168),et=n(979144),en=n(599672),ea=n(526768),er=n(138884),el=n(768820),es=n(907152),ei=n(679804),eo=n(481556),ec=n(78168),eu=n(251596),ed=n(514916),ep=n(815464),em=n(46),eg=n(578272),eh=n(287540),e_=n(869588),ef=n(841676),ev=n(112044),ey=n(142548),eE=n(927976),ew=n(132256),eb=n(915880),eS=n(703520),eT=n(448604),eC=n(997108),eN=n(629968),eI=n(147048),eA=n(611996),ek=n(124664),eP=n(553432),eM=n(165032),ex=n(97007),eO=n(491776),eR=n(169988),eL=n(513048),eD=n(740200),eF=n(594500);function eK(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("mask",{id:"fpl-icon-24-component-a",fill:"#fff"},r.createElement("path",{fillRule:"evenodd",d:"M7.78 8.487a1.25 1.25 0 0 0-1.767 0l-2.63 2.63a1.25 1.25 0 0 0 0 1.767l2.63 2.629a1.25 1.25 0 0 0 1.767 0l2.629-2.63a1.25 1.25 0 0 0 0-1.767L7.78 8.487Zm.707-2.474a1.25 1.25 0 0 0 0 1.767l2.63 2.629a1.25 1.25 0 0 0 1.767 0l2.629-2.629a1.25 1.25 0 0 0 0-1.767l-2.63-2.63a1.25 1.25 0 0 0-1.767 0l-2.629 2.63Zm9.5 2.474a1.25 1.25 0 0 0-1.767 0l-2.629 2.63a1.25 1.25 0 0 0 0 1.767l2.629 2.629a1.25 1.25 0 0 0 1.767 0l2.63-2.63a1.25 1.25 0 0 0 0-1.767l-2.63-2.629Zm-2.474 9.5a1.25 1.25 0 0 0 0-1.767l-2.63-2.629a1.25 1.25 0 0 0-1.767 0L8.487 16.22a1.25 1.25 0 0 0 0 1.767l2.63 2.63a1.25 1.25 0 0 0 1.767 0l2.629-2.63Z",clipRule:"evenodd"})),r.createElement("path",{fill:"var(--color-icon)",d:"m11.116 20.616-.707.707.707-.707Zm1.768 0 .707.707-.707-.707Zm-4.397-2.629.708-.707-.708.707Zm4.397-4.396-.707.707.707-.707Zm-1.768 0 .707.707-.707-.707Zm9.5-.707.707.707-.707-.707Zm0-1.768-.707.707.707-.707Zm-4.396 4.397-.707.707.707-.707Zm1.767 0-.707-.707.707.707Zm-4.396-4.397-.707-.707.707.707Zm2.629-2.629.707.708-.707-.708Zm-5.811 4.397-.707-.707.707.707Zm-4.396 2.629-.708.707.708-.707Zm-1.922-3.69L6.72 9.195 5.305 7.78l-2.628 2.63 1.414 1.414Zm2.629 2.982-2.63-2.627-1.413 1.412 2.628 2.629 1.415-1.414Zm1.767 1.415 2.63-2.629-1.415-1.414-2.629 2.629 1.414 1.414Zm2.63-5.811L8.486 7.78 7.073 9.195l2.629 2.628 1.414-1.414ZM7.78 8.487l2.629 2.63 1.414-1.415-2.628-2.629L7.78 8.487Zm5.811 2.63 2.629-2.63-1.414-1.414-2.63 2.629 1.415 1.414ZM12.177 4.09l2.629 2.629 1.414-1.415-2.629-2.628-1.414 1.414ZM9.195 6.72l2.628-2.629-1.414-1.414L7.78 5.305 9.195 6.72Zm6.318 1.06-2.63 2.629 1.415 1.414 2.629-2.628-1.414-1.415Zm-2.63 5.811 2.63 2.629 1.414-1.414-2.629-2.63-1.414 1.415Zm7.026-1.414-2.629 2.629 1.415 1.414 2.628-2.629-1.414-1.414ZM17.28 9.195l2.629 2.628 1.414-1.414-2.628-2.629-1.415 1.415Zm-1.06 6.318-2.629-2.63-1.414 1.415 2.629 2.629 1.414-1.414Zm-5.811-2.63-2.629 2.63 1.415 1.414 2.628-2.629-1.414-1.414Zm1.414 7.026L9.195 17.28 7.78 18.695l2.629 2.628 1.414-1.414Zm2.982-2.629-2.628 2.629 1.414 1.414 2.629-2.628-1.414-1.415Zm-4.396 4.043a2.25 2.25 0 0 0 3.182 0l-1.414-1.414a.25.25 0 0 1-.354 0l-1.414 1.414Zm-2.629-5.81a2.25 2.25 0 0 0 0 3.182l1.415-1.415a.25.25 0 0 1 0-.353L7.78 15.513Zm5.811-2.63a2.25 2.25 0 0 0-3.182 0l1.414 1.415a.25.25 0 0 1 .354 0l1.414-1.414Zm1.215 4.044a.25.25 0 0 1 0 .353l1.414 1.415a2.25 2.25 0 0 0 0-3.182l-1.414 1.414Zm6.517-3.336a2.25 2.25 0 0 0 0-3.182l-1.414 1.414a.25.25 0 0 1 0 .354l1.414 1.414Zm-5.81 2.629a2.25 2.25 0 0 0 3.182 0l-1.415-1.414a.25.25 0 0 1-.353 0l-1.414 1.414Zm-2.63-5.811a2.25 2.25 0 0 0 0 3.182l1.415-1.414a.25.25 0 0 1 0-.354l-1.414-1.414Zm4.044-1.214a.25.25 0 0 1 .353 0l1.415-1.415a2.25 2.25 0 0 0-3.182 0l1.414 1.415ZM13.59 2.677a2.25 2.25 0 0 0-3.182 0l1.414 1.414a.25.25 0 0 1 .354 0l1.414-1.414Zm2.629 5.81a2.25 2.25 0 0 0 0-3.182L14.806 6.72a.25.25 0 0 1 0 .353l1.414 1.414Zm-5.811 2.63a2.25 2.25 0 0 0 3.182 0l-1.414-1.415a.25.25 0 0 1-.354 0l-1.414 1.414ZM9.195 7.072a.25.25 0 0 1 0-.353L7.78 5.305a2.25 2.25 0 0 0 0 3.182l1.415-1.414Zm1.921 6.518a2.25 2.25 0 0 0 0-3.182l-1.414 1.414a.25.25 0 0 1 0 .354l1.414 1.414Zm-5.81 2.629a2.25 2.25 0 0 0 3.181 0l-1.414-1.414a.25.25 0 0 1-.353 0L5.305 16.22ZM6.72 9.195a.25.25 0 0 1 .353 0L8.487 7.78a2.25 2.25 0 0 0-3.182 0L6.72 9.195Zm-4.043 1.214a2.25 2.25 0 0 0 0 3.182l1.414-1.414a.25.25 0 0 1 0-.354L2.677 10.41Z",mask:"url(#fpl-icon-24-component-a)"}))}function eG(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5 15.727V7.924l.059-.065c.11-.117.285-.28.53-.443C6.078 7.091 6.858 6.75 8 6.75s1.923.341 2.41.666a3.092 3.092 0 0 1 .595.513A.5.5 0 0 0 11 8v7.727a5.997 5.997 0 0 0-.07-.04C10.296 15.336 9.338 15 8 15s-2.296.335-2.93.688a5.679 5.679 0 0 0-.07.04Zm7 0 .07-.04C12.704 15.336 13.662 15 15 15s2.296.335 2.93.688l.07.04V7.923a3.09 3.09 0 0 0-.59-.508c-.487-.325-1.267-.666-2.41-.666-1.143 0-1.923.341-2.41.666a3.09 3.09 0 0 0-.595.513A.5.5 0 0 1 12 8v7.727Zm-1.035-9.143c.217.145.395.291.535.421.14-.13.318-.276.535-.421.638-.425 1.608-.834 2.965-.834 1.357 0 2.327.409 2.965.834.317.211.548.424.703.588a3 3 0 0 1 .226.268l.014.02.005.008.002.003v.001l-.415.278.416-.277A.5.5 0 0 1 19 7.75v9a.5.5 0 0 1-.888.316l-.002-.003.39-.313-.39.313a1.788 1.788 0 0 0-.136-.134 3.013 3.013 0 0 0-.53-.367C16.955 16.29 16.163 16 15 16s-1.954.29-2.445.562c-.246.137-.42.272-.529.368a1.788 1.788 0 0 0-.136.133l-.002.003a.5.5 0 0 1-.776 0l-.002-.003a1.788 1.788 0 0 0-.136-.134 3.013 3.013 0 0 0-.53-.367C9.955 16.29 9.163 16 8 16s-1.954.29-2.445.562c-.246.137-.42.272-.529.368a1.755 1.755 0 0 0-.136.133l-.002.003A.5.5 0 0 1 4 16.75v-9a.5.5 0 0 1 .084-.277l.416.277-.416-.278.001-.002.002-.002.005-.007.014-.02.049-.064c.04-.052.1-.123.177-.205.155-.164.386-.377.703-.588C5.673 6.159 6.643 5.75 8 5.75c1.357 0 2.327.409 2.965.834Z",clipRule:"evenodd"}))}var eU=n(968240),eB=n(23124),eV=n(293580);let eH="empty_states--emptyStateContent--i0Ad8",eW="empty_states--emptyStateIcon--kLLCD",eY="empty_states--emptyStateIconWrapper--SHUbu",eq="empty_states--emptyStateText--gZR-A",eX="empty_states--link--kfp3o blue_link--blueLink--9rlnd";var ez=n(384456),e$=n(350264),ej=n(648160);function eQ(){let e=(0,s.w1)(e=>e.library.assetsPanelSearch.query);return r.createElement("div",{className:"empty_states--emptyStatesTextContainer--dM-5d"},r.createElement("div",{className:"empty_states--text--5nh4u"},r.createElement(I.Tx,{id:"design_systems.assets_panel.no_results_for_query",searchQuery:e})))}function eZ(){let e=(0,s.OY)();return r.createElement("div",{className:"empty_states--emptyState--ZaBY3 text--fontPos11--2LvXf text--_fontBase--QdLsd"},r.createElement("div",{className:"empty_states--emptyStateTitle--TWkpO text--fontPos11--2LvXf text--_fontBase--QdLsd"},r.createElement(I.Tx,{id:"design_systems.assets_panel.components"})),r.createElement("div",{className:eH},r.createElement(eU.e,{className:eW,svg:ez.c},r.createElement("div",{className:eY},r.createElement(eK,null))),r.createElement("div",{className:eq},r.createElement(I.Tx,{id:"design_systems.assets_panel.create_a_component"})," ",r.createElement("a",{className:eX,href:"https://help.figma.com/hc/articles/360038662654",target:"_blank",rel:"noopener"},r.createElement(I.Tx,{id:"design_systems.assets_panel.learn_more"})))),r.createElement("div",{className:eH},r.createElement(eU.e,{className:eW,svg:e$.c,fallbackSvg:ej.c},r.createElement("div",{className:eY},r.createElement(eG,null))),r.createElement("div",{className:eq},r.createElement(E.iH,{className:eX,onClick:()=>{e(H.A5({type:eV._A,data:{entrypoint:eB.Yj.ASSETS_PANEL_EXPLORE_LIBRARIES_LINK}}))},recordingKey:y.Mx("assetsEmptyState","exploreLibraries")},r.createElement(I.Tx,{id:"design_systems.assets_panel.explore_libraries"})))))}var eJ=n(87975),e0=n(888932),e1=n(882524),e2=n(920004),e4=n(888860);function e5({searchOptions:e,keyboardNavigationPath:t,keyboardNavigationColumn:n}){let a=(0,s.OY)(),l=(0,s.w1)(e1.aI),i=(0,s.w1)(e=>e.leftPanel).activeTab===R.W8r.ASSETS,o=r.useRef(null),c=(0,s.w1)(e=>e.mirror.appModel.activeCanvasEditModeType),u=(0,e2.uK)({isVisible:i,autofocus:!0,selectOnFocus:!0,ref:o});r.useEffect(()=>{let e=e=>{(e0.cp.chromeos?e.altKey&&e.shiftKey&&e.keyCode===eJ.as.KEY_2:e.altKey&&e.keyCode===eJ.as.KEY_2)&&c!==R.a_v.TEXT&&(u(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[c,u]);let d=r.useCallback(t=>{let n;e&&((0,e1.aK)(e.type)?n=e.type:(n={type:e4.Y.ALL},e.onSetAssetType(n))),a(eT.YP({query:t,searchOptions:n}))},[a,e]),m=p()("component_sidebar_search--searchWithViewModeToggle--nKJ2-","component_sidebar_search--negMargin--QTfpB");return null!=t?r.createElement(e2.U$,{query:l.query,onChange:d,isVisible:i,className:m,recordingKey:"componentsLibrarySearch",placeholder:(0,I.t)("design_systems.assets_panel.search"),autofocus:!0,selectOnFocus:!0,hideSearchIcon:!0,entryPointForTracking:"editor:assets_panel",path:t,column:n,forwardedRef:o}):r.createElement(e2.Up,{query:l.query,onChange:d,isVisible:i,className:m,recordingKey:"componentsLibrarySearch",placeholder:(0,I.t)("design_systems.assets_panel.search"),autofocus:!0,selectOnFocus:!0,hideSearchIcon:!0,forwardedRef:o,entryPointForTracking:"editor:assets_panel"})}var e6=n(280584),e8=n(441388),e7=n(664004),e3=n(768516),e9=n(362592),te=n(241645);function tt({entrypoint:e,onSetKeyboardNavigationElement:t,recordingKey:n}){let a=(0,f.Ub)().ds_updates_toast_deprecation??!1,l=(0,v.m4)(e3.Gi),i=(0,s.w1)(ex.OG),o=l>0||i,c="ui3"===(0,u.qG)().version,{isLibraryModalShown:d,onToggleLibraryModal:m}=(0,e7.C)({entrypoint:e,modalType:"editor",hasUpdatesToAccept:!a&&l>0}),g=l>0&&!a?(0,I.t)("fullscreen.libraries_button.tooltip.updates_to_pull"):i&&!a?(0,I.t)("fullscreen.libraries_button.tooltip.updates_to_push"):(0,I.t)("fullscreen.libraries_button.tooltip.no_updates");return r.createElement("div",{className:"library_modal_button--teamLibraryIcon--EBc7q","data-onboarding-key":"library"},!a&&o&&r.createElement("span",{className:p()({"library_modal_button--selected--sIVl-":d},"library_modal_button--teamLibraryUpdatesIndicator--VtXap")}),c?r.createElement(tn,{"aria-label":(0,I.t)("design_systems.assets_panel.library_tooltip"),ref:t,recordingKey:y.Mx(n,"teamLibrary"),"data-tooltip-type":ey.wL.TEXT,"data-tooltip":g,"data-onboarding-key":e9.C,onClick:m,innerText:"Team Library"},r.createElement(eG,null)):r.createElement(te._s,{ref:t,recordingKey:y.Mx(n,"teamLibrary"),selected:d,"data-tooltip-type":ey.wL.TEXT,"data-tooltip":g,"data-onboarding-key":e9.C,svg:e$.c,fallbackSvg:ej.c,onClick:m,innerText:"Team Library"}))}let tn=(0,e8.wB)(e6.w);var ta=n(112768),tr=n(720876),tl=n(176232),ts=n(767816),ti=n(760780),to=n(365224),tc=n(103839),tu=n(698240),td=n(597624),tp=n(37864),tm=n(219096),tg=n(659436),th=n(148812),t_=n(81492),tf=n(172600),tv=n(932735),ty=n(392992),tE=n(984104);function tw(){var e,t;let n=(0,s.w1)(eP.getPermissionsState),a=(0,ty.K_)({useSinatraType:!0});return t=null==(e=(0,s.w1)(tE.c))?void 0:e.id,!!a&&!!t&&!!(n.currentUserOrgId&&(0,eP.canGuestOrg)(n.currentUserOrgId,n)||(0,eP.hasProTeamPaidStatus)(n,ed.aE.DESIGN,t)||(0,eP.hasActiveEduTeam)(n,t))}var tb=n(490820),tS=n(939540),tT=n(207164),tC=n(790184),tN=n(793944),tI=n(203736),tA=n(101040),tk=n(425812),tP=n(311364),tM=n(506616),tx=n(310444),tO=n(547836),tR=n(693400),tL=n(523292),tD=n(476168),tF=n(572748),tK=n(333928),tG=n(708168),tU=n(472956),tB=n(876760),tV=n(644516),tH=n(996640);let tW="asset_file_path--path---PrgD text--fontPos11--2LvXf text--_fontBase--QdLsd",tY="asset_file_path--pathLink--lvFH3",tq="asset_file_path--skeletonText--PIxni";function tX({assetFileKey:e,assetNodeId:t}){var n,a,l,i,o,c,u,d;let p=(0,tV.dh)(),m=(0,tF.Ce)(),g=!!m||(0,ep.So)(p),h=null==m?void 0:m.id,_=tB.qO.useFile(e),f=(0,tM.Qb)(tU.iMo,{fileKey:e},{enabled:g}),v=null==(n=null==f?void 0:f.data)?void 0:n.file,y=function(e,t){let n=(0,s.w1)(e=>e.hubFiles)[e];return(0,tL.Aj)(e)&&n?(0,tR.EK)(n).name:t}(e,null==(a=null==_?void 0:_.data)?void 0:a.name),E=function(e,t){let n=(0,tL.Aj)(e),a=(0,s.w1)(t=>(0,tD.b)(t,e)),l=(0,s.w1)(ty.w5),i=tB.qO.useFile(e).data;return r.useMemo(()=>{if(!a||n||!i||!l||i.key===l.key)return null;let e=(0,tK.El)(i);return(0,tP.oX)(e,{"node-id":encodeURIComponent((0,tG.W)(t))})},[t,a,i,l,n])}(e,t),w=(null==f?void 0:f.status)==="loading",b=null==(l=null==v?void 0:v.team)?void 0:l.id,S=b?function(e,t){let n=location.origin;return t?`${n}/files/${t}/team/${e}`:`${n}/files/team/${e}`}(b,h):void 0,T=null==(i=null==v?void 0:v.team)?void 0:i.name,C=b&&T&&g,N=null==(c=null==(o=null==v?void 0:v.team)?void 0:o.workspace)?void 0:c.id,I=N&&h?tH.gx(N,h):void 0,A=null==(d=null==(u=null==v?void 0:v.team)?void 0:u.workspace)?void 0:d.name,k=N&&A&&g;return g&&w?r.createElement("div",{className:tW,"data-testid":"asset-file-path-loader"},r.createElement(tx.AT,{className:tq,opacity:50}),"/",r.createElement(tx.AT,{className:tq,opacity:50})):r.createElement("div",{className:tW},k&&r.createElement(r.Fragment,null,r.createElement(tO.S,{tooltipText:A},r.createElement("a",{href:I,target:"_blank",className:tY},A)),"/"),C&&r.createElement(r.Fragment,null,r.createElement(tO.S,{tooltipText:T},r.createElement("a",{href:S,target:"_blank",className:tY},T)),"/"),r.createElement(tO.S,{tooltipText:y},E?r.createElement("a",{href:E,target:"_blank",className:tY},y):r.createElement("span",null,y)))}var tz=n(733960),t$=n(828524),tj=n(760700),tQ=n(148276),tZ=n(63396),tJ=n(977844),t0=n(746514),t1=n(397888),t2=n(783932),t4=n(256896),t5=n(776972),t6=n(383456),t8=n(948544),t7=n(155256);function t3({user:e,communityProfile:t,updatedAt:n}){let a=null!=e&&!!e.img_url&&!!e.handle,l=null,s=null;return(null!=t?(l=r.createElement(t7.C,{entity:t,size:t8.Qt.SMALL}),s=t.name):a&&(l=r.createElement(t8.iO,{user:e,size:t8.Qt.SMALL}),s=e.handle),l&&s)?r.createElement("div",{className:"asset_updated_details--updatedAtAvatar--uf4Gy"},l,r.createElement("span",{className:"asset_updated_details--handle--63B8y"},s),n?r.createElement(r.Fragment,null,r.createElement("span",{className:"asset_updated_details--dot--SoliI"},"\xb7"),r.createElement(t6.O,{date:n})):null):n?r.createElement("div",{className:"asset_updated_details--updatedAt--eam-d"},r.createElement(I.Tx,{id:"design_systems.assets_panel.updated_at",updatedAt:r.createElement(t6.O,{date:n})})):null}var t9=n(491296),ne=n(4596),nt=n(235020);function nn({renderedAssetData:e}){var t,n,a,l;let i=(0,s.OY)(),o=(0,s.w1)(e=>e.dropdownShown),c=r.useMemo(()=>{var t,n;let a=null==(n=null==(t=null==e?void 0:e.nodeData)?void 0:t.moduleFrameData)?void 0:n.selectedFrameGUID;return null==a||a===ne.Q9?{type:"all"}:{type:"guid",guid:a}},[null==(n=null==(t=null==e?void 0:e.nodeData)?void 0:t.moduleFrameData)?void 0:n.selectedFrameGUID]),u=r.useCallback(e=>{let t="all"===e.type?ne.Q9:e.guid;R.i46.setPlaygroundSelectedNode(t)},[]),{nodeData:d}=e,p=r.useMemo(()=>({format:t=>{var n,a,r;return"all"===t.type?"All frames":(null==(r=((null==(a=null==(n=null==e?void 0:e.nodeData)?void 0:n.moduleFrameData)?void 0:a.frames)??{})[t.guid])?void 0:r.name)??""}}),[null==(l=null==(a=null==e?void 0:e.nodeData)?void 0:a.moduleFrameData)?void 0:l.frames]);if(null==d)return null;let{playgroundGUID:m,moduleFrameData:g}=d;if(!m||null==g)return null;let h=Object.keys(g.frames??{});return h.length<2?null:r.createElement("div",{className:"playground_module_frame_section--wrapper--65QB6"},r.createElement("div",{className:"playground_module_frame_section--title--PCfEU"},r.createElement(I.Tx,{id:"design_systems.assets_panel.frames"})),r.createElement(nt.M1,{id:"playground-module-frame-select",property:c,formatter:p,dispatch:i,onChange:u,dropdownShown:o},r.createElement(nt.cb,{value:{type:"all"}}),r.createElement(nt.Wy,null),h.map(e=>r.createElement(nt.cb,{key:e,value:{type:"guid",guid:e}}))))}var na=n(277716),nr=n(531163);let nl=(0,g.qe)(nr.AH2);function ns({description:e,description_rt:t}){let n=r.useRef(null),[a,l]=r.useState(!0),[s,i]=r.useState(!1),o=(0,tz.i)(e);r.useEffect(()=>{e&&n.current&&o!==e&&l(n.current.scrollHeight>nl)},[e,o]);let c=r.useCallback(()=>{a&&i(!0),l(!a)},[a]);if(!e&&!t)return null;let u=!!e&&(a||s);return r.createElement("div",{className:"truncated_component_description--documentationSection--87RCO"},t?r.createElement("div",null,r.createElement(na.C,{fallback:r.createElement(eS.M7,null),errorFallback:null,value:t,quillClassName:p()("truncated_component_description--quill--yYiwV",{"truncated_component_description--quillCollapsed--3DiWp":a}),quillInnerRef:n})):r.createElement("div",{ref:n,className:p()({"truncated_component_description--collapsed--VXZTS ellipsis--ellipsisAfter6Lines--2UA7M ellipsis--_ellipsisAfterNLines--LzI7k":a},"truncated_component_description--documentationDescription--C090D text--fontPos11--2LvXf text--_fontBase--QdLsd"),dir:"auto"},e),u&&r.createElement("button",{className:"truncated_component_description--showMore--brfX6",onClick:c},a?r.createElement(I.Tx,{id:"design_systems.assets_panel.show_more"}):r.createElement(I.Tx,{id:"design_systems.assets_panel.show_less"})))}var ni=n(954484),no=n(873956),nc=n(122516);function nu({renderedAssetData:e,errorType:t,canViewPlayground:n,onInsert:a,shouldHideError:l,onSetShouldHideError:i}){var o,c,u,d,p;let m=(0,s.w1)(e=>e.hubFiles),g=(0,t1.A1)(),[h,_]=r.useState(!1);r.useEffect(()=>{_(!1),i(!1)},[e.asset,i]);let v=(0,t9.O)(e.asset),y=(0,t5.W)(e.asset),E=r.useMemo(()=>(0,t2.G4)(e.asset.name??""),[e.asset.name]),w=r.useRef(null),b=(0,tj.Se)({text:E,textRef:w}),S=(0,tL.Aj)(e.asset.file_key),T=S?m[e.asset.file_key]:null,C=e.asset,N=r.useMemo(()=>{var t;let n=null==(t=e.nodeData)?void 0:t.playgroundGUID;if(!n)return"";let a=g.get(n);if(!a)return"";let r=g.get(a.symbolId??"");return r?(r.isState?r.parentGuid:r.guid)??"":""},[e,g]),A=r.useMemo(()=>{if(t)return{errorType:t,shouldHideError:l,setShouldHideError:i}},[t,l,i]),k=S&&(0,f.Ub)().presets_baseline?r.createElement(I.Tx,{id:"design_systems.assets_panel.insert"}):e.asset.type===tC.Af.MODULE&&(0,f.Ub)().dse_editor_templates_v1?r.createElement(I.Tx,{id:"design_systems.assets_panel.insert_template"}):r.createElement(I.Tx,{id:"design_systems.assets_panel.insert_instance"});return r.createElement("div",{className:"component_flyout_body--bodyWrapper--CoGX-"},v&&!h&&r.createElement("div",{className:"component_flyout_body--updateBanner--ETDK5 component_flyout_body--_bodyPadding--KrB6p text--fontPos11--2LvXf text--_fontBase--QdLsd"},r.createElement(tZ.O,{orientation:"vertical",iconSrc:no.c,onClose:()=>_(!0),variant:"design"},r.createElement(I.Tx,{id:"design_systems.assets_panel.update_banner"}))),r.createElement("div",{className:"component_flyout_body--headerFileNameWrapper--MH4jz component_flyout_body--_bodyPadding--KrB6p"},r.createElement("h2",{className:"component_flyout_body--header--3LXSQ text--fontPos14--OL9Hp text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa","data-tooltip":b?E:void 0,"data-tooltip-type":ey.wL.TEXT,ref:w},E),!!y&&y>1&&r.createElement("div",{className:"component_flyout_body--numVariants--nureW"},r.createElement(I.Tx,{id:"design_systems.assets_panel.variant_count",numVariants:y}))),r.createElement("div",{className:"component_flyout_body--descriptionWrapper--wFyRa component_flyout_body--_bodyPadding--KrB6p"},r.createElement(ns,{description:C.description,description_rt:C.description_rt})),r.createElement("div",{className:"component_flyout_body--updatedWrapper--q4V48 component_flyout_body--_bodyPadding--KrB6p"},r.createElement(t3,{user:C.user,communityProfile:null==T?void 0:T.publisher,updatedAt:C.updated_at})),r.createElement("div",{className:"component_flyout_body--buttonWrapper--Sb1Mq component_flyout_body--_bodyPadding--KrB6p"},r.createElement(tQ.gV,{onClick:a,fullWidth:!0},k)),n&&!(null==e?void 0:e.nodeData)&&!A&&r.createElement("div",{className:"component_flyout_body--skeletonWrapper--urKH5"},r.createElement(tx.AT,{className:"component_flyout_body--skeletonHeader--VoEY3",opacity:50}),r.createElement(tx.AT,{className:"component_flyout_body--skeletonBody--pINXr",opacity:50})),n&&((null==e?void 0:e.nodeData)||A)&&r.createElement(t1.aC.Provider,{value:g},(0,f.Ub)().dse_editor_templates_v1&&(0,f.Ub)().dse_editor_templates_frames&&r.createElement(nn,{renderedAssetData:e}),r.createElement("div",{className:"component_flyout_body--propsContainer--w8pmU"},r.createElement(t0.E,{componentProps:null==(o=e.nodeData)?void 0:o.componentProps,moduleProps:null==(c=e.nodeData)?void 0:c.moduleProps,moduleFrameData:(null==(u=e.nodeData)?void 0:u.moduleFrameData)??void 0,label:r.createElement(nd,{renderedAssetData:e}),playgroundGUID:null==(d=e.nodeData)?void 0:d.playgroundGUID,productComponentGUID:N,sceneGraph:g,instanceSwapPickerInitialHeight:200,instanceSwapPickerInitialPosition:"right-center",containerWidth:t4.mK.UNBOUNDED,errorData:A,shouldShowDividerAboveProps:!0})),r.createElement("div",{className:"component_flyout_body--modeContainer--8n5p5"},r.createElement(tJ.A,{fill:!0,modes:(null==(p=e.nodeData)?void 0:p.modeData)||{}}))))}function nd({renderedAssetData:e}){let t=r.useCallback(()=>{e.refetchAndResetScene()},[e]);return r.createElement("div",{className:"component_flyout_body--playgroundHeader--lQfDc"},r.createElement("div",{className:"component_flyout_body--flyoutLabel--6Y6lR text--fontPos11--2LvXf text--_fontBase--QdLsd"},r.createElement(N.A,{className:"component_flyout_body--headerIcon--FHdrw",svg:ni.c}),r.createElement(I.Tx,{id:"design_systems.assets_panel.playground_label"})),r.createElement(te.wP,{className:"component_flyout_body--resetButton--wVXDQ",svg:nc.c,onClick:t,"data-tooltip":(0,I.t)("design_systems.playground.reset_properties"),"data-tooltip-type":ey.wL.TEXT,disabled:!e.hasChangesToReset,recordingKey:"resetPlaygroundProps"}))}var np=n(26708),nm=n(32636),ng=n(270588),nh=n(17984);function n_({canViewPlayground:e,renderedAssetData:t,setFlyoutHidden:n,sectionPosition:a,sectionNameForTracking:l,sectionDepth:s}){let i=r.useCallback(()=>{n(!0)},[n]),o=(0,tT.w)(),{onInsertableResourcePointerDown:c,dragState:u}=(0,ng.S)({resource:t.asset,isList:!1,clickToInsert:!1,sourceForTracking:"asset-description-preview",fromPlayground:e,recomputeCancelRectsOnPointerUp:!0,onDragStart:i,onPointerUp:o,sectionPosition:a,sectionNameForTracking:l,sectionDepth:s}),d=r.useMemo(()=>{let e=(0,th.S8)(t.asset,null);if(null!=e)return np.Q.format(e)},[t.asset]);return r.createElement("div",{className:"component_flyout_thumbnail--thumbnailWrapper--P38Qq",onPointerDown:c,role:"button",style:d?{backgroundColor:d}:void 0},e&&(null==t?void 0:t.thumbnailData)&&t.hasChangesToReset?r.createElement("img",{className:"component_flyout_thumbnail--playgroundThumbnail--0Qu4J",src:t.thumbnailData.src,width:t.thumbnailData.width,height:t.thumbnailData.height,alt:(0,I.t)("design_systems.playground.thumbnail_alt")}):r.createElement(nh.H,{className:"component_flyout_thumbnail--thumbnail--p3jV2",draggable:!1,key:(0,tv.M)(t.asset),item:t.asset,shouldGenerateLocalThumbnail:!1}),r.createElement(nm.Q,{dragState:u,isList:!1,thumbnailOverrideSrc:e&&(null==t?void 0:t.thumbnailData)?t.thumbnailData.src:void 0}))}n(905412);let nf={maxWidth:640,maxHeight:480};function nv({asset:e,onInsert:t,onLoaded:n,setFlyoutHidden:a,sectionPosition:l,sectionNameForTracking:i,sectionDepth:o}){let c=tw(),[u,d]=r.useState(!1),p=r.useCallback(()=>d(!1),[]),m=(0,t$.qQ)({canvasAsset:e,canViewPlayground:c,onLoaded:n,onError:p,thumbnailOptions:nf}),g=(0,tT.w)(),h=(0,s.w1)(e=>e.fileVersion),_=(0,tz.i)(h);if(r.useEffect(()=>{var e,t;(null==m?void 0:m.state)==="LOADED"&&(null==(t=null==(e=null==m?void 0:m.currentAssetData)?void 0:e.nodeData)?void 0:t.playgroundGUID)&&null!=_&&_!==h&&(g(),R.i46.clearPlaygroundScene())},[h,_,g,e.type,m]),!m)return r.createElement(eS.M7,{className:"component_flyout--spinner--c-wap"});let f="LOADED"===m.state?m.currentAssetData:m.previousAssetData,v="ERROR"===m.state?m.errorType:void 0;return r.createElement("div",{className:"component_flyout--wrapper--96Jih"},r.createElement(n_,{renderedAssetData:f,canViewPlayground:c,setFlyoutHidden:a,sectionPosition:l,sectionNameForTracking:i,sectionDepth:o}),r.createElement(nu,{renderedAssetData:f,errorType:v,canViewPlayground:c,onInsert:t,onSetShouldHideError:d,shouldHideError:u}))}var ny=n(963768),nE=n(968900),nw=n(763456);let nb=(0,g.qe)(nw.A3q),nS=(0,g.qe)(nw.Qzg),nT=(0,tI.U9)(function({asset:e,searchSessionId:t,query:n,sectionPosition:a,sectionNameForTracking:i,assetTypeDropdownSelection:o,sectionDepth:c,containerWidth:u,onGetKeyboardNavigationItemById:d}){let p=r.useRef(null),g=(0,to.my)(ny.g),h=tw(),_=(0,t_.qO)(e.file_key),f=(0,ty.AL)(),v=(0,s.OY)(),y=(0,s.w1)(e=>(0,ex.qI)(e).local.thumbnails),E=(0,tT.w)(),w=(0,s.w1)(e=>e.instanceSwapPickerShown),b=(0,tk.w)();(0,ti.u)(()=>{m.qE.trackDefinedEvent("assets_panel.flyout_opened",{assetKey:(0,tv.M)(e),assetType:(0,tv.W)(e.type),fileKey:e.file_key,isLocal:e.isLocal,fileParentOrgId:(null==f?void 0:f.parentOrgId)??void 0,fileTeamId:(null==f?void 0:f.teamId)??void 0,assetsPanelVersion:b})}),(0,ti.u)(()=>()=>{v((0,tp.es)()),g(!1)}),r.useEffect(()=>{if(!(0,tS.Mx)(e)||!e.isLocal)return;let t=e.node_id?y[e.node_id]:null,n=e.type===tC.Af.COMPONENT?e.content_hash:e.version;(null==t?void 0:t.content_hash)!==n&&requestAnimationFrame(()=>{let t=(0,th.kN)(e.node_id);null!=t&&v(tg.kd({thumbnails:[{nodeId:e.node_id,url:t,type:e.type}],source:tC.Uh.LOCAL}))})},[e,v,y]);let S=r.useCallback(()=>{requestAnimationFrame(()=>{var e;return null==(e=null==p?void 0:p.current)?void 0:e.ensureModalOnScreen()})},[]),T=r.useCallback(()=>{(null==w?void 0:w.isShown)&&v((0,tp.es)())},[v,w]),C=(0,tb.my)(e.file_key),N=r.useCallback(()=>{let r=J.CA.getViewportInfo(),l={canvasPosition:{x:r.offsetX,y:r.offsetY},insertAsChildOfCanvas:!0,percentageOffset:new tc.Cg(.5,.5),storeInRecentsKey:tN.Sy.Design,useSmartPositioning:!0,fromPlayground:h};e.type===tC.Af.COMPONENT?v((0,tm.GU)({item:e,...l})):e.type===tC.Af.STATE_GROUP?v((0,tm.OC)({item:e,...l})):e.type===tC.Af.MODULE&&v((0,tm.Sc)({item:e,...l})),v(H._g()),m.qE.trackDefinedEvent("assets_panel.flyout_insert",{assetKey:(0,tS.FN)(e),assetType:(0,tv.W)(e.type),assetTypeDropdownSelection:o,fileKey:(null==f?void 0:f.key)??void 0,fileParentOrgId:(null==f?void 0:f.parentOrgId)??void 0,fileTeamId:(null==f?void 0:f.teamId)??void 0,libraryType:C,searchSessionId:t??void 0,searchQuery:n,sectionPosition:a,sourceSection:i??void 0,sectionDepth:c,assetsPanelVersion:b,scoreAi:e.ai_score??void 0,scoreLexical:e.lexical_score??void 0})},[h,e,v,o,null==f?void 0:f.key,null==f?void 0:f.parentOrgId,null==f?void 0:f.teamId,C,t,n,a,i,c,b]);r.useEffect(()=>{let e=e=>{var t;let n=l.findDOMNode(null==(t=p.current)?void 0:t.getEl());if(n){if(!n.contains(e.target)){if(g(!1),(0,ts.qU)(e.target,"data-does-not-dismiss-component-flyout"))return;v(H._g());return}g(!0)}};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[v,g]);let A=r.useCallback(t=>{var n,a,r,l;let s=t.event.code??t.event.key,i=(0,tv.M)(e),o=null==d?void 0:d(i);if(!o)return;let c=t.event.keyCode===eJ.as.TAB,u=t.event.shiftKey;if((0,eb.OF)(s,!1)){null==(n=o.getItemAbove())||n.focus(),t.accept();return}if((0,eb.KB)(s,!1)){null==(a=o.getItemBelow())||a.focus(),t.accept();return}if((0,eb.uc)(s,!1)||c&&u){null==(r=o.getItemToTheLeft())||r.focus(),t.accept();return}if((0,eb.sr)(s,!1)||c&&!u){null==(l=o.getItemToTheRight())||l.focus(),t.accept();return}if("Enter"===s){N(),t.accept();return}},[e,N,d]);var k=r.createElement("div",{className:tu.cx.minW0.flex1.$},r.createElement("div",null,(0,I.t)("design_systems.assets_panel.details")),r.createElement(td.g,{spacing:0,direction:"horizontal"},e&&r.createElement(tX,{assetFileKey:e.file_key,assetNodeId:e.node_id}),_&&r.createElement(tf.gp,{fileKey:e.file_key,variant:"secondary",tooltipLocation:"below"})));let[P,M]=r.useState(!1);return r.createElement(tA.G0,{alwaysEnsureModalOnScreen:!0,allowAutoExpanding:!0,canRenderBelowViewport:!1,headerSize:"large",initialPosition:new tc.Cg(u+1,nb),onClick:T,onClose:E,onKeyDown:A,title:k,truncateTitleText:!0,initialWidth:nS,ref:p,dataTestId:"component-flyout-modal",hidden:P},r.createElement("div",{"data-not-draggable":!0},r.createElement(nv,{asset:e,onLoaded:S,onInsert:N,setFlyoutHidden:M,sectionPosition:a,sectionNameForTracking:i,sectionDepth:c})))},nE.M);var nC=n(171992),nN=n(560864);function nI(e,t,n){return null!=e&&(t[e.type]||e.type===e4.Y.FILE&&n[e.fileKey])?e:{type:e4.Y.ALL}}var nA=n(439460),nk=n(996272),nP=n(489796),nM=n(489347),nx=n(208420);let nO="searchResults";function nR(e,t){return`${t}:${e.key}`}function nL(e){return`${e}:${nO}:templates`}function nD(e){return`${e}:recentlyUsed`}function nF(e){return`${e}:stickySection`}var nK=n(858324),nG=n(916924),nU=n(519756),nB=n(931128),nV=n(75796),nH=n(778524),nW=n(993608),nY=n(280692),nq=n(956788);let nX="library_section_header--sectionHeaderH1--P70zQ ellipsis--ellipsis--Tjyfa",nz="library_section_header--sectionHeader3_redesign--TGISe ellipsis--ellipsis--Tjyfa",n$="library_section_header--sectionHeaderH3--5VrMz ellipsis--ellipsis--Tjyfa";var nj=n(599628),nQ=n(1196);let nZ=e=>"isExpandable"in e&&e.isExpandable,nJ=(e,t)=>{switch(e){case nX:return t?"library_section_header--sectionHeaderDivider--SdrS5 ellipsis--ellipsis--Tjyfa":"library_section_header--sectionHeader1_redesign--cWZaj ellipsis--ellipsis--Tjyfa";case n$:return nz;default:return"library_section_header--sectionHeader3_normal--bf4ra"}},n0=e=>{let t=[];if(e&&e.length){t.push(r.createElement("div",{className:"library_section_header--sectionHeader1_sticky--mZ4QY ellipsis--ellipsis--Tjyfa",key:e[0]},e[0]+" / ","\xa0"));let n=e.slice(1).join(" / ");t.push(r.createElement("div",{className:nz,key:n},n,"\xa0"))}return t};class n1 extends r.Component{componentDidUpdate(e){nZ(this.props)&&nZ(e)&&e.isExpanded!==this.props.isExpanded&&"h1"===this.props.size&&(0,nH.Y9)({id:"library_section_header_toggled"})}render(){let e="h1"===this.props.size?nX:n$,t=nZ(this.props)?"library_section_header--sectionHeaderExpandable--hHEFq":"",n=nJ(e,this.props.shouldShowDividerLine),a=nZ(this.props)&&this.props.isFixed?"library_section_header--isFixed--eVHns":"";return r.createElement(e8.kH,{name:"Section Header",properties:{title:this.props.title,isExpanded:!!nZ(this.props)&&this.props.isExpanded},trackingTargets:nW.I.RCS},r.createElement("div",{className:p()(n,e,t,a)},nZ(this.props)&&r.createElement(N.A,{className:this.props.isExpanded?"library_section_header--expandCaretOpen--083vU library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad":"library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad",svg:this.props.isExpanded?nj.c:nQ.c}),nZ(this.props)&&this.props.breadcrumbPath&&!this.props.isFixed&&r.createElement("div",{className:"library_section_header--breadcrumbPath--Jevbg"},this.props.breadcrumbPath,"\xa0"),nZ(this.props)&&this.props.isFixed&&this.props.stickyHeadertokens&&this.props.stickyHeadertokens.length?n0(this.props.stickyHeadertokens):r.createElement("div",{className:n},this.props.title),(0,nY.yk)(this.props.subscribedFileKey)&&r.createElement(tf.gp,{fileKey:this.props.subscribedFileKey,isInLibrarySubtree:!0})))}}n1.H1_HEIGHT=(0,g.I)(nq.ys),n1.H3_HEIGHT=(0,g.I)(nq._A);class n2 extends r.Component{render(){return r.createElement("div",{className:12===this.props.size?"library_section_header--spacer12--0h1Dt":"library_section_header--spacer16--iPkYc"})}}n2.HEIGHT=(0,g.I)(nq.CL);let n4="component_sidebar--stickyHeaderSpacer--SaKsM",n5=(0,g.I)(nq.CL),n6=(0,g.I)(nq.CL)/2,n8=(0,g.I)(nq.W_),n7=(0,g.I)(nq.CQ);function n3({parent:e,outputElements:t,fileNameByKey:n,items:a,keyPrefix:l,sharedOptions:s,sectionNameForTracking:i}){let o=(0,nV.kr)(a,!0),c={layout:o,...s},u=(0,nV.eK)(c),{width:d,height:p}=(0,nV.Ez)(c,u),m=s.isList?1:0,h=s.isList?0:n8,_=s.isList||!n?0:n7,v=p+(s.isList?n6:n5)+h+_+m+(s.isList?0:-2);(0,f.Ub)().api_asset_search_with_scores&&(v+=2*(0,g.I)(nq.SW));let y=d+(s.isList?n6:n5)+(s.isList?0:-2),E=0,w=nU.q.getNextRenderedElementTop(t)+n6;for(let[c,m]of a.entries()){let a=s.isList?w+E*v:w+Math.floor(E/u)*v,g=s.isList?0:3+E%u*y,h=(0,tv.M)(m);t.push({parent:e,type:nU.QJ.TILE,top:a,left:g,height:v,key:`${l}:${h}`,element:function({item:e,fileName:t,sourceForTracking:n,sectionNameForTracking:a,thumbLayout:l,thumbHeight:s,thumbWidth:i,isList:o,sectionPosition:c}){return r.createElement(nB.u,{asset:e,fileName:t,sourceForTracking:n,sectionNameForTracking:a,thumbLayout:l,thumbHeight:s,thumbWidth:i,viewMode:o?nC.sz.List:nC.sz.Grid,sectionPosition:c})}({containerWidth:s.containerWidth,fileName:m.file_key?null==n?void 0:n[m.file_key]:void 0,sourceForTracking:s.sourceForTracking,sectionNameForTracking:i,thumbLayout:o,thumbHeight:p,thumbWidth:d,isList:s.isList,item:m,isExpanded:s.isExpanded,sectionPosition:c}),item:m,numCols:u,containerWidth:s.containerWidth,sectionNameForTracking:i,sectionPosition:c}),E+=1}}let n9=(e,t,n)=>{let a=nF(n.keyPrefix),l=nU.q.getNextRenderedElementTop(t),s={parent:e,type:nU.QJ.ROW,top:l,height:"h1"==n.size?n1.H1_HEIGHT:n1.H3_HEIGHT,key:a,element:r.createElement(n1,{size:n.size,isExpandable:!0,isExpanded:n.isExpanded,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,isFixed:!1,subscribedFileKey:n.subscribedFileKey}),isSticky:!0,isFixed:!1,children:[],isExpandable:!0,isExpanded:n.isExpanded,getExpandableElement:e=>r.createElement(n1,{size:n.size,isExpandable:!0,isExpanded:e,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,subscribedFileKey:n.subscribedFileKey}),sectionNameForTracking:n.sectionNameForTracking,rowType:n.rowType,fixedElement:r.createElement(r.Fragment,null,r.createElement("div",{className:n4}),r.createElement(n1,{size:"h1",isExpandable:!0,isExpanded:n.isExpanded,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,isFixed:!0,subscribedFileKey:n.subscribedFileKey}))};return t.push(s),s};function ae({sectionHeaderText:e,isFixed:t}){return r.createElement("div",{className:p()("component_sidebar--sectionHeader--v0N1h",t?"component_sidebar--isFixed--orinE":"")},r.createElement("div",{className:"component_sidebar--sectionHeaderText--hDKu5"},e))}function at(e,t,n){let a=nU.q.getNextRenderedElementTop(e),l={key:`${n.keyPrefix}:sectionHeader:${t}`,isSticky:!0,parent:null,isFixed:!1,type:nU.QJ.ROW,top:a,height:40,element:r.createElement(ae,{sectionHeaderText:t,isFixed:!1}),fixedElement:r.createElement(r.Fragment,null,r.createElement("div",{className:n4}),r.createElement(ae,{sectionHeaderText:t,isFixed:!0})),isStaticRow:!0,sectionNameForTracking:n.sectionNameForTracking};return e.push(l),l}function an({outputElements:e,results:t,moreResults:n,showMoreResults:a,keyPrefix:l,overallOptions:s,fileNameByKey:i,toggleShowMoreResults:o,parent:c}){if(t.length>0&&n3({parent:c??null,outputElements:e,items:t,keyPrefix:`${l}:results`,sharedOptions:s,fileNameByKey:i,sectionNameForTracking:"Primary search results"}),n.length>0){let t=nU.q.getNextRenderedElementTop(e);e.push({parent:c??null,type:nU.QJ.ROW,top:t,height:40,key:`${l}:moreResultsLink`,element:r.createElement("div",{className:"component_sidebar--text--g20jk"},a&&r.createElement(I.Tx,{id:"design_systems.assets_panel.showing_results_from_all_libraries"}),!a&&r.createElement("a",{className:"component_sidebar--link--I-ane blue_link--blueLink--9rlnd",onClick:o},r.createElement(I.Tx,{id:"design_systems.assets_panel.more_results_in_all_libraries",results:n.length}))),sectionNameForTracking:"More search results"}),a&&n3({parent:null,outputElements:e,items:n,keyPrefix:`${l}:moreResults`,sharedOptions:s,fileNameByKey:i,sectionNameForTracking:"More search results"})}}function aa({prevParent:e,outputElements:t,inputSubtree:n,inputParentTree:a,keyPrefix:l,sharedOptions:s,sectionNameForTracking:i,hideTitle:o}){let c=nR(n,l),u=!o&&function(e,t){switch(e.type){case"FILE":return""!==e.name;case"PAGE":return t.subtrees.length>1;case"NAME_GROUP":return!e.skipElementsInRendering;case"ASSET_TYPE":return e.items.length>0||e.subtrees.length>0}}(n,a),d=function(e,t,n,a,r,l){if(!e)return null;let s=nR(a,r),i=nF(s),o=l.isExpanded(i,(0,nK.gv)(a.type,a.sectionNameForTracking));switch(a.type){case"FILE":return n9(null,n,{keyPrefix:s,size:"h1",title:a.name,isExpanded:o,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,subscribedFileKey:a.subscribedFileKey,sectionNameForTracking:a.sectionNameForTracking,rowType:nU.y6.LIBRARY});case"PAGE":return n9(t,n,{keyPrefix:s,title:a.name,size:"h3",isExpanded:o,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,sectionNameForTracking:a.sectionNameForTracking,rowType:nU.y6.PAGE});case"NAME_GROUP":return n9(t,n,{keyPrefix:s,size:"h3",title:a.flattenedPath?a.flattenedPath:a.name,isExpanded:o,breadcrumbPath:a.breadcrumbPath?a.breadcrumbPath:void 0,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,sectionNameForTracking:a.sectionNameForTracking,rowType:nU.y6.NAME_GROUP});case"ASSET_TYPE":let c=ar(a.sectionNameForTracking);return n9(t,n,{keyPrefix:s,size:"h3",title:a.name,isExpanded:!0,sectionNameForTracking:a.sectionNameForTracking,rowType:c})}}(u,e,t,n,l,s),p=d?d.children:t,m=d||e;if((0,f.Ub)().dse_templates_proto){let e=n.subtrees.find(nM.Ou);null!=e&&aa({prevParent:null,outputElements:p,inputSubtree:e,inputParentTree:n,keyPrefix:l,sharedOptions:s,sectionNameForTracking:e.sectionNameForTracking})}switch(n.type){case"PAGE":case"ASSET_TYPE":case"FILE":n3({parent:m,outputElements:p,items:n.items,keyPrefix:c,sharedOptions:s,sectionNameForTracking:i});break;case"NAME_GROUP":n.skipElementsInRendering||n3({parent:m,outputElements:p,items:n.items,keyPrefix:c,sharedOptions:s,sectionNameForTracking:i});break;default:(0,nG.gy)(n.type)}for(let e of n.subtrees)(0,f.Ub)().dse_templates_proto&&(0,nM.Ou)(e)||aa({prevParent:m,outputElements:p,inputSubtree:e,inputParentTree:n,keyPrefix:c,sharedOptions:s,sectionNameForTracking:i});"FILE"===n.type&&u&&function(e,t,n){let a=nU.q.getNextRenderedElementTop(t);t.push({parent:e,type:nU.QJ.SEPARATOR,top:a,height:n.size,key:`${n.keyPrefix}:spacer${n.size}`,element:r.createElement(n2,{size:n.size})})}(m,p,{keyPrefix:c,size:16})}let ar=e=>{let t=null==e?void 0:e.toLowerCase().includes("local");return(null==e?void 0:e.toLowerCase().includes("templates"))?t?nU.y6.LOCAL_TEMPLATES:nU.y6.TEMPLATES:t?nU.y6.LOCAL_COMPONENTS:nU.y6.COMPONENTS};var al=n(756372);let as=[];function ai(e,t,n){let a=[];return e&&aa({prevParent:null,outputElements:a,inputSubtree:e,inputParentTree:t,keyPrefix:al.KI,sharedOptions:n,sectionNameForTracking:e.sectionNameForTracking,hideTitle:!0}),a}let ao="library-section-asset-type";function ac(e){switch(e){case"all":return{type:e4.Y.ALL};case"recent":return{type:e4.Y.RECENT};case"local":return{type:e4.Y.LOCAL};default:return{type:e4.Y.FILE,fileKey:e}}}var au=n(988328),ad=n(248976),ap=n(39676),am=n(552727);function ag(e){let t=(0,s.w1)(e=>e.loadingState),n=(0,s.w1)(e=>e.fileVersion),a=(0,s.w1)(e=>e.openFile),l=(0,tk.w)(),i=a&&null!=n&&(0,am.AL)(a.key)||null,o=!(null!=i&&(0,ap.kr)(t,i));r.useEffect(()=>{o||function(e,t,n){if(ah)return;let{numLibraries:a,numComponents:r,numComponentsWithLimit:l}=e();(0,m.we)("Assets Panel Initial Load",{numLibraries:a,numComponents:r,numComponentsWithLimit:l,assetsPanelVersion:t,fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0}),ah=!0}(e,l,a)},[e,o,a,l])}let ah=!1;var a_=n(640652),af=n(105516),av=n(412416),ay=n(849208),aE=n(144459),aw=n(81363);function ab(){let e=(0,s.OY)(),t=(0,s.w1)(e=>e.openFile),n=(0,s.w1)(e=>{var t;return null==(t=e.user)?void 0:t.id});if(!t)return null;let a=t.teamId,l=r.createElement(tQ.gf,{className:"library_upsell_banner--blueLink--bt6GX blue_link--blueLink--9rlnd",onClick:function(){(0,m.we)("library_upsell_badge_clicked",{fileKey:null==t?void 0:t.key,teamId:a,userId:n}),e((0,H.A5)({type:av.o,data:{upsellSource:aw.e.LIBRARY_UPSELL_BADGE,teamId:a??void 0,openCheckoutInNewTab:!0}}))},trackingProperties:{trackingDescriptor:aE.O.UPGRADE_TO_PROFESSIONAL},trusted:!0,role:"button"},r.createElement(I.Tx,{id:"design_systems.assets_panel.library_upsell_upgrade"}));return r.createElement(e8.kH,{name:"library upsell badge",properties:{fileKey:null==t?void 0:t.key,teamId:null==t?void 0:t.teamId}},r.createElement("div",{className:"library_upsell_banner--bannerBackground--WlTVY"},r.createElement("div",{className:"library_upsell_banner--bannerContainer--SqSHa"},r.createElement(af.CA,{className:"library_upsell_banner--closeButton--U1sPN",onClick:function(){(0,m.we)("library_upsell_badge_dismissed",{fileKey:null==t?void 0:t.key,teamId:a,userId:n}),e(ay.s({has_dismissed_component_sidebar_library_upsell_banner:!0}))}}),r.createElement("div",{className:"library_upsell_banner--bannerContent--SUcpT"},r.createElement("div",{className:"library_upsell_banner--bannerHeader--Lbg8d"},r.createElement(eU.e,{svg:e$.c,className:"library_upsell_banner--bannerIcon--n5IGN"},r.createElement(eG,null))),r.createElement("p",{className:"library_upsell_banner--bannerTitle--AN3mP"},r.createElement(I.Tx,{id:"design_systems.assets_panel.library_upsell_header"})),r.createElement("p",{className:"library_upsell_banner--bannerBody--GSg3l"},r.createElement(I.Tx,{id:"design_systems.assets_panel.library_upsell_body",upgradeToProfessionalPlanLink:l}))))))}let aS=(0,g.I)(nw.Utt),aT={improved:{search:{path:[0,0],column:0},libraryModal:{path:[0,0],column:1},dropdown:{path:[0,1],column:0},viewToggle:{path:[0,1],column:1}}};function aC({initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:a,containerSizingOptions:l,recordingKey:s}){return r.createElement(eb.O8,{recordingKey:"localComponents",className:"component_sidebar--container--Wxtr4",dataTestId:"component-sidebar","data-does-not-dismiss-component-flyout":!0},r.createElement(aN,{initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:a,containerSizingOptions:l,recordingKey:s}))}function aN({initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:a,containerSizingOptions:l,recordingKey:i}){var o;let c=(0,s.OY)(),u=(0,s.w1)(e=>e.dropdownShown),d=(0,s.w1)(ex.qI),p=(0,s.w1)(eM.Ap),g=(0,s.w1)(eO.qs),h=(0,s.w1)(eO.SJ),_=(0,s.w1)(eR.G),v=(0,s.w1)(e=>e.userFlags.has_dismissed_component_sidebar_library_upsell_banner),y=(0,s.w1)(e=>e.isFreeUser),E=(0,s.w1)(e=>e.user),S=(0,b.Et)(),T=(0,s.w1)(e=>e.openFile),C=(0,eP.usePermissionsState)(),N=(0,nx.u)(),{query:A,searchSessionId:k}=(0,eA.Cy)();(0,au.I)();let P=(0,eb.KE)();r.useEffect(()=>{c(eT.Ze({shouldSearchDefaultLibraries:!1}))},[c]);let{assetType:M,libraryNameByFileKey:O,onSetAssetType:R,scrollContent:L,validAssetTypeOptions:D}=function({containerSizingOptions:e,viewMode:t}){var n;let a=function(){let e=(0,s.w1)(ex.qI),t=(0,s.w1)(ty.w5),n=(0,s.w1)(nk.Ad),a=(0,s.w1)(e=>e.hubFiles),l=(0,s.w1)(ex.iA),i=(0,s.w1)(ex.mO),o=(0,s.w1)(ex.Qj),c=(0,s.w1)(eR.G),u=(0,eN.a0)(),d=(0,t_.Ci)(),p=(null==t?void 0:t.teamId)?c[t.teamId]:null,m=!!p&&(0,ep.So)(p),g=(0,Z.CO)(null==t?void 0:t.project),h=r.useMemo(()=>(0,nC.Yx)(l,i),[l,i]),_=r.useMemo(()=>(0,nC._k)(o),[o]),f=r.useMemo(()=>(0,nC.yO)(e,t,n,g),[e,t,n,g]),v=(0,nP.oT)(),y=r.useMemo(()=>(0,nC.CO)(v,n,t,e,g),[n,g,e,t,v]),E=r.useMemo(()=>u()?(0,nC.gD)(e,t,a,g):null,[u,e,t,a,g]);return r.useMemo(()=>(0,nM.Qx)({localLibraryItemsInfo:h,localTemplatesInfo:_,subscribedItemsInfo:f,subscribedTemplatesInfo:y,subscribedCommunityItemsInfo:E,defaultSubscribedItemsInfo:(0,nC.E3)(),canPublish:m,currentFileKeyForPublish:t?(0,nA.Oe)(t)?t.sourceFileKey:t.key:null,approvedLibraryKeysByResourceType:d}),[h,_,f,y,E,m,t,d])}(),{productComponents:l,templates:i}=(0,nN._m)(tN.Sy.Design),o=(0,s.w1)(e1.iE),c=(0,nx.u)(),u=r.useMemo(()=>({productComponents:l,templates:(0,f.oV)("dse_editor_templates_v1",i,[])}),[l,i]),d=r.useMemo(()=>o?e4.e:function(e,t,n,a=[]){let r=!!((0,f.Ub)().dse_editor_templates_v1&&n&&(n.items.length>0||t.subtrees.length>0));return{[e4.Y.ALL]:!0,[e4.Y.RECENT]:!!(e.length+(0,f.oV)("dse_editor_templates_v1",a.length,0)),[e4.Y.LOCAL]:t.items.length>0||t.subtrees.length>0||r,[e4.Y.FILE]:!1}}(l,a.localSubtree,a.localTemplateSubtree,i),[o,l,i,a.localSubtree,a.localTemplateSubtree]),p=(n=a.subscribedFileSubtrees,r.useMemo(()=>{let e={};for(let[t,a]of Object.entries(n))a&&(e[t]=a.name);return e},[n])),{assetType:g,onSetAssetType:h}=function(e,t){let[n,a]=r.useState(!1),[l,i]=r.useState({type:e4.Y.ALL}),o=(0,s.OY)(),c=(0,s.w1)(e1.iE),u=(0,ty.AL)();r.useEffect(()=>{n||"loading"===e||(i(nI(function(){if(w.Ez)try{let e=w.Ez.getItem(ao);if(!e)return;return ac(e)}catch(e){return}}(),e,t)),a(!0))},[n,e,t]);let d=r.useCallback(e=>{var t;(!c||(0,e1.aK)(e))&&(i(e),null==(t=w.Ez)||t.setItem(ao,function(e){switch(e.type){case e4.Y.ALL:return"all";case e4.Y.RECENT:return"recent";case e4.Y.LOCAL:return"local";case e4.Y.FILE:return e.fileKey}}(e)),c&&o(eT._Q({searchOptions:e})),m.qE.trackDefinedEvent("assets_panel.asset_type_changed",{assetType:e.type,isSearching:!!c,fileKey:e.type===e4.Y.FILE?e.fileKey:void 0,openFileKey:null==u?void 0:u.key,fileTeamId:(null==u?void 0:u.teamId)??void 0,fileOrgId:(null==u?void 0:u.parentOrgId)??void 0,assetsPanelVersion:2}))},[c,o,null==u?void 0:u.key,null==u?void 0:u.parentOrgId,null==u?void 0:u.teamId]),p=r.useCallback(e=>e.key===ao&&null!=e.newValue,[]),g=r.useCallback(n=>{if(!n)return;let a=ac(n);"loading"!==e&&i(nI(a,e,t))},[e,t]);return(0,w.kH)({onSync:g,shouldSyncValue:p}),{assetType:l,onSetAssetType:d}}(c?"loading":d,p),_=function({assetType:e,containerSizingOptions:t,recentlyUsedItems:n,treeWithSubtrees:a,viewMode:l}){let{library:i}=(0,x.q)(e=>({library:e.library})),o=(0,s.w1)(nk.gH),[c,u]=r.useState(!1),d=l===nC.sz.List,p=r.useMemo(()=>({isList:d,isExpanded:nK.O_,sourceForTracking:nC.wt,...t}),[t,d]),m=r.useMemo(()=>{let e,t;let{query:n,normalizedSearchResults:a,unsubscribedSearchResults:r}=i.assetsPanelSearch;if(!n)return as;(0,f.Ub)().dse_editor_templates_v1?[t,e]=(0,e1.Ks)(a):e=a;let l=e,s=l.length+r.length;if(0===s&&(!t||0===t.length))return as;!c&&0===l.length&&r.length>0&&u(!0);let d=[];if(t&&t.length>0&&(0,f.Ub)().dse_editor_templates_v1){let e=at(d,(0,I.t)("design_systems.assets_panel.templates"),{keyPrefix:nL(al.KI),sectionNameForTracking:"Templates search results"});an({outputElements:d,results:t,moreResults:[],showMoreResults:!1,keyPrefix:nL(al.KI),overallOptions:p,fileNameByKey:o,toggleShowMoreResults:()=>{},parent:e})}if(s>0){var m,g;let e=(0,f.Ub)().dse_editor_templates_v1?at(d,(0,I.t)("design_systems.assets_panel.components"),{keyPrefix:(m=al.KI,`${m}:${nO}`),sectionNameForTracking:"Primary search results"}):null;an({outputElements:d,results:l,moreResults:r,showMoreResults:c,keyPrefix:(g=al.KI,`${g}:${nO}`+((0,f.Ub)().dse_editor_templates_v1?"1":"")),overallOptions:p,fileNameByKey:o,toggleShowMoreResults:()=>{u(e=>!e)},parent:e})}return d},[o,i.assetsPanelSearch,p,c]),{productComponents:g,templates:h}=n,_=r.useMemo(()=>{if(!g.length&&!h.length)return as;let e=[];return(0,f.Ub)().dse_editor_templates_v1?(h.length>0&&n3({parent:at(e,(0,I.t)("design_systems.assets_panel.templates"),{keyPrefix:nD(al.KI+":templates"),sectionNameForTracking:"Recently used templates"}),outputElements:e,items:h,keyPrefix:nD(al.KI+":templates"),sharedOptions:p}),g.length>0&&n3({parent:at(e,(0,I.t)("design_systems.assets_panel.components"),{keyPrefix:nD(al.KI+":components"),sectionNameForTracking:"Recently used"}),outputElements:e,items:g,keyPrefix:nD(al.KI+":components"),sharedOptions:p})):n3({parent:null,outputElements:e,items:g,keyPrefix:nD(al.KI),sharedOptions:p}),e},[g,h,p]),v=r.useMemo(()=>(0,f.Ub)().dse_editor_templates_v1?function(e,t,n){let a=[];return e.forEach(e=>{e&&aa({prevParent:null,outputElements:a,inputSubtree:e,inputParentTree:t,keyPrefix:al.KI,sharedOptions:n,sectionNameForTracking:e.sectionNameForTracking,hideTitle:!1})}),a}([a.localTemplateSubtree,a.localSubtree],a.tree,p):ai(a.localSubtree,a.tree,p),[p,a.localSubtree,a.localTemplateSubtree,a.tree]),y=r.useMemo(()=>ai(e.type===e4.Y.FILE?a.subscribedFileSubtrees[e.fileKey]:void 0,a.tree,p),[e,p,a.subscribedFileSubtrees,a.tree]),E=r.useMemo(()=>{let e=[];return!function(e,t,n,a){if((0,f.Ub)().dse_templates_proto){let r=t.subtrees.find(nM.Ou);null!=r&&aa({prevParent:null,outputElements:e,inputSubtree:r,inputParentTree:t,keyPrefix:n,sharedOptions:a,sectionNameForTracking:r.sectionNameForTracking})}for(let r of(t.items.length>0&&n3({parent:null,outputElements:e,items:t.items,keyPrefix:n,sharedOptions:a}),t.subtrees))(0,f.Ub)().dse_templates_proto&&(0,nM.Ou)(r)||aa({prevParent:null,outputElements:e,inputSubtree:r,inputParentTree:t,keyPrefix:n,sharedOptions:a,sectionNameForTracking:r.sectionNameForTracking})}(e,a.tree,al.KI,p),e},[p,a.tree]);return i.assetsPanelSearch.query?m:e.type===e4.Y.RECENT?_:e.type===e4.Y.LOCAL?v:e.type===e4.Y.FILE?y:E}({assetType:g,containerSizingOptions:e,recentlyUsedItems:u,treeWithSubtrees:a,viewMode:t});return{assetType:g,libraryNameByFileKey:p,onSetAssetType:h,scrollContent:_,validAssetTypeOptions:d}}({viewMode:n,containerSizingOptions:l}),F=(0,eI.wD)(),K=(0,s.w1)(e=>e.universalInsertModal.showing),G=r.useCallback(()=>{K&&F()},[F,K]),U=r.useCallback((e,t,n)=>{G(),c((0,H.A5)({type:nT,data:{asset:e,searchSessionId:k??void 0,query:A??void 0,sectionPosition:t,sectionNameForTracking:n,assetTypeDropdownSelection:null==M?void 0:M.type,containerWidth:l.containerWidth,onGetKeyboardNavigationItemById:P}}))},[M,l.containerWidth,c,G,P,k,A]),B=r.useMemo(()=>({onOpenFlyout:U,assetTypeDropdownSelection:null==M?void 0:M.type}),[M,U]);!function({allElements:e}){ag(r.useCallback(()=>{let t=e.length,n=0,a=0;for(let t of e)if(!t.key.includes("localComponents")){let e=function e(t){if(t.type===nU.QJ.TILE)return 1;if(!(0,nU.yy)(t)||!t.isExpanded)return 0;{let n=0;for(let a of t.children)n+=e(a);return n}}(t);n+=e,a+=Math.min(e,20)}return{numLibraries:t,numComponents:n,numComponentsWithLimit:a}},[e]))}({allElements:L});let V=n===nC.sz.List,W=d.assetsPanelSearch,Y=0===L.length,q=(null==u?void 0:u.type)===a_.c,X=q&&(null==(o=null==u?void 0:u.data)?void 0:o.component)||null,z=(0,ad._)(!0),$=r.useCallback(()=>{q||(0,er.mo)()},[q]),[j,Q]=(0,w.JL)("has-auto-expanded-component-libraries-for-nux",!1),J=(0,eN.a0)(),ee=r.useRef(null);r.useEffect(()=>{let e=ee.current;e&&0!==L.length&&J()&&!j&&e.expandAllComponentLibraries(308)>0&&Q(!0)},[j,J,L.length,Q]);let et=r.useCallback(()=>{let e=!!d.assetsPanelSearch.query,t=0===L.length;return r.createElement("div",null,e&&t&&r.createElement(eQ,null),!e&&t&&r.createElement(eZ,null))},[d.assetsPanelSearch,L.length]),en=N||W.isLoading,ea=(0,ek.sD)(),el=(null==T?void 0:T.teamId)?_[T.teamId]:null,es=!v&&y&&(!el||!(0,ep.So)(el)&&(0,eP.canEditTeam)(el.id,C))&&(null==T?void 0:T.canEdit)&&ea&&Object.keys(d.local.components).length>0&&(0,eC.oH)(null==E?void 0:E.id);return r.createElement(tl.y.Provider,{value:B},r.createElement(aI,{assetType:M,componentsEmpty:Y,isList:V,isSearching:!!W.query,isComponentSidebarInitialLoading:N,libraryNameByFileKey:O,onSetAssetType:R,onToggleViewMode:a,recordingKey:i,validAssetTypeOptions:D}),en?r.createElement("div",{className:"component_sidebar--loadingSpinnerContainerWithDropdown--9b8ZI"},r.createElement(eS.M7,null)):r.createElement("div",{className:"component_sidebar--assetPanelSection--mYuo2"},r.createElement(ew.U,{ref:ee,scrollContent:L,recordingKey:"componentsListContainer",isList:V,getViewportHeight:e=>e-2*S,topOffset:aS,isTileSelected:e=>!!e.item.isLocal&&h&&(0,eL.uu)(g,h,e.item.node_id),onMouseUp:$,renderEmptyState:et,width:l.containerWidth,className:"component_sidebar--scrollContainerFullHeight---DTUM component_sidebar--_scrollContainerBase--1rakD",initialScrollTop:e,onScroll:t,enableKeyboardNavigation:!0,shouldRefocusAfterKeyboardInsert:M.type===e4.Y.RECENT,fileKey:null==T?void 0:T.key,teamId:(null==T?void 0:T.teamId)??void 0,orgId:(null==T?void 0:T.parentOrgId)??void 0}),!!X&&r.createElement(a_.M,{selectedView:p,dropdownShown:u,defaultFileKeys:d.defaultPublished.fileKeys,onJumpToLocalComponent:z,onOpenFlyout:U,usePortal:!0}),es&&r.createElement(ab,null),r.createElement(eD.i,{featureFlag:"presets_baseline"},r.createElement("div",{style:{left:`${l.containerWidth}px`},className:"component_sidebar--hiddenNuxAnchor--m-VcR","data-onboarding-key":eF.Ig}),r.createElement(eF.GM,null))))}function aI({assetType:e,componentsEmpty:t,isList:n,isSearching:a,isComponentSidebarInitialLoading:l,libraryNameByFileKey:s,onSetAssetType:i,onToggleViewMode:o,validAssetTypeOptions:c,recordingKey:u}){let d=aT.improved,{setKeyboardNavigationElement:p}=(0,eb._G)({path:d.libraryModal.path,column:d.libraryModal.column}),{setKeyboardNavigationElement:m}=(0,eb._G)({path:aT.improved.dropdown.path,column:aT.improved.dropdown.column}),{setKeyboardNavigationElement:g}=(0,eb._G)({path:d.viewToggle.path,column:d.viewToggle.column});return r.createElement("div",null,r.createElement("div",{className:"component_sidebar--searchHeader--yTD7D component_sidebar--_header--nHN39"},r.createElement(e5,{searchOptions:{type:e,onSetAssetType:i},keyboardNavigationPath:d.search.path,keyboardNavigationColumn:d.search.column}),r.createElement(tt,{entrypoint:eB.Yj.ASSETS_PANEL_BUTTON,onSetKeyboardNavigationElement:p,recordingKey:u})),l||t&&!a?null:r.createElement("div",{className:"component_sidebar--pageHeader--m9FWc component_sidebar--_header--nHN39"},r.createElement(ta.s,{assetType:e,libraryNameByFileKey:s,onSetAssetType:i,onSetKeyboardNavigationElement:m,validAssetTypeOptions:c}),r.createElement(tr.g,{isList:n,onToggleViewMode:o,onSetKeyboardNavigationElement:g,recordingKey:u})))}var aA=n(110952),ak=n(562416),aP=n.n(ak),aM=n(439784),ax=n(962148),aO=n(329956),aR=n(326660),aL=n(58908),aD=n(467412),aF=n(73460);class aK{constructor(e,t,n,a,r={}){this.component=e,this.onMouseDown=t,this.onMouseMove=n,this.onMouseUp=a,this.options=r,this.oldTouch=null,this.draggingID=null,this.deferredDragStart=null,this.onTouchStart=e=>{if(e.stopPropagation(),null===this.draggingID&&e.touches.length>0&&this.shouldAdaptTouch(e.touches[0])){let t=e.touches[0];if(this.draggingID=t.identifier,document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onTouchEndOrCancel),document.addEventListener("touchcancel",this.onTouchEndOrCancel),this.options.delayInMS){let n=!1;if(this.deferredDragStart=a=>{if(n)return!1;let r=a.clientX-t.clientX,l=a.clientY-t.clientY;return!(10>Math.sqrt(r*r+l*l))&&(n=!0,!this.options.delayInMS&&(this.onMouseDown(this.mouseEvent("mousedown",e,t)),!0))},this.options.delayInMS){let a=this.deferredDragStart;setTimeout(()=>{this.deferredDragStart!==a||n||(this.deferredDragStart=null,this.onMouseDown(this.mouseEvent("mousedown",e,t)))},this.options.delayInMS)}}else this.deferredDragStart=null,this.onMouseDown(this.mouseEvent("mousedown",e,t))}},this.onTouchMove=e=>{if(e.stopPropagation(),null!==this.draggingID){for(let t of e.touches)if(t.identifier===this.draggingID){if(this.deferredDragStart){if(!this.deferredDragStart(t))break;this.deferredDragStart=null}e.preventDefault(),this.onMouseMove(this.mouseEvent("mousemove",e,t));break}}},this.onTouchEndOrCancel=e=>{e.stopPropagation(),null!==this.draggingID&&(this.draggingID=null,document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEndOrCancel),document.removeEventListener("touchcancel",this.onTouchEndOrCancel),this.deferredDragStart?this.deferredDragStart=null:this.onMouseUp(this.mouseEvent("mouseup",e,this.oldTouch)))}}mouseEvent(e,t,n){this.oldTouch=n;let a=new MouseEvent(e,{altKey:t.altKey,metaKey:t.metaKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});return Object.defineProperty(a,"target",{value:t.target}),Object.defineProperty(a,"currentTarget",{value:t.currentTarget}),a}shouldAdaptTouch(e){if(!this.options.observeInsideOverflowScroll){let t=l.findDOMNode(this.component);for(let n=e.target;n;n=n.parentElement){let a=getComputedStyle(n).overflowY;if("scroll"===a||"auto"===a){let t=n.getBoundingClientRect();if(e.clientX>=t.left&&e.clientX<t.right&&e.clientY>=t.top&&e.clientY<t.bottom)return!1}if(n===t)break}}return!0}}var aG=n(581384),aU=n(144972),aB=n(972496);function aV(e){let{top:t,width:n,guid:a,level:l,onMouseEnter:s,recordingKey:i}=e,o=y.S4(i,"click",e=>{er.Si([a])}),c={transform:`translate3d(0px, ${t}px, 0)`,width:n,height:aU.k},u={width:aG.sF*l*2,marginRight:1===l?aG.sF/2:0};return r.createElement("div",{className:"layer_expansion_row--layerExpansionRow--G8Twa object_row--row--HIYa5",style:c,onMouseDown:e=>e.stopPropagation(),onClick:o,onMouseEnter:s,role:"button",tabIndex:0},r.createElement("span",{className:"layer_expansion_row--layerExpansionIndent--Bg5Df object_row--indent--uZlad",style:u}),r.createElement("span",{className:"layer_expansion_row--iconWrapper--J3NJb object_row--iconWrapper--ivRSW"},r.createElement(N.A,{svg:aB.c})),r.createElement("span",{className:"layer_expansion_row--rowText--yhMnt object_row--rowText--3qo7Q ellipsis--ellipsis--Tjyfa"},r.createElement(I.Tx,{id:"design_systems.component_properties.see_all_layers"})))}var aH=n(142088),aW=n(520552),aY=n(913636);let aq="objects_panel--dropTargetBox--4SX8i",aX=new ax.Y;function az(e){return"object"===e.rowType?e.guid:"layer-expansion"===e.rowType?`expand-${e.containingPrimaryInstanceGUID}`:e.sectionId}class a$ extends y.UR{constructor(e){super(e),this.state={scrollTop:0,mouseDown:null,dropTarget:null,needsScrollLine:!1},this.cachedAllRowData=[],this.topByGuid=Object.create(null),this.totalHeight=0,this.setNeedsScrollLine=e=>{this.setState({needsScrollLine:e>0})},this.rangeSelectAnchorNodeId=null,this.getScene=()=>this.props.sceneGraph||es.TSSceneGraph.instance,this.initializeRows=e=>{let t=this.getScene(),n=e.customRowBuilder?e.customRowBuilder():(0,aW.is)(t,e.topNodeFields,e.showImmutableFrameSublayers,e.temporarilyExpandedInstanceLayers,e.includeTopNode);this.topByGuid=n.topByGuid,this.sectionById=n.sectionById,this.totalHeight=n.totalHeight,this.cachedAllRowData=n.rowData},this.justToggledExpandedGuid=null,this.anchorNodeId=null,this.topNodeDelta=0,this.lastCollapsedScrollPosition=null,this.scrollAfterNodeExpanded=!1,this.lastCollapsedGuid=null,this.hasCrossedDragThreshold=!1,this.scrollToNodeIdAfterUpdate=null,this.onFullscreenScrollToNode=({nodeId:e})=>{let t=this.topByGuid[e];if(null==t){let t=this.getScene().get(e);t&&t.parentGuid&&er.ei(t.parentGuid),this.scrollToNodeIdAfterUpdate=e;return}this.isVisible(t,t+aU.k)||this.scrollNodeIntoView(e)},this.recalculateLayout=()=>{this.windowInnerHeight=window.innerHeight,this.recalculateRequested=!1},this.recalculateRequested=!1,this.requestRecalculateLayout=()=>{this.recalculateRequested||requestAnimationFrame(this.recalculateLayout)},this.isScrolling=!1,this.scrollingTimeout=null,this.handleMouseEnterAfterScroll=null,this.onScroll=e=>{this.isScrolling=!0,this.nextScrollTop=e,null==this.frameRequest&&(this.frameRequest=requestAnimationFrame(this.setScrollTopState)),null!=this.scrollingTimeout&&clearTimeout(this.scrollingTimeout),this.scrollingTimeout=setTimeout(this.doneScrolling,50),this.props.onScroll(e),this.setNeedsScrollLine(e)},this.doneScrolling=()=>{this.isScrolling=!1,this.scrollingTimeout=null,this.handleMouseEnterAfterScroll&&(this.handleMouseEnterAfterScroll(),this.handleMouseEnterAfterScroll=null)},this.computeScrollDelta=e=>{let t=e/aU.k;return aU.k*t*t},this.frameRequest=null,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequest=null},this.isNodeSticky=e=>((0,aR.GC)(aL._.FIGJAM_CORE,this.props),e.parentGuid===this.props.currentPage&&("SYMBOL"===e.type||"FRAME"===e.type&&!e.resizeToFit)),this.isAncestorSticky=e=>{let t=this.getScene(),n=e.parentGuid?t.get(e.parentGuid):null;for(;n&&n.guid!==this.props.currentPage;){if(this.isNodeSticky(n))return!0;n=n.parentGuid?t.get(n.parentGuid):null}return!1},this.stickyHeaderGuid=null,this.lastStickyHeaderGuid=null,this.lastExpansionTarget=null,this.findStickyHeaderRowAndReplaceInVisibleRows=e=>{if(this.stickyHeaderGuid=null,(this.state.scrollTop>0||this.scrollAfterNodeExpanded)&&e.length>0){let t;let n=this.state.scrollTop,a=(e,t,n)=>{if("object"!==e.rowType)return!1;let a=this.findStickyHeader(e,t,n);if(a){let t=this.renderedVisibleRowProps.indexOf(e);t>=0?this.renderedVisibleRowProps[t]=a:this.renderedVisibleRowProps.push(a)}return!!a},r=null;for(let l=0;l<e.length;l++)if(0===(t=e[l]).level){if(r&&a(r,r.top,t.top)||t.top>n)return;r=t}(0,nG.kz)(!!r,"has at least one top level section"),a(r,r.top,Number.POSITIVE_INFINITY)}},this.scrollNodeIntoView=e=>{if(null==this.topByGuid[e]||!this.scrollContainerEl)return;let t=this.topByGuid[e],n=this.state.scrollTop,a=this.scrollContainerEl.clientHeight;if(this.stickyHeaderGuid===e)return;let r=this.getScene().get(e);if(!r)return;let l=this.isAncestorSticky(r);l&&t<n+aU.k?this.scrollContainer.scrollTo(t-aU.k):!l&&t<n?this.scrollContainer.scrollTo(t):t+aU.k>n+a&&this.scrollContainer.scrollTo(t-a/2)},this.rowContextMenu=(e,t)=>{if(this.props.onRowContextMenu){this.props.onRowContextMenu(e,t);return}let n=this.getScene().get(e);if(!n)return;(0,eL.uu)(this.getScene(),this.props.sceneGraphSelection,n.guid)||this.updateSelection(n.guid);let{clientX:a,clientY:r}=t;this.props.dispatch(P.Qn({type:Y.Cs,data:{clientX:a,clientY:r}}))},this.rowContainerMouseDown=y.yw(this,"mousedown",e=>{let t=this.guidAtMousePosition(e.clientY);if(!t)return;if(e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&!this.props.renamingGuid&&document.activeElement.blur(),(this.props.allowToggleSelection??!0)&&(0,eJ.Mr)(e)){this.toggleSelected(t);return}(0,f.Ub)().version_diffing&&this.props.editModeType===R.a_v.COMPARE_CHANGES&&R.i46.setActiveChange(t)&&this.props.showViewChangesNotification(t);let n=(0,aO.QL)(this.props.sceneGraphSelection),a=null;if(n?a=n:this.rangeSelectAnchorNodeId&&(0,eL.mS)(this.props.sceneGraphSelection,this.rangeSelectAnchorNodeId)&&(a=this.rangeSelectAnchorNodeId),(this.props.allowSelectRange??!0)&&e.shiftKey&&a){er.G2(a,t),J.CA.commit();return}(0,eL.uu)(this.getScene(),this.props.sceneGraphSelection,t)||(this.updateSelection(t),this.rangeSelectAnchorNodeId=t),(0,q.g)(e)||this.setState({mouseDown:new tc.Cg(e.clientX,e.clientY)})},{recordMetadata:e=>{let t=this.guidAtMousePosition(e.clientY);return(0,nG.kz)(!!t,"interaction test does not support rare case of no guid under mouse (empty layers panel?)"),{path:(0,aG._i)(t,this.getScene()),clientX:e.clientX}},playbackMetadata:e=>{let t=this.topByGuid[(0,aG._e)(e.path,this.getScene(),this.props.currentPage)]+aU.k/2;return{clientY:this.clientY(t),clientX:e.clientX}}}),this.onMouseMove=e=>{if(this.state.mouseDown&&!this.props.renamingGuid){this.state.mouseDown.distanceTo({x:e.clientX,y:e.clientY})>3&&(this.hasCrossedDragThreshold=!0);let t=this.relativeY(e.clientY),n=this.state.scrollTop,a=this.scrollContainerEl.clientHeight;if(a>0){if(t<n){this.scrollContainer.scrollTo(n-this.computeScrollDelta(n-t));return}if(t>n+a){this.scrollContainer.scrollTo(n+this.computeScrollDelta(t-n-a));return}}let r=(0,aG.uY)(this.getScene(),this.props.sceneGraphSelection,this.topByGuid,this.sectionById,e.clientX-this.state.mouseDown.x,t,this.mouseOverStickyHeaderGuid(e.clientY));this.state.dropTarget&&r&&this.state.dropTarget.index!==r.index&&aM.G.trigger(R.sRF.SNAP),(this.hasCrossedDragThreshold||!r)&&(this.expandDropTargetIfNeeded(r,t),this.setState({dropTarget:r}))}},this.onMouseUp=y.yw(this,"mouseup",e=>{let t=this.getScene(),n=!1;if(this.hasCrossedDragThreshold=!1,this.state.mouseDown&&!this.props.renamingGuid){if(n=!0,3>=this.state.mouseDown.distanceTo(new tc.Cg(e.clientX,e.clientY))){if(!(0,q.g)(e)){let t=this.guidAtMousePosition(e.clientY);t?this.updateSelection(t):n=!1}}else if(!this.props.readonly){let n=(0,aG.uY)(t,this.props.sceneGraphSelection,this.topByGuid,this.sectionById,e.clientX-this.state.mouseDown.x,this.relativeY(e.clientY),this.mouseOverStickyHeaderGuid(e.clientY));if(!n)return;let{parentGuid:a,index:r,section:l}=n,s=t.get(a);if(!s)return;let i=e.altKey,o=(0,aG.ey)(s,r);i?ee.Pc.user("duplicate-selection",()=>er._A(s.guid,o,l)):ee.Pc.user("reparent-selection",()=>er.eQ(s.guid,o,l)),er.ei(s.guid),R.GqY.clearTemporarilyExpanded(),J.CA.commit()}}if(this.setState({mouseDown:null,dropTarget:null}),this.isDraggingToToggle&&(n=!0,this.isDraggingToToggle=null,J.CA.commit()),!n)return y.Cy},{recordMetadata:e=>{let t=this.getScene(),n=this.guidAtMousePosition(e.clientY),a=this.relativeY(e.clientY);(0,nG.kz)(!!n,"interaction test does not support rare case of no guid under mouse (empty layers panel?)");let r=this.topByGuid[n];return{path:(0,aG._i)(n,t),treatAsEndOfClick:!!(this.state.mouseDown&&5>this.state.mouseDown.distanceTo(new tc.Cg(e.clientX,e.clientY))),belowAll:a>r+aU.k,clientX:e.clientX}},playbackMetadata:e=>{if(e.treatAsEndOfClick)return{clientX:this.state.mouseDown.x,clientY:this.state.mouseDown.y};{let t=this.topByGuid[(0,aG._e)(e.path,this.getScene(),this.props.currentPage)]+aU.k/2;return e.belowAll&&(t+=aU.k),{clientY:this.clientY(t),clientX:e.clientX}}}}),this.onScrollContainerMouseDown=()=>{er.mo(),J.CA.commit()},this.scrollContainerRef=e=>{this.scrollContainer=e,this.scrollContainerEl=l.findDOMNode(e)},this.containerMouseLeave=e=>{er.cX(""),null!=this.hoverToExpandGroupTimeout&&clearTimeout(this.hoverToExpandGroupTimeout)},this.expandMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n)return;t.stopPropagation(),(0,m.we)("objects_panel_expand",{nonInteraction:0});let a=!n.isExpanded;t.altKey?er.WU(n.guid,a):(0,eJ.Mr)(t)&&!(0,aO.t7)(this.props.sceneGraphSelection)?er.q4(n.guid,a):er.OE(n.guid,a),this.justToggledExpandedGuid=n.guid},this.isDraggingToToggle=null,this.lockMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n||this.props.readonly)return;t.stopPropagation();let a=!n.locked;this.isDraggingToToggle={locked:a},ee.Pc.user("set-locked",()=>{(0,f.Ub)().ce_multi_edit?er.g$(n.guid,a,t.altKey):aZ(n,a,t.altKey)})},this.visibleMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n||this.props.readonly)return;t.stopPropagation();let a=!n.visible;this.isDraggingToToggle={visible:a},ee.Pc.user("set-visible",()=>{(0,f.Ub)().ce_multi_edit?er.JX(n.guid,a,t.altKey):aJ(n,a,t.altKey)})},this.hoverToExpandGroupTimeout=null,this.rowMouseEnter=(e,t)=>{let n=this.getScene().get(e);if(!n)return;let a=()=>{if(this.isDraggingToToggle){let{locked:e,visible:t}=this.isDraggingToToggle;null!=e&&ee.Pc.user("set-locked",()=>aZ(n,e,!1)),null!=t&&ee.Pc.user("set-visible",()=>aJ(n,t,!1))}this.state.mouseDown||er.cX(n.guid)};e0.cp.firefox&&this.isScrolling?this.handleMouseEnterAfterScroll=a:a()},this.onDragDrop=(e,t)=>{this.onMouseUp(t.nativeEvent)},this.onDragOver=(e,t)=>{this.onMouseMove(t.nativeEvent)},this.onDragEnter=(e,t)=>{this.onMouseMove(t.nativeEvent),this.rowMouseEnter(e,t)},this.onDragLeave=(e,t)=>{this.onMouseMove(t.nativeEvent)},this.renderedVisibleRowProps=[],this.touchAdapter=new aK(this,this.rowContainerMouseDown,this.onMouseMove,this.onMouseUp,{delayInMS:500,observeInsideOverflowScroll:!0}),this.recalculateLayout(),this.initializeRows(this.props)}componentDidMount(){super.componentDidMount(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),window.addEventListener("resize",this.requestRecalculateLayout),J.CA.fromFullscreen.on("scrollToNode",this.onFullscreenScrollToNode);let e=R.i46&&R.i46.getFirstSelectedNodeIdForCurrentPage();e&&this.onFullscreenScrollToNode({nodeId:e})}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("resize",this.requestRecalculateLayout),J.CA.fromFullscreen.removeListener("scrollToNode",this.onFullscreenScrollToNode)}updateSelection(e){(0,aF.c)("panel"),er.uc([e]),J.CA.commit(),this.props.onSelectionUpdated&&this.props.onSelectionUpdated(e)}UNSAFE_componentWillUpdate(e,t){e.renamingGuid&&e.renamingGuid!==this.props.renamingGuid&&(this.scrollToNodeIdAfterUpdate=e.renamingGuid);let n=this.props.objectsPanelRowRebuildCounter!==e.objectsPanelRowRebuildCounter,a=this.props.customRowBuilder!==e.customRowBuilder;if((n||a||this.props.currentPage!==e.currentPage||this.props.showImmutableFrameSublayers!==e.showImmutableFrameSublayers||!aP()(this.props.temporarilyExpandedInstanceLayers,e.temporarilyExpandedInstanceLayers)||!aP()(this.props.temporarilyHoveredNodes,e.temporarilyHoveredNodes))&&this.initializeRows(e),this.anchorNodeId=null,this.topNodeDelta=0,n){if(null!==this.justToggledExpandedGuid)this.justToggledExpandedGuid===this.stickyHeaderGuid?(this.lastCollapsedScrollPosition=this.state.scrollTop,this.lastCollapsedGuid=this.justToggledExpandedGuid,this.scrollToNodeIdAfterUpdate=this.stickyHeaderGuid):this.justToggledExpandedGuid===this.lastCollapsedGuid&&this.justToggledExpandedGuid===this.lastStickyHeaderGuid&&this.topByGuid[this.lastStickyHeaderGuid]===this.state.scrollTop&&(this.scrollAfterNodeExpanded=!0),this.justToggledExpandedGuid=null;else{let e=!1;for(let t of this.renderedVisibleRowProps)if("object"===t.rowType&&(0,aG.oQ)(t,0,this.scrollContainer.getTrackHeight(),this.state.scrollTop)&&this.props.sceneGraphSelection[t.guid]){e=!0;break}let t=null,n=null;for(let a of this.renderedVisibleRowProps)"object"===a.rowType&&(0,aG.oQ)(a,0,this.scrollContainer.getTrackHeight(),this.state.scrollTop)&&((!e||this.props.sceneGraphSelection[a.guid])&&(null===t||t>a.top)&&(t=a.top,this.anchorNodeId=a.guid),(null===n||n>a.top)&&(n=a.top,this.topNodeDelta=this.topByGuid[a.guid]-a.top))}}}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),this.scrollToNodeIdAfterUpdate)this.scrollNodeIntoView(this.scrollToNodeIdAfterUpdate),void 0!==this.topByGuid[this.scrollToNodeIdAfterUpdate]&&(this.scrollToNodeIdAfterUpdate=null);else if(this.scrollAfterNodeExpanded)null!=this.lastCollapsedScrollPosition&&this.scrollContainer.scrollTo(this.lastCollapsedScrollPosition),this.scrollAfterNodeExpanded=!1,this.lastCollapsedScrollPosition=null,this.lastCollapsedGuid=null;else{let e=this.scrollContainer.getScrollTop()+this.topNodeDelta,t=!1;for(let n of this.renderedVisibleRowProps)if("object"===n.rowType&&n.guid===this.anchorNodeId){t=(0,aG.oQ)(n,0,this.scrollContainer.getTrackHeight(),e);break}t?this.scrollContainer.scrollTo(e):this.anchorNodeId&&this.scrollNodeIntoView(this.anchorNodeId)}}findStickyHeader(e,t,n){let a=this.state.scrollTop,r=this.getScene().get(e.guid);if(!r)return null;if(this.isNodeSticky(r)&&e.hasChildren&&(e.isExpanded||e.isTemporarilyExpanded)){if(t<=a&&n>a+aU.k)return this.stickyHeaderGuid=e.guid,this.lastStickyHeaderGuid=this.stickyHeaderGuid,{...e,fixed:!0};if(n>a&&n<=a+aU.k)return{...e,top:n-aU.k,layerAbove:!0};if(this.scrollAfterNodeExpanded&&e.guid===this.lastStickyHeaderGuid)return this.stickyHeaderGuid=e.guid,this.lastStickyHeaderGuid=this.stickyHeaderGuid,{...e,fixed:!0}}return null}expandDropTargetIfNeeded(e,t){let n=null;if(e&&"sticky"!==e.parentTop){let a=this.getScene().get(e.parentGuid);(0,nG.kz)(!!a,"parentGuid should point to a valid node");let r=t>e.parentTop+aU.k/3&&t<e.parentTop+2*aU.k/3;a.uiOrderedChildren.length&&r&&(n=a.guid)}this.lastExpansionTarget!==n&&(this.lastExpansionTarget&&null!=this.hoverToExpandGroupTimeout&&clearTimeout(this.hoverToExpandGroupTimeout),n&&(this.hoverToExpandGroupTimeout=setTimeout(()=>{this.state.mouseDown&&er.WY(n,!0)},1e3)),this.lastExpansionTarget=n)}toggleSelected(e){this.props.sceneGraphSelection[e]?er.mg([e]):(er.aN([e]),this.rangeSelectAnchorNodeId=e),J.CA.commit()}relativeY(e){let t=(0,b.cF)();return this.scrollContainerEl&&(t=this.scrollContainerEl.getBoundingClientRect().top),e-t+this.state.scrollTop}clientY(e){let t=(0,b.cF)();return this.scrollContainerEl&&(t=this.scrollContainerEl.getBoundingClientRect().top),e+t-this.state.scrollTop}isVisible(e,t){if(!this.scrollContainerEl)return!0;let n=this.state.scrollTop,a=this.scrollContainerEl.getBoundingClientRect().height+this.state.scrollTop;return n<e&&t<a}guidAtMousePosition(e){return this.mouseOverStickyHeaderGuid(e)||(0,aG.AX)(this.getScene(),this.props.sceneGraphSelection,this.topByGuid,this.relativeY(e))}mouseOverStickyHeaderGuid(e){return e-this.props.stickyOffset<aU.k?this.stickyHeaderGuid:null}renderDropTarget(e){let t=null;null!=e.parentTop&&(t="sticky"===e.parentTop||this.stickyHeaderGuid===e.parentGuid?r.createElement("div",{key:"drop-target-box",className:aq,style:{position:"fixed",top:this.props.stickyOffset,width:this.props.width,height:aU.k,zIndex:aY.op}}):r.createElement("div",{key:"drop-target-box",className:aq,style:{transform:`translate3d(0px, ${e.parentTop}px, 0)`,height:aU.k}}));let n=null;return null!=e.lineTop&&(n=r.createElement("div",{key:"drop-target-line",className:"objects_panel--dropTargetLine--vmN9u",style:{marginLeft:`${e.lineIndent?e.lineIndent:0}px`,transform:`translate3d(0px, ${0===e.lineTop?0:e.lineTop-1}px, 0)`,transition:"margin-left 150ms 0ms"}})),[t,n]}onContextMenu(e){e.stopPropagation(),e.preventDefault()}hasAtLeastOneRefToHoveredDefId(e){var t;if(!this.props.hoveredPropDef||!(null==(t=this.props.hoveredPropDef.nodeIDs)?void 0:t.length)||!this.props.hoveredPropDef.defID)return!1;let n=e.containingSymbolId;if(!n||!this.props.hoveredPropDef.nodeIDs.includes(n))return!1;for(let t of Object.values(e.propRefs))if(t.isLinked&&t.explicitDefID===this.props.hoveredPropDef.defID)return!0;return!1}renderObjectRow(e,t){var n;let a=t.getNode(e.guid);if(!a||!a.parentGuid)return null;let l=t.getAncestorInfo(a.parentGuid),s=t.getMaskInfo(e.guid),i=(0,eL.mS)(this.props.sceneGraphSelection,e.guid);if(!l||!s)return null;let o=(l.isAncestorSelected||i)&&!l.isAncestorHidden&&this.hasAtLeastOneRefToHoveredDefId(a);return r.createElement(aH.M7,{key:aX.getKeyForId(e.guid),readonly:this.props.readonly,...e,renderResourceUse:this.props.renderResourceUse,showMemoryUsage:this.props.showMemoryUsage,showInFileMemoryPercentage:this.props.showInFileMemoryPercentage,nodeMemoryUsage:a.nodeMemoryUsage,rootMemoryUsage:a.rootMemoryUsage,isAncestorHidden:l.isAncestorHidden,isAncestorLocked:l.isAncestorLocked,isAncestorSelected:l.isAncestorSelected,displayOrder:l.childrenDisplayOrder,isMaskedAtLevels:s.isMaskedAtLevels,isLastMaskedAtLevels:s.isLastMaskedAtLevels,width:this.props.width,name:a.name,abbreviatedStateName:a.isState?a.stateAbbreviatedName:null,nodeType:a.type,isStamp:(0,aD.QP)(a),visible:a.visible,mask:a.mask,locked:a.locked,resizeToFit:a.resizeToFit,stackMode:a.stackMode,isStateGroup:a.isStateGroup,isState:a.isState,scrollDirection:a.scrollDirection,booleanOperation:a.booleanOperation,isStaticImage:a.hasEnabledStaticImagePaint,isGIF:a.hasEnabledAnimatedPaint,cornerRadius:a.cornerRadius,objectsPanelThumbnailId:a.objectsPanelThumbnailId,isWidgetSublayer:!!a.isInWidget,hasChildren:a.isExpandable||e.hasChildren||(0,t4.W0)(a,this.getScene()),isExpanded:e.isExpanded||e.isTemporarilyExpanded,isHovered:this.props.hoveredNode===e.guid||this.props.temporarilyHoveredNodes.includes(e.guid)||o,isSelected:i,isRenaming:this.props.renamingGuid===e.guid,isDragging:!!this.state.dropTarget,startRenaming:this.props.startRenaming,stopRenaming:this.props.stopRenaming,onContextMenu:this.rowContextMenu,expandMouseDown:this.expandMouseDown,lockMouseDown:this.lockMouseDown,visibleMouseDown:this.visibleMouseDown,onMouseEnter:this.rowMouseEnter,dispatch:this.props.dispatch,shouldShowGuids:this.props.shouldShowGuids,currentPage:this.props.currentPage,onDragDropCallback:this.onDragDrop,onDragOverCallback:this.onDragOver,onDragEnterCallback:this.onDragEnter,onDragLeaveCallback:this.onDragLeave,stickyOffset:this.props.stickyOffset,isThumbnail:this.props.thumbnailGuid===e.guid,layerChangeStatus:a.nodeChangeStatus,versionHistory:this.props.versionHistory,userId:this.props.userId,hideRowActions:this.props.hideRowActions,isDefaultResponsiveSet:(null==(n=this.props.topNodeFields)?void 0:n.defaultResponsiveSetId)===e.guid,isResponsiveSet:a.isResponsiveSet})}renderLayerExpansionRow(e){let t=aX.getKeyForId(az(e));return r.createElement(aV,{key:t,top:e.top,width:this.props.width,guid:e.containingPrimaryInstanceGUID,level:e.level,onMouseEnter:()=>er.cX(""),dispatch:this.props.dispatch,recordingKey:y.Mx(this.props,"layerExpansion",e.containingPrimaryInstanceGUID)})}renderSectionHeader(e){let t=this.sectionById[e.sectionId]&&(0,eL.uu)(this.getScene(),this.props.sceneGraphSelection,this.sectionById[e.sectionId].parentGuid);return r.createElement(aH.k5,{key:aX.getKeyForId(e.sectionId),...e,width:this.props.width,isParentSelected:t,dispatch:this.props.dispatch})}render(){let e=this.renderedVisibleRowProps,t=this.cachedAllRowData||[];for(let n of(this.renderedVisibleRowProps=(0,aG.sf)(t,this.windowInnerHeight,this.state.scrollTop),this.findStickyHeaderRowAndReplaceInVisibleRows(t),e))(0,aG.ug)(n,this.windowInnerHeight,this.state.scrollTop)||aX.freeKeyForId(az(n));this.renderedVisibleRowProps.sort((e,t)=>aX.getKeyForId(az(e))-aX.getKeyForId(az(t)));let n=new aW.oD(this.getScene(),this.props.sceneGraphSelection),a=[];for(let e of this.renderedVisibleRowProps)"object"===e.rowType?a.push(this.renderObjectRow(e,n)):"layer-expansion"===e.rowType?a.push(this.renderLayerExpansionRow(e)):a.push(this.renderSectionHeader(e));!this.props.readonly&&this.state.dropTarget&&a.push(...this.renderDropTarget(this.state.dropTarget));let l=this.stickyHeaderGuid||!this.state.needsScrollLine?"objects_panel--scrollContainer--h6khG":"objects_panel--scrollContainerWithBorder--SR2sm objects_panel--scrollContainer--h6khG";return r.createElement(T.f,{enableOverscroll:!0,recordingKey:y.Mx(this.props,"scrollContainer"),className:p()(l,{"objects_panel--hasPending--0IO3j":this.props.hasPending}),width:this.props.width,onScroll:this.onScroll,initialScrollTop:this.props.initialScrollTop,onMouseDown:this.onScrollContainerMouseDown,onContextMenu:this.onContextMenu,ref:this.scrollContainerRef},r.createElement(S.Y,null,r.createElement("div",{className:"objects_panel--rowContainer--03VQD",style:{height:this.totalHeight},onMouseDown:this.rowContainerMouseDown,onTouchStart:this.touchAdapter.onTouchStart,onMouseLeave:this.containerMouseLeave,"data-testid":"objects-panel"},a)))}}function aj(e){let t=(0,s.OY)(),n=(0,L.s5)((0,et.EB)().showImmutableFrameSublayers),a=(0,L.s5)(R.KEP.uiState().renderResourceUse),l=(0,L.s5)(R.KEP.uiState().showMemoryUsage),i=(0,L.s5)(R.KEP.uiState().hoveredComponentPropDef),o=(0,L.s5)(R.KEP.uiState().showInFileMemoryPercentage),c=(0,L.s5)(R.KEP.canvasViewState().temporarilyHoveredNodes),u=(0,x.q)(e=>{var t;return{sceneGraphSelection:e.mirror.sceneGraphSelection,objectsPanelRowRebuildCounter:e.mirror.objectsPanelRowRebuildCounter,hoveredNode:e.mirror.appModel.hoveredNode,temporarilyExpandedInstanceLayers:e.mirror.appModel.temporarilyExpandedInstanceLayers,renderResourceUse:a,showMemoryUsage:l,showInFileMemoryPercentage:o,editModeType:e.mirror.appModel.activeCanvasEditModeType,userId:null==(t=e.user)?void 0:t.id}});return r.createElement(a$,{...u,...e,hoveredPropDef:i,showImmutableFrameSublayers:n,temporarilyHoveredNodes:c,dispatch:t})}function aQ(e,t,n){if(n(e),t)for(let t of e.uiOrderedChildren)aQ(es.TSSceneGraph.instance.get(t),!0,n)}function aZ(e,t,n){if(!e)return;let a=!1;aQ(e,n,e=>{a=a||e.locked!==t,e.locked=t}),a&&z.qM.reportAnyPropertyChange(["locked"])}function aJ(e,t,n){if(!e)return;let a=!1;aQ(e,n,e=>{a=a||e.visible!==t,e.visible=t}),a&&z.qM.reportAnyPropertyChange(["visible"])}a$.displayName="ObjectsPanelView";var a0=n(584872),a1=n(694752),a2=n(395168),a4=n(532128),a5=n(518256),a6=n(55608),a8=n(974836),a7=n(34560),a3=n(67612),a9=n(710544),re=n(840748),rt=n(191140),rn=n(131128);function ra(){let e=(0,s.OY)(),[t,n]=r.useState(!1),a=(0,s.w1)(e=>!!e.modalShown),l=(0,s.w1)(e=>e.versionHistory.compareId),i=R._Q1.getChunkChangeCount(),o=(0,ea.i)("chunk_change_navigator_navigate"),c=(0,en.k)(),u=r.useCallback(e=>{R.GqY.setSelectedNodeAndCanvas(e,!0),o((0,ei.Qn)({nodeId:e,...re.qg})),c(e)},[o,c]),d=r.useCallback(t=>{a||i<=1||("ArrowUp"===t.key||"ArrowLeft"===t.key||t.shiftKey&&"Tab"===t.key?u(R.i46.navigateToNextChange(-1)):"ArrowDown"===t.key||"ArrowRight"===t.key||"Tab"===t.key?u(R.i46.navigateToNextChange(1)):"Escape"===t.key&&(e((0,e_.eu)()),(0,m.we)("Version History Compare Stop",{fromVersionId:l})))},[e,a,l,i,u]);return r.useEffect(()=>{e(a9.C.dequeue({type:a3.K.SEE_WHATS_CHANGED}))},[e]),r.useEffect(()=>{t||0===i||(u(R.i46.navigateToFirstVisibleOrClosestChange()),n(!0))},[t,i,u]),r.useLayoutEffect(()=>{if(!(i<=1))return document.addEventListener("keydown",d),()=>{e(A.A.dequeue({matchType:"view_changes"})),document.removeEventListener("keydown",d)}},[e,i,d]),r.createElement(r.Fragment,null,r.createElement("div",{className:"chunk_change_navigator--chunkChangeCount--ZFnfP"},r.createElement(I.Tx,{id:"collaboration.feedback.change_count",changeCount:i})),r.createElement("div",{className:"chunk_change_navigator--chunkChangeNavigator--82303"},r.createElement(te.wP,{svg:rn.c,onClick:e=>{e.stopPropagation(),0!==i&&u(R.i46.navigateToNextChange(-1))},"data-tooltip-type":ey.wL.TEXT,"data-tooltip":(0,I.t)("collaboration.feedback.previous_change"),recordingKey:"change_stepper.previous",disabled:i<=1}),r.createElement(te.wP,{svg:rt.c,onClick:e=>{e.stopPropagation(),0!==i&&u(R.i46.navigateToNextChange(1))},"data-tooltip-type":ey.wL.TEXT,"data-tooltip":(0,I.t)("collaboration.feedback.next_change"),recordingKey:"change_stepper.next",disabled:i<=1})))}var rr=n(112840),rl=n(291724),rs=n(228328);function ri(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 7.5h9a1 1 0 0 1 1 1V10h-11V8.5a1 1 0 0 1 1-1Zm-2 3.5V8.5a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2h-9a2 2 0 0 1-2-2V11ZM9 16.5H7.5a1 1 0 0 1-1-1V11H9v5.5Zm1 0h6.5a1 1 0 0 0 1-1V11H10v5.5Z",clipRule:"evenodd"}))}var ro=n(135352),rc=n(224012);let ru=(0,h.C)((e,t,n,a)=>{(0,j.E3)("action_left_panel_scroll",{user:e},{assetsPanelVersion:3,tab:"assets",fileKey:t,fileTeamId:n,fileOrgId:a})},500);function rd(e){let{children:t,onScroll:n,...a}=e,l=(0,s.w1)(tE.c),i=(0,ty.AL)(),o=(0,s.w1)(e=>e.dropdownShown),c=(null==o?void 0:o.type)===a_.c,u=r.useCallback(()=>{c||(0,er.mo)()},[c]),d=r.useCallback((e,t)=>{null==n||n(e,t),l&&ru(l,null==i?void 0:i.key,(null==i?void 0:i.teamId)??void 0,(null==i?void 0:i.parentOrgId)??void 0)},[n,null==i?void 0:i.key,null==i?void 0:i.parentOrgId,null==i?void 0:i.teamId,l]);return r.createElement(T.f,{...a,className:"asset_panel_shared_components--scrollContainer--YbltE",onScroll:d},r.createElement(E.g9,{onMouseUp:u,recordingKey:"componentsListContainer"},t))}function rp({title:e}){return r.createElement("div",{className:"asset_panel_shared_components--sectionHeader--URtCn"},e)}function rm({height:e}){return r.createElement("div",{style:{height:e}})}var rg=n(491100),rh=n(713620);let r_="asset_panel--container--v0GR6",rf=(e,t,n,a)=>({path:[...e,Math.floor(t/n)+(a?1:0)],column:t%n});function rv({onBoth:e,onClick:t,onKeyDown:n}){return r.useCallback(a=>{null==e||e(a),0!==a.detail?null==t||t(a):null==n||n(a)},[e,t,n])}function ry({children:e}){let t=r.useRef(null),{clickBackButton:n,focusBackButton:a}=rI(),l=r.useCallback(e=>{if((0,rc.kt)(e.target)||e.keyCode!==eJ.as.BACKSPACE){if(e.altKey&&[eJ.as.KEY_1,eJ.as.KEY_2,eJ.as.KEY_3].includes(e.keyCode)&&J.CA.isWebContextReady())return(0,rh.Mz)(e,!0)}else n(),a()},[n,a]),s=r.useCallback(e=>{"left"===e&&n()},[n]);return(0,rc.im)(t,s),r.createElement("div",{onKeyDown:l,className:r_,ref:t},e)}let rE=()=>{let{setKeyboardNavigationElement:e,keyboardNavigationItem:t,isFocused:n}=(0,eb._G)({path:[ro._o.BREADCRUMB]}),a=r.useRef(!1),l=r.useCallback(()=>{t&&!n?t.focus():a.current=!0},[t,n]);return r.useEffect(()=>{t&&a.current&&!n&&(t.focus(),a.current=!1)},[t,n]),{setBackButtonKeyboardItem:e,focusBackButton:l,clickBackButton:r.useCallback(()=>{null==t||t.simulateClick()},[t])}},rw=()=>{let e=r.useRef(null);return{focusSearchBar:r.useCallback(()=>{var t;null==(t=e.current)||t.focus()},[]),inputRef:e}},rb=()=>{let[e,t]=r.useState(null),[n,a,l]=function(e){let[t,n]=r.useState(e);return[t,r.useCallback(()=>n(!0),[]),r.useCallback(()=>n(!1),[]),r.useCallback(()=>n(e=>!e),[])]}(!1);return r.useEffect(()=>{e&&n&&(e.focus({preventScroll:!0}),l())},[e,n,l]),[a,r.useCallback(e=>(e&&t(e),()=>{t(null)}),[])]},rS=()=>{let[e,t]=rb(),[n,a]=rb();return{focusFirstPage:e,focusFirstTile:n,trackFirstPage:t,trackFirstTile:a}};function rT({children:e,className:t}){return r.createElement(eb.O8,{className:t,dataTestId:"component-sidebar"},r.createElement(rN,null,e))}let rC=r.createContext(null);function rN({children:e}){let{setBackButtonKeyboardItem:t,focusBackButton:n,clickBackButton:a}=rE(),{focusFirstPage:l,focusFirstTile:s,trackFirstPage:i,trackFirstTile:o}=rS(),{focusSearchBar:c,inputRef:u}=rw(),d=r.useMemo(()=>({clickBackButton:a,focusBackButton:n,focusFirstPage:l,focusFirstTile:s,focusSearchBar:c,inputRef:u,trackFirstPage:i,trackFirstTile:o,setBackButtonKeyboardItem:t}),[a,n,l,s,c,u,i,o,t]);return r.createElement(rC.Provider,{value:d},r.createElement(ry,null,e))}function rI(){let e=r.useContext(rC);return r.useMemo(()=>e??{clickBackButton:()=>{},focusBackButton:()=>{},focusFirstPage:()=>{},focusFirstTile:()=>{},focusSearchBar:()=>{},inputRef:{current:null},trackFirstPage:()=>{},trackFirstTile:()=>{},setBackButtonKeyboardItem:()=>{}},[e])}var rA=n(425948),rk=n(234284),rP=n(368608),rM=n(110296),rx=n(647812),rO=n(948408),rR=n(477352),rL=n(763464),rD=n(550464),rF=n(961420);let rK="asset_panel_tile--fileName--Skyao ellipsis--ellipsis--Tjyfa",rG="asset_panel_tile--secondary--6CWeS";function rU({asset:e,fileName:t,sourceForTracking:n,thumbLayout:a,thumbHeight:l,thumbWidth:i,viewMode:o,sectionNameForTracking:c,sectionPosition:u,sectionDepth:d,hideInlineName:p,keyboardPosition:m,isFirstTile:g=!1}){let h=r.useContext(tl.y),_=(0,s.w1)(e=>e.modalShown),f=(0,ty.K0)(),{isViewingRecents:v}=(0,rF.o)(),y=(0,t9.y)(e,u,c),E=(0,rR.A)(e),w=(0,rx.q)({canSwap:!0,openFileKey:f??"",sourceForTracking:"Asset Panel",insertAsChildOfCanvas:!0}),b=r.useCallback(()=>{(null==_?void 0:_.type)!==nE.M||E||y()},[E,null==_?void 0:_.type,y]),S=r.useCallback(()=>{(null==_?void 0:_.type)!==nE.M&&(null==h||h.onOpenFlyout(e,u,c,d))},[null==_?void 0:_.type,h,e,u,c,d]),T=r.useMemo(()=>({...m,path:[ro._o.CONTENTS,...m.path]}),[m]),{setKeyboardNavigationElement:C,keyboardNavigationItem:N}=(0,eb._G)({...T,id:(0,tv.M)(e),onFocus:b}),{trackFirstTile:I}=rI();r.useEffect(()=>{if(g)return I(N)},[g,N,I]);let A=(0,rP.U)({colIndex:T.column,rowIndex:T.path[T.path.length-1],isList:!1,keyboardNavigationItem:N,onComponentInsertSwap:w,onOpenFlyout:S,item:e,sectionNameForTracking:c,sectionPosition:u,shouldRefocusAfterKeyboardInsert:v,sourceForTracking:nC.wt});return r.createElement("button",{onClick:S,className:"asset_panel_tile--focusableElementWrapper--YzHK7",ref:C,onKeyDown:A},r.createElement(rB,{asset:e,fileName:t,sourceForTracking:n,thumbLayout:a,thumbHeight:l,thumbWidth:i,viewMode:o,sectionNameForTracking:c,sectionPosition:u,sectionDepth:d,hideInlineName:p}))}function rB({asset:e,fileName:t,sourceForTracking:n,thumbHeight:a,thumbLayout:l,thumbWidth:i,sectionNameForTracking:o,sectionPosition:c,sectionDepth:u,hideInlineName:d}){var g;let h=(0,s.OY)(),_=(0,s.w1)(eO.qs),y=(0,s.w1)(ex.kD),E=(0,s.w1)(ex.qI),w=(0,v.m4)(ny.g),b=(null==(g=E.assetsPanelSearch.searchOptions)?void 0:g.type)===e4.Y.ALL,S=(0,t_.qO)(e.file_key),T=b&&S,C=r.useRef(null),N=(0,t2.G4)(e.name),I=(0,tj.Se)({text:N,textRef:C}),A=r.useRef(null),k=(0,tj.Se)({text:t??"",textRef:A}),P="grid",M=!!E.assetsPanelSearch.query,x=(0,rL.s)(e,c,o),O=(0,rR.A)(e),R=(0,tz.i)(O);r.useEffect(()=>{O&&!R&&h(rM.WS())},[O,h,R]);let L=e.isLocal&&(0,rk.MZ)()?(0,aG._i)(e.node_id,_).join("-"):e.node_id,D="Local components"===o||"Local private components"===o||e.isLocal,{handleClick:F,handleDoubleClick:K}=function(e,t){let n=(0,ty.AL)(),a=r.useRef(null),{searchSessionId:l}=(0,eA.Cy)(),s=r.useCallback(a=>{m.qE.trackDefinedEvent("assets_panel.component_clicked",{isDoubleClick:a,isLocalComponent:t,assetKey:(0,tv.M)(e),fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0,searchSessionId:l??void 0,assetsPanelVersion:3})},[e,t,null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,l]);return{handleClick:r.useCallback(()=>{a.current||(a.current=setTimeout(()=>{s(!1),a.current=null},500))},[s]),handleDoubleClick:r.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=null),s(!0)},[s])}}(e,D??!1),G=!d&&l!==nV.mS.SMALL,U=(0,f.Ub)().api_asset_search_with_scores,B=(0,t5.W)(e),V=r.useMemo(()=>({sourceForTracking:n,clickToInsert:!1,afterSuccessfulInsert:rO.Uj,sectionNameForTracking:o,sectionDepth:u}),[u,o,n]),H=D?r.createElement(rD.cl,{item:e,height:a,width:i,draggable:V,onContextMenu:x,shouldHideTooltip:!0,isFilePublished:y,recordingNodePath:L,isSearch:M,useBaseTile:!0,hideNameOverlay:G,numVariants:B,displayType:P,sectionPosition:c,shouldUseDescriptionTooltip:!0,showTooltipImmediately:!1,fileName:I||k?t:void 0,alwaysShowBorder:!0}):r.createElement(rD.ug,{item:e,showName:!0,height:a,width:i,draggable:V,onContextMenu:x,shouldHideTooltip:!0,recordingNodePath:L,isSearch:M,useBaseTile:!0,hideNameOverlay:G,numVariants:B,displayType:P,sectionPosition:c,shouldUseDescriptionTooltip:!0,showTooltipImmediately:!1,fileName:I||k?t:void 0,alwaysShowBorder:!0});return r.createElement("div",{className:"asset_panel_tile--wrapper--8uDli asset_panel_tile--_wrapperBase--ngLpF library_item_tile--_variantHover--xfLPt",onClick:F,onDoubleClick:K},r.createElement("div",{className:p()("asset_panel_tile--tileWrapper--7OwtG",{"asset_panel_tile--shownInFlyout--7Luo3":O,"asset_panel_tile--selectedFlyoutFocus--GGV8E":O&&w})},H),G&&r.createElement("div",{className:"asset_panel_tile--nameWrapper--6O-iS",style:{width:i-2}},r.createElement("span",{className:"asset_panel_tile--name--FG9hg ellipsis--ellipsis--Tjyfa",ref:C},N),r.createElement("div",{className:"asset_panel_tile--caret--x-Vya asset_panel_tile--_caretBase--IZ44d"},r.createElement(rA.W,{"aria-hidden":!0}))),G&&!!t&&r.createElement(td.g,{spacing:0,direction:"horizontal",height:"hug-contents"},r.createElement("div",{className:p()(rK,rG),ref:A,style:T?{maxWidth:i-tf.Ep-2}:{width:i-2}},t),T&&r.createElement(tf.gp,{fileKey:e.file_key,tooltipDelay:500,variant:"secondary",tooltipLocation:"below"})),U&&r.createElement(r.Fragment,null,r.createElement("div",{className:p()(rK,rG),style:T?{maxWidth:i-tf.Ep-2}:{width:i-2}},"AI: "+(e.ai_score??"N/A")),r.createElement("div",{className:p()(rK,rG),style:T?{maxWidth:i-tf.Ep-2}:{width:i-2}},"Lex: "+(e.lexical_score??"N/A"))))}function rV({width:e,children:t}){let n=function(e){let t=(0,s.OY)(),{query:n,searchSessionId:a}=(0,eA.Cy)(),l=(0,rc.uQ)(),i=(0,eb.KE)(),o=(0,eI.wD)(),c=(0,s.w1)(e=>e.universalInsertModal.showing),u=r.useCallback(()=>{c&&o()},[o,c]),d=r.useCallback((r,s,o,c)=>{u(),t((0,H.A5)({type:nT,data:{asset:r,searchSessionId:a??void 0,query:n??void 0,sectionPosition:s,sectionNameForTracking:o,assetTypeDropdownSelection:l,containerWidth:e,onGetKeyboardNavigationItemById:i,sectionDepth:c}}))},[u,t,a,n,l,e,i]);return r.useMemo(()=>({onOpenFlyout:d,assetTypeDropdownSelection:l,isUi3:!0,width:e}),[d,l,e])}(e);return r.createElement(tl.y.Provider,{value:n},t)}let rH="16px",rW="40px",rY=(0,g.qe)(nq.W_),rq=(0,g.qe)(nq.CQ),rX=(0,g.qe)(nq.CL),rz=(0,g.qe)("4px"),r$=(0,g.qe)("8px"),rj=(e,t,n,a)=>{let r=e+rY;return t&&(r+=rq),n&&(r+=rX),a&&(r+=2*(0,g.qe)(nq.SW)),r};function rQ(e,t,n,a,l,s,i){let o=[];for(let c=0;c<e.length;c+=t){let u=e.slice(c,c+t),d=[];u.forEach((e,o)=>{var u;if(e){let p=c+o;d.push(r.createElement(rU,{key:`${n}-${(0,tv.M)(e)}`,asset:e,fileName:null==(u=null==i?void 0:i.getFileName)?void 0:u.call(i,e),sectionDepth:null==i?void 0:i.depth,sectionNameForTracking:l,sectionPosition:c+o,keyboardPosition:rf(s,p,t,null==i?void 0:i.hasHeader),isFirstTile:(null==i?void 0:i.includesFirstTile)&&0===p,...a}))}}),o.push({element:r.createElement("div",{className:0===c?"asset_panel_virtualization--virtualRowFirst--mdR2j asset_panel_virtualization--virtualRow--TxsS-":"asset_panel_virtualization--virtualRow--TxsS-",role:"row"},d),key:`${n}:row-${c/t}`,keys:u.map(e=>(0,tv.M)(e)),height:rj(a.thumbHeight,!!(null==i?void 0:i.getFileName),0!==c,!!(0,f.Ub)().api_asset_search_with_scores)})}return o.length>0&&(o.unshift({element:r.createElement(rm,{height:rz}),key:`${n}:spacer-top`,height:rz}),o.push({element:r.createElement(rm,{height:r$}),key:`${n}:spacer-bottom`,height:r$})),o}function rZ({elements:e,hideScrollbar:t,initialScrollTop:n,onScroll:a,anchorScroll:l,role:s}){let i=r.useRef(null),o=(0,rg.CC)({count:e.length,getScrollElement:()=>i.current,estimateSize:t=>e[t].height,getItemKey:t=>e[t].key,paddingEnd:8,overscan:6,initialOffset:n}),c=function({scrollContainerRef:e,initialScrollTop:t,onScroll:n,enabled:a,virtualizer:l,getKeys:s}){var i,o;let[c,u]=r.useState(t??(null==(i=e.current)?void 0:i.scrollTop)),[d,p]=r.useState(null==(o=e.current)?void 0:o.scrollHeight),{width:m}=function(){let e=r.useContext(tl.y);return(null==e?void 0:e.isUi3)?e:{...e,width:0}}(),g=(0,tz.i)(m),h=r.useCallback((e,t)=>{if(!t)return{keys:[],offset:void 0};let n=e.getVirtualItems().find(e=>e.start>=t);return n?{keys:s(n),offset:n.start-t}:{keys:[],offset:void 0}},[s]),[_,f]=r.useState(()=>{var n;return h(l,t??(null==(n=e.current)?void 0:n.scrollTop))}),v=r.useCallback((e,t)=>{null==n||n(e,t),a&&(u(e),f(h(l,e)))},[a,h,n,l]);return r.useEffect(()=>{var t,n,r;let i=g&&m&&g!==m,o=(null==(t=e.current)?void 0:t.scrollHeight)&&d&&(null==(n=e.current)?void 0:n.scrollHeight)!==d;if(i&&p(null==(r=e.current)?void 0:r.scrollHeight),void 0!==c&&void 0!==_.offset&&a&&i&&o){let t=l.getVirtualItems().find(e=>s(e).some(e=>_.keys.includes(e)));if(t)l.scrollToOffset(t.start-_.offset);else{let t=c/d,n=e.current.scrollHeight*t;l.scrollToOffset(n)}}},[_.keys,_.offset,a,s,g,e,d,c,l,m]),v}({enabled:l,scrollContainerRef:i,initialScrollTop:n,onScroll:a,virtualizer:o,getKeys:r.useCallback(t=>{let n=e[t.index];return n?n.keys??[n.key]:[]},[e])});return r.createElement(rd,{scrollContainerRef:i,hideScrollbar:t,initialScrollTop:n,onScroll:c},r.createElement("div",{style:{height:`${o.getTotalSize()}px`,width:"100%",position:"relative"},role:s},o.getVirtualItems().map(t=>r.createElement("div",{key:t.key,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${t.start}px)`}},e[t.index].element))))}var rJ=n(139776);function r0(e,t=""){let n=new Map,a=[];(0,rJ.E1)(e,"name");let r=Object.create(null);for(let l of e){let e=(0,t2.QZ)(l.name),s="";for(let i=0;i<e.length;i++){let o=e[i],c=s,u=i<e.length-1;s+=o+(u?"/":"");let d=null;if(r[c]&&(d=r[c]),u){let a=r[s]??{name:o,key:`${t}${e.slice(0,i+1).join("/")}`,items:[],subtrees:new Map,type:nU.y6.NAME_GROUP};r[s]||(r[s]=a,d?d.subtrees.set(o,a):n.set(o,a))}u||(d?d.items.push({...l,name:e[e.length-1]}):a.push(l))}}return{sortedItems:a,sortedSubtrees:n}}function r1(e,t){var n;let a={},r=[],l={};for(let t of e)if(null==(n=t.containing_frame)?void 0:n.nodeId){let e=t.containing_frame.nodeId,n=t.containing_frame.name||e;a[n]=a[n]||[],a[n].push(t),l[n]=t.containing_frame}else r.push(t);let s=new Map,{sortedItems:i,sortedSubtrees:o}=r0(r);for(let[e,n]of(o.forEach((e,t)=>s.set(t,e)),Object.entries(l))){let r=`${t}-frame-${e}-${n.nodeId}`,{sortedItems:l,sortedSubtrees:i}=r0(a[e],`${r}-`);s.set(e,{name:n.name||"",items:l,subtrees:i,key:r,type:nU.y6.NAME_GROUP})}let c=[...s.keys()];(0,rJ.o$)(c,e=>{let t=l[e];return t?t.name:e});let u=new Map;for(let e of c){let t=s.get(e);t&&u.set(e,t)}return{sortedItems:i,sortedSubtrees:u}}function r2(e,t){let n=new Map,{itemsByPageId:a,pageNamesByPageId:r,itemsWithoutPage:l}=(0,nM.wJ)(e,e=>e),{itemsByPageId:s,pageNamesByPageId:i,itemsWithoutPage:o}=(0,nM.wJ)(t,e=>e),c={...r,...i};(0,nM.wt)(a,c,l),(0,nM.wt)(s,c,o,!0);let u=Object.keys(c);for(let e of((0,rJ.o$)(u,e=>c[e]),u)){let t=c[e],r=null,l=a[e];if(l&&l.length>0){let{sortedItems:e,sortedSubtrees:t}=r1(l,"components");r={name:(0,I.t)("design_systems.assets_panel.components"),items:e,subtrees:t,key:ro.av,type:nU.y6.COMPONENTS}}let i=null,o=s[e];if(o&&o.length>0){let{sortedItems:e,sortedSubtrees:t}=r1(o,"templates");i={name:(0,I.t)("design_systems.assets_panel.templates"),items:e,subtrees:t,key:ro.IB,type:nU.y6.TEMPLATES}}let u={name:t,id:e,previewAsset:function(e,t){let n=t?r5(t):[],a=e?r5(e):[];return n[0]||a[0]}(r,i),components:r,templates:i};n.set(e,u)}return n}function r4(e,t){let{allItems:n,publishedItems:a,privateItems:r,numPublished:l}=e;return l>0&&t&&r.length>0?a:n}function r5(e){let t=Array.from(e.items.values());for(let[n,a]of e.subtrees.entries())t.push(...r5(a));return t}function r6(e){return function(e,t){let n=[],a=!0;for(let r=0;r<t&&a;r++)for(let l of(a=!1,e))if(!(r>=l.length)&&(a=!0,n.push(l[r]),n.length>=t))return n;return n}(Array.from(e.values()).map(e=>[...e.templates?r5(e.templates):[],...e.components?r5(e.components):[]]),ro.U$)}var r8=n(623131);let r7=(0,v.KU)(()=>(0,r8.Zf)(0));function r3({libraryKey:e,pageId:t}={}){let[n,a]=(0,v.lZ)(r7("libraries")),[l,s]=(0,v.lZ)(r7(`pages-${e}`)),[i,o]=(0,v.lZ)(r7(`assets-${e}-${t}`));return{librariesScrollTop:n,pagesScrollTop:l,assetsScrollTop:i,handleScrollLibraries:r.useCallback(e=>{a(e)},[a]),handleScrollPages:r.useCallback(t=>{e&&s(t)},[s,e]),handleScrollAssets:r.useCallback(n=>{e&&t&&o(n)},[o,e,t])}}function r9({elementMinSize:e,spaceAvailable:t,gap:n}){return Math.floor((t+n)/(e+n))}function le({numElements:e,spaceAvailable:t,gap:n}){return Math.floor((t-(e-1)*n)/e)}function lt({width:e,widthToHeightRatio:t=1,maxHeight:n}){let a=Math.floor(e/t);return void 0===n?Math.max(0,a):Math.max(0,Math.min(n,a))}let ln=(0,g.qe)("16px"),la=2*(0,g.qe)("16px");function lr(){let{thumbHeight:e,thumbWidth:t,numColumns:n,templateHeight:a,templateWidth:l}=function({sidebarWidth:e}){let t=r.useMemo(()=>e-la,[e]),n=r.useMemo(()=>Math.max(Math.min(3,r9({elementMinSize:115,gap:ln,spaceAvailable:t})),2),[t]),a=r.useMemo(()=>le({numElements:n,gap:ln,spaceAvailable:t}),[n,t]),l=r.useMemo(()=>lt({width:a,maxHeight:115}),[a]),s=r.useMemo(()=>lt({width:t,widthToHeightRatio:1.5,maxHeight:164}),[t]);return r.useMemo(()=>({thumbWidth:a,thumbHeight:l,numColumns:n,templateHeight:s,templateWidth:t}),[a,l,n,s,t])}({sidebarWidth:(0,rr.U9)()}),s=r.useMemo(()=>({thumbHeight:e,thumbWidth:t,viewMode:nC.sz.Grid,thumbLayout:nV.mS.NORMAL,sourceForTracking:nC.wt}),[e,t]),i=r.useMemo(()=>({thumbHeight:a,thumbWidth:l,viewMode:nC.sz.Grid,thumbLayout:nV.mS.NORMAL,sourceForTracking:nC.wt}),[a,l]);return r.useMemo(()=>({componentTileProps:s,templateTileProps:i,numColumns:n}),[s,i,n])}let ll=(0,v.KU)(()=>(0,r8.Zf)({}));var ls=n(319435);let li="asset_panel_assets--assetIcon--viuAn",lo=(0,g.qe)("32px"),lc=(0,g.qe)(rW),lu=(e,t,n)=>{let{componentTileProps:a,templateTileProps:l,numColumns:s}=lr(),{componentSectionNameForTracking:i,templateSectionNameForTracking:o}=(0,rc.gv)(),c=r.useCallback(({subtree:e,elements:u,depth:d,path:p,parentHasItems:m,isTemplates:g,noHeader:h,sectionIndex:_,isFirstTree:f})=>{_.current++;let v=t(e.key)??(d<=2||!m),y=[g?ro.ox.TEMPLATES:ro.ox.COMPONENTS,_.current],E=!h&&(e.items.length>0||d<=1);if(E&&u.push({element:r.createElement(ld,{name:e.name,isExpanded:v,setExpanded:n,subtree:e,sectionName:g?o:i,indented:d>1,path:d>2&&p||void 0,depth:d,keyForIcon:e.key,keyboardIndices:y}),key:e.key,height:lo}),v||!E){let t=e.items.length>0;t&&u.push(...rQ(e.items,g?1:s,e.key,g?l:a,g?o:i,y,{depth:d,hasHeader:E,includesFirstTile:f}));let n=d>=2?p.concat(e.name):[],r=d<=1&&1===e.subtrees.size&&0===e.items.length;Array.from(e.subtrees.values()).forEach((a,l)=>{let s=r&&0===a.subtrees.size;c({subtree:a,elements:u,depth:d+1,path:n,parentHasItems:e.items.length>0,isTemplates:g,sectionIndex:_,noHeader:s,isFirstTree:f&&0===l&&!t})})}},[t,n,s,a,l,o,i]);return r.useMemo(()=>{if(!e)return[];let t=[];return e.templates&&c({subtree:e.templates,elements:t,depth:1,path:[],parentHasItems:!0,isTemplates:!0,sectionIndex:{current:-1},isFirstTree:!0}),e.components&&c({subtree:e.components,elements:t,depth:e.templates?1:0,path:[],parentHasItems:!0,isTemplates:!1,sectionIndex:{current:-1},noHeader:!e.templates,isFirstTree:!e.templates}),t},[c,e])};function ld({name:e,isExpanded:t,setExpanded:n,subtree:a,sectionName:l,indented:s,path:i,keyForIcon:c,keyboardIndices:u,depth:d}){let m=c===ro.av?r.createElement("div",{className:li},r.createElement(rs.m,null)):c===ro.IB?r.createElement("div",{className:li},r.createElement(ri,null)):null,g=p()("asset_panel_assets--folderHeader--Zojwn",{"asset_panel_assets--folderHeaderIndented--pyuxS":s,"asset_panel_assets--folderHeaderStrong--bqoBd":!!m}),h=p()("asset_panel_assets--folderIcon--uZvlR",{"asset_panel_assets--folderIconExpanded--0p-GB":t,"asset_panel_assets--folderIconLight--PD-tn":!m}),_=e.length>=25,f=null==i?void 0:i.join(" / "),v=f?`${f} / ${e}`:e,y=r.useMemo(()=>[ro._o.CONTENTS,...u,0],[u]),{setKeyboardNavigationElement:E}=(0,eb._G)({path:y}),w=r.useCallback(()=>{n(a,!t,l,d)},[d,t,l,n,a]);return r.createElement("button",{className:g,onClick:w,ref:E},r.createElement("div",{className:h},r.createElement(o.O,null)),m,r.createElement("h3",{className:"asset_panel_assets--folderText--0u7j7","data-tooltip":_?v:void 0,"data-tooltip-type":ey.wL.TEXT},i&&r.createElement("span",{className:"asset_panel_assets--folderPath--bcHgi ellipsis--ellipsis--Tjyfa"},f),i&&r.createElement("span",{className:"asset_panel_assets--folderFinalSlash--QyEDM"},"/"),r.createElement("span",{className:_?"asset_panel_assets--folderNameEllipsized--BIJ9m ellipsis--ellipsis--Tjyfa":"asset_panel_assets--folderName--morY-"},e)))}function lp({page:e,libraryKey:t}){let{assetsScrollTop:n,handleScrollAssets:a}=r3({libraryKey:t,pageId:e.id}),l=(0,ty.AL)(),[s,i]=function(e,t){let[n,a]=(0,v.lZ)(ll(`${e}-${t}`));return[r.useCallback(e=>n[e],[n]),r.useCallback((e,t)=>{a(n=>({...n,[e]:t}))},[a])]}(t,e.id),o=lu(e,s,r.useCallback((e,n,a,r)=>{m.qE.trackDefinedEvent("assets_panel.toggle_header_expansion",{isExpanded:n,numChildComponents:e.items.length,numChildFolders:e.subtrees.size,sectionName:a,fileKey:null==l?void 0:l.key,fileTeamId:(null==l?void 0:l.teamId)??void 0,fileOrgId:(null==l?void 0:l.parentOrgId)??void 0,assetsPanelVersion:3,type:e.type,libraryKey:t,depth:r}),i(e.key,n)},[t,null==l?void 0:l.key,null==l?void 0:l.parentOrgId,null==l?void 0:l.teamId,i]));return r.createElement(rZ,{elements:o,initialScrollTop:n,onScroll:a,anchorScroll:!0})}function lm({page:e,libraryKey:t}){let{assetsScrollTop:n,handleScrollAssets:a}=r3({libraryKey:t,pageId:e.id}),{componentTileProps:l,templateTileProps:s,numColumns:i}=lr(),{componentSectionNameForTracking:o,templateSectionNameForTracking:c}=(0,rc.gv)(),u=r.useMemo(()=>{let t=[];return e.templates&&(t.push({element:r.createElement(rp,{title:(0,I.t)("design_systems.assets_panel.templates")}),key:"templates:header",height:lc}),t.push(...rQ(r5(e.templates),1,"templates",s,c,[ro.ox.TEMPLATES],{includesFirstTile:!0}))),e.components&&(e.templates&&t.push({element:r.createElement(rp,{title:(0,I.t)("design_systems.assets_panel.components")}),key:"components:header",height:lc}),t.push(...rQ(r5(e.components),i,"components",l,o,[ro.ox.COMPONENTS],{includesFirstTile:!e.templates}))),t},[e.templates,e.components,i,l,s,c,o]);return r.createElement(rZ,{elements:u,initialScrollTop:n,onScroll:a,anchorScroll:!0,role:"grid"})}function lg({page:e,width:t,libraryKey:n}){let[a]=(0,ls.Id)();return n&&e?r.createElement(r.Fragment,null,a===ls.SK.FOLDER?r.createElement(lp,{page:e,libraryKey:n}):r.createElement(lm,{page:e,libraryKey:n})):r.createElement("div",{style:{width:t}})}var lh=n(204792),l_=n(765064),lf=n(494220),lv=n(725380),ly=n(911192);let lE="asset-panel-library-context-menu",lw=y.Mx("assetsLibrary","contextMenu"),lb=lh.g.Dropdown,lS=lh.g.Option,lT=r.memo(({dropdownShown:e,usePortal:t})=>{if(!e||e.type!==lE)return null;let{data:n}=e;if(!n)return null;let{libraryHref:a,position:s,isLocalLibrary:i,onGoToLibrary:o,onPublish:c,onUnsubscribe:u}=n;if(!s)return null;let d=r.createElement(lb,{style:l_.sx.add({top:`${s.top}px`,right:`${s.right}px`,bottom:`${s.bottom}px`,left:`${s.left}px`}).add(l_.sx.fixed).$},i?r.createElement(lS,{onClick:c,recordingKey:y.Mx(lw,"publishLibrary")},r.createElement(I.Tx,{id:"design_systems.assets_panel.publish_library"})):r.createElement(r.Fragment,null,r.createElement(lS,{onClick:u,recordingKey:y.Mx(lw,"unsubscribe")},r.createElement(I.Tx,{id:"design_systems.assets_panel.remove_library_from_file"})),r.createElement(lS,{href:a,target:"_blank",recordingKey:y.Mx(lw,"goToLibrary"),onClick:o},r.createElement(I.Tx,{id:"design_systems.assets_panel.go_to_library"}))));return t?l.createPortal(d,document.body):d});function lC(){var e,t;let n=(0,s.w1)(e=>e.dropdownShown),a=(0,s.w1)(eM.Ap),l=(0,s.w1)(ex.qI),i=(null==n?void 0:n.type)===a_.c&&!!(null==(e=null==n?void 0:n.data)?void 0:e.component),o=(null==n?void 0:n.type)===lE&&!!(null==(t=null==n?void 0:n.data)?void 0:t.libraryHref),c=(0,ad._)(!0),u=r.useContext(tl.y);return r.createElement(r.Fragment,null,i&&r.createElement(a_.M,{selectedView:a,dropdownShown:n,defaultFileKeys:l.defaultPublished.fileKeys,onJumpToLocalComponent:c,onOpenFlyout:null==u?void 0:u.onOpenFlyout,usePortal:!0}),o&&r.createElement(lT,{dropdownShown:n,usePortal:!0}))}var lN=n(762056);let lI=(0,g.qe)("5px");function lA({height:e,width:t,keyPrefix:n,preview:a}){let l=r.useMemo(()=>a.name.split("/").pop(),[a.name]);return r.createElement("div",{className:"asset_panel_preview--previewThumbnailWrapper--g6zU5","data-tooltip-type":ey.wL.TEXT,"data-tooltip":l,style:{height:e-2*lI,width:t-2*lI}},r.createElement(nh.H,{key:`${n}:${(0,tv.M)(a)}`,className:"asset_panel_preview--previewThumbnail--kSmwd",item:a,shouldGenerateLocalThumbnail:!0,draggable:!1}))}function lk({library:e,logViewLibraryEvent:t=!1,onNavigateToLibrary:n,onNavigateToPage:a}){let l=lP();return{smartNavigateToLibrary:r.useCallback(()=>{l({library:e,logViewLibraryEvent:t,onNavigateToLibrary:n,onNavigateToPage:a})},[e,t,n,a,l])}}function lP(){let e=(0,ty.AL)(),{navigateToLibrary:t,navigateToPage:n}=(0,rF.o)();return r.useCallback(({library:a,logViewLibraryEvent:r=!1,onNavigateToLibrary:l,onNavigateToPage:s})=>{let i=null;(0,ro.iI)(a)&&1===a.pages.size&&(i=[...a.pages.keys()][0]);let o={libraryKey:a.fileKey,fileKey:null==e?void 0:e.key,fileTeamId:(null==e?void 0:e.teamId)??void 0,fileOrgId:(null==e?void 0:e.parentOrgId)??void 0,alsoViewPage:!!i};r&&m.qE.trackDefinedEvent("assets_panel.view_library",o),i?(n(i,a.fileKey),s&&s()):(t(a.fileKey),l&&l())},[t,n,null==e?void 0:e.key,null==e?void 0:e.parentOrgId,null==e?void 0:e.teamId])}let lM="asset_panel_library--libraryCard--l0q0e",lx="asset_panel_library--libraryPreviewSection--fRTrr";function lO({library:e,previewSize:t,altPreviewHeight:n,cardWidth:a,keyboardSection:l,rowIndex:i,columnIndex:o=0}){let{focusFirstPage:c,focusFirstTile:u}=rI(),{smartNavigateToLibrary:d}=lk({library:e,logViewLibraryEvent:!0}),{smartNavigateToLibrary:p}=lk({library:e,logViewLibraryEvent:!0,onNavigateToLibrary:c,onNavigateToPage:u}),{libraryKey:g}=(0,rF.o)(),h=(0,lN.S2)(lN.YP.ui3AssetsPanelRedesignAlt),_=!!g,{setKeyboardNavigationElement:f}=(0,eb._G)({path:[ro._o.CONTENTS,l,i],column:o,id:e.fileKey,disabled:_}),v=rv({onClick:d,onKeyDown:p}),w=function(e){let t=(0,ty.AL)(),n=(0,s.OY)(),a=e.fileKey===(null==t?void 0:t.key),l=(0,tL.Aj)(e.fileKey),i=function(e,t){let n=(0,s.OY)(),a=(0,ty.AL)();return r.useCallback(r=>{a&&(n(tm.We({libraryFileSubscription:{file_key:a.key,library_file_key:e,is_subscribed:r},userInitiated:!0,isCommunityLibrary:t})),r?(0,m.we)("Library File Enabled",{fileKey:a.key,fileTeamId:a.teamId,fileOrgId:a.parentOrgId,libraryFileKey:e,entryPoint:"assets_panel_library_context_menu"}):(0,m.we)("Library File Disabled",{fileKey:a.key,fileTeamId:a.teamId,fileOrgId:a.parentOrgId,libraryFileKey:e,entryPoint:"assets_panel_library_context_menu"}),n((0,eA.Co)()))},[n,t,e,a])}(e.fileKey,l),o=r.useCallback(()=>i(!1),[i]),c=function(){let e=(0,s.OY)(),t=(0,ty.AL)(),n=(0,s.w1)(e=>e.teams),a=(0,s.w1)(ex.QX),l=r.useCallback(()=>{e(H.A5({type:lf.Ih,data:{entrypoint:lv.yQ.ASSET_PANEL_LIBRARY_CONTEXT_MENU}}))},[e]),i=(null==t?void 0:t.teamId)&&n[t.teamId],o=r.useCallback(()=>{e(H.A5({type:ly.SI,data:{afterFileMove:l,team:i||null}}))},[e,l,i]);return r.useCallback(()=>{a?l():o()},[a,l,o])}(),u=r.useMemo(()=>(0,tK.ie)({file:{key:e.fileKey,editor_type:ed.aE.DESIGN}}),[e.fileKey]),d=r.useCallback(()=>{m.qE.trackDefinedEvent("assets_panel.go_to_library",{libraryKey:e.fileKey,fileKey:null==t?void 0:t.key,fileTeamId:(null==t?void 0:t.teamId)??void 0,fileOrgId:(null==t?void 0:t.parentOrgId)??void 0,entryPoint:"library_context_menu"})},[e.fileKey,t]),p=r.useCallback(()=>{m.qE.trackDefinedEvent("assets_panel.open_library_context_menu",{libraryKey:e.fileKey,fileKey:null==t?void 0:t.key,fileTeamId:(null==t?void 0:t.teamId)??void 0,fileOrgId:(null==t?void 0:t.parentOrgId)??void 0})},[e.fileKey,t]);return r.useCallback(e=>{e.preventDefault(),e.stopPropagation(),n((0,P.Qn)({type:lE,data:{libraryHref:u,isLocalLibrary:a,onGoToLibrary:d,onPublish:c,onUnsubscribe:o,position:{top:e.clientY,left:e.clientX}}})),p()},[u,c,o,a,n,d,p])}(e),b=(0,ty.AL)(),S=r.useMemo(()=>{let t=e.fileKey===(null==b?void 0:b.key)?"localLibrary":e.fileKey;return y.Mx("assetsLibrary",t)},[null==b?void 0:b.key,e.fileKey]);return r.createElement(E.iH,{className:"asset_panel_library--library--5bw5-","aria-label":e.name,onClick:v,onContextMenu:w,forwardedRef:f,tabIndex:_?-1:0,style:{width:a},recordingKey:S},h?r.createElement(lL,{library:e,previewHeight:n}):r.createElement(lR,{library:e,previewSize:t}))}function lR({library:e,previewSize:t}){return r.createElement("div",{className:lM},r.createElement("div",{className:lx},r.createElement(lD,{library:e,previewSize:t})),r.createElement(lF,{library:e}))}function lL({library:e,previewHeight:t}){let{thumbnailUrl:n}=e,[a,l]=r.useState(n),s=r.useMemo(()=>{if(a)return`url(${a})`},[a]),i=r.useCallback(()=>{l(n)},[n]);return r.createElement("div",{className:lM},r.createElement("div",{className:lx},r.createElement("div",{style:{backgroundImage:s,height:t},className:e.thumbnailShouldCover?"asset_panel_library--libraryPreviewAltCover--Prfkt asset_panel_library--libraryPreviewAlt--tcri0":"asset_panel_library--libraryPreviewAlt--tcri0"}),n&&r.createElement("img",{src:n,onLoad:i,className:"asset_panel_library--hiddenImage--a-LoJ",alt:""})),r.createElement(lF,{library:e}))}function lD({library:e,previewSize:t}){let n=r.useMemo(()=>{let t=[];return(0,ro.iI)(e)&&(t=e.previews),function(e,t){let n=e.slice(0,t),a=Array(t-n.length).fill(null);return[...n,...a]}(t,ro.U$)},[e]),a=e.fileKey;return r.createElement(r.Fragment,null,n.map((e,n)=>r.createElement(r.Fragment,{key:(null==e?void 0:e.id)??`${a}-${n}`},e?r.createElement(lA,{keyPrefix:a,preview:e,height:t,width:t}):r.createElement("div",{className:"asset_panel_library--blankThumbnail--G3-11",style:{height:t-2,width:t-2}}))))}function lF({library:e}){let t=(0,t_.qO)(e.fileKey),n=(0,f.Ub)().dse_editor_templates_v1,a=r.useMemo(()=>{let t=[];return e.numComponents>0&&t.push((0,I.t)("design_systems.assets_panel.num_components",{numComponents:e.numComponents})),n&&e.numTemplates>0&&t.push((0,I.t)("design_systems.assets_panel.num_templates",{numTemplates:e.numTemplates})),t.join(", ")},[e.numComponents,e.numTemplates,n]);return r.createElement("div",{className:"asset_panel_library--libraryFooter--jXcDc"},r.createElement("div",{className:"asset_panel_library--libraryInfo--MtD1x"},r.createElement("div",{className:"asset_panel_library--libraryIdentifier--QayXq"},r.createElement("h3",{className:"asset_panel_library--libraryName--aege1 ellipsis--ellipsis--Tjyfa"},e.name),t&&r.createElement(tf.gp,{fileKey:e.fileKey,tooltipDelay:500,tooltipLocation:"below"})),r.createElement("div",{className:"asset_panel_library--libraryStats--JL9eF ellipsis--ellipsis--Tjyfa"},a)))}let lK=(0,g.qe)(rH)+1,lG=(0,g.qe)(rH)+1,lU=(0,g.qe)("8px"),lB="asset_panel_libraries--row--nHi0j",lV=(0,g.qe)("56px"),lH=(0,g.qe)("17px"),lW=(0,g.qe)(rW);function lY({width:e,hideScrollbar:t,assetPanelItems:n}){let a=(0,ty.K0)(),l=(0,rl.aQ)(),s=n.localAssets,i=r.useMemo(()=>{if(!l.data)return[];let e=[];return l.data.forEach(t=>{let a=(0,rc.iM)(t);a&&e.push((0,rc.b7)(a,n))}),e},[l.data,n]),[o,c]=r.useMemo(()=>{let e=[],t=[];return i.forEach(n=>{(0,tL.Aj)(n.fileKey)?t.push(n):n.fileKey!==a&&e.push(n)}),[e,t]},[i,a]),u=(0,t_.Ci)(),d=r.useMemo(()=>(0,rc.wn)(o,u),[u,o]),p=r.useMemo(()=>(0,rc.wn)(c),[c]);return r.useMemo(()=>0===s.numComponents&&0===s.numTemplates&&(!l.data||0===l.data.length),[l.data,s.numComponents,s.numTemplates])?r.createElement("div",{style:{width:e}},r.createElement(eZ,null)):r.createElement(lq,{localAssets:s,subscribedLibraries:d,curatedLibraries:p,hideScrollbar:t,width:e})}function lq({localAssets:e,subscribedLibraries:t,curatedLibraries:n,width:a,hideScrollbar:l}){var i,o;let{librariesScrollTop:c,handleScrollLibraries:u}=r3(),{libraryKey:d,pageId:p}=(0,rF.o)(),g=(0,ty.AL)(),h=(null==(i=null==g?void 0:g.org)?void 0:i.name)??(null==(o=null==g?void 0:g.team)?void 0:o.name),{cardWidth:_,previewSize:f,previewListHeight:y}=function({sidebarWidth:e,minCardWidth:t=200,previewGap:n=lU,previewListPadding:a=lG}){let l=r.useMemo(()=>r9({elementMinSize:t,spaceAvailable:e,gap:0}),[t,e]),s=r.useMemo(()=>le({numElements:l,spaceAvailable:e,gap:0}),[l,e]),i=r.useMemo(()=>le({numElements:3,spaceAvailable:s-2*a,gap:n}),[s,n,a]),o=r.useMemo(()=>2*i+n,[i,n]);return r.useMemo(()=>({cardWidth:s,previewSize:i,previewListHeight:o,numColumns:l}),[s,i,o,l])}({sidebarWidth:a}),{cardWidth:E,previewHeight:w,numColumns:b}=function({sidebarWidth:e,minCardWidth:t=200,previewPadding:n=lK,widthToHeightRatio:a=1.66667}){let l=r.useMemo(()=>r9({elementMinSize:t,spaceAvailable:e,gap:0}),[t,e]),s=r.useMemo(()=>le({numElements:l,spaceAvailable:e,gap:0}),[l,e]),i=r.useMemo(()=>s-2*n,[s,n]),o=r.useMemo(()=>lt({width:i,widthToHeightRatio:a}),[i,a]);return r.useMemo(()=>({cardWidth:s,previewWidth:i,previewHeight:o,numColumns:l}),[s,i,o,l])}({sidebarWidth:a}),S=(0,lN.S2)(lN.YP.ui3AssetsPanelRedesignAlt),T=lV+(S?w:y)+2,C=t.length>0,N=e.previews.length>0,A=n.length>0,k=A&&(C||N),P=C&&A,M=r.useMemo(()=>{let a=[],l=[];N&&l.push(e),l.push(...t),P&&a.push({element:r.createElement(rp,{title:h?(0,I.t)("design_systems.assets_panel.org_libraries",{orgOrTeamName:h}):(0,I.t)("design_systems.assets_panel.libraries")}),key:"organized_libraries_header",height:lW});for(let e=0;e<l.length;e+=b){let t=l.slice(e,e+b);a.push({element:r.createElement("div",{className:lB},t.map((t,n)=>r.createElement(lO,{key:t.fileKey,library:t,previewSize:f,keyboardSection:ro.IZ.LOCAL_AND_SUBSCRIBED,rowIndex:e,columnIndex:n,cardWidth:S?E:_,altPreviewHeight:w}))),key:t.map(e=>e.fileKey).join("-"),keys:t.map(e=>e.fileKey),height:T})}k&&a.push({element:r.createElement("div",{className:"asset_panel_libraries--divider--uvWKN"}),key:"divider",height:lH}),n.length>0&&a.push({element:r.createElement(rp,{title:(0,I.t)("design_systems.assets_panel.curated_libraries")}),key:"curated_libraries_header",height:lW});for(let e=0;e<n.length;e+=b){let t=n.slice(e,e+b);a.push({element:r.createElement("div",{className:lB},t.map((t,n)=>r.createElement(lO,{key:t.fileKey,library:t,previewSize:f,keyboardSection:ro.IZ.PRESETS,rowIndex:e,columnIndex:n,cardWidth:S?E:_,altPreviewHeight:w}))),key:t.map(e=>e.fileKey).join("-"),keys:t.map(e=>e.fileKey),height:T})}return a},[S,b,E,w,f,N,P,t,k,n,T,e,_,h]);return!function(e,t,n){let a=(0,s.w1)(e=>e.openFile),[l,i]=(0,v.lZ)(aA.im),o=t.length+n.length;e.previews.length>0&&(o+=1),r.useEffect(()=>{if(!l){i(!0);let e=aA.oY.stop();e&&(0,m.we)(aA.S_,{elapsedMs:e,fileKey:null==a?void 0:a.key,teamId:null==a?void 0:a.teamId,orgId:null==a?void 0:a.parentOrgId,isUi3RedesignedAssetPanel:!0,numLibraries:o,numComponents:0,numComponentsShown:0,numSectionsShown:o},{forwardToDatadog:!0})}},[l,i,o,a])}(e,t,n),r.createElement(rZ,{elements:M,hideScrollbar:l,initialScrollTop:c,onScroll:u,anchorScroll:!d&&!p})}function lX({page:e,index:t}){let n=(0,ty.AL)(),{previewAsset:a}=e,{navigateToPage:l,libraryKey:s,pageId:i}=(0,rF.o)(),o=r.useCallback(()=>{m.qE.trackDefinedEvent("assets_panel.view_page",{pageId:e.id,libraryKey:s,fileKey:null==n?void 0:n.key,fileTeamId:(null==n?void 0:n.teamId)??void 0,fileOrgId:(null==n?void 0:n.parentOrgId)??void 0}),l(e.id)},[s,l,null==n?void 0:n.key,null==n?void 0:n.parentOrgId,null==n?void 0:n.teamId,e.id]),c=e.id,{keyboardNavigationItem:u,setKeyboardNavigationElement:d}=(0,eb._G)({path:[ro._o.CONTENTS,t],id:e.id,disabled:!!i}),{focusFirstTile:p,trackFirstPage:g}=rI();r.useEffect(()=>{if(0===t)return g(u)},[t,u,g]);let h=rv({onBoth:o,onKeyDown:p});return r.createElement("div",{className:"asset_panel_page--pageContainer--jvmsO"},r.createElement(E.iH,{"aria-label":e.name,className:"asset_panel_page--pageButton--z0o0y",onClick:h,forwardedRef:d,tabIndex:i?-1:0,recordingKey:`assetsPage.${e.id}`},r.createElement("div",{className:"asset_panel_page--pagePreview--uygPo"},a?r.createElement(lA,{keyPrefix:c,preview:a,height:48,width:48}):r.createElement("div",{className:"asset_panel_page--blankThumbnail--NNedW"})),r.createElement("div",{className:"asset_panel_page--pageName--iKT-8 ellipsis--ellipsis--Tjyfa"},e.name),r.createElement("div",{className:"asset_panel_page--pageNextIcon--SstEW"},r.createElement(rA.W,null))))}let lz=(0,g.qe)("56px");function l$({library:e,width:t,hideScrollbar:n}){let a=(0,nx.u)(),{pagesScrollTop:l,handleScrollPages:s}=r3({libraryKey:null==e?void 0:e.fileKey}),i=r.useMemo(()=>e?Array.from(e.pages):[],[e]),o=r.useMemo(()=>i.map(([e,t],n)=>({element:r.createElement(lX,{page:t,index:n}),height:lz,key:e})),[i]);return a?r.createElement("div",{className:"asset_panel_pages--loadingContainer--fyofJ",style:{width:t}},r.createElement(eS.M7,null)):0===i.length?r.createElement("div",{style:{width:t}}):r.createElement(rZ,{elements:o,hideScrollbar:n,initialScrollTop:l,onScroll:s})}let lj="asset_panel_recents--resultsWrapper--k79Vy";function lQ({allLibrariesUnsorted:e}){let{productComponents:t,templates:n}=(0,nN._m)(tN.Sy.Design),a=(0,f.Ub)().dse_editor_templates_v1,l=r.useCallback(t=>{let n=e.get(t);return(null==n?void 0:n.name)||""},[e]),{componentTileProps:s,templateTileProps:i,numColumns:o}=lr(),{componentSectionNameForTracking:c,templateSectionNameForTracking:u}=(0,rc.gv)(),d=t.length>0,p=n.length>0;return r.createElement(rd,null,a&&p&&r.createElement(r.Fragment,null,r.createElement(rp,{title:(0,I.t)("design_systems.assets_panel.templates")}),r.createElement("div",{className:lj},n.map((e,t)=>r.createElement(rU,{key:`assetPanelRecents:template:${(0,tv.M)(e)}`,asset:e,fileName:l(e.file_key),sectionNameForTracking:u,sectionPosition:t,keyboardPosition:rf([ro.ox.TEMPLATES],t,1),...i})))),a&&p&&d&&r.createElement("div",{className:"asset_panel_recents--buffer--URYGQ"}),d&&r.createElement(r.Fragment,null,a&&r.createElement(rp,{title:(0,I.t)("design_systems.assets_panel.components")}),r.createElement("div",{className:lj},t.map((e,t)=>r.createElement(rU,{key:`assetPanelRecents:component:${(0,tv.M)(e)}`,asset:e,fileName:l(e.file_key),sectionNameForTracking:c,sectionPosition:t,keyboardPosition:rf([ro.ox.COMPONENTS],t,o),...s})))),r.createElement("div",{className:"asset_panel_recents--bottomPadding--9BTkl"}))}var lZ=n(846004);let lJ=function({isLoading:e,children:t}){return e?r.createElement("div",{className:"maybe_loading--loadingContainer--Wfq03"},r.createElement(eS.M7,null)):r.createElement(r.Fragment,null,t)},l0="asset_panel_search_results--empty--72Hqc",l1="asset_panel_search_results--showMoreText--mEcU5 asset_panel_search_results--showMore--yo9-j",l2="asset_panel_search_results--showMoreLink--3-Ww3 asset_panel_search_results--showMore--yo9-j blue_link--blueLink--9rlnd",l4=(0,g.qe)(rW),l5=(0,g.qe)("40px"),l6=({moreResults:e,query:t,assetType:n,showMoreDefault:a})=>{let[l,s]=r.useState(!1),i=a||l,o=r.useCallback(()=>s(!0),[]);r.useEffect(()=>{s(!1)},[t]);let c=(0,lZ.wp)(),u=r.useCallback(e=>{var t;return(null==(t=c[e.file_key])?void 0:t.name)??""},[c]),{componentTileProps:d,templateTileProps:p,numColumns:m}=lr(),{componentSectionNameForTracking:g,templateSectionNameForTracking:h}=(0,rc.gv)({moreSearchResults:!0}),_=r.useMemo(()=>{let t="templates"===n;return rQ(e,t?1:m,`${n}:moreResults`,t?p:d,t?h:g,[t?ro.ox.TEMPLATES:ro.ox.COMPONENTS,1],{getFileName:u})},[e,m,n,d,p,h,g,u]);return r.useMemo(()=>{if(0===e.length)return[];let t=[];return t.push({element:r.createElement("div",{className:l1},i&&r.createElement(I.Tx,{id:"design_systems.assets_panel.showing_results_from_all_libraries"}),!i&&r.createElement("button",{className:l2,onClick:o},r.createElement(I.Tx,{id:"design_systems.assets_panel.more_results_in_all_libraries",results:e.length}))),key:`${n}:showMoreText`,height:l5}),i&&t.push(..._),t},[n,e.length,i,o,_])};function l8({components:e,moreComponents:t,templates:n,moreTemplates:a,query:l,getLibraryNameFromKey:s}){let i=(0,f.Ub)().dse_editor_templates_v1,o=e.length+t.length>0,c=n.length+a.length>0,u=r.useCallback(e=>s(e.file_key),[s]),{componentTileProps:d,templateTileProps:p,numColumns:m}=lr(),{componentSectionNameForTracking:g,templateSectionNameForTracking:h}=(0,rc.gv)(),_=r.useMemo(()=>rQ(e,m,"components",d,g,[ro.ox.COMPONENTS,0],{getFileName:u}),[e,m,d,g,u]),v=r.useMemo(()=>rQ(n,1,"templates",p,h,[ro.ox.TEMPLATES,0],{getFileName:u}),[n,p,h,u]),y=l6({moreResults:t,query:l,assetType:"components",showMoreDefault:0===e.length&&t.length>0}),E=l6({moreResults:a,query:l,assetType:"templates"}),w=r.useMemo(()=>{let e=[];return(0,f.Ub)().asset_search_feedback_text&&e.push({element:r.createElement("div",{className:l1},r.createElement("a",{href:"https://figma.enterprise.slack.com/archives/C06NDBA1LQM",className:l2},"#feedback-asset-search")),key:"assetSearchFeedback",height:24}),i&&c&&(e.push({element:r.createElement(rp,{title:(0,I.t)("design_systems.assets_panel.templates")}),key:"templatesHeader",height:l4}),e.push(...v),e.push(...E)),o&&(c&&e.push({element:r.createElement(rp,{title:(0,I.t)("design_systems.assets_panel.components")}),key:"componentsHeader",height:l4}),e.push(..._),e.push(...y)),e},[i,c,o,v,E,_,y]);return r.createElement(rZ,{elements:w,anchorScroll:!0})}function l7({allLibrariesUnsorted:e}){let{query:t,normalizedSearchResults:n,unsubscribedSearchResults:a,isLoading:l}=(0,s.w1)(e1.aI),i=(0,nx.u)(),o=r.useCallback(t=>{let n=e.get(t);return(null==n?void 0:n.name)||""},[e]),[c,u]=r.useMemo(()=>(0,e1.Ks)(n),[n]),[d,p]=r.useMemo(()=>(0,e1.Ks)(a),[a]),m=u.length+p.length>0,g=c.length+d.length>0;return t?r.createElement(lJ,{isLoading:l||i},m||g?r.createElement(l8,{components:u,moreComponents:p,templates:c,moreTemplates:d,query:t,getLibraryNameFromKey:o}):r.createElement("div",{className:l0},`No results for '${t}'`)):r.createElement("div",{className:l0},"Search keywords and filter results by specific libraries, templates, and components.")}let l3=["asset_panel_contents--firstPanel--sSKvo asset_panel_contents--container--fyZlD","asset_panel_contents--secondPanel--5rH9o asset_panel_contents--container--fyZlD","asset_panel_contents--thirdPanel--TkWPo asset_panel_contents--container--fyZlD"],l9=(e,t)=>e?t?2:1:0;function se({assetPanelItems:e,width:t}){let{libraryKey:n,pageId:a,isSearching:l,isViewingRecents:s,navigateToTop:i}=(0,rF.o)(),o="loading"===(0,rl.aQ)().status;ag(r.useCallback(()=>{let t=0,n=0,a=0;for(let[r,l]of e.allLibrariesUnsorted){if(r===e.localAssets.fileKey){l.numComponents>=0&&(t+=1);continue}t+=1,n+=l.numComponents,a+=Math.min(l.numComponents,20)}return{numLibraries:t,numComponents:n,numComponentsWithLimit:a}},[e]));let c=r.useMemo(()=>n?e.allLibrariesUnsorted.get(n):void 0,[e,n]),u=r.useMemo(()=>c&&a?c.pages.get(a):void 0,[c,a]);r.useEffect(()=>{l||s||!a||c||i()},[l,s,c,i,a]);let d=l9(!!n,!!u);return r.createElement(lJ,{isLoading:o},r.createElement(lC,null),l?r.createElement(l7,{allLibrariesUnsorted:e.allLibrariesUnsorted}):s?r.createElement(lQ,{allLibrariesUnsorted:e.allLibrariesUnsorted}):r.createElement("div",{className:`${l3[d]}`},r.createElement(lY,{width:t,hideScrollbar:0!==d,assetPanelItems:e}),r.createElement(l$,{library:c,width:t,hideScrollbar:1!==d}),r.createElement(lg,{page:u,width:t,libraryKey:n})))}var st=n(194664);function sn(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.002 19.837A7.902 7.902 0 0 0 19.9 12a7.9 7.9 0 1 0-8.898 7.837ZM12 18.9a6.9 6.9 0 1 0 0-13.8 6.9 6.9 0 0 0 0 13.8ZM9.5 12a.5.5 0 1 0 0 1h5a.5.5 0 0 0 0-1h-5Zm.5 3.5a.5.5 0 0 1 .5-.5h3a.5.5 0 1 1 0 1h-3a.5.5 0 0 1-.5-.5ZM8.5 9a.5.5 0 1 0 0 1h7a.5.5 0 0 0 0-1h-7Z",clipRule:"evenodd"}))}var sa=((a=sa||{})[a.ALL=0]="ALL",a[a.LIBRARY=1]="LIBRARY",a[a.RECENTS=2]="RECENTS",a[a.FLAT=3]="FLAT",a[a.FOLDER=4]="FOLDER",a);function sr({assetPanelItems:e}){var t,n;let a=(0,ty.AL)(),l=(null==(t=null==a?void 0:a.org)?void 0:t.name)??(null==(n=null==a?void 0:a.team)?void 0:n.name),i=(0,nx.u)(),{productComponents:o,templates:c}=(0,nN._m)(tN.Sy.Design),u=r.useMemo(()=>o.length>0||c.length>0,[o,c]),{libraryKey:d,navigateToRecents:g,navigateToTop:h,isSearching:_,isViewingRecents:f}=(0,rF.o)(),[v,y]=(0,ls.Id)(),E=lP(),w=r.useCallback(e=>{m.qE.trackDefinedEvent("assets_panel.view_mode_changed",{viewMode:e,fileKey:null==a?void 0:a.key,fileTeamId:(null==a?void 0:a.teamId)??void 0,fileOrgId:(null==a?void 0:a.parentOrgId)??void 0}),y(e)},[null==a?void 0:a.key,null==a?void 0:a.parentOrgId,null==a?void 0:a.teamId,y]),b=r.useCallback((e,t,n)=>{m.qE.trackDefinedEvent("assets_panel.asset_type_changed",{assetType:t,isSearching:_,fileKey:t===e4.Y.FILE?n:void 0,openFileKey:null==a?void 0:a.key,fileTeamId:(null==a?void 0:a.teamId)??void 0,fileOrgId:(null==a?void 0:a.parentOrgId)??void 0,assetsPanelVersion:3}),e()},[_,null==a?void 0:a.key,null==a?void 0:a.parentOrgId,null==a?void 0:a.teamId]),S=r.useCallback(()=>{m.qE.trackDefinedEvent("assets_panel.asset_type_dropdown_opened",{fileKey:null==a?void 0:a.key,assetsPanelVersion:3})},[null==a?void 0:a.key]),{setKeyboardNavigationElement:T}=(0,eb._G)({path:[ro._o.HEADER],column:ro.s0.FILTER}),C=f?void 0:d,N=e.localAssets.fileKey,A=e.localAssets.numComponents>0||e.localAssets.numTemplates>0,k=e.libraries,P=r.useMemo(()=>Array.from(k),[k]),M=e.presets,x=r.useMemo(()=>Array.from(M),[M]),O=(0,s.OY)(),R=r.useMemo(()=>({format:t=>{var n;switch(t.type){case 0:return(0,I.t)("design_systems.assets_panel.dropdown_type_all_libraries");case 2:return(0,I.t)("design_systems.assets_panel.dropdown_type_recents");case 3:return(0,I.t)("design_systems.assets_panel.dropdown_type_flat");case 4:return(0,I.t)("design_systems.assets_panel.dropdown_type_folder");case 1:return(null==(n=e.allLibrariesUnsorted.get(t.key))?void 0:n.name)??""}},isEqual:(e,t)=>e.type===t.type&&e.key===t.key}),[e.allLibrariesUnsorted]),L=(0,s.w1)(e=>e.dropdownShown),{value:D,viewMode:F}=r.useMemo(()=>({value:f?{type:2}:C?{type:1,key:C}:{type:0},viewMode:[v===ls.SK.FOLDER?{type:4}:{type:3}]}),[v,f,C]),K=r.useCallback(t=>{if(1===t.type){let n=e.allLibrariesUnsorted.get(t.key);n&&b(()=>E({library:n}),...n.fileKey===(null==a?void 0:a.key)?[e4.Y.LOCAL,void 0]:[e4.Y.FILE,n.fileKey])}else 2===t.type?b(g,e4.Y.RECENT):0===t.type?b(h,e4.Y.ALL):4===t.type?w(ls.SK.FOLDER):3===t.type&&w(ls.SK.FLAT)},[e.allLibrariesUnsorted,g,h,b,null==a?void 0:a.key,w,E]),G=p()("asset_panel_filter--selectInput--a-QnG",{"asset_panel_filter--selectInputDisabled--HdxkQ":i});return r.createElement(nt.M1,{property:D,multipleSelections:F,onChange:K,dispatch:O,disabled:i,id:"asset-panel-filter",formatter:R,dropdownShown:L,icon:r.createElement(sn,null),openOnKeyPressed:[eJ.as.SPACE,eJ.as.ENTER],onSetKeyboardNavigationElement:T,dropdownWidth:260,className:"asset_panel_filter--select--SX2vC",chevronClassName:"asset_panel_filter--selectChevron--AHB8i",inputClassName:G,onShowDropdown:S,disableTyping:!0,ariaLabel:(0,I.t)("design_systems.assets_panel.filter"),openBelowTarget:!0},r.createElement(nt.cb,{value:{type:0}}),u&&!_&&r.createElement(nt.cb,{value:{type:2}}),A&&r.createElement(nt.cb,{value:{type:1,key:N}}),P.length>0&&[r.createElement(nt.Wy,{key:"divider"}),r.createElement(nt.cb,{isHeader:!0,formattedValue:l?(0,I.t)("design_systems.assets_panel.org_libraries",{orgOrTeamName:l}):(0,I.t)("design_systems.assets_panel.org_libraries"),key:"library-header"})],P.map(([e])=>r.createElement(nt.cb,{key:e,value:{type:1,key:e},rightSettingsIcon:(0,nY.yk)(e)&&r.createElement(tf.gp,{fileKey:e})})),x.length>0&&[r.createElement(nt.Wy,{key:"divider"}),r.createElement(nt.cb,{isHeader:!0,formattedValue:(0,I.t)("design_systems.assets_panel.curated_libraries"),key:"curated-header"})],x.map(([e])=>r.createElement(nt.cb,{key:e,value:{type:1,key:e},rightSettingsIcon:(0,nY.yk)(e)&&r.createElement(tf.gp,{fileKey:e})})),r.createElement(nt.Wy,null),r.createElement(nt.cb,{isHeader:!0,formattedValue:(0,I.t)("design_systems.assets_panel.dropdown_view_options")}),r.createElement(nt.cb,{value:{type:4}}),r.createElement(nt.cb,{value:{type:3}}))}var sl=n(590659),ss=n(838836);function si(){let e=(0,s.OY)(),{isSearching:t,startSearch:n,onBack:a,libraryKey:l}=(0,rF.o)(),{inputRef:i,focusSearchBar:o}=rI(),{query:c}=(0,s.w1)(e1.aI),u=(0,ty.K0)(),d=r.useCallback(()=>{t&&a()},[t,a]),p=r.useMemo(()=>l?l===u?{type:e4.Y.LOCAL}:{type:e4.Y.FILE,fileKey:l}:{type:e4.Y.ALL},[l,u]),m=r.useCallback(a=>{e(eT.YP({query:a,searchOptions:p})),""===a?d():t||n()},[e,t,d,p,n]),g=r.useRef(void 0);r.useEffect(()=>{t&&(c&&g.current!==l&&e(eT._Q({searchOptions:p})),g.current=l)},[e,t,l,c,p]);let h=r.useCallback(()=>{""===c&&d()},[d,c]),_=r.useCallback(()=>{m(""),o(),d()},[m,o,d]),f=(0,s.w1)(e=>e.mirror.appModel.activeCanvasEditModeType);return r.useEffect(()=>{let e=e=>{let t=e0.cp.chromeos?e.altKey&&e.shiftKey&&e.keyCode===eJ.as.KEY_2:e.altKey&&e.keyCode===eJ.as.KEY_2,n=e.shiftKey&&e.keyCode===eJ.as.I&&!(0,rc.kt)(e.target);(t||n)&&f!==R.a_v.TEXT&&(o(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[f,o]),r.createElement("div",{className:"asset_panel_search--container--u0qoH asset_panel_search--horizontalFlex---CG1k"},r.createElement(sl.u,null),r.createElement(e2.U$,{path:[ro._o.HEADER],column:ro.s0.SEARCH,isNewAssetsPanel:!0,query:c,onChange:m,onFocus:ss.Kw,onBlur:h,onClearSearch:_,forwardedRef:i,isVisible:!0,entryPointForTracking:"editor:assets_panel",autofocus:!0,recordingKey:"componentsLibrarySearch"}))}function so({assetPanelItems:e}){let t=(0,ty.AL)(),n=(0,s.w1)(e=>e.modalShown),a=(0,s.OY)(),l=(0,rl.aQ)(),{isSearching:i,isViewingRecents:o,libraryKey:c,pageId:u,onBack:d,navigateToTop:p}=(0,rF.o)(),g=r.useMemo(()=>{if((null==t?void 0:t.key)===c)return e.localAssets;if(!c||!l.data)return;let n=l.data.find(e=>e.fileKey===c);if(n)return(0,rc.iM)(n)??void 0},[l,c,null==t?void 0:t.key,e.localAssets]),h=r.useMemo(()=>{if((null==t?void 0:t.key)===c)return e.localAssets;if(!g)return;let n=(0,rc.b7)(g,e);return(0,ro.iI)(n)?n:void 0},[g,e,null==t?void 0:t.key,c]),_=r.useMemo(()=>u?null==h?void 0:h.pages.get(u):void 0,[h,u]),f=r.useMemo(()=>!!h&&!!_&&1===h.pages.size,[h,_]),v=(0,rc.Zr)(h,_),{setBackButtonKeyboardItem:y,focusSearchBar:E}=rI(),w=rv({onBoth:r.useCallback(()=>{m.qE.trackDefinedEvent("assets_panel.go_back",{sourceView:v,fileKey:null==t?void 0:t.key,fileTeamId:(null==t?void 0:t.teamId)??void 0,fileOrgId:(null==t?void 0:t.parentOrgId)??void 0,..."page"===v?{alsoBackOutOfLibrary:f}:{}}),f&&!o?(p(),E()):(u||E(),d()),(null==n?void 0:n.type)===nE.M&&a(H._g())},[v,null==t?void 0:t.key,null==t?void 0:t.teamId,null==t?void 0:t.parentOrgId,f,o,null==n?void 0:n.type,p,E,u,d,a]),onKeyDown:r.useCallback(()=>{o?c||E():(f||!u)&&E()},[E,f,o,c,u])}),[b,S]=r.useMemo(()=>{if(i)return[null,null];if(o)return[(0,I.t)("design_systems.assets_panel.recents"),null];if(c){if(!g)return[null,null];if(h&&u&&!f){let e=h.pages.get(u);if(e)return[h.name,e.name]}return[g.name,null]}return[null,null]},[i,o,c,u,f,h,g]);return r.createElement("div",{className:"asset_panel_header--assetPanelHeader--ZWb-Q"},r.createElement("div",{className:"asset_panel_header--searchAndFilterWrapper--P0Kbc asset_panel_header--horizontalFlex--k99PA"},r.createElement(si,null),r.createElement(sr,{assetPanelItems:e})),b&&r.createElement("div",{className:"asset_panel_header--breadcrumbWrapper--NC2Ps asset_panel_header--horizontalFlex--k99PA"},r.createElement("div",{className:"asset_panel_header--backNav--l-qao"},r.createElement(e6.w,{"aria-label":(0,I.t)("design_systems.assets_panel.back"),onClick:w,ref:y,recordingKey:"assetsPanelBack"},r.createElement(st.y,null))),r.createElement("div",{className:"asset_panel_header--breadcrumb--Sdne3 asset_panel_header--horizontalFlex--k99PA ellipsis--ellipsis--Tjyfa"},S?r.createElement(r.Fragment,null,r.createElement("div",{className:"asset_panel_header--breadcrumbSecondary--ephDg asset_panel_header--breadcrumbSecondaryBase--PU3JK ellipsis--ellipsis--Tjyfa"},b),r.createElement("div",{className:"asset_panel_header--breadcrumbSlash--gxZSD asset_panel_header--breadcrumbSecondaryBase--PU3JK"}," / "),r.createElement("div",{className:"asset_panel_header--pageBreadcrumb--0Am1Q ellipsis--ellipsis--Tjyfa"},S)):b)))}var sc=n(889292),su=n.n(sc);let sd=(0,r8.Zf)({});var sp=n(919364);function sm({width:e}){let t=function(){(0,au.I)();let{subscribedFileDataByKey:e,hubFilesById:t}=function(){let e=(0,s.w1)(e=>e.hubFiles),[t,n]=(0,v.lZ)(sd),a=(0,rl.u0)(),l=r.useMemo(()=>{let t=[];for(let n of a)n in e||t.push({fileKey:n});return t},[a,e]),i=(0,tM.Kb)(tU.qwB,l,{enabled:a.size>0}),o=r.useMemo(()=>i.some(e=>"loading"===e.result.status),[i]),c=r.useMemo(()=>{var e;let t={};for(let n of i){let a=null==(e=n.result.data)?void 0:e.file;a&&(t[a.key]={key:a.key,name:a.name,team_id:a.teamId,source_file_key:a.sourceFileKey,editor_type:a.editorType,thumbnail_guid:a.thumbnailGuid,thumbnail_url:a.thumbnailUrl??"",thumbnail_url_override:a.thumbnailUrlOverride})}return t},[i]);r.useEffect(()=>{o||n(c)},[o,n,c]);let u=r.useMemo(()=>o&&!su()(t)?t:c,[o,t,c]);return r.useMemo(()=>({subscribedFileDataByKey:u,hubFilesById:e}),[e,u])}(),n=(0,s.w1)(ty.w5),a=(0,s.w1)(ex.qI),l=(0,s.w1)(ex.iA),i=(0,s.w1)(ex.mO),o=(0,s.w1)(ex.Qj),c=(0,s.w1)(eR.G),u=(0,eN.a0)(),d=(0,t_.Ci)(),p=r.useMemo(()=>(null==n?void 0:n.teamId)?c[n.teamId]:null,[null==n?void 0:n.teamId,c]),m=r.useMemo(()=>!!p&&(0,ep.So)(p),[p]),g=r.useMemo(()=>(0,Z.CO)(null==n?void 0:n.project),[null==n?void 0:n.project]),h=r.useMemo(()=>(0,nC.Yx)(l,i),[l,i]),_=r.useMemo(()=>(0,nC._k)(o),[o]),y=r.useMemo(()=>(0,nC.yO)(a,n,e,g),[a,n,e,g]),E=(0,nP.oT)(),w=r.useMemo(()=>(0,nC.CO)(E,e,n,a,g),[E,e,n,a,g]),b=r.useMemo(()=>u()?(0,nC.gD)(a,n,t,g):null,[u,a,n,t,g]),{url:S,shouldCover:T}=function(){var e;let t=(0,s.w1)(ty.w5),n=null==(e=(0,tM.Qb)(tU.qwB,{fileKey:(null==t?void 0:t.key)??""},{enabled:!!(null==t?void 0:t.key)}).data)?void 0:e.file,a=(null==n?void 0:n.thumbnailUrlOverride)||(null==n?void 0:n.thumbnailUrl),l=!!(null==n?void 0:n.thumbnailGuid),[i,o]=r.useState({url:void 0,shouldCover:!1}),[c,u]=r.useState(void 0);return r.useEffect(()=>{let e=!!c,t=i.url===a;if(!e&&!t){if(i.url){let e=setTimeout(()=>{o({url:a,shouldCover:l}),u(void 0)},5e3);u(e)}else o({url:a,shouldCover:l})}},[i.url,c,a,l]),r.useEffect(()=>{if(c)return()=>clearTimeout(c)},[c]),i}();return r.useMemo(()=>(function({localComponentsInfo:e,localTemplatesInfo:t,localThumbnailUrl:n,localThumbnailShouldCover:a,subscribedComponentsInfo:r,subscribedTemplatesInfo:l,subscribedCommunityComponentsInfo:s,subscribedCommunityTemplatesInfo:i,canPublish:o,openFileKey:c,approvedLibraryKeysByResourceType:u}){let{fileKeyToSubscribedItems:d,subscribedFiles:p}=r,m=[...p],g={};if((0,f.Ub)().dse_editor_templates_v1&&l)for(let e of(g=l.fileKeyToSubscribedItems,l.subscribedFiles))m.find(t=>t.key===e.key)||m.push(e);let h=function(e,t,n,a){let r=new Map;for(let l of(0,rc.Og)(e,a)){let e=l.key,a=t[e]??[],s=n[e]??[],i=r2(a,s),o=r6(i),c={name:l.name,fileKey:e,pages:i,previews:o,numComponents:a.length,numTemplates:s.length,thumbnailUrl:l.thumbnail_url_override??l.thumbnail_url,thumbnailShouldCover:!!l.thumbnail_guid};r.set(e,c)}return r}(m,d,g,u),_=function(e,t){if(!e&&!t)return new Map;let{hubFileIdToSubscribedItems:n,subscribedHubFiles:a}=e??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},{hubFileIdToSubscribedItems:r,subscribedHubFiles:l}=t??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},s=[...a,...l],i=new Map;for(let e of(0,rc.wf)(s)){let t=e.id,a=n[t]??[],l=r[t]??[],s=e.versions[e.current_hub_file_version_id],o=r2(a,l),c=r6(o);if(a.length+l.length>0){let n={name:s.name,fileKey:t,pages:o,previews:c,numComponents:a.length,numTemplates:l.length,thumbnailUrl:e.thumbnail_url,thumbnailShouldCover:!0};i.set(t,n)}}return i}(s,(0,f.Ub)().dse_editor_templates_v1?i:void 0),v=function(e,t,n,a,r,l){let{privateItems:s,numPublished:i}=e,{privateItems:o,numPublished:c}=t??{privateItems:[],numPublished:0},u=i+c>0&&r&&s.length+o.length>0,d=r4(e,r),p=t?r4(t,r):[],m=r2(d,p),g=r6(m),h={name:(0,I.t)("design_systems.assets_panel.local_assets"),fileKey:l,pages:m,previews:g,numComponents:d.length,numTemplates:p.length,thumbnailUrl:n,thumbnailShouldCover:a};if(u){let e=null;if(s.length>0){let{sortedItems:t,sortedSubtrees:n}=r1(s,"p_components");e={name:(0,I.t)("design_systems.assets_panel.components"),items:t,subtrees:n,key:ro.av,type:nU.y6.COMPONENTS}}let t=null;if(o.length>0){let{sortedItems:e,sortedSubtrees:n}=r1(o,"p_templates");t={name:(0,I.t)("design_systems.assets_panel.templates"),items:e,subtrees:n,key:ro.IB,type:nU.y6.TEMPLATES}}let n={name:(0,I.t)("design_systems.assets_panel.hidden"),id:ro.WE,previewAsset:s[0]??o[0],components:e,templates:t};h.pages.set(ro.WE,n)}return h}(e,t,n,a,o,c),y=new Map([...h,..._]);return y.set(v.fileKey,v),{localAssets:v,libraries:h,presets:_,allLibrariesUnsorted:y}})({localComponentsInfo:h,localTemplatesInfo:_,localThumbnailUrl:S,localThumbnailShouldCover:T,subscribedComponentsInfo:y,subscribedTemplatesInfo:w,subscribedCommunityComponentsInfo:b??void 0,subscribedCommunityTemplatesInfo:void 0,canPublish:m,openFileKey:(null==n?void 0:n.key)??"",approvedLibraryKeysByResourceType:d}),[d,m,h,_,S,T,n,b,y,w])}(),n=function(e){var t,n;let a=(0,eu.C2)(),l=(0,ty.AL)(),i=(0,ek.sD)(),o=(0,sp.e)("has_dismissed_component_sidebar_library_upsell_banner"),c=(0,s.w1)(e=>e.isFreeUser),u=(0,s.w1)(eR.G),d=(null==l?void 0:l.teamId)?u[l.teamId]:null,p=(0,tM.Qb)(tU.Nx9,{teamId:(null==l?void 0:l.teamId)??""}),m=(null==l?void 0:l.canEdit)??!1,g=(null==(n=null==(t=null==p?void 0:p.data)?void 0:t.team)?void 0:n.canEdit)??!1,h=e.numComponents>0||e.numTemplates>0;return r.useMemo(()=>!o&&c&&(!d||!(0,ep.So)(d)&&g)&&m&&i&&h&&(0,eC.oH)(null==a?void 0:a.id),[o,c,d,g,m,i,h,a])}(t.localAssets);return r.createElement(rT,{className:r_},r.createElement(rV,{width:e},r.createElement(so,{assetPanelItems:t}),r.createElement(se,{assetPanelItems:t,width:e}),n&&r.createElement(ab,null)))}var sg=n(958895),sh=n(740468),s_=n(402980);function sf(e){var t;let n=(0,s.OY)(),a=(0,ty.AL)(),l=(0,s_.Ad)(),i=(0,eE.AR)(),o=(0,t1.uc)("pagesList").length,c=r.useRef();c.current=e.setUpsellHeightCallback;let u=r.useCallback(e=>{c.current&&c.current((null==e?void 0:e.getBoundingClientRect().height)||0)},[o]);if(o<=0)return null;let d=null==a?void 0:a.team;if(!(d&&(0,eP.canEditTeam)(d.id,l)&&!(0,ep.G8)(d))||i||(0,f.Ub)().ps_benchmark&&!(null==(t=null==a?void 0:a.project)?void 0:t.path))return null;let m=()=>{let e=aw.e.PAGE_TRACKER_UPSELL;n((0,H.A5)({type:av.o,data:{upsellSource:e,teamId:d.id,openCheckoutInNewTab:!0}}))},g=r.createElement(tQ.gf,{onClick:m,trusted:!0},r.createElement(I.Tx,{id:"fullscreen.pages_panel.see_plans_that_offer_more"})),h=r.createElement(tQ.gf,{onClick:m,trusted:!0},r.createElement(I.Tx,{id:"fullscreen.pages_panel.get_unlimited_pages_and_more"})),_=p()({"page_tracker_upsell--progressOneThird--uKXaV page_tracker_upsell--progressPartial--guOiP":o===ep.We-2,"page_tracker_upsell--progressTwoThirds--CbgfY page_tracker_upsell--progressPartial--guOiP":o===ep.We-1,"page_tracker_upsell--progressCompleteWarning--06IlO page_tracker_upsell--progressComplete--ilmev":o===ep.We,"page_tracker_upsell--progressCompleteDanger--lCunz page_tracker_upsell--progressComplete--ilmev":o>ep.We}),v={fileTeamId:d.id,numPages:o};return r.createElement(e8.kH,{name:"Page Tracker Upsell",properties:v},r.createElement("div",{className:"page_tracker_upsell--upsellContainer--ZEwXz",ref:u},r.createElement("div",{className:"page_tracker_upsell--upsellBody--yUAjd"},r.createElement("div",{className:"page_tracker_upsell--progressBar--fDCBY"},r.createElement("div",{className:_})),r.createElement("p",{className:"page_tracker_upsell--upsellText--Ng-u0"},(()=>{let e=ep.We-o;switch(e){case 2:return r.createElement(r.Fragment,null,r.createElement(I.Tx,{id:"fullscreen.pages_panel.n_free_pages_left",numPagesRemaining:e}),r.createElement("br",null),g);case 1:return r.createElement(r.Fragment,null,r.createElement(I.Tx,{id:"fullscreen.pages_panel.n_free_pages_left",numPagesRemaining:e}),r.createElement("br",null),h);case 0:return r.createElement(r.Fragment,null,r.createElement(I.Tx,{id:"fullscreen.pages_panel.all_n_free_pages_used",maxFreePages:ep.We}),r.createElement("br",null),h);default:return r.createElement(r.Fragment,null,r.createElement(I.Tx,{id:"fullscreen.pages_panel.all_free_pages_used"}),r.createElement("br",null),h)}})()))))}var sv=n(251128),sy=n(41352),sE=n(768764),sw=n(851540),sb=n(193288),sS=n(876180),sT=n(802956);let sC=(0,g.I)(nw.yaZ),sN=(0,g.qe)(nw.ic),sI=(0,g.qe)(nw.Kv5);function sA(e,t,n){t=t||"",ee.Pc.user("set-node-name",()=>er.gc(e,t)),J.CA.commit(),z.qM.reportEditActionIf(t!==n,"rename-node")}async function sk(e,t,n){let a=!!t.match(/^(-+|\u2013+|\u2014+|\*+|\s+)$/);a&&R.Abq.isIncrementalSession()&&await (0,el.K2)(e);let r=es.TSSceneGraph.instance.get(e),l=a&&(null==r?void 0:r.childrenGuids.length)===0;r&&t!==n&&ee.Pc.system("set-is-page-divider",()=>r.isPageDivider=l),(0,f.Ub)().ce_page_separators&&l?ee.Pc.user("set-page-name",()=>er.gc(e,"---")):ee.Pc.user("set-page-name",()=>er.gc(e,t)),J.CA.commit(),z.qM.reportEditActionIf(t!==n,"rename-page")}let sP=(0,h.C)(e=>{var t,n,a;e.user&&(0,j.E3)("action_left_panel_scroll",{user:e.user},{assetsPanelVersion:e.activeTab===R.W8r.ASSETS?2:void 0,tab:e.activeTab===R.W8r.ASSETS?"assets":"layers",fileKey:null==(t=e.openFile)?void 0:t.key,fileTeamId:(null==(n=e.openFile)?void 0:n.teamId)??void 0,fileOrgId:(null==(a=e.openFile)?void 0:a.parentOrgId)??void 0})},500);class sM extends y.UR{constructor(e){super(e),this.objectScrollTop=0,this.onObjectScroll=e=>{this.objectScrollTop=e},this.componentScrollTop=0,this.onComponentScroll=e=>{sP(this.props),this.componentScrollTop=e},this.stickyBelowRef=r.createRef(),this.scrollContainerRef=r.createRef(),this.scrollContainerInnerRef=r.createRef(),this.newPageRef=r.createRef(),this.shouldScrollToPage=null,this.handleOnline=()=>{this.setState({isOffline:!1})},this.handleOffline=()=>{this.setState({isOffline:!0})},this.updateStickyOffset=()=>{if(this.stickyBelowRef.current){let e=this.stickyBelowRef.current.getBoundingClientRect();this.setState({stickyOffset:e.bottom})}else{let e=!this.state.isPagesOpen||this.props.showTabs?(0,g.I)(nw.iIy):0;this.setState({stickyOffset:(0,b.cF)()+e-1})}},this.updateLocalStorageSettings=(e,t,n,a)=>{if(w.Ez){let r=JSON.parse(w.Ez.getItem("pages-panel")||"{}");r[e]={height:t,isOpen:n,devHandoffShowAllPages:a},w.Ez.setItem("pages-panel",JSON.stringify(r))}},this.getLocalStorageSettings=e=>{if(w.Ez)return JSON.parse(w.Ez.getItem("pages-panel")||"{}")[e]},this.setNeedsScrollLine=e=>{this.setState({needsScrollLine:e>0})},this.scrollViewToPage=e=>{if(!this.scrollContainerRef.current){this.shouldScrollToPage=e;return}let t=this.positionOfPageInList(e),n=t+sC,a=this.scrollContainerRef.current.getScrollTop(),r=a+this.scrollContainerRef.current.getTrackHeight();t<a?this.scrollContainerRef.current.scrollTo(t-sC/2):n>r&&this.scrollContainerRef.current.scrollTo(a+(n-r)+sC/2),this.shouldScrollToPage=null},this.onFullscreenStartRenamingPage=({nodeId:e})=>{this.startRenamingPage(e)},this.onContextClick=y.yw(this,"contextmenu",e=>{this.onContextMenu(this.props.currentPageGuid,e)}),this.onContextClickNothing=e=>{e.preventDefault(),e.stopPropagation()},this.onContextMenu=(e,t)=>{if(t.stopPropagation(),t.preventDefault(),this.props.fileInEditableState||this.props.isDevHandoff){let{clientX:n,clientY:a}=t;this.props.dispatch(P.Qn({type:Y.eS,data:{clientX:n,clientY:a,nodeId:e}}))}},this.forcePagesExpanded=()=>{this.showLayersPanel(),this.state.isPagesOpen||this.setState({isPagesOpen:!0}),(0,m.we)("pages_panel_open_toggle",{isPagesOpen:!0})},this.togglePagesExpanded=()=>{this.props.isDevHandoffOverview||((0,m.we)("pages_panel_open_toggle",{isPagesOpen:!this.state.isPagesOpen}),this.setState({isPagesOpen:!this.state.isPagesOpen}))},this.toggleLayersExpanded=()=>{(0,m.we)("objects_panel_open_toggle",{isLayersOpen:!this.state.isLayersOpen}),this.setState({isLayersOpen:!this.state.isLayersOpen})},this.showPublish=()=>{var e,t;this.props.openFile&&((0,m.we)("left_panel_set_tab",{value:"Components"}),null==(t=(e=this.props).markAssetPanelLoadingStart)||t.call(e),this.props.dispatch(V.wN({tab:R.W8r.ASSETS,persist:!0})))},this.showLayersPanel=()=>{(0,m.we)("left_panel_set_tab",{value:"Layers"}),this.props.dispatch(V.wN({tab:R.W8r.LAYERS,persist:!0}))},this.showSitesLayersPanel=()=>{(0,m.we)("left_panel_set_tab",{value:"LayersSites"}),this.props.dispatch(V.wN({tab:R.W8r.LAYERS_SITES}))},this.startRenamingPage=e=>{this.props.readonly||(this.forcePagesExpanded(),this.scrollViewToPage(e),this.setState({renamingPageGuid:e}))},this.stopRenamingPage=(e,t,n)=>{var a;if(!this.props.readonly){if(this.state.renamingPageGuid&&e&&(t=t||"",sk(this.state.renamingPageGuid,t,n||""),(null==(a=es.TSSceneGraph.instance.get(this.state.renamingPageGuid))?void 0:a.isPageDivider)&&this.props.currentPageGuid===this.state.renamingPageGuid)){let e=this.indexOfPageInList(this.props.currentPageGuid),t=e+1,n=this.props.pagesList[t];for(;n&&n.isDivider;)t+=1,n=this.props.pagesList[t];if(n)(0,$.a)(()=>sO(n.nodeId,this.props.currentPageGuid,this.props.versionHistory,this.props.dispatch,(0,ec.AF)(this.props.pagesList,n.nodeId)===R.Q1C.LOADED));else{let t=e-1,n=this.props.pagesList[t];for(;n&&n.isDivider;)t-=1,n=this.props.pagesList[t];n?(0,$.a)(()=>sO(n.nodeId,this.props.currentPageGuid,this.props.versionHistory,this.props.dispatch,(0,ec.AF)(this.props.pagesList,n.nodeId)===R.Q1C.LOADED)):this.onNewPage()}}this.setState({renamingPageGuid:null})}},this.onFullscreenStartRenamingNode=({nodeId:e})=>{this.startRenamingNode(e)},this.startRenamingNode=e=>{var t;if(this.props.readonly)return;let n=es.TSSceneGraph.instance.get(e);if((null==n?void 0:n.isResponsiveSet)&&(null==(t=n.parentNode)?void 0:t.defaultResponsiveSetId)===e){this.props.dispatch(A.A.enqueue({message:(0,I.t)("sites.panel.pages_panel.cannot_rename_default_responsive_set")}));return}this.props.activeTab!==R.W8r.LAYERS&&this.props.activeTab!==R.W8r.LAYERS_SITES&&this.showLayersPanel(),this.setState({renamingNodeGuid:e}),function(e){let t=_.x.getState().mirror.sceneGraph.get(e);t&&t.parentGuid&&er.ei(t.parentGuid)}(e)},this.stopRenamingNode=(e,t,n)=>{if(!this.props.readonly){if(this.state.renamingNodeGuid&&e){let e=t,a=es.TSSceneGraph.instance.get(this.state.renamingNodeGuid);(null==a?void 0:a.isResponsiveSet)&&(e=!e&&a.name,es.TSSceneGraph.instance,this.state.renamingNodeGuid,e=a.name),sA(this.state.renamingNodeGuid,e,n)}this.setState({renamingNodeGuid:null})}},this.onNewPage=()=>{var e,t;if(!this.props.fileInEditableState)return;let n=null==(e=this.props.openFile)?void 0:e.team,a=this.props.pagesList.length>=ep.We;(0,f.Ub)().ps_benchmark&&a&&(a=!(0,Z.Kc)(null==(t=this.props.openFile)?void 0:t.project)),n&&!(0,ep.G8)(n)&&a?this.props.dispatch(H.A5({type:a1.EP,data:{team:n,resource:ef.kJ.PAGE,action:ev.qW.CREATE_PAGE,editorType:ed.aE.DESIGN,currentPlan:Q.O.Plan.STARTER,upsellPlan:Q.O.Plan.PRO}})):(this.setState({currentPageGuidBeforeNewPage:this.props.currentPageGuid}),J.CA.triggerActionInUserEditScope("page-new"),J.CA.commit())},this.onNewPageClick=y.yw(this,"click",e=>{e.preventDefault(),e.stopPropagation(),this.onNewPage()}),this.onReorderPageMouseDown=(e,t)=>{(0,q.g)(t)||this.setState({reorderingPageGuid:e,dragOverPageGuid:null})},this.onReorderPageMouseMove=(e,t)=>{let n=t.target;if(null!=this.state.reorderingPageGuid){this.state.dragOverPageGuid!==e&&(this.cachedDragOverBounds=n.getBoundingClientRect());let a=t.clientY-this.cachedDragOverBounds.top;e!==this.state.reorderingPageGuid&&this.setState({dragOverPageGuid:e,draggingBefore:a<this.cachedDragOverBounds.height/2}),t.preventDefault(),t.stopPropagation()}},this.onReorderPageMouseUp=(e,t)=>{this.finishPageReorder(e)&&(t.preventDefault(),t.stopPropagation())},this.finishPageReorder=e=>{let t=!1;return ee.Pc.user("reorder-pages",()=>{null!=this.state.reorderingPageGuid&&null!=e&&(this.state.draggingBefore?R.GqY.pageMoveBeforePage(this.state.reorderingPageGuid,e):R.GqY.pageMoveAfterPage(this.state.reorderingPageGuid,e),t=!0)}),(null!=this.state.reorderingPageGuid||null!=e)&&this.setState({reorderingPageGuid:null,dragOverPageGuid:null}),t},this.clampValidHeight=e=>{var t;let n=(null==(t=this.scrollContainerInnerRef.current)?void 0:t.getBoundingClientRect().top)??175,a=1.5*sN+(this.props.isUI3?40+sI:0);return Math.max(1.5*sC,Math.min(e,this.state.cachedInnerHeight-n-a))},this.onMouseUp=e=>{e.stopPropagation(),this.state.dragOverPageGuid&&this.finishPageReorder(this.state.dragOverPageGuid)},this.onWindowSize=e=>{this.windowResizeHandler()},this.windowResizeHandler=(0,h.C)(()=>{this.setState({cachedInnerHeight:window.innerHeight})},45),this.showInsertBefore=e=>this.state.dragOverPageGuid===e&&this.state.draggingBefore,this.showInsertAfter=e=>this.state.dragOverPageGuid===e&&!this.state.draggingBefore,this.toggleViewMode=()=>{this.setState({viewMode:this.state.viewMode===nC.sz.Grid?nC.sz.List:nC.sz.Grid})},this.isManageMemoryModalShown=()=>this.props.modalShown&&this.props.modalShown.type===a0.a.type,this.toggleManageMemoryModal=()=>{var e;let{memoryUsedPercent:t}=(0,eo.ol)();(0,m.we)("toggle_manage_memory_modal",{memoryUsedPercent:t,totalLayers:null==(e=R.I7U)?void 0:e.getFileNodeCount(),pageContentPct:t-(0,eo.Sm)()}),this.isManageMemoryModalShown()?this.props.dispatch(H.oN()):this.props.dispatch(H.A5({type:a0.a,data:{sidePanelWidth:this.props.width,markModalClosed:()=>{}}}))},this.setUpsellHeight=e=>{this.setState({upsellHeight:e})},this.setShowAllPages=e=>{let t=this.computedHeight(),n=this.getPagesInfo(e),a=this.heightForPages(n.pages.length,!!n.showAllButton),r=e?Math.max(t,a):Math.min(t,a);this.setState({devHandoffShowAllPages:e,height:r})},this.getPagesInfo=e=>{let{pagesList:t}=this.props;if(!this.props.isDevHandoff||this.props.disableCollapsing)return{pages:t};let n=!1,a=t.filter(e=>{let t=R.i46.pageHasReadySection(e.nodeId);return t&&(n=!0),t||e.nodeId===this.props.currentPageGuid});return n&&a.length!==t.length?e?{pages:t,showAllButton:r.createElement(C.Y,{label:(0,I.t)("dev_handoff.pages.hide_other"),onClick:()=>this.setShowAllPages(!1)})}:{pages:a,showAllButton:r.createElement(C.Y,{label:(0,I.t)("dev_handoff.pages.show_all"),onClick:()=>this.setShowAllPages(!0)})}:{pages:t}},this.state={renamingPageGuid:null,renamingNodeGuid:null,renamingPageName:null,renamingNodeName:null,reorderingPageGuid:null,dragOverPageGuid:null,draggingBefore:!1,currentPageGuidBeforeNewPage:null,needsScrollLine:!1,height:null,cachedInnerHeight:window.innerHeight,isPagesOpen:this.props.isUI3&&!this.props.isDevHandoff,isLayersOpen:!this.props.isUI3,stickyOffset:0,pagesListInitialScrollTop:null,viewMode:nC.sz.Grid,upsellHeight:0,showManageMemoryModal:!1,devHandoffShowAllPages:!1,isOffline:!navigator.onLine,showSitesLintingModal:!1}}componentDidMount(){var e;super.componentDidMount(),J.CA.fromFullscreen.on("startRenamingPage",this.onFullscreenStartRenamingPage),J.CA.fromFullscreen.on("startRenamingNode",this.onFullscreenStartRenamingNode),document.addEventListener("mouseup",this.onMouseUp),window.addEventListener("resize",this.onWindowSize),window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline),null!=this.props.currentPageGuid&&this.scrollViewToPage(this.props.currentPageGuid),this.props.openFile&&this.initializePagesPanelSettings(this.props.openFile.key),R.KEP.uiState().isRecovery.getCopy()&&(this.toggleManageMemoryModal(),null==(e=R.KEP)||e.uiState().showMemoryUsage.set(!0)),this.updateStickyOffset();let t=window.FigmaMobile;t&&(t._select_page=async e=>{await es.TSSceneGraph.instance.setCurrentPageAsync(e)},t._rename_page=(e,t)=>{sk(e,t)},t._delete_page=e=>{J.CA.triggerActionInUserEditScope("page-delete",{args:{nodeId:e}}),J.CA.commit()},t._create_page=()=>{J.CA.triggerActionInUserEditScope("page-new"),J.CA.commit()})}componentWillUnmount(){super.componentWillUnmount(),window.removeEventListener("resize",this.onWindowSize),window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline),document.removeEventListener("mouseup",this.onMouseUp),J.CA.fromFullscreen.removeListener("startRenamingPage",this.onFullscreenStartRenamingPage),J.CA.fromFullscreen.removeListener("startRenamingNode",this.onFullscreenStartRenamingNode)}UNSAFE_componentWillUpdate(e,t){this.state.currentPageGuidBeforeNewPage&&this.state.currentPageGuidBeforeNewPage!==this.props.currentPageGuid&&this.startRenamingPage(this.props.currentPageGuid),t.renamingPageGuid&&this.state.renamingPageGuid!==t.renamingPageGuid&&!this.scrollContainerRef.current&&this.setState({pagesListInitialScrollTop:this.positionOfPageInList(t.renamingPageGuid)-sC/2}),this.shouldScrollToPage&&this.scrollContainerRef.current&&this.scrollViewToPage(this.shouldScrollToPage),this.updateStickyOffset()}componentDidUpdate(e,t){var n,a,r,l,s;super.componentDidUpdate(e,t),e.isUI3!==this.props.isUI3&&this.setState({isPagesOpen:this.props.pagesList.length>1||this.props.isUI3&&!this.props.isDevHandoff}),this.props.isDevHandoffOverview&&!this.state.isPagesOpen&&this.setState({isPagesOpen:!0}),e.currentPageGuid!==this.props.currentPageGuid&&this.scrollViewToPage(this.props.currentPageGuid),e&&this.state.isPagesOpen!==t.isPagesOpen&&this.updateStickyOffset(),this.state.currentPageGuidBeforeNewPage&&this.state.currentPageGuidBeforeNewPage!==this.props.currentPageGuid&&this.setState({currentPageGuidBeforeNewPage:null});let i=e.activeTab!==this.props.activeTab&&this.props.leftPanel.activeTab===R.W8r.ASSETS,o=t.viewMode!==this.state.viewMode;if(i||o){let e=(0,w.iy)(),t=this.props.showRedesignedAssetsPanel?ls.mU:(0,nC.zi)(this.state.viewMode);if(this.props.showRedesignedAssetsPanel&&e)try{let n=e.getItem(ls.Mz);if(n){let e=JSON.parse(n);(e===ls.SK.FOLDER||e===ls.SK.FLAT)&&(t=e)}}catch{}(0,m.we)("Component Sidebar Viewed",{viewMode:t,assetsPanelVersion:this.props.showRedesignedAssetsPanel?3:2,fileKey:null==(n=this.props.openFile)?void 0:n.key,fileTeamId:(null==(a=this.props.openFile)?void 0:a.teamId)??void 0,fileOrgId:(null==(r=this.props.openFile)?void 0:r.parentOrgId)??void 0})}if(this.scrollContainerRef.current&&this.setNeedsScrollLine(this.scrollContainerRef.current.getScrollTop()),this.props.openFile){(null==(l=e.openFile)?void 0:l.key)!==this.props.openFile.key&&this.initializePagesPanelSettings(this.props.openFile.key);let n=t.isPagesOpen!==this.state.isPagesOpen,a=this.state.height&&t.height!==this.state.height,r=this.state.devHandoffShowAllPages!==t.devHandoffShowAllPages;(null==(s=e.openFile)?void 0:s.key)===this.props.openFile.key&&(n||a||r)&&this.updateLocalStorageSettings(this.props.openFile.key,this.state.height,this.state.isPagesOpen,this.state.devHandoffShowAllPages)}null!==this.props.isPagesOpenOverride&&this.props.isPagesOpenOverride!==e.isPagesOpenOverride&&(v.qM.set(sv.Q,null),this.setState({isPagesOpen:this.props.isPagesOpenOverride})),null!==this.props.isLayersOpenOverride&&this.props.isLayersOpenOverride!==e.isLayersOpenOverride&&this.setState({isLayersOpen:this.props.isLayersOpenOverride})}heightForPages(e,t){let n=e*sC;n=Math.ceil(n/sC)*sC+this.state.upsellHeight+(this.props.isUI3?8:sC/2),(0,f.Ub)().dt_dev_mode_workflows&&(n+=sC),t&&(n+=sC);let a=this.props.isDevHandoff?144:40;return Math.min(n,Math.round(.25*(this.state.cachedInnerHeight-(0,b.cF)()-(0,g.I)(nw.iIy)-a)))}defaultHeight(){let{pages:e,showAllButton:t}=this.getPagesInfo(this.state.devHandoffShowAllPages);return this.heightForPages(e.length,!!t)}async initializePagesPanelSettings(e){let t=await this.getLocalStorageSettings(e);(0,l.flushSync)(()=>{t?this.setState({height:t.height,isPagesOpen:t.isOpen,devHandoffShowAllPages:t.devHandoffShowAllPages}):this.setState({isPagesOpen:this.props.pagesList.length>1||this.props.isUI3&&!this.props.isDevHandoff})})}indexOfPageInList(e){return this.props.pagesList.findIndex(t=>t.nodeId===e)}positionOfPageInList(e){let t=this.indexOfPageInList(e);return -1!==t?t*sC:0}renderHeaderRowUi2(){let e=this.props.fileInEditableState,t=!e,n=t?this.togglePagesExpanded:void 0,a=(0,eE.ie)(this.props.selectedView),l=t&&!a,s=t&&!a;return r.createElement("div",{className:this.state.needsScrollLine?sE.YN:sE.cP,onClick:n},r.createElement("div",{className:p()(sE.SA,{[sE.AL]:s}),onContextMenu:this.onContextClickNothing},s&&r.createElement("div",{className:this.props.isComparingChanges?sE.gd:void 0},r.createElement(a8.s,{onClick:e=>{e.stopPropagation(),M(this.props.dispatch,this.props.selectedView),this.showLayersPanel(),J.CA.triggerAction("canvas-search",{source:"toolbar"})}})),s?r.createElement("div",{className:sE.iy},r.createElement(I.Tx,{id:"fullscreen.pages_panel.pages"}),l&&r.createElement(N.A,{className:sE.KY,svg:sb.c})):r.createElement(r.Fragment,null,r.createElement(I.Tx,{id:"fullscreen.pages_panel.pages"}),l&&r.createElement(N.A,{className:sE.KY,svg:sb.c}))),e&&r.createElement("div",{ref:this.newPageRef},r.createElement(te.wP,{className:sE.Ws,recordingKey:y.Mx(this.props,"newPage"),"data-tooltip-type":ey.wL.TEXT,"data-tooltip":(0,I.t)("fullscreen.pages_panel.add_new_page"),"data-tooltip-show-above":!0,svg:sS.c,fallbackSvg:sT.c,onClick:this.onNewPageClick})))}renderHeaderRowUi3(){let e=this.props.fileInEditableState,t=!e,n=t?this.togglePagesExpanded:void 0,a=(0,eE.ie)(this.props.selectedView),l=t&&!a||a,s=(0,a4.yy)(this.props.selectedView);return r.createElement("div",{className:this.state.needsScrollLine?sE.YN:sE.cP,onClick:n},l?r.createElement("div",{className:sE.SA,onContextMenu:this.onContextClickNothing},r.createElement(E.g9,{className:p()(sE.Kp,{[sE.A5]:!this.props.showTabs||a,[sE.iy]:!this.props.showTabs||a}),onClick:this.props.activeTab===R.W8r.ASSETS?this.forcePagesExpanded:this.togglePagesExpanded,onContextMenu:this.onContextClick,recordingKey:y.Mx(this.props,"collapsedRow")},r.createElement("span",{className:p()(sE.W8,{[sE._D]:this.props.isDevHandoffOverview})},this.state.isPagesOpen?r.createElement(i.u,null):r.createElement(o.O,null)),r.createElement("span",{className:sE.wZ,"data-onboarding-key":"pages-panel-toggle"},this.state.isPagesOpen?r.createElement(I.Tx,{id:"fullscreen.pages_panel.pages"}):this.props.currentPageName||"")),r.createElement("div",{className:this.props.isComparingChanges?sE.gd:void 0},r.createElement(a8.s,{onClick:e=>{e.stopPropagation(),M(this.props.dispatch,this.props.selectedView),this.showLayersPanel(),J.CA.triggerAction("canvas-search",{source:"toolbar"})}}))):r.createElement(E.g9,{className:p()(sE.SA,{[sE.iw]:!this.state.isPagesOpen}),onContextMenu:this.onContextClickNothing,onClick:this.togglePagesExpanded,role:"button",tabIndex:0,recordingKey:y.Mx(this.props,"collapsedRow")},this.state.isPagesOpen?r.createElement(i.u,null):r.createElement(o.O,null),s?r.createElement(I.Tx,{id:"fullscreen.pages_panel.canvases"}):r.createElement(I.Tx,{id:"fullscreen.pages_panel.pages"})),e&&r.createElement("div",{ref:this.newPageRef},r.createElement(te.wP,{className:sE.Ws,recordingKey:y.Mx(this.props,"newPage"),"data-tooltip-type":ey.wL.TEXT,"data-tooltip":(0,I.t)("fullscreen.pages_panel.add_new_page"),"data-tooltip-show-above":!0,svg:sS.c,fallbackSvg:sT.c,onClick:this.onNewPageClick})))}renderAssetPanelUi2(){return r.createElement(aC,{onScroll:this.onComponentScroll,initialScrollTop:this.componentScrollTop,recordingKey:"componentsSidebar",viewMode:this.state.viewMode,toggleViewMode:this.toggleViewMode,containerSizingOptions:{containerWidth:this.props.width,maxSmallThumbSize:40,maxWideColWidth:300}})}renderAssetPanelUi3(){return r.createElement(sm,{width:this.props.width})}computedHeight(){return this.state.height?this.clampValidHeight(this.state.height):this.defaultHeight()}renderPagesList(e){if(!this.props.pagesList)return null;let{pages:t,showAllButton:n}=this.getPagesInfo(this.state.devHandoffShowAllPages),a=e=>!this.props.isDevHandoffOverview&&(this.props.requestedPageChange?this.props.requestedPageChange===e:e===this.props.currentPageGuid);return r.createElement(S.Y,null,r.createElement(sg.C,{size:this.computedHeight(),defaultSize:this.defaultHeight(),onResize:e=>{this.setState({height:e}),er.cX("")},side:"bottom",className:e?sE.Sy:sE.YH},r.createElement(T.f,{scrollBarAlways:!1,ref:this.scrollContainerRef,scrollContainerRef:this.scrollContainerInnerRef,className:sE.yR,width:this.props.width,onScroll:this.setNeedsScrollLine,initialScrollTop:this.state.pagesListInitialScrollTop||void 0},(0,f.Ub)().dt_dev_mode_workflows&&r.createElement(B,null),t.map((e,t)=>{let n=sE.OC;return this.showInsertBefore(e.nodeId)?n=0===t?sE.mY:sE.ek:this.showInsertAfter(e.nodeId)&&(n=t===this.props.pagesList.length-1?sE.ot:sE.YT),e.isDivider&&(n=p()(n,sE.Yn)),r.createElement("div",{key:e.nodeId},r.createElement("div",{className:n},r.createElement(sR,{width:this.props.width,nodeId:e.nodeId,nodeName:e.name,shouldShowGuids:this.props.shouldShowGuids,isRenaming:this.state.renamingPageGuid===e.nodeId,startRenaming:this.startRenamingPage,stopRenaming:this.stopRenamingPage,dispatch:this.props.dispatch,isSelected:a(e.nodeId),isDivider:e.isDivider,onMouseDownCallback:this.onReorderPageMouseDown,onMouseUpCallback:this.onReorderPageMouseUp,onMouseMoveCallback:this.onReorderPageMouseMove,reorderingPageGuid:this.state.reorderingPageGuid,onContextMenuCallback:this.onContextMenu,showMemoryUsage:this.props.showMemoryUsage,showInFileMemoryPercentage:this.props.showInFileMemoryPercentage,currentPageGuid:this.props.currentPageGuid,versionHistory:this.props.versionHistory,isComparingChanges:this.props.isComparingChanges,pageToNumChanges:this.props.pageToNumChanges,index:t,isOffline:this.state.isOffline,selectedView:this.props.selectedView,pagesList:this.props.pagesList})))}),n&&r.createElement("div",{className:sE.WA},n),r.createElement(sf,{setUpsellHeightCallback:this.setUpsellHeight}))))}renderObjectsPanelUi2(){var e;let t=this.props.isLoadingPage,n=(null==(e=this.props.openFile)?void 0:e.thumbnailGuid)||null;return r.createElement(sL,{hasPending:t,readonly:this.props.readonly,currentPage:this.props.currentPageGuid,onScroll:this.onObjectScroll,initialScrollTop:this.objectScrollTop,width:this.props.width,shouldShowGuids:this.props.shouldShowGuids,stickyOffset:this.state.stickyOffset,renamingGuid:this.state.renamingNodeGuid,startRenaming:this.startRenamingNode,stopRenaming:this.stopRenamingNode,thumbnailGuid:n,versionHistory:this.props.versionHistory})}renderObjectsPanelUi3(e={}){var t;let{hideHeader:n=!1,forceLayersOpen:a=!1}=e,l="whiteboard"===this.props.selectedView.editorType,s=this.props.isLoadingPage,c=(null==(t=this.props.openFile)?void 0:t.thumbnailGuid)||null;return l?null:r.createElement(r.Fragment,null,!n&&r.createElement("div",{className:sE.cP,onContextMenu:this.onContextClickNothing,onClick:this.toggleLayersExpanded,role:"button",tabIndex:0,ref:this.stickyBelowRef},r.createElement("div",{className:p()(sE.SA,{[sE.iw]:!this.state.isLayersOpen})},this.state.isLayersOpen?r.createElement(i.u,null):r.createElement(o.O,null),r.createElement(I.Tx,{id:"fullscreen.pages_panel.layers_tab"}))),(a||this.state.isLayersOpen)&&r.createElement(sL,{hasPending:s,readonly:this.props.readonly,currentPage:this.props.currentPageGuid,onScroll:this.onObjectScroll,initialScrollTop:this.objectScrollTop,width:this.props.width,shouldShowGuids:this.props.shouldShowGuids,stickyOffset:this.state.stickyOffset,renamingGuid:this.state.renamingNodeGuid,startRenaming:this.startRenamingNode,stopRenaming:this.stopRenamingNode,thumbnailGuid:c,versionHistory:this.props.versionHistory}))}renderTabsRow(e,t,n){let a=(0,f.Ub)().ds_updates_toast_deprecation;return this.props.showTabs||e?r.createElement("div",{className:sE.ai},this.props.showTabs&&r.createElement(r.Fragment,null,r.createElement(a8.s,{onClick:()=>{M(this.props.dispatch,this.props.selectedView),this.showLayersPanel(),J.CA.triggerAction("canvas-search",{source:"toolbar"})}}),r.createElement(E.ye,{className:t===R.W8r.LAYERS?sE.QP:sE.aC,onMouseDown:this.showLayersPanel,onContextMenu:this.onContextClickNothing,"data-label":(0,I.t)("fullscreen.pages_panel.layers_tab"),recordingKey:y.Mx(this.props,"tab","layers"),innerText:"Layers"},r.createElement(I.Tx,{id:"fullscreen.pages_panel.layers_tab"})),r.createElement(E.ye,{className:sE.Sx,onMouseDown:this.showPublish,onContextMenu:this.onContextClickNothing,recordingKey:y.Mx(this.props,"tab","assets"),innerText:"Assets","data-onboarding-key":a5.Y7},this.props.hasTeamLibraryUpdates&&!a&&r.createElement("span",{className:sE.ys}),r.createElement("div",{className:t===R.W8r.ASSETS?sE.QP:sE.aC,"data-label":(0,I.t)("fullscreen.pages_panel.assets_tab")},r.createElement("div",null,r.createElement(I.Tx,{id:"fullscreen.pages_panel.assets_tab"}))))),e&&r.createElement(r.Fragment,null,!this.props.showTabs&&r.createElement("div",{className:this.props.isComparingChanges||this.props.isDevHandoff?sE.gd:void 0},r.createElement(a8.s,{onClick:()=>{M(this.props.dispatch,this.props.selectedView),this.showLayersPanel(),J.CA.triggerAction("canvas-search",{source:"toolbar"})}})),r.createElement(E.g9,{className:p()(sE.Kp,{[sE.A5]:!this.props.showTabs,[sE.iy]:!this.props.showTabs,[sE._D]:this.props.isDevHandoffOverview}),onClick:t===R.W8r.ASSETS?this.forcePagesExpanded:this.togglePagesExpanded,onContextMenu:this.onContextClick,recordingKey:y.Mx(this.props,"collapsedRow")},r.createElement("span",{className:sE.wZ,"data-onboarding-key":"pages-panel-toggle"},this.props.currentPageName||""),r.createElement(N.A,{className:sE.KY,svg:n})))):null}renderTabsRowUi3(e){let t=(0,f.Ub)().ds_updates_toast_deprecation;if(!this.props.showTabs)return null;let n=(0,a4.yy)(this.props.selectedView);return r.createElement("div",{className:sE.ai},this.props.showTabs&&r.createElement("div",{className:sE.Qz},r.createElement(E.ye,{className:e===R.W8r.LAYERS?sE.QP:sE.aC,onMouseDown:this.showLayersPanel,onContextMenu:this.onContextClickNothing,"data-label":(0,I.t)("fullscreen.pages_panel.file_tab"),recordingKey:y.Mx(this.props,"tab","layers"),innerText:"File"},r.createElement(I.Tx,{id:"fullscreen.pages_panel.file_tab"})),n&&r.createElement(E.ye,{className:e===R.W8r.LAYERS_SITES?sE.QP:sE.aC,onMouseDown:this.showSitesLayersPanel,onContextMenu:this.onContextClickNothing,"data-label":(0,I.t)("fullscreen.pages_panel.layers_tab"),recordingKey:y.Mx(this.props,"tab","layers-sites"),innerText:"Layers"},r.createElement(I.Tx,{id:"fullscreen.pages_panel.layers_tab"})),r.createElement(E.ye,{className:sE.Sx,onMouseDown:this.showPublish,onContextMenu:this.onContextClickNothing,recordingKey:y.Mx(this.props,"tab","assets"),innerText:"Assets","data-onboarding-key":a5.Y7},this.props.hasTeamLibraryUpdates&&!t&&r.createElement("span",{className:sE.ys}),r.createElement("div",{className:e===R.W8r.ASSETS?sE.QP:sE.aC,"data-label":(0,I.t)("fullscreen.pages_panel.assets_tab")},r.createElement("div",null,r.createElement(I.Tx,{id:"fullscreen.pages_panel.assets_tab"}))))),r.createElement("div",{className:sE.KI},n&&r.createElement(te.wP,{"aria-label":(0,I.t)("sites.panel.see_warnings"),onClick:()=>{this.setState({showSitesLintingModal:!0})},"data-tooltip-type":ey.wL.TEXT,"data-tooltip":(0,I.t)("sites.panel.see_warnings")},r.createElement(c.K,null)),e===R.W8r.LAYERS&&r.createElement(a8.s,{onClick:()=>{M(this.props.dispatch,this.props.selectedView),J.CA.triggerAction("canvas-search",{source:"toolbar"})}}),!this.props.isFullHeightSidebar&&r.createElement(te.wP,{"aria-label":(0,I.t)("fullscreen_actions.hide-sidebar"),onClick:this.props.toggleIsCollapsed,"data-tooltip-type":ey.wL.TEXT,"data-tooltip":(0,I.t)("fullscreen_actions.hide-sidebar"),"data-tooltip-shortcut-key":"toggle-sidebar"},r.createElement(sh.w,null)),e===R.W8r.ASSETS&&this.props.showRedesignedAssetsPanel&&this.props.isFullHeightSidebar&&r.createElement(tt,{onSetKeyboardNavigationElement:()=>null,entrypoint:eB.Yj.ASSETS_PANEL_BUTTON})))}renderView(){let e=this.props.openFile?this.props.activeTab:R.W8r.LAYERS,t=this.props.openFile,n=this.props.isLoadingPage,a=this.props.isUI3,l=e===R.W8r.LAYERS||this.props.readonly,s=(0,eE.ie)(this.props.selectedView),i=this.state.isPagesOpen,o=l&&(!!a||i),c=this.state.isPagesOpen&&this.props.activeTab===R.W8r.LAYERS?sb.c:sw.c;return r.createElement("div",{className:p()(sE.kV,sE.Wm,{pagesPanel:!n})},this.props.isComparingChanges&&l&&r.createElement("div",{className:sE.ai},r.createElement(ra,null)),(!i||this.props.showTabs)&&(s?this.props.isFullHeightSidebar?void 0:r.createElement(sD,{togglePagesExpanded:this.togglePagesExpanded,onContextClick:this.onContextClick,currentPageName:this.props.currentPageName,currentPageGuid:this.props.currentPageGuid,pageTabChevron:c,isOverview:this.props.isDevHandoffOverview}):a?this.renderTabsRowUi3(e):this.renderTabsRow(this.props.showPages,e,c)),t&&r.createElement(a6.gC,{fileKey:t.key,toggleManageMemoryModal:this.toggleManageMemoryModal,closeManageMemoryModal:()=>{this.isManageMemoryModalShown()&&this.props.dispatch(H.oN())}}),o&&r.createElement("div",{ref:a?void 0:this.stickyBelowRef},r.createElement("div",{className:sE.ke},a?this.renderHeaderRowUi3():this.renderHeaderRowUi2(),i&&this.renderPagesList(n))),l&&!this.props.isDevHandoff&&!this.props.isDevHandoffOverview&&r.createElement("div",{className:sE.Ah},a?this.renderObjectsPanelUi3():this.renderObjectsPanelUi2()),e===R.W8r.ASSETS&&!this.props.readonly&&r.createElement(r.Fragment,null,this.props.showRedesignedAssetsPanel?this.renderAssetPanelUi3():this.renderAssetPanelUi2()))}renderSitesView(){let e=this.props.openFile?this.props.activeTab:R.W8r.LAYERS,t=this.props.openFile,n=this.props.isLoadingPage,a=this.props.isUI3,l=e===R.W8r.LAYERS||this.props.readonly,s=e===R.W8r.LAYERS_SITES,i=this.state.isPagesOpen;return r.createElement("div",{className:p()(sE.kV,sE.Wm,{pagesPanel:!n})},this.props.isComparingChanges&&l&&r.createElement("div",{className:sE.ai},r.createElement(ra,null)),(!i||this.props.showTabs)&&this.renderTabsRowUi3(e),t&&r.createElement(a6.gC,{fileKey:t.key,toggleManageMemoryModal:this.toggleManageMemoryModal,closeManageMemoryModal:()=>{this.isManageMemoryModalShown()&&this.props.dispatch(H.oN())}}),l&&r.createElement(a2.y0,{scrollContainerRef:this.scrollContainerRef,width:this.props.width,height:this.computedHeight(),onScroll:this.onObjectScroll,initialScrollTop:this.objectScrollTop,currentPageGuid:this.props.currentPageGuid,isComparingChanges:this.props.isComparingChanges,needsScrollLine:this.state.needsScrollLine,renamingNodeGuid:this.state.renamingNodeGuid,startRenamingNode:this.startRenamingNode,stopRenamingNode:this.stopRenamingNode}),this.state.showSitesLintingModal&&r.createElement(a2.u6,{onClose:()=>{this.setState({showSitesLintingModal:!1})}}),l&&r.createElement("div",{ref:a?void 0:this.stickyBelowRef},r.createElement("div",{className:sE.ke},this.renderHeaderRowUi3(),i&&this.renderPagesList(n))),s&&r.createElement("div",{className:sE.Ah},this.renderObjectsPanelUi3({hideHeader:!0,forceLayersOpen:!0})),e===R.W8r.ASSETS&&!this.props.readonly&&r.createElement(r.Fragment,null,this.props.showRedesignedAssetsPanel?this.renderAssetPanelUi3():this.renderAssetPanelUi2()))}render(){return(0,a4.yy)(this.props.selectedView)?this.renderSitesView():this.renderView()}}sM.displayName="PagesPanelView";let sx=0;async function sO(e,t,n,a,r,l,s,i,o){var c,u;if(o&&M(a,o),e===t)return;let d=performance.now();if(sx+=1,(0,m.we)("action_page_switch_initiated",{pageSwitchId:sx,oldPageNodeId:t,newPageNodeId:e,isIncremental:R.Abq.isIncrementalSession(),isAlreadyLoaded:r,currentNodeCount:null==(c=R.I7U)?void 0:c.getFileNodeCount()}),await es.TSSceneGraph.instance.setCurrentPageFromNodeAsync(e),t!==e){let r=(0,e_.CI)(n),{memoryUsedPercent:o}=(0,eo.ol)(),c=o>=75,p=c?new Set:n.fetchedPageIds||new Set;if(r&&(c&&a(W.sF({fetchedPageIds:p})),a(W.ue({isLoadingPage:!0})),a((0,e_.Km)({version:r,currentPageNodeId:e,fetchedPageIds:p,eventType:"INCREMENTALLY_LOAD_NEW_PAGE"}))),i&&l&&s){let t=R.i46.navigateToFirstVisibleOrClosestChangeForPage(e);R.GqY.setSelectedNodeAndCanvas(t,!0),l((0,ei.Qn)({nodeId:t,...re.qg})),s(t)}em.yu.trackFromFullscreen("action_page_switch",{oldPageNodeId:t,newPageNodeId:e,pageSwitchId:sx,duration:performance.now()-d,currentNodeCount:null==(u=R.I7U)?void 0:u.getFileNodeCount()})}}function sR(e){let t=(0,ea.i)("page_change_navigator_navigate"),n=(0,en.k)(),a=r.useCallback((a,r)=>{e.isDivider||(0,$.a)(()=>sO(a,e.currentPageGuid,e.versionHistory,e.dispatch,(0,ec.AF)(e.pagesList,a)===R.Q1C.LOADED,t,n,e.isComparingChanges,e.selectedView))},[n,t,e.isDivider,e.currentPageGuid,e.versionHistory,e.dispatch,e.isComparingChanges,e.selectedView,e.pagesList]);return r.createElement(sy.K,{width:e.width,recordingKey:y.Mx("pagesPanel","row",e.index)||"",nodeId:e.nodeId,nodeName:e.nodeName,shouldShowGuids:e.shouldShowGuids,isRenaming:e.isRenaming,startRenaming:e.startRenaming,stopRenaming:e.stopRenaming,dispatch:e.dispatch,isSelected:e.isSelected,onMouseDownCallback:e.onMouseDownCallback,onMouseUpCallback:e.onMouseUpCallback,onMouseMoveCallback:e.onMouseMoveCallback,reorderingPageGuid:e.reorderingPageGuid,onClickCallback:a,onContextMenuCallback:e.onContextMenuCallback,showMemoryUsage:e.showMemoryUsage,showInFileMemoryPercentage:e.showInFileMemoryPercentage,isComparingChanges:e.isComparingChanges,numChanges:e.isComparingChanges&&e.pageToNumChanges?e.pageToNumChanges.get(e.nodeId):void 0,versionHistory:e.versionHistory,isDivider:e.isDivider,isOffline:e.isOffline})}function sL(e){let t=(0,eE.AR)(),n=(0,k.U9)(),a=(0,en.k)(),l=(0,eg.oP)(),s=(0,eh.eM)((e,t)=>{let n=e.get(t);return n?{guid:n.guid,children:n.uiOrderedChildren,defaultResponsiveSetId:n.defaultResponsiveSetId}:null},e.currentPage);return t&&!n?null:r.createElement(aj,{sceneGraph:l,topNodeFields:s,hasPending:e.hasPending,readonly:e.readonly,currentPage:e.currentPage,onScroll:e.onScroll,initialScrollTop:e.initialScrollTop,width:e.width,shouldShowGuids:e.shouldShowGuids,recordingKey:"objectsPanel",stickyOffset:e.stickyOffset,renamingGuid:e.renamingGuid,startRenaming:e.startRenaming,stopRenaming:e.stopRenaming,thumbnailGuid:e.thumbnailGuid,versionHistory:e.versionHistory,showViewChangesNotification:a,customRowBuilder:e.customRowBuilder,hideRowActions:e.hideRowActions,onSelectionUpdated:e.onSelectionUpdated,onRowContextMenu:e.onRowContextMenu})}function sD(e){let t=(0,s.OY)(),n=(0,s.w1)(e=>e.selectedView);return r.createElement("div",{className:sE.ai},r.createElement(a7.G,{onFocus:()=>{M(t,n),J.CA.triggerAction("canvas-search",{source:"toolbar"})}}),!e.isOverview&&r.createElement(E.g9,{className:sE.Mz,onClick:e.togglePagesExpanded,onContextMenu:e.onContextClick},!(0,f.Ub)().dt_dev_mode_workflows&&r.createElement(sy.a,{pageGuid:e.currentPageGuid}),r.createElement("span",{className:sE.wZ},e.currentPageName||""),r.createElement(N.A,{className:sE.KY,svg:e.pageTabChevron})))}function sF(e){var t;let n=(0,L.s5)((0,et.EB)().showGuids),a=(0,s.OY)(),l=(0,L.s5)(R.KEP.uiState().showMemoryUsage),i=(0,L.s5)(R.KEP.uiState().showInFileMemoryPercentage),o=(0,L.s5)(null==(t=R.KEP)?void 0:t.currentPageState().requestedPageChange),c=(0,ec.ec)(),d=(0,v.m4)(sv.Q),p="ui3"===(0,u.qG)().version,m=(0,X.O)(),g=(0,tk.m)()&&p,{toggleLeftPanelCollapsed:h}=(0,rr.uA)(),_=(0,L.s5)(R.KEP.editorState().selectionEmpty),f=(0,s.w1)(e=>e.versionHistory),y=(0,eu.C2)(),E=(0,aA.ik)(),[w,b]=r.useState(!1);return r.useEffect(()=>{p&&!_&&b(!0)},[_,p]),r.createElement(sM,{showMemoryUsage:l,showInFileMemoryPercentage:i,versionHistory:f,user:y,...e,shouldShowGuids:n,dispatch:a,isLoadingPage:c.isLoading,isPagesOpenOverride:d,isLayersOpenOverride:w,isUI3:p,toggleIsCollapsed:h,requestedPageChange:o,isFullHeightSidebar:m,showRedesignedAssetsPanel:g,markAssetPanelLoadingStart:E})}},251128:(e,t,n)=>{n.d(t,{Q:()=>l});var a=n(623131),r=n(836780);let l=(0,a.Zf)(null);(0,r.If)(e=>e.mirror.appModel.currentPage)},41352:(e,t,n)=>{n.d(t,{K:()=>k,a:()=>P});var a=n(307824),r=n(602216),l=n(120304),s=n(125504),i=n.n(s),o=n(733960),c=n(843148),u=n(87975),d=n(594192),p=n(570464),m=n(537096),g=n(560072),h=n(317704),_=n(309812),f=n(762820),v=n(713620),y=n(481556),E=n(78168),w=n(84656),b=n(287540),S=n(142548),T=n(24588),C=n(768764),N=n(210424),I=n(400103),A=n(529204);function k({nodeId:e,nodeName:t,isRenaming:n,startRenaming:s,isSelected:w,stopRenaming:A,shouldShowGuids:k,width:M,onMouseDownCallback:x,onMouseUpCallback:O,onMouseMoveCallback:R,reorderingPageGuid:L,onClickCallback:D,onContextMenuCallback:F,showMemoryUsage:K,showInFileMemoryPercentage:G,isOffline:U,isComparingChanges:B,versionHistory:V,numChanges:H,isDivider:W,recordingKey:Y}){let q=(0,l.OY)(),X=(0,_.Ci)(),z=(0,b.eM)((e,t)=>{var n;return null==(n=e.get(t))?void 0:n.nodeMemoryUsage},e),$=(0,b.eM)((e,t)=>{var n;return null==(n=e.get(t))?void 0:n.rootMemoryUsage},e),j=(0,l.w1)(e=>e.mirror.appModel.pagesList),Q=a.useMemo(()=>(0,E.AF)(j,e)===f.Q1C.LOADED,[e,j]),Z=a.useMemo(()=>U&&!Q&&f.Abq.isIncrementalSession(),[U,Q]),[J,ee]=a.useState(""),et=(0,o.i)(n);a.useEffect(()=>{!et&&n&&ee(t)},[et,n,t]);let en=p.S4(Y,"contextmenu",t=>{t.preventDefault(),!Z&&F&&F(e,t)}),ea=a.useCallback(e=>{e&&et&&r.findDOMNode(e).select()},[et]),er=p.ic(Y,"change",e=>{Z||ee(e.currentTarget.value)}),el=a.useCallback((e,n)=>{if(!n)return A(e,n,t);A(e,n,t)},[t,A]),es=p.ag(Y,"keydown",e=>{if(e.keyCode===u.as.ESCAPE)el(!1);else if(e.keyCode===u.as.ENTER)el(!0,J);else{if(e.keyCode!==u.as.TAB)return(0,v.eI)(e,v.fh.NO),p.Cy;e.preventDefault(),el(!0,J)}}),ei=p.ye(Y,"blur",e=>{el(!0,J)}),eo=p.S4(Y,"dblclick",t=>{Z||s(e)}),ec=p.S4(Y,"click",t=>{if(!ey){if(Z){q(h.A.enqueue({type:"offline-page-switch",message:(0,g.t)("fullscreen.pages_panel.unavailable_offline")}));return}null==D||n||D(e,t)}}),eu=a.useCallback(t=>{Z||null==x||n||x(e,t)},[n,e,x,Z]),ed=a.useCallback(t=>{null==R||n||R(e,t)},[n,e,R]),ep=a.useCallback(t=>{null==O||n||O(e,t)},[n,e,O]),em=a.useCallback(()=>(0,d.qm)(z)||(0,d.qm)($)?"":(0,y.iq)(z,$,!0),[z,$]),eg=`calc(${M}px - ${X?"var(--spacer-5)":"64px"})`,eh=B&&H?H:0,e_=(null==V?void 0:V.activeId)&&"current_version"===V.activeId,ef=K&&G&&!n&&e_,ev=!B&&!n&&!(0,c.Ub)().dt_dev_mode_workflows,ey=W&&!w&&!n;return a.createElement("div",{className:[ey?C.g$:C.m,w?C.cl:"",null===L?C.wP:L===e?C.sl:""].filter(e=>!!e).join(" "),onContextMenu:en,onClick:ec,draggable:!1,onMouseDown:eu,onMouseMove:ed,onMouseUp:ep,onDoubleClick:eo},!ey&&!X&&a.createElement(m.A,{className:i()(w?C.Gi:C.qQ,{[C.Sm]:!1}),svg:N.c}),ev&&a.createElement(P,{pageGuid:e}),n&&a.createElement(T.gf,{className:C.jU,ref:ea,value:J,onChange:er,onKeyDown:es,onBlur:ei,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off"}),ey?a.createElement("span",{className:C.od}):!n&&a.createElement("div",{className:C.QD},a.createElement("span",{className:Z?C.Yd:C.iS,style:{maxWidth:eg}},k?`${t} (${e})`:t)),Z&&!ey&&a.createElement("div",{className:C.G6,"data-tooltip-type":S.wL.TEXT,"data-tooltip":(0,g.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"},a.createElement(m.A,{className:C.U3,svg:I.c,"data-tooltip-type":S.wL.TEXT,"data-tooltip":(0,g.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"})),ef&&a.createElement("span",{className:Z?C.X5:C.M$,dir:"auto"},em()),(0,c.Ub)().version_diffing&&B&&eh>0&&a.createElement("div",{className:C.Gw},eh))}function P({pageGuid:e,margin:t="marginLeft",fallback:n=null}){let r=(0,w.s5)(f.KEP.currentSceneState().pageToContainsNodeStatuses);return(r.has(e)?r.get(e).includes(f.s9M.BUILD):f.i46.pageHasReadySection(e))?a.createElement(m.A,{className:C.mw,svg:A.c,style:{[t]:"8px"},"data-tooltip-type":S.wL.TEXT,"data-tooltip":(0,g.t)("dev_handoff.tag.ready_to_build"),"data-testid":"pageReadyIndicator"}):n}},880728:(e,t,n)=>{n.d(t,{i:()=>P});var a=n(307824),r=n(120304),l=n(79276),s=n(4596),i=n(560072),o=n(317704),c=n(326300),u=n(73376),d=n(762820),p=n(138884),m=n(540696),g=n(927976),h=n(414112),_=n(961716),f=n(953068),v=n(931296);class y{constructor(e){this.formatter=e}format(e){return!e||(0,m.Er)(e)?"":this.formatter.format(e)}}let E=()=>(0,i.t)("inspect_panel.property.missing");class w{constructor(e){this.nodeNameFormatter=new y(e),this.behaviorFormatter=new y(new h.uw),this.eventFormatter=new y(new u.Kg),this.prototypeActionFormatter=new y(new u.Q9),this.sentenceCaseFormatter=new y(new u.UL)}getActionValue(e){var t;switch(e.connectionType){case"INTERNAL_NODE":let n=s.MR(e.transitionNodeID);return this.nodeNameFormatter.format(n);case"URL":if(!e.connectionURL||(null==(t=e.connectionURL)?void 0:t.trim().length)===0)return E();return e.connectionURL;default:return}}formatAction(e){if(!e)return;let t=(0,f.o1)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration),n=this.prototypeActionFormatter.format((0,_.ys)(e)),a=this.getActionValue(e),r=s.MR(e.transitionNodeID)||void 0,l=(0,f.CQ)(e.easingType),i=t.direction&&` ${t.direction.charAt(0)}${t.direction.toLowerCase().substring(1)}`||"",o=this.behaviorFormatter.format(t.behavior??"INSTANT")+i,c=(0,m.Er)(t.easingFunction)?[]:t.easingFunction,u="CUSTOM_BEZIER"==t.easing?c.map(e=>parseFloat(e.toFixed(2))).join(", "):this.sentenceCaseFormatter.format(t.easing);return l&&(c=c.map(e=>parseFloat(e.toFixed(2))),u="Spring"),{action:a?n:"Action",value:a||n,guid:r,animation:o,hasAnimation:"INTERNAL_NODE"==e.connectionType,curve:"INSTANT"!=t.behavior?u:void 0,duration:"INSTANT"!=t.behavior&&(0,m.EH)(t.duration)?t.duration:void 0,isSpringTransition:l,curveFunction:c}}getEventArgs(e){var t;switch(null==e?void 0:e.interactionType){case"AFTER_TIMEOUT":return{delay:e.transitionTimeout||.8};case"ON_KEY_DOWN":if(!e.keyTrigger||!e.keyTrigger.keyCodes)return{trigger:E()};let n=(0,v._4)(null==(t=e.keyTrigger)?void 0:t.keyCodes),a=(0,v.O0)(e.keyTrigger,!0)||E();return{trigger:"KEYBOARD"===e.keyTrigger.triggerDevice&&n?(0,v.YD)(n):a};case"ON_MEDIA_HIT":return{mediaHitTime:e.mediaHitTime||0};default:if(null==e?void 0:e.interactionMaintained)return{delay:e.interactionDuration||.3};return}}format(e){var t;let n=this.eventFormatter.format(null==(t=e.event)?void 0:t.interactionType),a=this.formatAction(e.actions&&e.actions[0]);return{event:n,...this.getEventArgs(e.event),action:a,guid:s.MR(e.id)}}}var b=n(15416),S=n(184252);let T=()=>((0,r.w1)(e=>e.mirror.selectionProperties.prototypeInteractions)||[]).filter(e=>{if(!e.actions||e.actions.length<1||!e.actions[0])return!1;let t=e.actions[0].connectionType;return t&&"NONE"!=t}),C=()=>{let e=(0,r.w1)(e=>e.mirror.sceneGraph);return a.useMemo(()=>new u.id(e),[e])},N=()=>{let e=C();return a.useMemo(()=>new w(e),[e])},I=e=>{let t=(0,r.w1)(e=>e.mirror.sceneGraphSelection),n=a.useRef(null),l=C(),s=(0,r.OY)(),u=a.useCallback(e=>{e&&(d.i46.panToNode(e),p.mo(),p.aN([e]))},[]);return a.useEffect(()=>{let a=n.current;null===a||t[a]||s(o.A.dequeue({matchType:e}))},[s,t,e]),a.useCallback(a=>{let r=Object.keys(t)||[],{guid:d}=a;if(!d)return;u(d),n.current=d;let p=(0,i.t)("inspect_panel.interactions.return_to_node",{previous:l.format(r[0])});s(o.A.enqueue({type:e,message:"",button:{text:p,action:()=>u(r[0])},icon:c.mc.UNDO,onDismiss:()=>{}}))},[s,u,l,t,e])};function A(e){let t=(0,g.AR)(),{action:n,onClick:r}=e,l=a.useCallback(()=>n&&r&&r(n),[r,n]),s=(null==n?void 0:n.guid)&&t?n.guid:void 0,i=s?()=>d.KEP.canvasViewState().temporarilyHoveredNodes.set([s]):void 0,o=s?()=>d.KEP.canvasViewState().temporarilyHoveredNodes.set([]):void 0;return n?a.createElement(S.GA,{name:n.action,value:n.value,onValueClicked:n.hasAnimation?l:void 0,onMouseEnter:i,onMouseLeave:o}):null}function k(e){let{event:t,delay:n,trigger:r,phrase:l,action:s}=e.interaction;return a.createElement("div",{className:e.highlighted?"animation_panel--highlightedAnimationSection--cPkZz":"animation_panel--animationSection--ecznm"},a.createElement(S.GA,{className:"animation_panel--animationTitle--Xmsme text--fontPos11--2LvXf text--_fontBase--QdLsd",copyValue:t},t),a.createElement(S.GY,{name:(0,i.t)("inspect_panel.interactions.delay"),value:n}),a.createElement(S.GA,{name:(0,i.t)("inspect_panel.interactions.trigger"),value:r}),a.createElement(S.GA,{name:(0,i.t)("inspect_panel.interactions.phrase"),value:l}),a.createElement(A,{action:s,onClick:e.onActionClicked}),(null==s?void 0:s.hasAnimation)&&a.createElement(a.Fragment,null,a.createElement(S.GA,{name:(0,i.t)("inspect_panel.interactions.animate"),value:null==s?void 0:s.animation}),a.createElement(S.GA,{name:(0,i.t)("inspect_panel.interactions.curve"),value:null==s?void 0:s.curve}),!(null==s?void 0:s.isSpringTransition)&&a.createElement(S.GY,{name:(0,i.t)("inspect_panel.interactions.duration"),value:null==s?void 0:s.duration}),(null==s?void 0:s.isSpringTransition)&&(null==s?void 0:s.curveFunction)&&a.createElement(S.GA,{name:(0,i.t)("inspect_panel.interactions.mass"),value:null==s?void 0:s.curveFunction[0]}),(null==s?void 0:s.isSpringTransition)&&(null==s?void 0:s.curveFunction)&&a.createElement(S.GA,{name:(0,i.t)("inspect_panel.interactions.stiffness"),value:null==s?void 0:s.curveFunction[1]}),(null==s?void 0:s.isSpringTransition)&&(null==s?void 0:s.curveFunction)&&a.createElement(S.GA,{name:(0,i.t)("inspect_panel.interactions.damping"),value:null==s?void 0:s.curveFunction[2]})))}function P(){var e;let t=T(),n=(0,r.w1)(e=>e.mirror.selectionProperties.numSelected)||0,o=(0,r.w1)(e=>e.mirror.appModel.hoveredInteractions)||[],c=N(),u=t.map(e=>c.format(e)),d=b.Cy.useCopyAllInteractions(u),p=I("instance_panel_return_to_node"),g=o&&o.length>0?null==(e=l.K(o[0]))?void 0:e.interactionID:s.WW,h=a.useCallback(e=>a.createElement(k,{interaction:e,onActionClicked:p,highlighted:e.guid===s.MR(g)}),[p,g]);return 1!=n||t.length<1&&(0,m.EH)(t)?null:a.createElement(S.e_,{title:(0,i.t)("inspect_panel.interactions.title"),recordingKey:"interactions",copyAllValue:d},a.createElement(S.K2,{limit:3,data:u,renderElement:h}))}},293368:(e,t,n)=>{let a;n.d(t,{w:()=>te});var r=n(307824),l=n(120304),s=n(125504),i=n(250008),o=(n(53872),n(87975)),c=(n(570464),n(853688)),u=(n(107516),n(865916)),d=(n(71556),n(560072)),p=n(585508),m=n(762820),g=n(979144),h=n(540696),_=(n(312452),n(169643)),f=(n(507076),n(833492),n(397888)),v=n(392992),y=n(84656),E=n(608072),w=n(984812),b=(n(142548),n(784528),n(809896)),S=n(26708),T=n(238152),C=((a=C||{})[a.NUMERIC=0]="NUMERIC",a[a.PUNCTUATION_OR_WHITESPACE=1]="PUNCTUATION_OR_WHITESPACE",a[a.KEYWORD=2]="KEYWORD",a[a.FUNCTION_NAME=3]="FUNCTION_NAME",a);let N=/[#\-0-9.]/,I=/[ ,\(\)]/,A={punctuation:"token punctuation",comment:"token comment",declNumeric:"",declFunction:"token function",declKeyword:"",declName:"token property"};class k extends r.PureComponent{render(){return r.createElement("span",{className:"css_code_panel--colorSwatch--bQ6hP",style:{background:this.props.background}})}}function P(e){2===e.detail&&(!function(e){let t=window.getSelection();if(t){let n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}(e.currentTarget),e.stopPropagation())}k.displayName="FillSwatch";class M extends r.PureComponent{render(){return r.createElement("div",{style:{whiteSpace:"pre"}},"\n")}}M.displayName="Separator";class x extends r.PureComponent{render(){return r.createElement("p",{className:A.comment,onMouseDown:P},"/* ",r.createElement("span",{onMouseDown:P},this.props.text)," */")}}x.displayName="CSSComment";class O extends r.PureComponent{render(){return r.createElement("span",{className:A.comment,onMouseDown:P},"/* ",r.createElement("span",{onMouseDown:P},this.props.header,r.createElement("br",null),r.createElement("br",null),r.createElement("div",{className:"css_code_panel--blockCommentBody--O9kU-"},(0,b.u)(this.props.content))),"*/")}}O.displayName="CSSBlockComment";class R extends r.PureComponent{render(){let{name:e,value:t}=this.props,n=function(e){let t=0,n=e.length,a=[];for(;t<n;){let r=e[t++],l=r,s=1;if(N.exec(r))for(s=0;t<n&&!I.exec(e[t]);)l+=e[t++];else if(I.exec(r))for(s=1;t<n&&I.exec(e[t]);)l+=e[t++];else{for(;t<n&&!I.exec(e[t]);)l+=e[t++];s=t<n&&"("===e[t]?3:2}a.push({type:s,text:l})}return a}(t),a="";return("color"===e||"background"===e)&&-1===t.indexOf("url(")&&-1===t.indexOf("var(")&&(a=r.createElement(k,{background:t})),r.createElement("div",{className:"css_code_panel--cssLine--4ZtkZ",onMouseDown:P},r.createElement("span",{className:A.declName},this.props.name),r.createElement("span",{className:A.punctuation},": "),r.createElement("span",{onMouseDown:P},n.map((e,t)=>r.createElement("span",{key:t,className:function(e){switch(e){case 0:return A.declNumeric;case 1:return A.punctuation;case 3:return A.declFunction;case 2:return A.declKeyword;default:return null}}(e.type)??void 0},e.text))),r.createElement("span",{className:A.punctuation},";"),a)}}R.displayName="CSSDeclaration";let L=class{constructor(){this.lastPaints=[],this.colorToName=Object.create(null)}setTeamPaints(e){if(this.lastPaints!==e)for(let t of(this.lastPaints=e,this.colorToName=Object.create(null),e)){if("SOLID"!==t.paint.type||null==t.name||0===t.name.length)continue;let e=t.paint.color;e.a<1?this.colorToName[S.Q.format(e)]=t.name:(this.colorToName[S.Q.format(e)]=t.name,this.colorToName[T.aQ.format(e)]=t.name)}}expandCSSLines(e){let t=[];for(let n of e)if(t.push(n),n[0]===m._66.DECLARATION){let e=n[1],a=n[2];if(L.COLOR_RE.exec(a)){let n=!1,r=a.replace(L.COLOR_RE,e=>this.colorToName[e]?(n=!0,`var(--${this.colorToName[e]})`):e);n&&t.push([m._66.DECLARATION,e,r])}}return t}};L.COLOR_RE=/(#[0-F]{6}|rgba\(([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*,?\s*([\d.]*)\))/g;class D extends r.PureComponent{constructor(){super(...arguments),this.teamColorExpander=new L}render(){let e=0,t=0,n=Object.create(null);this.teamColorExpander.setTeamPaints(this.props.teamPaints);let a=this.teamColorExpander.expandCSSLines(this.props.css);return r.createElement("div",{className:"css_code_panel--cssCodeContent--d4ab1"},a.map(a=>{if(a[0]===m._66.EMPTY_LINE)return r.createElement(M,{key:`sep-${t++}`});if(a[0]===m._66.COMMENT){let t=a[1];return r.createElement(x,{key:`comment-${e++}`,text:t})}if(a[0]===m._66.BLOCK_COMMENT){let t=a[1],n=a[2];return r.createElement(O,{key:`block-comment-${e++}`,header:t,content:n})}if(a[0]===m._66.DECLARATION){let e=a[1],t=a[2],l=`decl-${e}`;for(let t=2;n[l];t++)l=`decl-${e}${t}`;return n[l]=!0,r.createElement(R,{key:l,name:e,value:t})}}))}}D.displayName="CSSCodeContent";var F=n(943344),K=n(235020),G=n(184252),U=n(824960),B=n(641636),V=n(491776),H=n(170168),W=n(518208),Y=n(880728),q=n(117080);function X(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8.646 7.146a.5.5 0 1 1 .708.708L5.207 12l4.147 4.146a.5.5 0 0 1-.708.708l-4.5-4.5a.5.5 0 0 1 0-.708l4.5-4.5Zm6.708 0a.5.5 0 0 0-.708.708L18.793 12l-4.147 4.146a.5.5 0 0 0 .708.708l4.5-4.5a.5.5 0 0 0 0-.708l-4.5-4.5Z",clipRule:"evenodd"}))}var z=n(365224),$=n(968240),j=n(288448),Q=n(313373),Z=n(919364),J=n(119224),ee=n(15416),et=n(72939),en=n(677052),ea=n(734172);let er=new Date("2023-06-21"),el="dev_mode_dismissed_code_and_measurements_hint";function es(){let e=(0,v.AL)(),t=!(null==e?void 0:e.canEdit),n=(0,j.U9)(),a=!!(0,Z.e)("dev_mode_dismissed_properties_panel_announcement"),l=!!(0,Z.e)(el),s=(0,z.m4)(Q.uK),i=(0,ee.wB)(),o="loaded"!==s.status||s.data>er;return!i||l||!a||!t||o||n?null:r.createElement(J.K,{className:"code_and_measurement_hint--codeAndMeasurementsHint--Y2-IO",idForTests:"hintCodeAndMeasurements",userFlag:el,title:(0,d.t)("inspect_panel.properties.code_and_measurements_hint_title"),icon_DEPRECATED:en.c,iconComponent:r.createElement($.e,{className:et.QV,svg:en.c},r.createElement(q._,null)),hintText:(0,d.t)("inspect_panel.properties.measurements_hint_message"),secondaryIcon_DEPRECATED:ea.c,secondaryIconComponent:r.createElement($.e,{className:et.QV,svg:ea.c},r.createElement(X,null)),secondaryHintText:r.createElement(d.Tx,{id:"inspect_panel.properties.copy_code_hint_message",menu_path:r.createElement("strong",null,r.createElement(d.Tx,{id:"inspect_panel.properties.copy_code_hint_menu_path"}))})})}var ei=n(967763),eo=n(326660),ec=n(58908),eu=n(73376),ed=n(655068),ep=n(402980),em=n(990348),eg=n(884728),eh=n(286178);let e_="images_panel--imagePropertyRow--QtoWZ inspect_panels--propertyRow--07fx- inspect_panels--basePropertyRow--dLxSz inspect_panels--_basePropertyRow--StmAE",ef=e=>{e.stopPropagation()},ev=()=>{let e=(0,l.w1)(e=>e.mirror.selectionProperties.fillPaints)||null,t=r.useMemo(()=>(0,ed.qA)(e),[e]);return t&&t.filter(e=>e.opacity>0&&e.visible)||[]};function ey(e){return r.createElement("a",{className:eh.M,href:e.url,target:"_blank",rel:"noopener",onClick:ef},e.children)}function eE(e){let t=(0,v.K0)(),[n,a]=r.useState(null),l=(0,ep.AP)();r.useEffect(()=>{l||(0,eg.Os)({paint:e,fileKey:t}).then(e=>{a(e)})},[e,t,l]);let s=`${(0,eg.CI)(e)}.${(0,eg.YD)(e)}`;return r.createElement(G.GA,{className:"images_panel--preview--1U-c2",copyValue:s},r.createElement(em.m,{className:"images_panel--previewImage--AdG6w",imagePaint:e,height:50,width:64,forceUpdate:!1}),r.createElement("span",{className:"images_panel--previewName--Piynm text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},r.createElement(ey,{url:n??"#"},s)))}function ew(e){let t=r.useMemo(()=>new eu.AH,[]);return r.createElement("div",{className:"images_panel--imageSection--zNOsP"},r.createElement(eE,{...e}),r.createElement(G.GA,{className:e_,name:(0,d.t)("inspect_panel.images.scale"),redact:["Fill"],value:t.format(e.imageScaleMode)}),r.createElement(G.mO,{className:e_,name:(0,d.t)("inspect_panel.images.opacity"),redact:1,value:e.opacity}),r.createElement(ei.g1,{onError:t=>{let n=TypeError(`Expected string | undefined, got ${typeof t}`);console.error(n),(0,eo.oP)(ec._.FIGJAM_CORE,n,{extra:{type:typeof t,value:t,source:"ImagesPanel > ImageElement",props:e}})},className:e_,blendMode:e.blendMode}))}function eb(){let e=ev(),t=ee.Cy.useCopyImages(e),n=r.useCallback(e=>r.createElement(ew,{key:(0,ed.wb)(e.image),...e}),[]);return!e||e.length<1?null:r.createElement(G.e_,{title:e.length>1?e.every(e=>"VIDEO"===e.type)?(0,d.t)("inspect_panel.videos.title_plural"):(0,d.t)("inspect_panel.images.title_plural"):1===e.length?"VIDEO"===e[0].type?(0,d.t)("inspect_panel.videos.title_singular"):(0,d.t)("inspect_panel.images.title_singular"):void 0,recordingKey:"images",copyAllValue:t},r.createElement(G.K2,{limit:2,data:e,renderElement:n}))}var eS=n(482168),eT=n(277716),eC=n(148276),eN=n(256896);function eI(e){let{uri:t,displayName:n,displayText:a}=e,l=r.useCallback(e=>{e.preventDefault(),p.CA.handleUserClickOnHyperlink(t,m.FU2.COMPOSE_EMAIL);let n=(0,eN.gN)(t);(0,i.we)("Component documentation link clicked",{hostname:n})},[t]),s=r.useMemo(()=>n||a?a||r.createElement(d.Tx,{id:"design_systems.component_panel.view_in_display_name",displayName:n}):r.createElement(d.Tx,{id:"design_systems.component_panel.view_documentation"}),[n,a]);return r.createElement(eC.cH,{target:"_blank",className:"component_link_button--documentationButton--mDWSy ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:l,trusted:!0},s)}var eA=n(922120);let ek=/^(?:https?:\/\/)?(?:[^@\/\n]+@)?(?:www\.)?([^:\/?\n]+)/,eP={"github.com":"GitHub","figma.com":"Figma","zeplin.io":"Zeplin","atlassian.com":"Jira","asana.com":"Asana"},eM=e=>{if(e.displayName||e.displayText)return e;let t=e.uri.match(ek),n=t&&t[1]?eP[t[1]]:void 0;return{uri:e.uri,displayName:n}},ex=(e,t)=>r.useMemo(()=>e?e.map(e=>eM(e)):t?eS.iw(t).filter(e=>"url"===e.type).map(e=>eM({uri:e.href})):[],[t,e]),eO=()=>{let{links:e,description:t}=(0,eA.q_)(),n=ex(e,t);return r.useMemo(()=>({description:t,links:n}),[t,n])};function eR(){let{description:e,links:t}=eO();return 0!==t.length||e?r.createElement(G.e_,{title:(0,d.t)("inspect_panel.components.title"),recordingKey:"components",hideHeader:!0},r.createElement("div",{className:"inspect_component_panel--documentationSection--PQRXC"},e?r.createElement("div",{className:"inspect_component_panel--documentationRt--oG--q"},r.createElement(eT.C,{fallback:null,errorFallback:null,value:e,quillClassName:"inspect_component_panel--quill--m-Fty"})):r.createElement("div",{className:"inspect_component_panel--documentationDescriptionDefault--15thq inspect_component_panel--documentationDescription--UcDJ- ellipsis--ellipsisAfter8Lines--WZFi8 ellipsis--_ellipsisAfterNLines--LzI7k text--fontPos11--2LvXf text--_fontBase--QdLsd",dir:"auto"},r.createElement(d.Tx,{id:"inspect_panel.components.no_description"})),t.length>0&&r.createElement("div",{className:"inspect_component_panel--documentationLinks--pi-YI"},t.map(e=>r.createElement(eI,{key:e.uri,uri:e.uri,displayName:e.displayName,displayText:e.displayText}))))):null}var eL=n(823848);function eD({guids:e,title:t}){let n=r.useMemo(eL.yE,[]),a=(0,l.w1)(t=>n(t,e)),s=r.useCallback(()=>{let e=ee.Cy.unquoteEnumerableValues(a);return ee.Cy.copyPairs(e,{delimiter:"=",quoted:!0,suffix:";"})},[a]);return 0===a.length?null:r.createElement(G.e_,{title:t||(0,d.t)("inspect_panel.component_props.title"),recordingKey:"componentProps",copyAllValue:s},r.createElement("div",{"data-testid":`component-prop-property-${e.join("-")}`},a.map(([e,t])=>r.createElement(G.GA,{key:e,name:e,value:t}))))}var eF=n(45676),eK=n(537096),eG=n(138884),eU=n(30112);let eB=e=>{let t=null==e?void 0:e.parentNode;return t?"SYMBOL"===t.type||"INSTANCE"===t.type?t:eB(t):null},eV=()=>{let e=(0,ee.QH)();return(0,ee.IN)(),r.useMemo(()=>{if(!e)return null;let t=eB(e);return t?{id:null==t?void 0:t.guid,name:null==t?void 0:t.name,type:null==t?void 0:t.type}:null},[e])},eH=e=>r.useCallback(()=>{eG.mo(),eG.aN([e])},[e]),eW=e=>{let t=r.useCallback(()=>{eG.cX(e)},[e]),n=r.useCallback(()=>{eG.cX("")},[]);return r.useMemo(()=>({onMouseOver:t,onMouseOut:n}),[t,n])};function eY(e){let t=eH(e.parentId),n=eW(e.parentId);return r.createElement(eK.A,{onClick:t,className:"parent_component_panel--pinpointButton--2rDrC",svg:eU.c,...n})}function eq(){let e=eV();return e?r.createElement(G.e_,{title:(0,d.t)("inspect_panel.parent.title"),recordingKey:"selection_hierarchy"},r.createElement("div",{className:"parent_component_panel--parentLayerSummaryContainer--JGy-s"},r.createElement(eF.s,{className:"parent_component_panel--parentLayerSummary--yAeXQ inspect_selection_header--headerSelection--05a4w",selection:e}),r.createElement(eY,{parentId:e.id}))):null}var eX=n(893704),ez=n(230452),e$=n(71340),ej=n(791844);function eQ(){let e=(0,l.w1)(e=>e.mirror.selectionProperties.nodeText),t=(0,l.w1)(e=>e.mirror.selectionProperties.numSelectedByType)||{};return 1!==((0,l.w1)(e=>e.mirror.selectionProperties.numSelected)||0)||1!==t.TEXT?null:r.createElement(G.e_,{title:(0,d.t)("inspect_panel.property.content"),copyAllValue:e,recordingKey:"content"},r.createElement(G.GA,{name:"content",copyValue:e||"",className:ej.y_},r.createElement("div",{className:ej.WY,dir:"auto"},e)))}function eZ(){let e=(0,l.w1)(e=>e.openFile),t=(0,l.w1)(V.qg),n=(0,l.w1)(H.Ib),a=(0,l.w1)(V.qs),s=(0,U.cC)();return r.createElement(r.Fragment,null,!!e&&r.createElement(r.Fragment,null,r.createElement(eF.u,{className:ej.AT}),r.createElement(eq,null),r.createElement(eR,null),r.createElement(es,null),r.createElement(eD,{guids:t}),n.map(e=>{var t;let n=null==(t=a.get(e[0]))?void 0:t.name;return n?r.createElement(eD,{key:`bubbledInstanceInspectPanel.${e[0]}`,title:n,guids:e}):null}),r.createElement(eb,null),r.createElement(B.M,null),r.createElement(W.uq,null),r.createElement(eQ,null),r.createElement(e$.I,null),s?r.createElement(ei.gX,null):r.createElement(ei.e0,null),r.createElement(ez.C,null),r.createElement(eX.e,null),r.createElement(Y.i,null)))}var eJ=n(939540);class e0 extends r.PureComponent{render(){let e=null;if(this.props.inheritStyleName&&(0,h.EH)(this.props.inheritStyleName)&&(e=(0,h.kB)(this.props.inheritStyleName)),!e)return null;let t=(0,eJ.El)(this.props.inheritStyleKeyField);return r.createElement("div",null,t,": ",e)}}e0.displayName="CodePanelStyleSection",n(98344);var e1=n(196040);n(879080);let e2=e=>e.visible&&null!=e.opacity&&e.opacity>0;K.M1,K.cb;function e4(){let{inStyleModal:e}=r.useContext(e9),t=(0,_.a)("guid"),n=(0,l.w1)(e=>e.mirror.selectedStyleProperties),a=(0,l.w1)(e=>e.mirror.selectionProperties);return e&&t&&n?n:a}function e5(e){return e4()[e]}function e6(e){let t=e4();return(0,u.G)(t,e)}function e8(){let{inStyleModal:e}=r.useContext(e9);return(0,l.w1)(t=>{var n;return e?null==(n=t.mirror.selectedStyleProperties)?void 0:n.styleType:void 0})}function e7(e,t){let n=new E.s(e);return r.createElement(r.Fragment,null,n.render(t))}F.G,F.n;function e3(e){return(0,y.s5)(m.KEP.propertiesPanelState().shownPropertiesPanels)[e]}let e9=r.createContext({});function te(e){let t=r.useRef(null);return(0,f.is)(()=>{let e=window.getSelection();if(!e)return;let n=e.focusNode;for(;n;){if(n===t.current){e.removeAllRanges();break}n=n.parentNode}}),r.createElement(e9.Provider,{value:{inStyleModal:e.inStyleModal}},r.createElement(c.g9,{forwardedRef:t,onKeyDown:e=>{if((0,o.Mr)(e)&&e.keyCode===o.as.A){let t=window.getSelection();if(t){let n=document.createRange();n.selectNodeContents(e.currentTarget),t.removeAllRanges(),t.addRange(n),e.preventDefault()}}},className:e1.sf},r.createElement(eZ,null),!1))}},967763:(e,t,n)=>{n.d(t,{g1:()=>ec,Yb:()=>eA,iK:()=>ev,gX:()=>eI,e0:()=>eN,qs:()=>eT,Y3:()=>eC,A3:()=>ey,Cu:()=>eg});var a=n(307824),r=n(120304),l=n(484876),s=n(125504),i=n.n(s),o=n(972920),c=n(843148),u=n(865916),d=n(326660),p=n(58908),m=n(968240),g=n(560072),h=n(659436),_=n(323576),f=n(73376),v=n(979144),y=n(540696),E=n(312452),w=n(397888),b=n(939540),S=n(31948),T=n(97007),C=n(491776),N=n(790184),I=n(142548),A=n(525064),k=n(927976),P=n(219868),M=n(408156),x=n(478936),O=n(791372),R=n(712220),L=n(24588),D=n(902848),F=n(15416),K=n(184252),G=n(216712),U=n.n(G),B=n(594192),V=n(853688),H=n(762820),W=n(784340),Y=n(203736),q=n(101040),X=n(399260),z=n(761748);let $="colors_inspect_panel--solidColorRow--x4Cdm",j="colors_inspect_panel--paintIcon--MVzOV",Q="colors_inspect_panel--paintName--t-J8u text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",Z="colors_inspect_panel--paintColor--3DbXu text--fontPos11--2LvXf text--_fontBase--QdLsd",J=e=>Number(e).toLocaleString("en",{style:"percent",maximumFractionDigits:2});function ee(e){let{value:t}=e,n=void 0!==t&&(e.showOpaque||1!==t),r=J(t);return a.createElement(a.Fragment,null,n&&a.createElement("span",{className:Z},r))}let et="matching_vars_modal--icon--nV4WE",en="matching_vars_modal--headerRow--8Hhgv";function ea({variable:e,rawValue:t}){let n=(0,F.UB)(e.name);return a.createElement(V.g9,{className:"matching_vars_modal--variableRow--cYwzP",onClick:n,"data-tooltip":e.description,"data-tooltip-type":I.wL.TEXT},t.type===H.Tcd.COLOR&&a.createElement(M.o,{paint:t.value}),a.createElement(X.c,{text:e.name}))}function er({rawValue:e}){var t;return e.type===H.Tcd.COLOR?a.createElement(a.Fragment,null,a.createElement("div",{className:en},a.createElement("div",{className:et},a.createElement(z.m,{type:H.y6c.COLOR})),a.createElement(g.Tx,{id:"dev_handoff.variables.matching_color"})),a.createElement("div",{className:"matching_vars_modal--colorPreview--sTGUm"},a.createElement("div",{className:"matching_vars_modal--colorAndChit--9GEA7"},a.createElement(M.o,{paint:e.value}),e.valueString),a.createElement(ee,{value:null==(t=e.value.color)?void 0:t.a,showOpaque:!0}))):a.createElement(a.Fragment,null,a.createElement("div",{className:en},a.createElement("div",{className:et},a.createElement(z.m,{type:H.y6c.FLOAT})),a.createElement(g.Tx,{id:"dev_handoff.variables.matching_number"})),a.createElement("span",null,e.valueString))}let el=(0,Y.U9)(function(e){let t=(0,W.Gs)(e.variableIds,!0),n=U()(t.filter(B.aI),e=>e.name).sort((e,t)=>e.sortPosition.localeCompare(t.sortPosition)),l=a.useRef(null),s=(0,r.OY)(),i=a.useCallback(()=>{s(_._g())},[s]);return a.createElement(V.g9,{className:"matching_vars_modal--modalBackground--6e-Qd",tabIndex:0,recordingKey:"matchingVarsModalBackground",onPointerDown:e=>{var t;!l.current||(null==(t=l.current.getEl())?void 0:t.contains(e.target))||(e.preventDefault(),i())}},a.createElement(q.G0,{title:"Suggested variables",headerSize:"small",initialPosition:e.position,initialWidth:272,dragHeaderOnly:!0,onClose:i,ref:l},a.createElement("div",{className:"matching_vars_modal--matchingVarsModal---Rb3P"},a.createElement("div",{className:"matching_vars_modal--header--z6HA-"},a.createElement(er,{rawValue:e.rawValue})),n.map(t=>a.createElement(ea,{key:t.id,variable:t,rawValue:e.rawValue})))))},"MatchingVariablesModal");var es=n(895184);let ei=new Set(["SOLID","GRADIENT_ANGULAR","GRADIENT_DIAMOND","GRADIENT_LINEAR","GRADIENT_RADIAL"]),eo=new f.ID;function ec(e){let{blendMode:t,onError:n}=e,r=(0,y.Er)(t)||"string"==typeof t;return t&&!r&&(console.error(TypeError(`Expected mixed | string | undefined, got ${typeof t}`)),n&&n(t),t=void 0),a.createElement(K.GA,{redact:["Normal","Pass through"],indent:e.indent,className:e.className,name:(0,g.t)("inspect_panel.colors.blend"),value:eo.format(t)})}let eu=(e={})=>{let{isShort:t=!1,format:n=E._sE.HEX}=e,a=n===E._sE.HEX?"":"colors_inspect_panel--propertyRowTwoColumn--opscx";return i()(t?"colors_inspect_panel--propertyColorRowShort--h-1kY colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--basePropertyRow--dLxSz inspect_panels--_basePropertyRow--StmAE":"colors_inspect_panel--propertyColorRowTall--5z3CC colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",a)};function ed(e){return a.createElement("div",{className:"colors_inspect_panel--gradientColorContainer--KtmLk","data-testid":"inspectMultilineColorRow"},a.createElement(K.kZ,{className:"colors_inspect_panel--styleNameContainer--HbhgI text--fontPos11--2LvXf text--_fontBase--QdLsd inspect_panels--tallRow--W9eni",label:e.styleName,defaultLabel:e.defaultStyleName,isVariable:e.isVariable,isSuggestedVariable:e.isSuggestedVariable},!0!==e.hideColorChit?a.createElement(M.o,{className:j,paint:e.paint,tooltip:e.description}):a.createElement("div",null)),a.createElement(ec,{className:eu(),indent:!0,blendMode:e.paint.blendMode,onError:t=>{let n=TypeError(`Expected string | undefined, got ${typeof t}`);console.error(n),(0,d.oP)(p._.DEVELOPER_TOOLS,n,{extra:{type:typeof t,value:t,source:"MultiLinePaintValue",props:e}})}}),e.colors.map((t,n)=>a.createElement(eh,{key:n,valueFormatter:e.formatter,format:e.format,color:t,paint:e.paint,alwaysShowOpacity:e.alwaysShowOpacity,hideColorChit:e.hideColorChit})))}function ep({variableIds:e,rawValue:t,rowRef:n}){let s=(0,r.OY)();return a.createElement(L.wP,{"data-tooltip":(0,g.t)("dev_handoff.variables.matching"),"data-tooltip-type":I.wL.TEXT,className:"colors_inspect_panel--inferredVarIcon--NdvgN",onClick:a=>{if(a.stopPropagation(),!n.current)return;let r=(0,A.cT)(n.current,272);s(_.us({type:el.type,data:{variableIds:e,rawValue:t,position:r}}))}},a.createElement(m.e,{svg:es.c},a.createElement(l.W,null)))}function em(e){let{format:t}=e,{paint:n,valueFormatter:r,variableScope:l}=e.formattableColor,{variable:s,isSuggested:i,variableDisplayName:o,matchingVars:u}=(0,P.co)(n,l?new Set([l]):void 0),d=a.useRef(null);if(!n.color)return null;let p={...n.color,a:n.opacity??1};if(s&&(!(0,c.Ub)().dt_inferred_vars_modal||!i))return a.createElement(ed,{paint:n,className:Q,styleName:o,colors:[p],format:t,formatter:r,hideColorChit:e.hideColorChit,isVariable:!0,isSuggestedVariable:i});let m=u&&u.length>0&&(0,c.Ub)().dt_inferred_vars_modal,g=eg(p,t,r);return a.createElement("div",{className:$,"data-testid":"inspectColorRow",ref:d},a.createElement(K.GA,{className:eu({format:t}),copyValue:g.copyValue},!0!==e.hideColorChit?a.createElement(M.o,{className:j,paint:n}):a.createElement("div",null),a.createElement("span",{className:Z},g.value),ef.has(e.format)&&a.createElement(ee,{value:p.a}),m&&a.createElement(ep,{variableIds:u,rawValue:{type:E.Tcd.COLOR,value:n,valueString:g.value},rowRef:d})))}function eg(e,t,n,a){let r=n(e,a);return ef.has(t)?{value:r,copyValue:n(e,{hexCSSValue:!0})}:{value:r,copyValue:r}}function eh(e){let t=eg(e.color,e.format,e.valueFormatter);return a.createElement(a.Fragment,null,a.createElement(K.GA,{className:eu({isShort:!e.hideColorChit,format:e.format}),copyValue:t.copyValue},a.createElement("div",null),a.createElement("span",{className:Z},t.value),ef.has(e.format)&&a.createElement(ee,{value:e.color.a,showOpaque:e.alwaysShowOpacity||!1})))}function e_(e){let{format:t}=e,{paint:n,colors:r,valueFormatter:l,typeFormatter:s}=e.formattableColor;return a.createElement(ed,{paint:n,className:"colors_inspect_panel--gradientType--RKlht text--fontPos11--2LvXf text--_fontBase--QdLsd",defaultStyleName:(0,g.t)("inspect_panel.colors.gradient",{gradientType:s(n.type)}),colors:r,format:t,formatter:l,hideColorChit:e.hideColorChit,alwaysShowOpacity:!0})}let ef=new Set([E._sE.HEX]);function ev(e){let{formattableColor:t}=e;switch(t.paint.type){case"SOLID":return a.createElement(em,{...e});case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return a.createElement(e_,{...e});default:return null}}function ey(e){return e.visible&&e.type&&ei.has(e.type)}let eE=()=>{let e=(0,r.w1)(e=>e.mirror.selectionProperties.fillPaints),t=a.useMemo(()=>!e||(0,y.Er)(e)?[]:e,[e]),n=(0,F.YQ)(e=>(0,u.G)(e.mirror.selectionProperties,"inheritFillStyleKey")),l=(0,r.w1)(T.qI),s=(0,r.w1)(e=>e.mirror.selectionProperties.inheritFillStyleKey),i=(0,O.G)(),o=s?(0,b.ei)(s,[],l):void 0,c=t.filter(ey).map(e=>(0,O.me)(e,i,E.EDU.ALL_FILLS));return o&&n?[(0,O.Cy)(n,o,c)]:c},ew=()=>{let e=(0,F.IN)(),t=(0,r.w1)(e=>(0,C.ug)(e)>1?e.mirror.selectionPaints.paints:e.mirror.selectionPaints.paintsDirectlyOnSingleNode),n=(0,O.G)(),l=a.useMemo(()=>t.filter(e=>ey(e.paint)).map(e=>(0,O.me)(e.paint,n)),[t,n]),s=(0,r.w1)(e=>(0,C.ug)(e)>1?e.mirror.selectionPaints.styles:e.mirror.selectionPaints.stylesDirectlyOnSingleNode),i=(0,r.w1)(T.qI),o=a.useMemo(()=>{let t=s.map(e=>({ds:(0,b.ei)(e.styleKey,e.styleGUIDs,i),name:e.styleName})),a=[];return t.forEach(({ds:t,name:r})=>{if(!t)return;let l=t.kind===N.uk.DANGLING?{...t.value,style_type:"FILL"}:t.value,s=e=>e.filter(ey).map(e=>(0,O.me)(e,n)),i=(0,S.ET)(l);if(i&&"FILL"===i.type)a.push((0,O.Cy)(r,t,s(i.fillPaints)));else{let n=e.get(t.value.node_id);n&&a.push((0,O.Cy)(r,t,s(n.fills)))}}),a},[s,i,e,n]);return a.useMemo(()=>[...o,...l],[l,o])},eb=(e,t)=>e.type===R.v.STYLE?a.createElement(eT,{color:e,format:t.format}):a.createElement(eS,{color:e,format:t.format,hideColorChit:t.hideColorChit});function eS(e){return a.createElement(ev,{format:e.format,formattableColor:e.color,hideColorChit:e.hideColorChit})}function eT(e){let t=(0,r.OY)(),n=e.color.dsStyle.kind,l=e.color.dsStyle.value.node_id,s=a.useMemo(()=>(0,o.C)(()=>{l&&t(h.ob({styleNodeId:l,styleKind:n}))}),[t,n,l]);a.useEffect(s,[s]);let i=e.color.dsStyle.value;return n===N.uk.DANGLING&&(i.style_type="FILL",i.node_id=l),a.createElement(a.Fragment,null,a.createElement("div",{className:$,"data-testid":"styleNameRow"},a.createElement(K.GA,{className:"colors_inspect_panel--styleNameRow--RknQ9 inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",copyValue:e.color.name},a.createElement(D.wv,{dsStyle:i,hideNameInTooltip:!0}),a.createElement(K.GA,{className:Q,value:e.color.name}))),e.color.paints.map(t=>a.createElement("div",{key:t.encodedPaint,className:"colors_inspect_panel--stylePaintRow--5EqOv","data-testid":"stylePaintRow"},a.createElement(ev,{format:e.format,formattableColor:t,hideColorChit:e.hideColorChit}))))}function eC(e){let t=(0,v.q4)(),n=e.formattableColors,r=a.useMemo(()=>({format:t}),[t]);return a.createElement(K.K2,{limit:5,data:n,renderElement:eb,extras:r})}function eN(){var e;let t=(0,k.AR)(),n=(0,F.wB)(),r=null==(e=(0,w.ct)().get(n??""))?void 0:e.type,l=eE(),s=(0,v.q4)(),i=a.useMemo(()=>a.createElement(eA,{id:"colors-panel"}),[]),o=F.Cy.useCopyAllColors(l,s);return l.length<1?null:a.createElement(K.e_,{title:t?"TEXT"===r?(0,g.t)("dev_handoff.inspect_panel.fills.text"):(0,g.t)("dev_handoff.inspect_panel.fills.background"):(0,g.t)("inspect_panel.colors.title"),additionalHeaders:i,copyAllValue:o,recordingKey:"colors"},a.createElement(eC,{formattableColors:l}))}function eI(){let e=ew(),t=(0,v.q4)(),n=a.useMemo(()=>a.createElement(eA,{id:"colors-panel"}),[]),r=F.Cy.useCopyAllColors(e,t);return e.length<1?null:a.createElement(K.e_,{title:(0,g.t)("inspect_panel.colors.title"),additionalHeaders:n,copyAllValue:r,recordingKey:"colors"},a.createElement(eC,{formattableColors:e}))}function eA(e){let t=(0,r.OY)(),n=(0,v.q4)(),l=(0,r.w1)(e=>e.dropdownShown),s=(0,k.AR)(),i=(0,K.G8)("inspection_panel_color_format_change"),o=a.useCallback(e=>{(0,v.EB)().colorFormat.set(e),i({value:x.VV.format(e)})},[i]);return a.createElement("div",{className:"colors_inspect_panel--colorPanelControls--xeWFU"},a.createElement(x.gD,{id:`inspect-color-type-select:${e.id}`,className:"colors_inspect_panel--typeSelect--A0Z4U",dropdownClassName:"colors_inspect_panel--typeSelectDropdown--zffDS",property:n,formatter:x.VV,onChange:o,dispatch:t,dropdownShown:l,dropdownAlignment:"right"},a.createElement(x.ID,{value:E._sE.HEX}),a.createElement(x.ID,{value:E._sE.RGB}),!s&&a.createElement(x.ID,{value:E._sE.CSS}),a.createElement(x.ID,{value:E._sE.HSL}),a.createElement(x.ID,{value:E._sE.HSB}),s&&a.createElement(x.ID,{value:E._sE.UIColor})))}},45676:(e,t,n)=>{n.d(t,{s:()=>v,u:()=>E});var a=n(307824),r=n(120304),l=n(125504),s=n.n(l),i=n(853688),o=n(560072),c=n(491776),u=n(142088),d=n(408340),p=n(15416);let m="inspect_selection_header--headerSelection--05a4w",g="inspect_selection_header--headerSelectionIcon--CCI6C",h="inspect_selection_header--headerSelectionName--rOjcY ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",_="inspect_selection_header--copyable--9LE5u",f=e=>e&&Array.isArray(e.selection),v=a.forwardRef((e,t)=>{var n,l,v,y;let E=(0,r.w1)(c.gT),w=f(e)?void 0:(null==(n=e.selection)?void 0:n.name)||e.title,b=(0,p.UB)(w),S=e.className||m;if(f(e))return a.createElement("div",{className:S},a.createElement("span",{className:h},a.createElement(o.Tx,{id:"inspect_panel.property.selected",numberOfItems:e.selection.length})));if(!e.selection&&!w)return null;let T=null==(l=e.selection)?void 0:l.id;return(null==(v=e.selection)?void 0:v.type)==="TEXT"?a.createElement("div",{className:S},T&&a.createElement(u.ue,{className:g,guid:T}),a.createElement("span",{className:"inspect_selection_header--headerTextSelectionName--2UZsR text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement(o.Tx,{id:"inspect_panel.property.text"}),"\xa0\xa0"),a.createElement(i.s,{className:s()("inspect_selection_header--headerTextLayerName--PzJwe text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",_),dir:"auto",onPointerDown:b},w)):a.createElement("div",{className:S},T&&a.createElement(u.ue,{className:g,guid:T}),a.createElement(i.g9,{className:s()(h,_),forwardedRef:t,style:{textAlign:"left"},dir:"auto",onPointerDown:b},w),(null==(y=e.selection)?void 0:y.type)==="INSTANCE"&&!e.hideNavigateButton&&a.createElement("div",null,a.createElement(d.y,{instanceAndSublayerGUIDs:E,recordingKey:e.recordingKey})))}),y=()=>{var e;(0,p.IN)();let t=(0,r.w1)(e=>e.mirror.sceneGraphSelection),n=(0,p.QH)(),l=a.useMemo(()=>Object.keys(t),[t]);if(n&&n.isAlive()){let t=n.isState&&(null==(e=n.parentNode)?void 0:e.name)||n.name;return{id:n.guid,name:t,type:n.type}}return 0===l.length?null:l},E=a.forwardRef((e,t)=>{let n=y(),r=e.className||m,l=a.createElement(v,{title:e.title,className:r,selection:n});return e.customButtons?a.createElement("div",{className:"inspect_selection_header--headerSelectionGroup--GLZBB"},l,e.customButtons):l})},518208:(e,t,n)=>{n.d(t,{uq:()=>S});var a=n(307824),r=n(120304),l=n(843184),s=n.n(l),i=n(843148),o=n(560072),c=n(656629),u=n(824960),d=n(967763),p=n(15416),m=n(184252),g=n(902784),h=n(219868),_=n(162280);function f({name:e,value:t,displayValue:n,variable:r,format:l}){if(!r){let n="pixels"===l?m.I7:m.GA;return a.createElement(n,{name:e,value:t})}return a.createElement(m.GA,{name:e,format:l,value:n??t,variable:null==r?void 0:r.variableDisplayName,isSuggestedVariable:null==r?void 0:r.isSuggested,copyValue:null==r?void 0:r.variableDisplayName})}function v(e){if((null==e?void 0:e.length)===1){let t=e[0];return[t,t,t,t]}if((null==e?void 0:e.length)===4)return[e[0],e[1],e[2],e[3]]}function y({name:e,variables:t,value:n,format:r}){let l=v(n);if(!l)return null;let s=(t??[]).map((e,t)=>({value:l[t],format:r,variable:null==e?void 0:e.variableDisplayName,isSuggestedVariable:null==e?void 0:e.isSuggested,variableData:e}));return 4===s.length&&s.some(e=>e.variable)?s.every(e=>e.value===s[0].value&&e.variable===s[0].variable&&e.isSuggestedVariable===s[0].isSuggestedVariable)?a.createElement(m.GA,{name:e,format:s[0].format,value:s[0].value,variable:s[0].variable,copyValue:w(s[0].variableData,s[0].value),isSuggestedVariable:s[0].isSuggestedVariable}):a.createElement(m.GA,{name:e,format:"mixed",value:s,copyValue:s.map((e,n)=>w(t[n],e.value)).join(" ")}):a.createElement(m.GA,{name:e,format:"pixels",value:n})}let E=e=>"string"==typeof e?`${e}px`:(0,m.Ar)(e??0,"px");function w(e,t){return(0,_.qW)(e)?(0,_.am)(e):E(t)}function b(e,t,n,a,r){if(!v(r)||!r)return;let l=[e,t,n,a].map((e,t)=>w(e,r[t]));return l.every(e=>e===l[0])?l[0]:l.join(" ")}function S(){var e;(0,p.IN)();let t=(0,u.QH)(),n=(0,r.w1)(e=>e.mirror.selectionProperties),{padding:{top:l,right:_,bottom:v,left:S},border:{top:T,right:C,bottom:N,left:I},radius:{topLeft:A,topRight:k,bottomRight:P,bottomLeft:M}}=(0,c.oh)(),x=(0,c.a6)(l,_,v,S),O=(0,c.a6)(T,C,N,I),R=(0,c.a6)(A,k,P,M),L=(0,c.Ks)(null==(e=null==t?void 0:t.parentNode)?void 0:e.stackMode),D=(0,c.Ks)(n.stackMode),F=D&&(0,g.Qt)(n.stackPrimaryAlignItems),K=F?void 0:n.stackSpacing,G=K&&K>0?K:void 0,U=F?"space-between":void 0,B=1!==n.opacity?n.opacity:void 0,V=(0,h.Yv)("WIDTH",n.width),H=(0,h.Yv)("HEIGHT",n.height),W=(0,h.Yv)("OPACITY",n.opacity),Y=(0,h.Yv)("STACK_PADDING_TOP",null==x?void 0:x[0]),q=(0,h.Yv)("STACK_PADDING_RIGHT",null==x?void 0:x[1]),X=(0,h.Yv)("STACK_PADDING_BOTTOM",null==x?void 0:x[2]),z=(0,h.Yv)("STACK_PADDING_LEFT",null==x?void 0:x[3]),$=(0,h.Yv)("STACK_SPACING",G),j=(0,h.Yv)("RECTANGLE_TOP_LEFT_CORNER_RADIUS",null==R?void 0:R[0]),Q=(0,h.Yv)("RECTANGLE_TOP_RIGHT_CORNER_RADIUS",null==R?void 0:R[1]),Z=(0,h.Yv)("RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS",null==R?void 0:R[2]),J=(0,h.Yv)("RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS",null==R?void 0:R[3]),ee=(0,h.Yv)("BORDER_TOP_WEIGHT",null==O?void 0:O[0]),et=(0,h.Yv)("BORDER_RIGHT_WEIGHT",null==O?void 0:O[1]),en=(0,h.Yv)("BORDER_BOTTOM_WEIGHT",null==O?void 0:O[2]),ea=(0,h.Yv)("BORDER_LEFT_WEIGHT",null==O?void 0:O[3]),{numSelected:er,width:el,height:es,stackHorizontalSize:ei,stackVerticalSize:eo,x:ec,y:eu,angle:ed,blendMode:ep}=n,em=Object.entries({width:w(V,(0,c.K_)(el||0,ei,D)),height:w(H,(0,c.K_)(es||0,eo,D)),...!L&&{top:eu,left:ec},padding:b(Y,q,X,z,x),gap:w($,G),borderRadius:b(j,Q,Z,J,R),border:(0,i.Ub)().ds_variables_strokes?b(ee,et,en,ea,O):O,justify:U,opacity:w(W,B),angle:ed?ed.toLocaleString("en",m.y8):void 0}).filter(([e,t])=>!!t).map(([e,t])=>[s()(e),"opacity"===e&&"number"==typeof t?(0,m.Ar)(t,""):"number"==typeof t?E(t):Array.isArray(t)?t.map(E).join(", "):(t??"").toString()]),eg=a.useCallback(()=>p.Cy.copyPairs(em,{suffix:";"}),[em]);return 1!==er?null:a.createElement(m.e_,{title:(0,o.t)("inspect_panel.properties.layout"),copyAllValue:eg,recordingKey:"properties",padding:m.CK.EXTRA_BOTTOM},a.createElement(f,{name:(0,o.t)("inspect_panel.properties.width"),variable:V,format:"pixels",value:el||0,displayValue:(0,c.K_)(el||0,ei,D)}),a.createElement(f,{name:(0,o.t)("inspect_panel.properties.height"),variable:H,format:"pixels",value:es||0,displayValue:(0,c.K_)(es||0,eo,D)}),!L&&a.createElement(a.Fragment,null,a.createElement(m.I7,{name:(0,o.t)("inspect_panel.properties.top"),value:eu}),a.createElement(m.I7,{name:(0,o.t)("inspect_panel.properties.left"),value:ec})),a.createElement(y,{name:(0,o.t)("inspect_panel.properties.radius"),variables:[j,Q,Z,J],format:"pixels",value:R}),(0,i.Ub)().ds_variables_strokes?a.createElement(y,{name:(0,o.t)("inspect_panel.properties.border"),variables:[ee,et,en,ea],format:"pixels",value:O}):a.createElement(m.I7,{name:(0,o.t)("inspect_panel.properties.border"),value:O}),a.createElement(m.GA,{name:(0,o.t)("inspect_panel.properties.justify"),value:U}),D&&a.createElement(a.Fragment,null,a.createElement(y,{name:(0,o.t)("inspect_panel.properties.padding"),variables:[Y,q,X,z],format:"pixels",value:x}),a.createElement(f,{name:(0,o.t)("inspect_panel.properties.gap"),variable:$,format:"pixels",value:G})),a.createElement(m.PE,{name:(0,o.t)("inspect_panel.properties.rotation"),value:ed}),a.createElement(m.mO,{redact:1,name:(0,o.t)("inspect_panel.properties.opacity"),variable:null==W?void 0:W.variableDisplayName,value:B}),a.createElement(d.g1,{blendMode:ep}))}},893704:(e,t,n)=>{n.d(t,{_:()=>b,e:()=>S});var a=n(307824),r=n(120304),l=n(843148),s=n(537096),i=n(560072),o=n(865916),c=n(15416),u=n(540696),d=n(967763),p=n(184252),m=n(884728),g=n(784340),h=n(668348),_=n(399260);function f({value:e,varData:t}){var n;let r=null==(n=null==t?void 0:t.value)?void 0:n.alias,s=(0,g.c1)(r?h.MR(r):void 0);return(0,l.Ub)().ds_variables_strokes&&s?a.createElement("div",{className:"value_or_variable_pill--variablePillContainer--198BC"},a.createElement(_.c,{text:e,tooltip:s.name})):a.createElement(a.Fragment,null,e)}let v="shadows_panel--shadowContent--Dr9RG",y="shadows_panel--shadowLabel--5-LtV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",E="shadows_panel--shadowValue--V8Kzx text--fontPos11--2LvXf text--_fontBase--QdLsd";var w=n(513668);function b(e){let t=(0,c.kn)(e.color,(0,l.Ub)().ds_variables_strokes?e.colorVar:void 0),n=a.useMemo(()=>new m.cH,[]).format(e.type),r=c.Cy.useCopyShadow(e),{spread:o,radius:u,offset:g,blendMode:h,visible:_,radiusVar:b,spreadVar:S,xVar:T,yVar:C}=e;if(!_)return null;let N="DROP_SHADOW"===e.type||"INNER_SHADOW"===e.type;return a.createElement(a.Fragment,null,a.createElement(p.kZ,{className:"shadows_panel--shadowNameContainer--5hoPK inspect_panels--tallRow--W9eni text--fontPos11--2LvXf text--_fontBase--QdLsd",labelClassName:"shadows_panel--shadowNameLabel--TxKd3",label:e.styleName,defaultLabel:n},a.createElement(s.A,{className:"shadows_panel--shadowSVG--2di9W",svg:w.c})),N&&a.createElement(p.GA,{copyValue:r,className:v},a.createElement("div",{className:y},a.createElement(i.Tx,{id:"inspect_panel.shadows.x"})),a.createElement("div",{className:E},a.createElement(f,{value:(null==g?void 0:g.x)??0,varData:T})),a.createElement("div",{className:y},a.createElement(i.Tx,{id:"inspect_panel.shadows.y"})),a.createElement("div",{className:E},a.createElement(f,{value:(null==g?void 0:g.y)??0,varData:C}))),a.createElement(p.GA,{copyValue:r,className:v},a.createElement("div",{className:y},a.createElement(i.Tx,{id:"inspect_panel.shadows.blur"})),a.createElement("div",{className:E},a.createElement(f,{value:u,varData:b})),N&&a.createElement(a.Fragment,null,a.createElement("div",{className:y},a.createElement(i.Tx,{id:"inspect_panel.shadows.spread_tooltip"})),a.createElement("div",{className:E},a.createElement(f,{value:o,varData:S})))),N&&a.createElement(a.Fragment,null,a.createElement(d.g1,{blendMode:h}),a.createElement(d.Y3,{formattableColors:t})))}function S(){let e=(0,r.w1)(e=>e.mirror.selectionProperties.numSelected)||0,t=function(){let e=(0,r.w1)(e=>e.mirror.selectionProperties.effects),t=(0,r.w1)(e=>(0,u.uc)((0,o.G)(e.mirror.selectionProperties,"inheritEffectStyleKey"),void 0)),n=(0,c.wB)();return a.useMemo(()=>!n||(0,u.Er)(e)?[]:[{effects:(e||[]).filter(e=>"INNER_SHADOW"===e.type||"DROP_SHADOW"===e.type).filter(e=>e.visible).map((e,n)=>({name:t,...e,id:`effect-${n}`})),styleName:t}],[n,e,t])}(),n=t[0],l=c.Cy.useCopyAllShadows((null==n?void 0:n.effects)??[]),s=a.useMemo(()=>a.createElement(d.Yb,{id:"shadows-panel"}),[]),m=a.useCallback((e,t)=>a.createElement(b,{styleName:t,key:e.id,id:e.id,type:e.type,offset:e.offset,radius:e.radius,spread:e.spread,color:e.color,blendMode:e.blendMode,visible:e.visible,colorVar:e.colorVar,xVar:e.xVar,yVar:e.yVar,radiusVar:e.radiusVar,spreadVar:e.spreadVar,showShadowBehindNode:e.showShadowBehindNode}),[]);return 1!==e||!t||t.length<1||n.effects.length<1?null:a.createElement(p.e_,{title:(0,i.t)("inspect_panel.shadows.title"),recordingKey:"shadows",copyAllValue:l,additionalHeaders:s},a.createElement(p.K2,{limit:2,data:n.effects,renderElement:m,extras:n.styleName}))}},230452:(e,t,n)=>{n.d(t,{C:()=>N});var a=n(307824),r=n(120304),l=n(4580),s=n(594192),i=n(865916),o=n(560072),c=n(762820),u=n(540696),d=n(507076),p=n(939540),m=n(97007),g=n(791372),h=n(222720),_=n(967763),f=n(15416),v=n(835764),y=n(184252);let E=()=>{let e=(0,r.w1)(e=>e.mirror.selectionProperties.strokePaints),t=!e||(0,u.Er)(e)?[]:e.filter(e=>e.visible),n=(0,f.YQ)(e=>(0,i.G)(e.mirror.selectionProperties,"inheritFillStyleKeyForStroke")),o=(0,r.w1)(m.qI),h=(0,d.A9)("inheritFillStyleKeyForStroke"),v=h&&(0,u.EH)(h)?(0,p.ei)(h,[],o):void 0,y=(0,r.w1)(e=>e.mirror.selectionProperties.borderSharedWeight||e.mirror.selectionProperties.strokeWeight)||1,E=(0,l.q)(e=>({borderTopWeight:e.mirror.selectionProperties.borderTopWeight,borderRightWeight:e.mirror.selectionProperties.borderRightWeight,borderBottomWeight:e.mirror.selectionProperties.borderBottomWeight,borderLeftWeight:e.mirror.selectionProperties.borderLeftWeight})),b=(0,r.w1)(e=>e.mirror.selectionProperties.strokeAlign)||"OUTSIDE",C=(0,f.wB)(),N=(0,g.G)(),I=t.filter(_.A3).map(e=>(0,g.me)(e,N,c.EDU.STROKE)),A=a.useMemo(()=>v&&n?[(0,g.Cy)(n,v,I)]:I,[v,n,I]),k=(0,r.w1)(w);return a.useMemo(()=>{if(!C||A.length<1||!y)return[];let e=S(y,[E.borderTopWeight,E.borderRightWeight,E.borderBottomWeight,E.borderLeftWeight].filter(s.aI));return e?[{id:C,strokeWeight:e,strokeColors:A,strokeAlign:T(b),borderCSSKey:k}]:[]},[C,b,y,A,k,E])},w=e=>{let t=e.mirror.selectionProperties;if(!(0,u.Er)(t.borderSharedWeight)){if(!t.borderStrokeWeightsIndependent)return"border";if(t.borderTopVisible)return"border-top";if(t.borderBottomVisible)return"border-bottom";if(t.borderLeftVisible)return"border-left";if(t.borderRightVisible)return"border-right"}},b=e=>{switch(e){case"border":return(0,o.t)("inspect_panel.strokes.all_sides");case"border-top":return(0,o.t)("inspect_panel.strokes.top_side");case"border-bottom":return(0,o.t)("inspect_panel.strokes.bottom_side");case"border-left":return(0,o.t)("inspect_panel.strokes.left_side");case"border-right":return(0,o.t)("inspect_panel.strokes.right_side");default:return}},S=(e,t)=>(0,u.Er)(e)?t.some(e=>(0,u.Er)(e))?(0,o.t)("fullscreen.mixed"):t.map(e=>(0,y.Ar)(e,"px")).join(", "):`${(0,y.Ar)(e,"px")}`,T=e=>{switch(e){case"OUTSIDE":return(0,o.t)("inspect_panel.strokes.outer_border");case"INSIDE":return(0,o.t)("inspect_panel.strokes.inner_border");case"CENTER":return(0,o.t)("inspect_panel.strokes.center_border");default:return}};function C(e){let t=(0,v.W)(e.strokeAlign),n=e.strokeWeight.split(",").join(""),r=f.Cy.useStrokeCopyValue(n,e.strokeColors,e.borderCSSKey);return a.createElement("div",null,a.createElement(y.GA,{copyValue:r,className:"strokes_panel--strokeLabelRow--UVeiF inspect_panels--basePropertyRow--dLxSz inspect_panels--_basePropertyRow--StmAE text--fontPos11--2LvXf text--_fontBase--QdLsd inspect_panels--tallRow--W9eni"},a.createElement("div",{className:"strokes_panel--strokeWeightIcon--gyv-r"},a.createElement(h.KY,{iconState:"ACTIVE"})),a.createElement("span",null,e.strokeWeight),e.borderCSSKey&&a.createElement("span",{className:"strokes_panel--strokeSide--JjXb2 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",...t},b(e.borderCSSKey))),a.createElement(_.Y3,{formattableColors:e.strokeColors}),e.strokeAlign&&a.createElement(y.GA,{className:"strokes_panel--strokeAlignmentRow--5q8cB inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni"},a.createElement("span",{className:"strokes_panel--strokeAlignment--mT7M- text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",...t},e.strokeAlign)))}function N(){let e=(0,r.w1)(e=>e.mirror.selectionProperties.numSelected)||0,t=E(),n=a.useMemo(()=>a.createElement(_.Yb,{id:"strokes-panel"}),[]),l=f.Cy.useCopyAllStrokes(t);return 1!==e||t.length<1?null:a.createElement(y.e_,{title:(0,o.t)("inspect_panel.strokes.title"),recordingKey:"borders",additionalHeaders:n,copyAllValue:l},a.createElement(y.K2,{limit:2,data:t,renderElement:C}))}},71340:(e,t,n)=>{n.d(t,{I:()=>E});var a=n(307824),r=n(120304),l=n(843148),s=n(560072),i=n(762820),o=n(15416),c=n(219868),u=n(162280),d=n(184252),p=n(791844);let m=e=>{if("CAP_HEIGHT"===e)return(0,s.t)("inspect_panel.typography.cap_height")},g=e=>{if(e)return(0,s.t)("inspect_panel.typography.hanging_punctuation")},h=e=>{switch(e){case"RIGHT":return(0,s.t)("inspect_panel.typography.align_right");case"CENTER":return(0,s.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,s.t)("inspect_panel.typography.align_justified");default:return}},_=e=>{if(e&&e.value)switch(e.units){case"PERCENT":return`${(0,o.Y$)(e.value/100,4)}em`;case"PIXELS":return`${e.value}px`;default:return}};function f(e,t,n){if((0,u.qW)(e)||t)return(0,u.qW)(e)?(0,u.am)(e):`${t}${n??""}`}function v({name:e,maybeVariable:t,...n}){return(0,l.Ub)().variables_typography&&(0,l.Ub)().variables_typography_dev_mode?a.createElement(d.GA,{className:p.Ur,name:e,variable:null==t?void 0:t.variableDisplayName,isSuggestedVariable:null==t?void 0:t.isSuggested,copyValue:null==t?void 0:t.variableDisplayName,...n}):a.createElement(d.GA,{...n,className:p.Ur,name:e})}function y(e,{numFonts:t,extraHeader:n}){let l=function(e){var t,n,a;let l=(0,c.oH)("FONT_FAMILY",e.fontFamily,e.variableConsumptionMap),s=(0,c.Yv)("FONT_SIZE",e.fontSize,e.variableConsumptionMap),o=(0,c.Yv)("FONT_STYLE",e.fontWeight,e.variableConsumptionMap),u=(null==(t=o.variable)?void 0:t.resolvedType)===i.y6c.FLOAT?o:{},d=(0,c.Yv)("LINE_HEIGHT",e.lineHeight,e.variableConsumptionMap),p=(0,c.Yv)("LETTER_SPACING",(null==(n=e.letterSpacing)?void 0:n.units)!=="PERCENT"?null==(a=e.letterSpacing)?void 0:a.value:void 0,e.variableConsumptionMap),m=(0,r.w1)(e=>e.mirror.selectionProperties.paragraphSpacing),g=(0,c.Yv)("PARAGRAPH_SPACING",m,e.variableConsumptionMap),h=(0,r.w1)(e=>e.mirror.selectionProperties.paragraphIndent);return{fontFamilyVariable:l,fontWeightVariable:u,fontSizeVariable:s,lineHeightVariable:d,letterSpacingVariable:p,paragraphSpacingVariable:g,paragraphIndentVariable:(0,c.Yv)("PARAGRAPH_INDENT",h,e.variableConsumptionMap)}}(e),{fontFamily:u,fontWeight:y,fontStyle:E,fontSize:w,styleName:b,leadingTrim:S,lineHeight:T,letterSpacing:C,textAlignHorizontal:N,opticalSize:I,fontVariationsDescription:A,isStyleSoftDeleted:k,hangingPunctuation:P,hangingList:M,substring:x}=e,O=(0,r.w1)(e=>e.mirror.selectionProperties.paragraphSpacing),R=(0,r.w1)(e=>e.mirror.selectionProperties.paragraphIndent),L=k?null:b,D=S&&m(S),F=N&&h(N),K=P&&g(P),G=M&&g(M),U=a.useCallback(()=>{var t;return e?o.Cy.copyPairs([e.isStyleSoftDeleted?null:["//styleName",e.styleName],["font-family",f(null==l?void 0:l.fontFamilyVariable,e.fontFamily)],["font-size",f(null==l?void 0:l.fontSizeVariable,(0,o.Y$)(e.fontSize,2),"px")],["font-style",e.fontStyle],["font-weight",e.fontWeight],["line-height",f(null==l?void 0:l.lineHeightVariable,(0,o.Y$)(e.lineHeight,2),"px")],["letter-spacing",f(null==l?void 0:l.letterSpacingVariable,_(e.letterSpacing))],["text-align",null==(t=e.textAlignHorizontal)?void 0:t.toLocaleLowerCase()],["font-variation-settings",e.fontVariationsCss]].filter(e=>!!e&&!!e[1]),{suffix:";"}):""},[e,l]),B=0===e.index,V=e.index===t-1,H=(null==x?void 0:x.trim())||(0,s.t)("inspect_panel.typography.span_whitespace");return a.createElement(d.e_,{title:B?(0,s.t)("inspect_panel.typography.title"):x?(0,s.t)("inspect_panel.typography.span_contents",{contents:H}):(0,s.t)("inspect_panel.typography.span"),thinTitle:!B,noBorder:!0,padding:V?void 0:d.CK.NO_BOTTOM,copyAllValue:U,recordingKey:B?"typography":`typography${e.index}`},B&&n,L&&a.createElement(d.GA,{className:p.Ur,name:(0,s.t)("inspect_panel.typography.name"),value:L}),a.createElement(v,{name:(0,s.t)("inspect_panel.typography.font"),maybeVariable:l.fontFamilyVariable,value:u}),a.createElement(v,{name:(0,s.t)("inspect_panel.typography.weight"),maybeVariable:l.fontWeightVariable,value:y}),a.createElement(d.GA,{className:p.Ur,name:(0,s.t)("inspect_panel.typography.style"),value:E}),a.createElement(v,{name:(0,s.t)("inspect_panel.typography.size"),maybeVariable:l.fontSizeVariable,value:w,format:"pixels"}),"NONE"!==S&&a.createElement(d.I7,{className:p.Ur,name:(0,s.t)("inspect_panel.typography.leading_trim"),value:D}),a.createElement(v,{name:(0,s.t)("inspect_panel.typography.line_height"),maybeVariable:l.lineHeightVariable,value:T,format:"pixels"}),!!O&&a.createElement(v,{name:(0,s.t)("inspect_panel.typography.paragraph_spacing"),maybeVariable:l.paragraphSpacingVariable,value:O,format:"pixels"}),!!R&&a.createElement(v,{name:(0,s.t)("inspect_panel.typography.paragraph_indent"),maybeVariable:l.paragraphIndentVariable,value:R,format:"pixels"}),C&&0!==C.value&&a.createElement(v,{name:(0,s.t)("inspect_panel.typography.letter"),maybeVariable:l.letterSpacingVariable,value:C,format:"fig_number"}),F&&a.createElement(d.GA,{className:p.Ur,name:(0,s.t)("inspect_panel.typography.align"),value:F}),K&&a.createElement(d.GA,{className:p.Ur,name:(0,s.t)("inspect_panel.typography.punctuation"),value:K}),G&&a.createElement(d.GA,{className:p.Ur,name:(0,s.t)("inspect_panel.typography.hanging_list"),value:G}),void 0!==I&&a.createElement(d.I7,{className:p.Ur,name:(0,s.t)("inspect_panel.typography.optical_size"),value:I}),A&&a.createElement(d.GA,{className:p.Ur,name:(0,s.t)("inspect_panel.typography.variation"),value:A}))}function E(){let e=(0,r.w1)(e=>e.mirror.selectionProperties.numSelected)||0,t=function(){let e=(0,r.w1)(e=>e.mirror.selectionProperties.selectedFonts),t=a.useMemo(()=>{if(!e||!e.fonts)return;let t=new Set;return e.fonts.filter(e=>!!e.substring&&(!e.parentStyleId||!t.has(e.parentStyleId)&&(t.add(e.parentStyleId),!0))).sort((e,t)=>(e.startPos??0)-(t.startPos??0)).map((e,t)=>({...e,index:t}))},[e]);if(e&&t)return{fonts:t,incompleteResults:e.incompleteResults}}();return!t||(null==t?void 0:t.fonts.length)<1?null:a.createElement("div",{className:p.ui},a.createElement(d.K2,{limit:2,data:t.fonts,renderElement:y,extras:{numFonts:t.fonts.length,extraHeader:t.incompleteResults?a.createElement("div",{className:p.K0},a.createElement(s.Tx,{id:"inspect_panel.typography.too_many_selected",numSelected:e})):null}}))}},459624:(e,t,n)=>{n.d(t,{GK:()=>eg,Gy:()=>eE,En:()=>ey,oU:()=>eS});var a=n(307824),r=n(602216),l=n(120304),s=n(280584),i=n(173885),o=n(515724),c=n(125504),u=n.n(c),d=n(250008),p=n(972920),m=n(980068),g=n(329956),h=n(570464),_=n(389160),f=n(130176),v=n(103839),y=n(760700),E=n(537096),w=n(560072),b=n(329120),S=n(907236),T=n(340628),C=n(753432),N=n(23604),I=n(585508),A=n(954636),k=n(471332),P=n(762820),M=n(229372),x=n(540696),O=n(4388),R=n(608072),L=n(646740),D=n(142548),F=n(525064),K=n(971152),G=n(581716),U=n(888632),B=n(309328),V=n(282528),H=n(101040),W=n(24588),Y=n(235020),q=n(184e3),X=n(471052);let z="export_settings--row--fOVOe",$="export_settings--settingsModalRowLabel--cx2Si",j=e=>({format:t=>{switch(t){case"DOCUMENT":return(0,w.t)("fullscreen.properties_panel.export_settings_color_profile.document",{documentColorProfile:e===P.AXT.DISPLAY_P3?(0,w.t)("fullscreen.properties_panel.export_settings_color_profile.p3"):(0,w.t)("fullscreen.properties_panel.export_settings_color_profile.srgb")});case"SRGB":return(0,w.t)("fullscreen.properties_panel.export_settings_color_profile.srgb");case"DISPLAY_P3_V4":return(0,w.t)("fullscreen.properties_panel.export_settings_color_profile.display_p3")}}});class Q extends Y.M1{}class Z extends Y.cb{}function J({id:e,value:t,suffixClassName:n,onSuffixChange:r,recordingKey:l}){let s=a.useCallback(e=>{r(e.target.value)},[r]),i=(0,q._O)(q.OA.READY);return a.createElement(_.g,{name:"export_settings_suffix_text_input"},a.createElement(W.gf,{id:e,className:n,placeholder:i?(0,w.t)("fullscreen.properties_panel.export_suffix_placeholder"):(0,w.t)("fullscreen.properties_panel.export_suffix"),value:t,onChange:s,onMouseDown:V.Ii,recordingKey:l}))}class ee extends a.PureComponent{constructor(){super(...arguments),this.close=()=>{this.props.dispatch(S.U5()),I.CA.deselectProperty()},this.onColorProfileChange=e=>{let t=(0,x.uc)(this.props.exportSettings,{});this.props.onChange({...t,colorProfile:e}),(0,d.we)("export_color_profile_change",{colorProfile:e,assetType:t.imageType})},this.onContentsOnlyChange=e=>{let t=(0,x.uc)(this.props.exportSettings,{});this.props.onChange({...t,contentsOnly:e})},this.onSVGIDChange=e=>{let t=(0,x.uc)(this.props.exportSettings,{});this.props.onChange({...t,svgIDMode:e?"ALWAYS":"IF_NEEDED"})},this.onSVGTextOutlinesChange=e=>{let t=(0,x.uc)(this.props.exportSettings,{});this.props.onChange({...t,svgOutlineText:e})},this.onUseAbsoluteBoundsChange=e=>{let t=(0,x.uc)(this.props.exportSettings,{});this.props.onChange({...t,useAbsoluteBounds:e})},this.onSVGSimplifyStrokeChange=e=>{let t=(0,x.uc)(this.props.exportSettings,{});this.props.onChange({...t,svgForceStrokeMasks:!e})}}render(){var e,t;let n=(0,x.uc)(this.props.exportSettings,null);if(!n)return null;let r=new v.Cg(null==(e=this.props.pickerShown)?void 0:e.initialX,null==(t=this.props.pickerShown)?void 0:t.initialY),l="SVG"===n.imageType&&a.createElement("div",null,a.createElement(W.WA,{className:z},a.createElement(U.y,{checked:"ALWAYS"===n.svgIDMode,onChange:this.onSVGIDChange,label:a.createElement(B.i,{"data-tooltip-type":D.wL.TEXT,"data-tooltip":(0,w.t)("fullscreen.properties_panel.export_layer_names_using_id_attributes")},a.createElement(w.Tx,{id:"fullscreen.properties_panel.include_id_attribute"})),recordingKey:h.Mx(this.props,"svgID")})),P.i46.shouldShowTextNodeExportOptions()&&a.createElement(W.WA,{className:z},a.createElement(U.y,{checked:!!n.svgOutlineText,onChange:this.onSVGTextOutlinesChange,label:a.createElement(B.i,{"data-tooltip-type":D.wL.TEXT,"data-tooltip":(0,w.t)("fullscreen.properties_panel.export_text_as_outlined_path_element")},a.createElement(w.Tx,{id:"fullscreen.properties_panel.outline_text"})),recordingKey:h.Mx(this.props,"svgTextOutlines")})),P.i46.isStrokeMaskableAsSVG()&&a.createElement(W.WA,{className:z},a.createElement(U.y,{checked:!n.svgForceStrokeMasks,onChange:this.onSVGSimplifyStrokeChange,label:a.createElement(B.i,{"data-tooltip-type":D.wL.TEXT,"data-tooltip":(0,w.t)("fullscreen.properties_panel.export_stroke_as_inlined_path_element")},a.createElement(w.Tx,{id:"fullscreen.properties_panel.simplify_stroke"})),recordingKey:h.Mx(this.props,"svgSimplifyStroke")})));return a.createElement(H.G0,{title:(0,w.t)("fullscreen.properties_panel.export"),initialPosition:r,headerSize:"small",onClose:this.close,recordingKey:h.Mx(this.props,"modal")},a.createElement(f.u,{name:"export_settings_modal"},a.createElement(W.I7,null,this.props.isUI3&&a.createElement(X.a,{left:a.createElement(W.iM,{htmlFor:"export-settings-suffix",className:$},`${(0,w.t)("fullscreen.properties_panel.export_suffix_label")}: `),right:a.createElement(J,{id:"export-settings-suffix",value:n.suffix||"",onSuffixChange:this.props.onSuffixChange,suffixClassName:this.props.suffixClassName,recordingKey:h.Mx("suffix")})}),a.createElement(k.ME,null,({documentExportColorProfile:e})=>this.props.isUI3?a.createElement(X.a,{left:a.createElement(et,null),right:a.createElement(en,{documentExportColorProfile:e,onColorProfileChange:this.onColorProfileChange,...this.props})}):a.createElement(W.WA,{className:"export_settings--colorProfileSelectRow--S5Ugw"},a.createElement(et,null),a.createElement(en,{documentExportColorProfile:e,onColorProfileChange:this.onColorProfileChange,...this.props}))),"PDF"===n.imageType?null:a.createElement(W.WA,{className:z},a.createElement(_.g,{name:"export_settings_use_contents_only_checkbox"},a.createElement(U.y,{checked:!!n.contentsOnly,onChange:this.onContentsOnlyChange,label:a.createElement(B.i,null,a.createElement(w.Tx,{id:"fullscreen.properties_panel.ignore_overlapping_layers"})),recordingKey:h.Mx(this.props,"contentsOnly")}))),P.i46.shouldShowTextNodeExportOptions()&&a.createElement(W.WA,{className:z},a.createElement(_.g,{name:"export_settings_use_absolute_bounds_checkbox"},a.createElement(U.y,{checked:!!n.useAbsoluteBounds,onChange:this.onUseAbsoluteBoundsChange,label:a.createElement(B.i,null,a.createElement(w.Tx,{id:"fullscreen.properties_panel.include_bounding_box"})),recordingKey:h.Mx(this.props,"useAbsoluteBounds")}))),l)))}}function et(){return a.createElement(W.iM,{className:$,htmlFor:"export-settings-color-profile"},`${(0,w.t)("fullscreen.properties_panel.export_settings_color_profile")}: `)}function en({documentExportColorProfile:e,onColorProfileChange:t,...n}){let r=(0,x.uc)(n.exportSettings,null);return null===r?null:a.createElement(_.g,{name:"export_settings_color_profile_select"},a.createElement(Q,{id:"export-settings-color-profile",dataTestId:"export-settings-color-profile",dropdownWidth:160,chevronClassName:"export_settings--colorProfileSelectChevron--3UGt5",inputClassName:"export_settings--colorProfileSelectInput--0GOha",property:r.colorProfile??"DOCUMENT",formatter:j(e),onChange:t,dispatch:n.dispatch,dropdownShown:n.dropdownShown,onMouseDown:V.Ii,recordingKey:h.Mx(n,"colorProfile")},a.createElement(Z,{value:"DOCUMENT",recordingKey:h.Mx(n,"colorProfile","document")}),a.createElement(Z,{value:"SRGB",recordingKey:h.Mx(n,"colorProfile","srgb")}),a.createElement(Z,{value:"DISPLAY_P3_V4",recordingKey:h.Mx(n,"colorProfile","display-p3-v4")})))}ee.displayName="ExportSettings";var ea=n(241645),er=n(474232),el=n(985584),es=n(45676),ei=n(266724),eo=n(916924);function ec(e){return"JPEG"===e.imageType||"PNG"===e.imageType||"PDF"===e.imageType?{imageType:e.imageType,contentsOnly:e.contentsOnly??!0,useAbsoluteBounds:e.useAbsoluteBounds??!1,suffix:e.suffix||"",constraint:e.constraint||{type:"CONTENT_SCALE",value:1},colorProfile:e.colorProfile??"DOCUMENT"}:"SVG"===e.imageType?{imageType:e.imageType,contentsOnly:e.contentsOnly??!0,useAbsoluteBounds:e.useAbsoluteBounds??!1,suffix:e.suffix||"",constraint:e.constraint||{type:"CONTENT_SCALE",value:1},svgOutlineText:e.svgOutlineText??!0,svgIDMode:e.svgIDMode||"IF_NEEDED",svgForceStrokeMasks:e.svgForceStrokeMasks??!0,colorProfile:e.colorProfile??"DOCUMENT"}:void(0,eo.gy)(e.imageType)}let eu="export_panel--suffix--1vxn-";var ed=n(1196),ep=n(242632),em=n(5080);class eg extends a.PureComponent{constructor(){super(...arguments),this.exportList=(0,m.ei)(e=>(0,x.uc)(e,[]).map(ec)),this.onExportChange=(e,t)=>{I.CA.updateSelectionProperties({exportSettings:e},{shouldCommit:t})},this.addProperty=()=>{let e=this.exportList(this.props.exportSettings),t=function(e){let t=!1,n=!1,a=!1;for(let r of e)("JPEG"===r.imageType||"PNG"==r.imageType)&&"CONTENT_SCALE"===r.constraint.type?(1===r.constraint.value&&(t=!0),2===r.constraint.value&&(n=!0),3===r.constraint.value&&(a=!0)):t=!0;let r={contentsOnly:!0,imageType:"PNG",constraint:{type:"CONTENT_SCALE",value:1},suffix:"",useAbsoluteBounds:!1,colorProfile:"DOCUMENT"};return t&&(n?a||(r.constraint.value=3,r.suffix="@3x"):(r.constraint.value=2,r.suffix="@2x")),r}(e);this.onExportChange(e.concat([t])),(0,d.we)("editor-export-panel-add",{selectionIsCanvas:0===this.props.numSelected})},this.onClickExport=()=>{if((0,d.we)("Export Panel Export Clicked"),0===this.props.numSelected)(0,d.we)("Export Picker Opened",{from:"export-panel"}),this.props.dispatch(S.is({id:C.Oe}));else{let e=[this.props.currentPage],t=(0,x.uc)(this.props.exportSettings,[]);M.qj.includeOutsideContents(t)||(e=Object.keys(this.props.sceneGraphSelection)),(0,L.E1)(L.Cm.Export,this.props.saveAsState,this.props.dispatch,"export-selected-exportables-direct",e,"export-selected-exportables-direct"),this.props.dispatch(b._I())}},this._checkboxAndButtonRow=new R.s(()=>{var e;let t="";if(0===this.props.numSelected||null==this.props.numSelected){let{title:n}=(0,el.I5)("CANVAS","",(null==(e=this.props.openFile)?void 0:e.name)||(0,w.t)("fullscreen.fullscreen_view_selector.untitled"),[]);t=(0,w.t)("fullscreen.properties_panel.export_title",{title:n})}else if(1===this.props.numSelected){let{title:e}=(0,el.I5)("RECTANGLE",this.props.singleNodeName,"",[]);t=this.props.standalone?(0,w.t)("fullscreen.properties_panel.export"):(0,w.t)("fullscreen.properties_panel.export_title",{title:e})}else t=(0,w.t)("fullscreen.properties_panel.export_this_props_num_selected_layers",{numSelected:this.props.numSelected});return a.createElement(er.W,{onClick:this.onClickExport,key:"export-button",recordingKey:h.Mx(this.props,"export")},a.createElement(y.s$,{text:t,tooltipPropsWhenTruncated:{"data-tooltip-type":D.wL.TEXT,"data-tooltip":t}}))}),this._shouldRenderPreviewThumbnail=()=>(0,x.uc)(this.props.exportSettings,[]).length>0,this._previewThumbnail=new R.s(()=>{let e=this.props.exportSettings[0].useAbsoluteBounds||!1;return a.createElement(k.ME,null,({documentExportColorProfile:t})=>a.createElement(eA,{key:"preview",shouldComputeThumbnails:this._shouldRenderPreviewThumbnail,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:this.props.currentPage,numSelected:this.props.numSelected,recordingKey:h.Mx(this.props,"previewThumbnail"),useAbsoluteBounds:e,panelWidth:this.props.panelWidth,colorProfile:this.props.exportSettings&&!(0,x.Er)(this.props.exportSettings)?(0,A.M)(this.props.exportSettings,t):t}))})}static singleNodeNameFrom(e){return 1===e.numSelected&&e.exportSettings&&(0,x.EH)(e.exportSettings)&&e.exportSettings.length>0&&null!=e.name?e.name.slice(0,64):""}render(){let e=this.exportList(this.props.exportSettings);return a.createElement(f.u,{name:"export_panel"},a.createElement(W.sF,{className:u()({"export_panel--standalonePanel--wRhCv":this.props.standalone,"export_panel--emptyStandalonePanel--b6VB5 export_panel--standalonePanel--wRhCv":this.props.standalone&&0===e.length})},a.createElement(e_,{title:this.props.title,standalone:this.props.standalone,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,openFile:this.props.openFile,propertyList:e,onChange:this.onExportChange,currentSelectedProperty:this.props.currentSelectedProperty,selectedPropertyType:P.cf6.EXPORT,addProperty:this.addProperty,recordingKey:h.Mx(this.props,"exportList"),isMixed:(0,x.Er)(this.props.exportSettings)}),this._checkboxAndButtonRow.render(e.length>0||(0,x.Er)(this.props.exportSettings)),this._previewThumbnail.render(this._shouldRenderPreviewThumbnail())))}}function eh(e){let{selectionHandler:t}=e,n=a.useRef(null),r=(0,q._O)(q.OA.READY);return a.createElement("div",{className:"export_panel--selectionPropertiesHeader--tU0HU"},a.createElement(G.sz,{selection:t,onChange:e.onChange,addProperty:e.addProperty,overrideAddPropertyTooltip:r?(0,w.t)("fullscreen.properties_panel.section_exports.tooltip_addExportSettings"):void 0,isStylesPickerShown:!!e.pickerShown,showRemoveButton:!r,recordingKey:e.recordingKey,parent:n},a.createElement(es.u,{title:e.title,ref:n})))}function e_(e){let t=(0,l.OY)(),{selectedPropertyType:n,dropdownShown:r,pickerShown:s,onChange:i,propertyList:o}=e,c=h.vL(e),u=(0,x.uc)(e.propertyList,[]).length<=1,d=(0,q._O)(q.OA.READY),p=a.useCallback(e=>{t(S.U5()),i((0,x.uc)(o,[]).filter((t,n)=>n!==e)),I.CA.deselectProperty()},[t,i,o]),m=a.useCallback((e,l,i,o,d,m,g,h,_)=>a.createElement(eN,{key:`export-${l}`,id:`${n}-${l}`,index:l,singletonRow:u,selectedPropertyType:n,exportSetting:e,selected:i,isDragging:o,hasFocus:d,onChange:m,onMouseDown:g,onMouseMove:h,onMouseUp:_,onRemoveExport:()=>p(l),dispatch:t,dropdownShown:r,pickerShown:s,recordingKey:c(l)}),[n,u,t,r,s,c,p]),g=e.standalone?a.memo(t=>a.createElement(eh,{...e,...t})):void 0;return a.createElement(G.Ss,{title:e.title||(0,w.t)("fullscreen.properties_panel.export"),openFile:e.openFile,propertyList:e.propertyList,onChange:e.onChange,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:e.selectedPropertyType,addProperty:e.addProperty,overrideAddPropertyTooltip:d?(0,w.t)("fullscreen.properties_panel.section_exports.tooltip_addExportSettings"):void 0,renderProperty:m,pickerShown:e.pickerShown,dispatch:e.dispatch,showRemoveButton:!d,recordingKey:e.recordingKey,renderHeader:e.standalone?g:void 0,stylePickerShown:{isShown:!1},isMixed:e.isMixed})}eg.notifierName="ExportNotifier",e_.displayName="ExportList";class ef extends K.Q1{}class ev extends Y.cb{}class ey extends Y.M1{}class eE extends Y.cb{}let ew=[{type:"CONTENT_SCALE",value:.5},{type:"CONTENT_SCALE",value:.75},{type:"CONTENT_SCALE",value:1},{type:"CONTENT_SCALE",value:1.5},{type:"CONTENT_SCALE",value:2},{type:"CONTENT_SCALE",value:3},{type:"CONTENT_SCALE",value:4},{type:"CONTENT_WIDTH",value:512},{type:"CONTENT_HEIGHT",value:512}],eb=new N.G4,eS={format:e=>{switch(e){case"PNG":return"PNG";case"JPEG":return"JPG";case"SVG":return"SVG";case"PDF":return"PDF"}}},eT=e=>e.stopPropagation();function eC({id:e,recordingKey:t,exportSetting:n,pickerShown:r,dropdownShown:o,onConstraintChange:c,onImageTypeChange:u,onSuffixChange:d,onToggleModal:p,onRemoveExport:m,constraintClassName:g,suffixClassName:f,imageTypeClassName:v,imageTypeDropdownClassName:y,buttonClassName:E}){let b=h.vL(t),S=(0,l.OY)(),T=(0,q._O)(q.OA.READY),C=ew.map((e,t)=>a.createElement(ev,{key:t,value:e,recordingKey:b("constraints",e.value)})),N=(0,k.IT)(),I="PDF"===n.imageType&&N===P.AP$.LEGACY;return a.createElement(a.Fragment,null,a.createElement(_.g,{name:"export_constraint_combo_box"},a.createElement(ef,{id:`export-constraint-${e}`,className:g,dropdownClassName:"export_panel--constraintDropdown--JA0gw",property:n.constraint,onChange:c,formatter:eb,dispatch:S,dropdownShown:o,onMouseDown:eT,recordingKey:b("contraints"),disabled:"SVG"===n.imageType||"PDF"===n.imageType},C)),!T&&a.createElement(J,{value:n.suffix,suffixClassName:f,onSuffixChange:d,recordingKey:b("suffix")}),a.createElement(_.g,{name:"export_image_type_select"},a.createElement(ey,{id:`export-image-type-${e}`,className:v,inputClassName:"export_panel--imageTypeInput--9mh93",chevronClassName:"export_panel--imageTypeChevron--RQLTV",property:n.imageType,formatter:eS,onChange:u,dispatch:S,dropdownClassName:y,dropdownShown:o,onMouseDown:eT,recordingKey:b("imageType")},a.createElement(eE,{value:"PNG",recordingKey:b("imageType","png")}),a.createElement(eE,{value:"JPEG",recordingKey:b("imageType","jpeg")}),a.createElement(eE,{value:"SVG",recordingKey:b("imageType","svg")}),a.createElement(eE,{value:"PDF",recordingKey:b("imageType","pdf")}))),a.createElement(_.g,{name:"toggle_export_settings_modal_button"},a.createElement(ea.KM,{svg:ep.c,fallbackSvg:em.c,className:E,onClick:p,onMouseDown:eT,recordingKey:b("settings"),disabled:I,selected:!!r,"data-tooltip-type":D.wL.TEXT,"data-tooltip":(0,w.t)("fullscreen.export_panel.export_settings")})),T&&!!m&&a.createElement(_.g,{name:"remove_export_button"},a.createElement(s.w,{as:"button",onMouseDown:eT,onClick:m,"aria-label":(0,w.t)("fullscreen.properties_panel.tooltip_remove"),"data-tooltip":(0,w.t)("fullscreen.properties_panel.tooltip_remove"),"data-tooltip-type":D.wL.TEXT},a.createElement(i.A,null))))}function eN(e){let t=a.useRef(null),n=t=>{e.onChange({...e.exportSetting,suffix:t})},l=()=>e.pickerShown&&e.pickerShown.id===e.id?e.pickerShown:null,s=l(),{version:i}=(0,o.qG)(),c="ui3"===i,u=c?a.Fragment:"div";return a.createElement(u,null,a.createElement(ei.e,{ref:t,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,singletonRow:e.singletonRow,dragging:e.isDragging,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,recordingKey:e.recordingKey,className:c?"export_panel--draggableRowUi3--jvnUW":void 0},a.createElement(eC,{exportSetting:e.exportSetting,id:e.id,dropdownShown:e.dropdownShown,pickerShown:s,onConstraintChange:t=>{e.onChange({...e.exportSetting,constraint:t})},onImageTypeChange:t=>{var n,a;n=e.exportSetting,a=e.onChange,t!==n.imageType&&("JPEG"===t||"PNG"===t||"PDF"===t?a({imageType:t,contentsOnly:n.contentsOnly,colorProfile:n.colorProfile,useAbsoluteBounds:n.useAbsoluteBounds,suffix:n.suffix,constraint:"PDF"===t?{type:"CONTENT_SCALE",value:1}:n.constraint}):"SVG"===t&&a({imageType:t,contentsOnly:n.contentsOnly,colorProfile:n.colorProfile,suffix:n.suffix,constraint:{type:"CONTENT_SCALE",value:1},svgIDMode:"IF_NEEDED",svgOutlineText:!0,svgForceStrokeMasks:!1,useAbsoluteBounds:n.useAbsoluteBounds}))},onToggleModal:n=>{if(n.stopPropagation(),l())e.dispatch(S.U5()),I.CA.deselectProperty();else{let n=(0,F.cT)(r.findDOMNode(t.current));I.CA.updateAppModel({currentSelectedProperty:{type:e.selectedPropertyType,indices:[e.index]}}),e.dispatch(S.is({id:e.id,initialX:n.x,initialY:n.y})),e.dispatch(T.eO())}},onSuffixChange:n,onRemoveExport:e.onRemoveExport,recordingKey:e.recordingKey,constraintClassName:"export_panel--constraint--AvgRM",suffixClassName:eu,imageTypeClassName:"export_panel--imageType--fBh8b",imageTypeDropdownClassName:"export_panel--imageTypeDropdown--gIS9P",buttonClassName:"export_panel--exportSettings--1pqzJ"})),s&&a.createElement(ee,{exportSettings:e.exportSetting,onChange:e.onChange,pickerShown:s,dispatch:e.dispatch,recordingKey:h.Mx(e,"settings"),dropdownShown:e.dropdownShown,onSuffixChange:n,suffixClassName:eu,isUI3:c}))}function eI(e){return a.createElement("div",{className:e.className||"export_panel--previewThumbnailContainer--BPcy5"},a.createElement("img",{src:e.thumbnail.src,width:e.thumbnail.displaySize.x,height:e.thumbnail.displaySize.y,alt:"preview of layer to be exported"}))}class eA extends a.PureComponent{constructor(e){super(e),this.toggleShown=()=>{this.setState({previewShown:!this.state.previewShown})},this.updateThumbnail=()=>{if(!this.state.previewShown||!this.props.shouldComputeThumbnails())return;let e=new v.Cg(this.props.panelWidth-30,this.props.panelWidth-30),t=O.KM(e,this.props.useAbsoluteBounds),n=null;t&&t.pixels&&t.pixelSize&&t.displaySize&&(n={src:O.me(t.pixels,t.pixelSize,this.props.colorProfile),displaySize:t.displaySize}),this.setState({thumbnail:n})},this.updateThumbnailAfterDelay=(0,p.C)(()=>this.updateThumbnail(),1e3),this.onSceneGraphChange=()=>{null!=this.state.previewGUID&&this.updateThumbnailAfterDelay()},this.state={previewIsCanvas:!0,previewGUID:null,previewShown:!1,thumbnail:null}}componentDidUpdate(e,t){e.colorProfile!==this.props.colorProfile&&(this.setState({thumbnail:null}),this.updateThumbnailAfterDelay.cancel(),this.updateThumbnail());let n=!t.previewShown&&this.state.previewShown,a=e.panelWidth!==this.props.panelWidth;if(this.props.sceneGraphSelection===e.sceneGraphSelection&&!n&&!a)return;let r=this.props.sceneGraphSelection,l=this.props.numSelected;if((l>1||!this.state.previewShown)&&!a){this.setState({thumbnail:null,previewGUID:null});return}let s=0===l,i=s?this.props.currentPage:(0,g.iw)(r);(i!==this.state.previewGUID||a)&&(this.setState({thumbnail:null,previewGUID:i,previewIsCanvas:s}),this.updateThumbnailAfterDelay.cancel(),this.updateThumbnail())}componentDidMount(){I.CA.fromFullscreen.on("pingSceneGraphEvent",this.onSceneGraphChange)}componentWillUnmount(){I.CA.fromFullscreen.removeListener("pingSceneGraphEvent",this.onSceneGraphChange),this.updateThumbnailAfterDelay.cancel()}render(){return this.props.numSelected>1?null:a.createElement("div",null,a.createElement(_.g,{name:"toggle_export_preview_visibility_button"},a.createElement(W.WA,{onClick:this.toggleShown,recordingKey:this.props.recordingKey},a.createElement(E.A,{svg:ed.c,className:this.state.previewShown?"export_panel--chevron--fX1cx":"export_panel--rotatedChevron--w871Y export_panel--chevron--fX1cx"}),a.createElement(W.iM,{className:"export_panel--label--zPKcz"},a.createElement(w.Tx,{id:"fullscreen.properties_panel.preview"})))),this.state.previewShown&&this.state.thumbnail&&a.createElement(eI,{thumbnail:this.state.thumbnail}))}}eA.displayName="PreviewThumbnail"},16780:(e,t,n)=>{n.d(t,{Y:()=>g});var a=n(307824),r=n(120304),l=n(819584),s=n(762820),i=n(540696),o=n(397888),c=n(392992),u=n(939540),d=n(768516),p=n(784528),m=n(552727);function g(e){let t=(0,r.w1)(e=>e.mirror.appModel),n=(0,o.gV)(),g=(0,r.w1)(c.AX),h=(0,l.yC)(()=>{let t=new Set;for(let a of e){let e=n.get(a);if((null==e?void 0:e.type)!=="INSTANCE")continue;let r=e.symbolId;r&&t.add(r)}return t},[e,n]),{backingSymbolGUID:_,backingStateGroupGUID:f}=(0,m.gh)(h,n),v=a.useMemo(()=>(0,i.Er)(_)||null===_?null:n.get(_),[_,n]),y=a.useMemo(()=>(0,i.Er)(f)||null===f?null:n.get(f),[f,n]),E=a.useMemo(()=>{if(!v)return!1;let e=(0,u.YH)(v);return null!=e&&e!==g},[v,g]),w=a.useMemo(()=>!!(v&&s.GqY.nodeIsSoftDeleted(v.guid)),[v]),b=a.useMemo(()=>!!(y&&s.GqY.nodeIsSoftDeleted(y.guid)),[y]),S=a.useMemo(()=>{if(y)return y;if(!v)return null;if(w){let e=s.GqY.findBestAncestorInRestorePath(v.guid),t=""===e?null:n.get(e);if(null==t?void 0:t.isStateGroup)return t}return null},[v,y,w,n]),T=(0,r.w1)(d.iI),C=a.useMemo(()=>y&&b?y:v&&w?v:null,[v,w,b,y]),N=a.useMemo(()=>{let e;return e=C?C.isStateGroup?"STATE_GROUP":S?"SYMBOL_AS_STATE":"SYMBOL_AS_NON_STATE":null,(0,p.Ib)(t,"restore-symbol-or-state-group")||(e=null),e},[t,C,S]),I=a.useMemo(()=>(null==v?void 0:v.componentKey)&&T.get(v.componentKey)?"DELETED_SUBSCRIBED_STATE":"SYMBOL_AS_STATE"===N?"DELETED_LOCAL_STATE":null,[T,v,N]);return a.useMemo(()=>({backingSymbolGUID:_,backingStateGroupGUID:f,singleBackingSymbol:v,singleBackingStateGroup:y,isBackingSymbolShared:E,isBackingSymbolSoftDeleted:w,isBackingStateGroupSoftDeleted:b,affiliatedStateGroup:S,affiliatedStateGroupId:null==S?void 0:S.guid,symbolOrStateGroupToRestore:C,restoreType:N,stateResetType:I}),[_,f,v,y,E,w,b,S,C,N,I])}},644:(e,t,n)=>{n.d(t,{_:()=>i});var a=n(307824),r=n(540696),l=n(397888),s=n(16780);function i(e){let t=(0,l.gV)(),{backingSymbolGUID:n,backingStateGroupGUID:i}=(0,s.Y)(e),o=a.useMemo(()=>{let n=[];for(let a of e){let e=t.get(a);if(e&&"INSTANCE"!==e.type){for(;null==e?void 0:e.isInstanceSublayer;)e=e.parentNode;(null==e?void 0:e.type)==="INSTANCE"&&n.push(e)}}return n},[e,t]),c=a.useMemo(()=>{let e=null;for(let n of o){if(!n.symbolId)continue;let a=t.get(n.symbolId);if(a){if(e){if(e.guid!==a.guid)return r.ee}else e=a}}return(null==e?void 0:e.isState)&&e.parentGuid&&(e=e.parentNode),e},[o,t]),u=a.useMemo(()=>{let n=[];for(let a of e){let e=t.get(a);e&&"INSTANCE"===e.type&&e.isInstanceSublayer&&n.push(e)}return n},[e,t]),d=a.useMemo(()=>!!(null==c&&(n||i)),[c,n,i]),p=a.useMemo(()=>!!(null==n&&null==i&&c),[c,n,i]);return a.useMemo(()=>({backingSymbolOrStateGroupOfContainingInstances:c,containingInstancesOfSublayers:o,onlyInstances:d,onlyInstanceSublayers:p,nestedInstances:u}),[c,o,d,p,u])}},167536:(e,t,n)=>{n.d(t,{u:()=>V});var a=n(307824),r=n(120304),l=n(562416),s=n.n(l),i=n(250008),o=n(4580),c=n(372152),u=n(570464),d=n(204792),p=n(560072),m=n(403132),g=n(323576),h=n(5868),_=n(585508),f=n(762820),v=n(555168),y=n(312452),E=n(392992),w=n(939540),b=n(46),S=n(768516),T=n(62128),C=n(142548),N=n(784528),I=n(760236),A=n(241645),k=n(23124),P=n(848408),M=n(877944),x=n(599708),O=n(740718),R=n(482952),L=n(16780),D=n(644),F=n(538524),K=n(824312),G=n(242632);let U="instance-option-dropdown";function B(e){e.stopPropagation()}function V(e){var t,n;let{instanceAndSublayerGUIDs:l,resettableInstanceOverrides:V,showAllInstanceOptions:H}=e,{appModel:W,detachInstanceShortcut:Y}=(0,o.q)(e=>({appModel:e.mirror.appModel,detachInstanceShortcut:(0,N.O0)(e.mirror.appModel.keyboardShortcuts,"detach-instance")})),q=(0,r.w1)(e=>{var t,n;return(null==(t=e.dropdownShown)?void 0:t.type)===U&&s()(null==(n=e.dropdownShown.data)?void 0:n.guids,l)}),X=a.useMemo(I.k7,[]),z=(0,r.w1)(e=>X(e,l)),{componentUpdatesForAllPages:$,stateGroupUpdatesForAllPages:j}=(0,r.w1)(S.eS),Q=a.useMemo(T.IZ,[]),Z=(0,r.w1)(e=>Q(e,l)),{componentInstanceUpdateInfo:J,stateInstanceUpdateInfo:ee}=(0,R.Mn)($,j,Z),et=(0,R._u)(J,ee),en=et>0&&et===Z.length,ea=(0,w.SQ)(w.MX.ALL),{updateIndividualInstances:er}=(0,x.UP)(ea,k.AV.DROPDOWN_UPDATE_SELECTED_INSTANCE),el=(0,r.OY)(),{isBackingSymbolSoftDeleted:es,restoreType:ei}=(0,L.Y)(l),{onlyInstances:eo,nestedInstances:ec}=(0,D._)(l),eu=a.useRef(null),ed=a.useMemo(()=>({source:"INSTANCE_PANEL",instanceAndSublayerGUIDs:l}),[l]),ep=(0,M.Os)(ed),em=(0,r.w1)(b.K4),eg=(0,c.m4)(E.qK),eh=(0,c.m4)(h.AX),e_=em.file_key,ef=null==(t=null==eg?void 0:eg.parentOrgId)?void 0:t.toString(),ev=null==(n=em.file_team_id)?void 0:n.toString(),ey=null==eh?void 0:eh.id,eE=a.useCallback(()=>{el((0,g.A5)({type:P.U,data:ed}))},[el,ed]),ew=a.useMemo(()=>{let e=[];if(en){if(e.push({type:"option",value:"update-selected-instance",displayText:(0,p.t)("design_systems.instance_panel.update_selected",{numSelectedInstancesToUpdate:et}),callback:()=>er(J,ee)}),ep&&e.push({type:"option",value:"review-instance-update",displayText:(0,p.t)("design_systems.instance_panel.review_update"),callback:()=>{i.qE.trackDefinedEvent("design_systems_analytics.instance_review_update_click",{userId:ey,fileKey:e_,fileParentOrgId:ef,fileTeamId:ev}),eE()}}),!H)return e;e.push({type:"separator"})}if("SYMBOL_AS_STATE"===ei&&e.push({type:"option",value:"restore-symbol-or-state-group",displayText:(0,p.t)("design_systems.instance_panel.restore_variant"),callback:()=>{_.CA.triggerActionInUserEditScope("restore-symbol-or-state-group")}}),eo&&e.push({type:"option",value:"detach-instance",displayText:(0,p.t)("fullscreen_actions.detach-instance"),shortcut:Y,callback:()=>{v.Pc.user("detach-instances",()=>f.i46.detachInstances(l))}}),(0,N.Ib)(W,"push-changes-to-main")&&0===ec.length&&!es&&(e.length>0&&e.push({type:"separator"}),e.push({type:"option",value:"push-changes-to-main",displayText:(0,p.t)("fullscreen_actions.push-changes-to-main"),callback:()=>{_.CA.triggerActionInUserEditScope("push-changes-to-main")}})),V&&Object.values(V).some(e=>e)){if(Object.keys(V).forEach(t=>{let n=parseInt(t);(null==V?void 0:V[n])&&(e.length>0&&n===y.EdD.OVERRIDES_FOR_LAYER_AND_SUBLAYERS&&e.push({type:"separator"}),e.push({type:"option",value:n,displayText:function(e){switch(e){case y.EdD.OVERRIDES_FOR_LAYER_AND_SUBLAYERS:return(0,p.t)("design_systems.instance_panel.reset_all_changes");case y.EdD.EXPORTS:return(0,p.t)("design_systems.instance_panel.reset_exports");case y.EdD.EFFECTS:return(0,p.t)("design_systems.instance_panel.reset_effects");case y.EdD.LAYER:return(0,p.t)("design_systems.instance_panel.reset_others");case y.EdD.VISIBLE:return(0,p.t)("design_systems.instance_panel.reset_visibility");case y.EdD.NAME:return(0,p.t)("design_systems.instance_panel.reset_name");case y.EdD.FILL:return(0,p.t)("design_systems.instance_panel.reset_fill");case y.EdD.STROKE:return(0,p.t)("design_systems.instance_panel.reset_stroke");case y.EdD.TEXT:return(0,p.t)("design_systems.instance_panel.reset_text");case y.EdD.TEXT_STYLE:return(0,p.t)("design_systems.instance_panel.reset_text_style");case y.EdD.SIZE:return(0,p.t)("design_systems.instance_panel.reset_size");case y.EdD.PROTOTYPE_INTERACTIONS:return(0,p.t)("design_systems.instance_panel.reset_interactions");case y.EdD.OVERLAY:return(0,p.t)("design_systems.instance_panel.reset_overlay");case y.EdD.NUM_VALUES:}return""}(n),callback:()=>{v.Pc.user("reset-overrides",()=>f.i46.resetSymbolOverridesForNodes(l,n))}}))}),z)for(let t in z)for(let n in z[t]){let a=z[t][n];e.push({type:"option",value:"reset-component-prop-assignment",displayText:(0,p.t)("design_systems.instance_panel.reset_property_assignment",{assignmentName:a.name}),callback:()=>{v.Pc.user("reset-prop-assignments",()=>f.i46.resetComponentPropAssignmentForInstances(a.instanceGUIDs,n))}})}}else e.length>0&&e.push({type:"separator"}),e.push({type:"option",value:y.EdD.OVERRIDES_FOR_LAYER_AND_SUBLAYERS,displayText:(0,p.t)("design_systems.instance_panel.no_changes_to_reset"),callback:()=>{},disabled:!0});return e},[en,ei,eo,W,ec.length,es,V,et,ep,H,er,J,ee,eE,ey,e_,ef,ev,Y,l,z]),eb=a.useCallback(e=>{e.stopPropagation(),q?el(m.yi()):(el(m.Qn({type:U,data:{guids:l}})),i.qE.trackDefinedEvent("design_systems_analytics.instance_update_available_button_click",{userId:ey,fileKey:e_,fileParentOrgId:ef,fileTeamId:ev}))},[q,el,l,ey,e_,ef,ev]),eS=u.Mx(e,"toggleInstanceOptionDropdown",l.join("-"));return H||en?a.createElement("span",null,a.createElement("div",{ref:eu},en?a.createElement(A.KM,{className:F.aG,onClick:eb,selected:q,onMouseDown:B,svg:K.c,"data-tooltip-type":C.wL.TEXT,"data-tooltip":(0,p.t)("design_systems.instance_panel.update_available"),recordingKey:eS}):a.createElement(A.KM,{onClick:eb,selected:q,onMouseDown:B,"data-tooltip-type":C.wL.TEXT,"data-tooltip":(0,p.t)("design_systems.instance_panel.instance_options"),svg:G.c,recordingKey:eS,disabled:0===ew.length})),q&&(eu.current?a.createElement(O.Mx,{targetRect:eu.current.getBoundingClientRect(),propagateCloseClick:!0},ew.map((t,n)=>"option"===t.type?a.createElement(d.g.Option,{className:F.Os,onClick:t.callback,recordingKey:u.Mx(e,t.displayText),key:"reset-component-prop-assignment"===t.value?u.Mx(t.value,n):t.value,disabled:t.disabled},t.displayText,t.shortcut&&a.createElement("span",null,t.shortcut)):a.createElement(d.g.Separator,{key:n}))):null)):null}},840460:(e,t,n)=>{let a;n.d(t,{G0:()=>q,cF:()=>Y,mm:()=>H});var r=n(307824),l=n(602216),s=n(120304),i=n(125504),o=n.n(i),c=n(819584),u=n(4580),d=n(570464),p=n(389160),m=n(303872),g=n(537096),h=n(330716),_=n(560072),f=n(37864),v=n(762820),y=n(138884),E=n(540696),w=n(397888),b=n(783932),S=n(301660),T=n(996272),C=n(918628),N=n(142548),I=n(525064),A=n(514008),k=n(878952),P=n(648892),M=n(729902),x=n(760236),O=n(24588),R=n(16780),L=n(644),D=n(167536),F=n(243892),K=n(408340),G=n(538524),U=n(122112),B=n(203400),V=n(284548),H=((a=H||{})[a.NAME_ONLY=0]="NAME_ONLY",a[a.INSTANCE_SWAP_PICKER=1]="INSTANCE_SWAP_PICKER",a);function W(e){e.stopPropagation()}function Y(e){let{canCollapse:t,resettableInstanceOverrides:n,instanceAndSublayerGUIDs:a,shouldHideButtons:l,isInComponentPlayground:s}=e,i=(0,r.useRef)(null),{onlyInstances:c,onlyInstanceSublayers:u}=(0,L._)(a),d=function(e){let t=(0,w.gV)();return r.useMemo(()=>{if(0===e.length)return null;let n=t.get(e[0]);return null==n?void 0:n.symbolId},[e,t])}(a);return c||u?r.createElement(O.WA,{className:o()(G.g5,{[G.KO]:t,[G.Kq]:s}),ref:i},r.createElement(q,{...e,panelTitleRef:i,dropdownIdPrefix:"instance-panel-instance-swap-picker"}),!l&&r.createElement("span",{className:G.Ki},r.createElement(P.k,{nodeField:C.M.OVERRIDDEN_SYMBOL_ID,defaultValue:d,guids:a}),r.createElement(K.y,{instanceAndSublayerGUIDs:a,recordingKey:e.recordingKey}),r.createElement(D.u,{resettableInstanceOverrides:n,instanceAndSublayerGUIDs:a,recordingKey:e.recordingKey,showAllInstanceOptions:!0}))):null}function q({panelTitleRef:e,panelTitleOverridesClassName:t,pickerButtonTextOverridesClassName:n,flushLeft:a,dropdownIdPrefix:i,svgOverride:P,chevronOverride:D,...K}){var H,Y;let{instanceNameDisplayOverride:q,containerWide:X,instanceAndSublayerGUIDs:z,shouldHideButtons:$,highlightNodesOnHover:j}=K,Q=`${i}-${z.join("-")}`,Z=(0,w.gV)(),J=r.useMemo(x.C_,[]),{propDef:ee,instanceSwapPickerShown:et}=(0,u.q)(e=>({propDef:J(e,z,C.M.OVERRIDDEN_SYMBOL_ID),instanceSwapPickerShown:e.instanceSwapPickerShown})),{preferredValues:en,preferredValuesFetchError:ea,retryPreferredValuesFetch:er}=(0,A.yu)(ee??void 0),el=r.useMemo(()=>ea?r.createElement(k.U,{onRetry:er,recordingKey:"instancePropAssignment"}):void 0,[ea,er]),es=(0,s.OY)(),{backingSymbolGUID:ei,backingStateGroupGUID:eo,affiliatedStateGroupId:ec}=(0,R.Y)(z),{backingSymbolOrStateGroupOfContainingInstances:eu,containingInstancesOfSublayers:ed,onlyInstances:ep,onlyInstanceSublayers:em}=(0,L._)(z),eg=(0,s.w1)(T.Ad),eh=(0,s.w1)(e=>e.library),e_=(0,c.yC)(()=>{let e=eo??ei;if(!e||(0,E.Er)(e))return[];let{selectedItem:t}=(0,S.sP)(e,eg,eh,Z);return t?[t]:[]},[eo,ei,eg,eh,Z]),ef=r.useMemo(()=>!!em&&!!eu&&eu!==E.ee,[em,eu]),ev=d.S4(d.Mx(K.recordingKey,"instanceName",z.join("-")),"mouseenter",()=>{j&&v.KEP.canvasViewState().temporarilyHoveredNodes.set(z)}),ey=d.S4(d.Mx(K.recordingKey,"instanceName",z.join("-")),"mouseleave",()=>{j&&v.KEP.canvasViewState().temporarilyHoveredNodes.set([])}),eE="";if(null!=eo||ec){if((0,E.Er)(eo))eE=(0,_.t)("design_systems.instance_panel.mixed");else{let e=eo?Z.get(eo):null,t=ec?Z.get(ec):null;eE=(0,b.G4)((null==t?void 0:t.name)||(null==e?void 0:e.name)||"")}}else null!=ei?eE=(0,E.Er)(ei)?(0,_.t)("design_systems.instance_panel.mixed"):(0,b.G4)((null==(H=Z.get(ei))?void 0:H.name)||""):null!=eu&&(eE=(0,E.Er)(eu)?(0,_.t)("design_systems.instance_panel.mixed"):(0,b.G4)(eu.name||""));let ew="";if(ep){let e=null==(Y=Z.get(z[0]))?void 0:Y.name;z.every(t=>{var n;return(null==(n=Z.get(t))?void 0:n.name)===e})&&e&&(ew=e)}let eb=r.useCallback(()=>{if($)return;let t=e.current?(0,I.KA)(l.findDOMNode(e.current),F.m_):void 0;es((0,f.EZ)({initialPosition:t,id:Q,modal:!0}))},[es,Q,$,e]),eS=r.useCallback(()=>{ef&&y.uc(ed.map(e=>e.guid))},[ef,ed]),eT="";ep?eT=et.isShown&&et.id===Q?G.qA:$?G.MA:G.mU:em&&(eT=ef?G.t5:G.gd);let eC=D??r.createElement(g.A,{className:G.Qj,svg:V.c});return r.createElement(p.g,{name:"instance_title_control"},0===q?r.createElement("div",{className:G.yK,onMouseEnter:ev,onMouseLeave:ey},r.createElement(h.E,{className:X?G.e2:G._6,text:ew??eE})):1!==q&&ee?r.createElement("div",{className:G.U7},r.createElement(M.q,{nodeField:C.M.OVERRIDDEN_SYMBOL_ID,currentValue:ee.defaultValue,instanceGUIDs:z})):r.createElement(O.w1,{className:o()(eT,t),recordingKey:d.Mx(K,"panelTitle",z.join("-")),onClick:em?eS:eb,onMouseDown:W,doNotReserveSpaceForChevron:a},P??r.createElement(g.A,{className:G._k,svg:U.c}),r.createElement("div",{"data-testid":"instance-panel-title-component-name",className:n||G.Qx},eE),!$&&r.createElement(r.Fragment,null,!em&&eC,ef&&r.createElement(g.A,{className:G.aS,width:"24px",height:"24px",svg:B.c,"data-tooltip-type":N.wL.TEXT,"data-tooltip":(0,_.t)("design_systems.instance_panel.select_instance")}))),et.isShown&&et.id===Q&&r.createElement(F.Ab,{selectedItems:e_,title:(0,_.t)("design_systems.instance_panel.swap_instance"),itemsToSwap:z,recordingKey:d.Mx(K,"instanceSwapPicker"),pickerType:m.i6.INSTANCE_SWAP_PICKER,preferredItems:en,preferredValuesErrorComponent:el}))}},408340:(e,t,n)=>{n.d(t,{y:()=>E,c:()=>w});var a=n(307824),r=n(120304);function l(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M13.5 6a.5.5 0 1 0 0 1h2.793l-4.647 4.646a.5.5 0 0 0 .707.708L17 7.707V10.5a.5.5 0 1 0 1 0V7a1 1 0 0 0-1-1h-3.5Zm-2.646 1.146a.5.5 0 0 1 0 .708L6.707 12 12 17.293l4.146-4.147a.5.5 0 0 1 .707.708L12.707 18a1 1 0 0 1-1.414 0L6 12.707a1 1 0 0 1 0-1.414l4.146-4.147a.5.5 0 0 1 .707 0Z",clipRule:"evenodd"}))}var s=n(570464),i=n(968240),o=n(560072),c=n(523292),u=n(476168),d=n(762820),p=n(540696),m=n(939540),g=n(142548),h=n(241645),_=n(16780),f=n(518132),v=n(954484),y=n(210436);function E(e){let{instanceAndSublayerGUIDs:t}=e,n=w(t);return n?a.createElement(h.wP,{svg:n.svg,"data-tooltip-type":g.wL.TEXT,onMouseDown:n.onMouseDown,"data-tooltip":n.dataTooltip,disabled:n.disabled,recordingKey:s.Mx(e,"findComponentButton",n.backingSymbolGUID)},a.createElement(i.e,{svg:n.svg},n.ui3Icon)):null}function w(e){let t,n;let{backingSymbolGUID:s,singleBackingSymbol:i,isBackingSymbolShared:g,isBackingSymbolSoftDeleted:h,restoreType:E}=(0,_.Y)(e),w=(0,r.w1)(e=>(0,u.b)(e,(0,m.YH)(i)));if(null==s||(0,p.Er)(s))return null;let b=(0,m.YH)(i),S=b&&(0,c.Aj)(b);return t=h||!i?"SYMBOL_AS_STATE"===E?(0,o.t)("design_systems.instance_panel.variant_missing"):(0,o.t)("design_systems.instance_panel.component_missing"):g?S?(0,o.t)("design_systems.instance_panel.view_library_in_community"):(0,o.t)("design_systems.instance_panel.go_to_main_component_nin_library"):(0,o.t)("design_systems.instance_panel.go_to_main_component"),n=g?S?y.c:f.c:v.c,h||!i||!g||w?{svg:n,onMouseDown:function(){s&&!(0,p.Er)(s)&&d.i46.goToSymbolOrStateGroupById(s,!0)},dataTooltip:t,disabled:h||!i,ui3Icon:a.createElement(l,null),backingSymbolGUID:s}:null}},53905:(e,t,n)=>{n.d(t,{e:()=>M});var a=n(307824),r=n(441748),l=n(570464),s=n(130176),i=n(148276),o=n(588900),c=n(698240),u=n(560072),d=n(321296),p=n(441388),m=n(993608),g=n(762820),h=n(555168),_=n(325252),f=n(678280),v=n(89936),y=n(778112),E=n(224100),w=n(142548),b=n(517164),S=n(184252),T=n(241645),C=n(24588),N=n(702924),I=n(84244),A=n(269820),k=n(995088);let P=class extends a.PureComponent{constructor(){super(...arguments),this.onRemoveRelaunchData=e=>{h.Pc.user("remove-plugin-relaunch-data",()=>g.u2q.removeRelaunchDataFromSelection(e))},this.onRelaunch=async e=>{let t=this.props.openFileKey;if(t&&(0,_.UN)({plugin:e.plugin,publishedPlugins:this.props.publishedPlugins,orgEntity:this.props.orgEntity,installedPluginVersions:this.props.allSavedPlugins,editorType:this.props.editorType??"design"}))return await v.m.instance.enqueue({mode:"run-forever",runPluginArgs:{plugin:e.plugin,openFileKey:t,command:e.relaunchButton.command,queryMode:!1,runMode:"default",triggeredFrom:"dev_handoff"===this.props.editorType?"handoff-relaunch":"relaunch",ignoreForRunLastPlugin:!0,isWidget:!1}})},this.fetchPlugin=e=>{this.props.dispatch(d.S0({id:e,resourceType:y.K2.PLUGIN}))},this.renderRelaunchRows=e=>{let t="";return e.map(e=>{let n=e.plugin.plugin_id,r=`${e.pluginTypeAndID}-${e.relaunchButton.command}`,s=a.createElement(x,{key:r,relaunchData:e,recordingKey:l.Mx(this.props,"relaunch",r),onRelaunch:this.onRelaunch,onRemoveRelaunchData:this.onRemoveRelaunchData,firstButtonForPlugin:n!==t});return t=n,s})}}render(){let e=(0,_.A9)(this.props.pluginRelaunchData,this.props.publishedPlugins,this.props.localPlugins,this.props.orgEntity,this.props.numSelected,(e,t)=>P.refreshCache.debounceRefresh(e,this.fetchPlugin.bind(this),t),E.gr.FIGMA);if(0===e.length)return null;let t=this.props.title??(0,u.t)("properties_panel.plugin.title"),n=a.createElement(s.u,{name:"plugin_panel"},a.createElement(C.sF,null,a.createElement(C.WA,null,a.createElement(C.w1,null,t)),this.renderRelaunchRows(e)));return this.props.isDevHandoff?a.createElement(s.u,{name:"inspection_panel"},a.createElement(S.e_,{hideHeader:!0,padding:S.CK.NONE,recordingKey:"plugin"},n)):n}},M=P;M.displayName="PluginPanel",M.refreshCache=new f.W(r.c.duration(1,"day"));class x extends l.UR{constructor(){super(...arguments),this.onRelaunch=l.yw(this,"click",()=>{this.props.onRelaunch(this.props.relaunchData)})}render(){return a.createElement(O,{...{...this.props,onRelaunch:this.onRelaunch,recordingKey:l.Mx(this.props,"removeButton")}})}}function O(e){let{plugin:t,relaunchButton:n}=e.relaunchData,r=(0,E.E7)(t)?a.createElement("div",{className:"plugin_panel--pluginIconLocal--44TyG"},a.createElement(o._,{svg:A.c,fallbackSvg:k.c})):a.createElement("div",{className:"plugin_panel--pluginIcon--TvCDA plugin--pluginIconBase--yAG5F"},a.createElement(b.W,{plugin:t}));return a.createElement(p.kH,{name:"PluginRelaunchRow",properties:{pluginId:t.plugin_id},trackingTargets:m.I.RCS},a.createElement(C.WA,{className:"plugin_panel--rowButton--PxW5t button_row--rowButton--s-r8y raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm button_row--_rowButton--EdZXq"},a.createElement("div",{className:"plugin_panel--relaunchContainer--leq1l"},a.createElement(i.wv,{className:"plugin_panel--relaunchButton--sEH4s",onClick:()=>e.onRelaunch(e.relaunchData),"data-tooltip-type":w.wL.TEXT,"data-tooltip":t.name},a.createElement("div",{className:c.cx.flex.itemsCenter.$},a.createElement("div",{className:"plugin_panel--pluginIconContainer--o3Wvm"},r),a.createElement("div",{className:"plugin_panel--relaunchButtonName--Ol-Gy"},a.createElement("div",{className:c.cx.ellipsis.overflowHidden.noWrap.fontMedium.$},n.name)))),a.createElement("div",{className:"plugin_panel--iconContainer--KltJf"},a.createElement(T.Qn,{recordingKey:e.recordingKey,trackingProperties:{action:"minus"},svg:N.c,fallbackSvg:I.c,"data-tooltip-type":w.wL.TEXT,"data-tooltip":(0,u.t)("properties_panel.plugin.remove_tooltip"),onClick:()=>e.onRemoveRelaunchData(e.relaunchData.plugin.plugin_id)})))),!!n.description&&a.createElement("div",{className:"plugin_panel--relaunchDescription--TmxcU"},a.createElement("pre",{className:"plugin_panel--relaunchDescriptionText--8x1PM ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},n.description===E.Kk?a.createElement(u.Tx,{id:"properties_panel.plugin.mixed_descriptions"}):n.description)))}x.displayName="PluginRelaunchRow"},414112:(e,t,n)=>{let a,r,l,s;n.d(t,{Un:()=>te,uw:()=>tr});var i=n(307824),o=n(120304),c=n(372152),u=n(570464),d=n(234284),p=n(148276),m=n(560072),g=n(73376),h=n(309812),_=n(979144),f=n(540696),v=n(833492),y=n(879396),E=n(570012),w=n(142548),b=n(513568),S=n(472936);let T=new class{parse(e,t){let n=[];if(e.split(/[ ,]+/g).forEach(e=>{if(!e.length)return;let t=parseFloat(e);if(!isFinite(t))throw Error("Could not parse easing function input");n.push(t)}),4!==n.length)throw Error("Could not parse easing function input");return n.forEach((e,t)=>{t%2==0&&(n[t]=Math.min(Math.max(e,0),1))}),n}format(e){return null==e?"":e.map(e=>parseFloat(e.toFixed(2))).join(", ")}};var C=n(385228);let N=[0,0,0,0],I=i.createContext([N,()=>{}]);function A({easingFunction:e,children:t}){let[n,a]=i.useState(e||N);return i.useEffect(()=>{e&&a(e)},[e]),e?i.createElement(I.Provider,{value:[n,a]},t):i.createElement(i.Fragment,null,t)}var k=n(24588),P=n(768184),M=n(682819),x=n(133648);function O(){return performance.now()}function R(e,t){return function(e,t,n,a,r){let l,s,i;let o=Math.sqrt(t/e),c=n/(2*Math.sqrt(t*e));return c<1?(l=o*Math.sqrt(1-c*c),s=1,i=(c*o+-a)/l):(l=0,s=1,i=-a+o),1-(r=c<1?Math.exp(-r*c*o)*(s*Math.cos(l*r)+i*Math.sin(l*r)):(s+i*r)*Math.exp(-r*o))}(e[0],e[1],e[2],e[3],t)}function L(e){return function(e,t){let n=e[1],a=e[2],r=e[0],l=e[3],s=Math.sqrt(n/r),i=Math.min(.9999,a/(2*Math.sqrt(n*r)));return(-Math.log(.001)+Math.log(1+(i*s+Math.abs(l))/(s*Math.sqrt(1-i*i))))/(i*s)}(e,0)}var D=((a=D||{})[a.MASS=0]="MASS",a[a.STIFFNESS=1]="STIFFNESS",a[a.DAMPING=2]="DAMPING",a[a.INITIAL_VELOCITY=3]="INITIAL_VELOCITY",a);function F(e){let t=e[1],n=e[2],a=e[0];return t>0&&n>0&&a>0}function K(e){return F(e)?e:[1,100,10,0]}var G=n(506240);let U="transition_preview--previewPanel--Gp-aI",B="transition_preview--belowInactive--DBGgj transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",V="transition_preview--belowActive--69cT1 transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",H="transition_preview--blueHeaderShort--FqI0m transition_preview--_blueHeader--Xlxtt transition_preview--_previewItem--o2gce",W="transition_preview--blueHeaderTall--atMMg transition_preview--_blueHeader--Xlxtt transition_preview--_previewItem--o2gce",Y="transition_preview--screenBorder--Fz-dz transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",q="transition_preview--screenBorderNarrow--EB6kk transition_preview--screenContainerNarrow--ugQN- transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",X="transition_preview--smartAnimateRowItem--aMXQ8";var z=((r=z||{})[r.BLANK=0]="BLANK",r[r.ACTIVE=1]="ACTIVE",r[r.INACTIVE=2]="INACTIVE",r[r.ACTIVE_RESETTABLE=3]="ACTIVE_RESETTABLE",r),$=((l=$||{})[l.STATIC=0]="STATIC",l[l.ANIMATING=1]="ANIMATING",l[l.RETURN_TO_START=2]="RETURN_TO_START",l);let j=new M._("activateBezierCustomAnimationPreview"),Q=new M._("activateSpringCustomAnimationPreview");function Z({transition:e,isNarrowPanel:t}){let[n,a,r,l,s]=function(e,t={delayBeforeAnimation:0,delayAfterAnimation:0}){let{delayBeforeAnimation:n=0,delayAfterAnimation:a=0}=t,r=K(e),[l,s,o,c]=function(e){let[t,n]=(0,i.useState)(!1),[a,r]=(0,i.useState)(0),[l,s]=(0,i.useState)(0);return(0,x.U)((0,i.useCallback)(()=>{let t=(O()-a)/1e3;t>e?(s(e),n(!1)):s(t)},[a,s,n,e]),t),[l,t,(0,i.useCallback)(()=>{n(!0),r(O()),s(0)},[r,n,s]),(0,i.useCallback)(()=>{n(!1),s(0)},[n,s])]}(n+L(r)+a);return[l<n?0:R(r,l-n),l,s,o,c]}((0,f.uc)(e.easingFunction,[1,100,10,0]),{delayBeforeAnimation:.1,delayAfterAnimation:1});i.useEffect(()=>{Q.on("restartSpringAnimation",()=>{l()});let e=()=>{s()};return Q.on("resetSpringAnimation",e),()=>{Q.removeListener("resetSpringAnimation",e)}},[l,s]);let o=124;t&&(o=80);let c={transform:`translateX(${n*o}px)`,transition:"none"};0!==a&&r||(c={transform:"none",transition:"transform 0.2s ease-out"});let u=(0,i.useCallback)(()=>{r||l()},[r,l]);return i.createElement("div",{className:U,onMouseEnter:u,onMouseLeave:s},i.createElement("div",{className:"transition_preview--springBoxItem--Uej9X",style:c}))}var J=((s=J||{})[s.RESET_INSTANT=0]="RESET_INSTANT",s[s.RESET_WITH_EASE=1]="RESET_WITH_EASE",s[s.PLAY_TO_END=2]="PLAY_TO_END",s);let ee=class extends i.PureComponent{constructor(e){super(e),this.executor=new P.E,this.cursorIsOverUs=!1,this.transitionToNextFrame=()=>{if(1===this.state.frameIndex&&!this.cursorIsOverUs){this.executor.scheduleOnce(()=>{this.setState({status:2})},2);return}let e=(this.state.frameIndex+1)%2;this.setState({status:1,frameIndex:e});let t=1e3*(0===this.state.frameIndex?(0,f.uc)(this.props.transition.duration,1):2);this.executor.scheduleOnce(this.transitionToNextFrame,t)},this.startAnimation=()=>{this.setState({status:1,frameIndex:0}),this.executor.reset(),this.executor.scheduleOnce(()=>{this.setState({status:1,frameIndex:1}),this.transitionToNextFrame()},0)},this.onMouseEnter=()=>{this.cursorIsOverUs=!0,this.startAnimation()},this.onMouseLeave=()=>{this.cursorIsOverUs=!1,this.executor.reset(),this.setState({status:2})},this.startAnimationNew=()=>{this.setAnimationStateNew(0),this.executor.scheduleOnce(()=>{this.setAnimationStateNew(2),this.executor.scheduleOnce(()=>{this.setAnimationStateNew(1)},1e3*(0,f.uc)(this.props.transition.duration,0)+ee.BEZIER_RETURN_TO_START_WAIT_TIME)},ee.BEZIER_BEFORE_ANIMATION_WAIT_TIME)},this.resetAnimationNew=()=>{this.setAnimationStateNew(1)},this.setAnimationStateNew=e=>{this.executor.reset(),this.setState({status:0===e?1:3,frameIndex:2===e?1:0})},this.isAnimationRunningNew=()=>!((3===this.state.status||1===this.state.status||2===this.state.status)&&0===this.state.frameIndex),this.onMouseEnterNew=()=>{this.isAnimationRunningNew()||this.startAnimationNew()},this.onMouseLeaveNew=()=>{this.resetAnimationNew()},this.isAnyTransitionInfoMixed(e.transition)?this.state={status:0,frameIndex:0}:this.state={status:3,frameIndex:0},j.on("activateBezierAnimation",this.startAnimationNew),j.on("resetBezierAnimation",this.resetAnimationNew)}buildKeyFramesForNonSmartTransition(e){let t={top:0,left:0,opacity:1};switch(e.behavior){case"SMART_ANIMATE":throw Error(`Invalid transition behavior ${e.behavior}`);case"INSTANT":case"DISSOLVE":return[{below:t,above:{...t,opacity:0}},{below:{...t,opacity:0},above:t}];case"SCROLL_ANIMATE":return[{below:t,above:{...t,left:1}},{below:{...t,left:-.25,opacity:.25},above:t}];case"SLIDE":switch(e.direction){case"LEFT":return[{below:t,above:{...t,left:-1}},{below:{...t,left:.25,opacity:.25},above:t}];case"RIGHT":return[{below:t,above:{...t,left:1}},{below:{...t,left:-.25,opacity:.25},above:t}];case"TOP":return[{below:t,above:{...t,top:-1}},{below:{...t,top:.25,opacity:.25},above:t}];case"BOTTOM":return[{below:t,above:{...t,top:1}},{below:{...t,top:-.25,opacity:.25},above:t}];default:throw Error(`Invalid direction: ${e.direction}`)}case"SLIDE_OUT":switch(e.direction){case"LEFT":return[{below:{...t,left:-.25,opacity:.25},above:t},{below:t,above:{...t,left:1}}];case"RIGHT":return[{below:{...t,left:.25,opacity:.25},above:t},{below:t,above:{...t,left:-1}}];case"TOP":return[{below:{...t,top:-.25,opacity:.25},above:t},{below:t,above:{...t,top:1}}];case"BOTTOM":return[{below:{...t,top:.25,opacity:.25},above:t},{below:t,above:{...t,top:-1}}];default:throw Error(`Invalid direction: ${e.direction}`)}case"PUSH":switch(e.direction){case"LEFT":return[{below:t,above:{...t,left:-1}},{below:{...t,left:1},above:t}];case"RIGHT":return[{below:t,above:{...t,left:1}},{below:{...t,left:-1},above:t}];case"TOP":return[{below:t,above:{...t,top:-1}},{below:{...t,top:1},above:t}];case"BOTTOM":return[{below:t,above:{...t,top:1}},{below:{...t,top:-1},above:t}];default:throw Error(`Invalid direction: ${e.direction}`)}case"MOVE":switch(e.direction){case"LEFT":return[{below:t,above:{...t,left:-1}},{below:t,above:t}];case"RIGHT":return[{below:t,above:{...t,left:1}},{below:t,above:t}];case"TOP":return[{below:t,above:{...t,top:-1}},{below:t,above:t}];case"BOTTOM":return[{below:t,above:{...t,top:1}},{below:t,above:t}];default:throw Error(`Invalid direction: ${e.direction}`)}case"MOVE_OUT":switch(e.direction){case"LEFT":return[{below:t,above:t},{below:t,above:{...t,left:1}}];case"RIGHT":return[{below:t,above:t},{below:t,above:{...t,left:-1}}];case"TOP":return[{below:t,above:t},{below:t,above:{...t,top:1}}];case"BOTTOM":return[{below:t,above:t},{below:t,above:{...t,top:-1}}];default:throw Error(`Invalid direction: ${e.direction}`)}default:throw Error(`Invalid behavior: ${e.behavior}`)}}cssEasingFunction(e){if("INSTANT"!==e.behavior)switch(e.easing){case"EASE_IN":return"ease-in";case"EASE_OUT":return"ease-out";case"EASE_IN_AND_OUT":return"ease-in-out";case"LINEAR":return"linear";case"EASE_IN_BACK":return"cubic-bezier(0.3, -0.05, 0.7, -0.5)";case"EASE_OUT_BACK":return"cubic-bezier(0.45, 1.45, 0.8, 1)";case"EASE_IN_AND_OUT_BACK":return"cubic-bezier(0.7, -0.4, 0.4, 1.4)";case"CUSTOM_BEZIER":let t=(0,f.kB)(e.easingFunction);if(t&&4===t.length)return"cubic-bezier("+T.format(t)+")"}return""}cssDuration(e){return"INSTANT"===e.behavior?0:(0,f.uc)(e.duration,.3)}rectangleStateToCSSStyle(e,t,n,a){let r=this.cssEasingFunction(e),l=this.cssDuration(e);return{transition:2===n?ee.BEZIER_RETURN_TO_START_EASING:0===n?"unset":`all ${l}s ${r}`,top:18+60*t.top,left:(a?65:81)+54*t.left,opacity:t.opacity}}isAnyTransitionInfoMixed(e){let t=!(0,f.EH)(e.behavior),n=!(0,f.EH)(e.easing),a=!(0,f.EH)(e.duration),r=!(0,f.EH)(e.direction);return t||n||a||r}UNSAFE_componentWillReceiveProps(e){this.isAnyTransitionInfoMixed(e.transition)?(this.executor.reset(),this.setState({status:0})):this.props.transition&&this.props.transition.behavior===e.transition.behavior&&this.props.transition.easing===e.transition.easing&&this.props.transition.duration===e.transition.duration&&this.props.transition.direction===e.transition.direction||this.startAnimationNew()}componentWillUnmount(){j.removeListener("activateBezierAnimation",this.startAnimationNew),j.removeListener("resetBezierAnimation",this.resetAnimationNew),this.executor.reset()}renderSimpleScreenToScreenAnimationPreview(e,t,n,a,r,l,s){let o=H,c=W,u=this.props.transition.behavior;("MOVE_OUT"===u||"SLIDE_OUT"===u)&&(o=W,c=H);let d=i.createElement("div",{className:o}),p=i.createElement("div",{className:c}),m=null;if(this.props.transition.shouldSmartAnimate){d=null,p=null;let e=this.cssEasingFunction(r),t=this.cssDuration(r),n={transition:2===l?ee.BEZIER_RETURN_TO_START_EASING:0===l?"unset":`all ${t}s ${e}`};m=i.createElement("div",{className:this.state.frameIndex?W:H,style:n})}return("DISSOLVE"===u||"INSTANT"===u)&&(p=d=m=null),i.createElement("div",{className:U,onMouseEnter:this.onMouseEnterNew,onMouseLeave:this.onMouseLeaveNew},i.createElement("div",{className:e,style:t},d),i.createElement("div",{className:n,style:a},p),i.createElement("div",{className:s?"transition_preview--screenContainerNarrow--ugQN- transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce":"transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce"},m),i.createElement("div",{className:s?q:Y}))}renderSmartAnimateTransition(e){let t=1===this.state.frameIndex?1:3===this.state.status?2:0,n=this.cssDuration(this.props.transition),a=this.cssEasingFunction(this.props.transition),r=2===t?ee.BEZIER_RETURN_TO_START_EASING:0===t?"unset":`all ${n}s ${a}`,l=e?"transition_preview--smartAnimateContainerNarrow--0x3xY transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce":"transition_preview--smartAnimateContainer--SuYj0 transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce",s=e?q:Y;if(0===this.state.frameIndex)return i.createElement("div",{className:U,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.createElement("div",{className:l},i.createElement("div",{className:X,style:{transition:r,height:12,background:"rgba(0, 0, 0, 0.06)"}}),i.createElement("div",{className:X}),i.createElement("div",{className:X})),i.createElement("div",{className:s}));if(1===this.state.frameIndex){let e={transition:r,height:20,background:G.ua0};return i.createElement("div",{className:U,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},i.createElement("div",{className:l},i.createElement("div",{className:X,style:e}),i.createElement("div",{className:X}),i.createElement("div",{className:X})),i.createElement("div",{className:s}))}throw Error("Invalid state.frameIndex")}render(){let e=0===this.state.status||2===this.state.status?B:V,t="PUSH"===this.props.transition.behavior,n=0===this.state.status||2===this.state.status?t?B:"transition_preview--aboveInactive--b8PZf transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce":t?V:"transition_preview--aboveActive--Wbtj2 transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce";if(0===this.state.status||(0,f.Er)(this.props.transition.behavior))return null;if("SMART_ANIMATE"===this.props.transition.behavior)return this.renderSmartAnimateTransition(this.props.isNarrowPanel);{let t=this.buildKeyFramesForNonSmartTransition(this.props.transition)[this.state.frameIndex],a=1===this.state.frameIndex?1:3===this.state.status?2:0;return this.renderSimpleScreenToScreenAnimationPreview(e,this.rectangleStateToCSSStyle(this.props.transition,t.below,a,this.props.isNarrowPanel),n,this.rectangleStateToCSSStyle(this.props.transition,t.above,a,this.props.isNarrowPanel),this.props.transition,a,this.props.isNarrowPanel)}}};ee.displayName="TransitionPreview",ee.BEZIER_BEFORE_ANIMATION_WAIT_TIME=100,ee.BEZIER_RETURN_TO_START_WAIT_TIME=1500,ee.BEZIER_RETURN_TO_START_EASING="all ease-out 200ms";var et=n(471052),en=n(721500),ea=n(103839),er=n(266772),el=n(316080);let es="prototype_easing_editor--springInput--PEy5a",ei="prototype_easing_editor--springLabel--khIGL",eo=i.memo(function(e){var t=(0,en.qe)("208px");e.isNarrowPanel&&(t=(0,en.qe)("184px"));let n=(t-100)/2,a=new ea.Cg(n,n+100),r=new ea.Cg(n+100,n),l=(0,er.ak)(),s=(null==l?void 0:l.colorIcon)||G.OQd,o=(null==l?void 0:l.colorBg)||G.yEj,c=(null==l?void 0:l.colorIconTertiary)||G.CQ,d=(null==l?void 0:l.colorIconBrand)||G.ua0,{tempBezierValues:p,setTempBezierValues:m,updateSelectionProperties:g}=e,_=i.useRef(null),[f,v]=i.useState(null);i.useLayoutEffect(()=>{if(null!==f)return document.addEventListener("mousemove",y,!0),document.addEventListener("mouseup",E,!0),()=>{document.removeEventListener("mousemove",y,!0),document.removeEventListener("mouseup",E,!0)}}),i.useLayoutEffect(()=>{_.current&&T(_.current)});let y=e=>{if(e.stopPropagation(),null===f||!_.current)return;let t=1===f.index?new ea.Cg(0,0):new ea.Cg(1,1),a=ec(S(new ea.Cg(e.clientX,e.clientY)),f.mouseDownT,t,n,100);1===f.index?m([a.x,a.y,p[2],p[3]]):2===f.index&&m([p[0],p[1],a.x,a.y])},E=u.S4(e.recordingKey,"mouseup",e=>{if(e.stopPropagation(),null===f||!_.current)return;let t=1===f.index?new ea.Cg(0,0):new ea.Cg(1,1),a=ec(S(new ea.Cg(e.clientX,e.clientY)),f.mouseDownT,t,n,100);1===f.index?g({easingFunction:[a.x,a.y,p[2],p[3]]}):2===f.index&&g({easingFunction:[p[0],p[1],a.x,a.y]}),v(null),j.trigger("activateBezierAnimation")},{recordMetadata:e=>{let t=S(new ea.Cg(e.clientX,e.clientY));return{left:t.x,top:t.y}},playbackMetadata:e=>{let t=b(new ea.Cg(e.left,e.top));return{clientX:t.x,clientY:t.y}}}),w=u.S4(e.recordingKey,"mousedown",e=>{e.stopPropagation();let t=S(new ea.Cg(e.clientX,e.clientY)),l=eu(new ea.Cg(p[0],p[1]),n,100),s=eu(new ea.Cg(p[2],p[3]),n,100);if(5>ea.Cg.distance(t,l)){v({index:1,mouseDownT:1}),j.trigger("resetBezierAnimation");return}if(5>ea.Cg.distance(t,s)){v({index:2,mouseDownT:1}),j.trigger("resetBezierAnimation");return}if(ed(t,a,10)){g({easingFunction:[0,0,p[2],p[3]]});return}if(ed(t,r,10)){g({easingFunction:[p[0],p[1],1,1]});return}let[i,o]=ep(t,a,l);if(i<5){v({index:1,mouseDownT:o}),j.trigger("resetBezierAnimation");return}let[c,u]=ep(t,r,s);if(c<5){v({index:2,mouseDownT:u}),j.trigger("resetBezierAnimation");return}if(function(e,t,n,a){let[r]=ep(e,n,a);return r<5}(t,0,a,r)){g({easingFunction:[0,0,1,1]});return}},{recordMetadata:e=>{let t=S(new ea.Cg(e.clientX,e.clientY));return{left:t.x,top:t.y}},playbackMetadata:e=>{let t=b(new ea.Cg(e.left,e.top));return{clientX:t.x,clientY:t.y}}});function b(e){let t=_.current.getBoundingClientRect();return new ea.Cg(t.left+e.x,t.top+e.y)}function S(e){let t=_.current.getBoundingClientRect();return new ea.Cg(e.x-t.left,e.y-t.top)}let T=e=>{let l=e.getContext("2d");if(!l)return;let i=window.devicePixelRatio||1;e.width=i*t,e.height=i*t,e.style.width=t+"px",e.style.height=t+"px",l.scale(i,i);let u=new ea.Cg(a.x,r.y),m=new ea.Cg(r.x,a.y),g=eu(new ea.Cg(p[0],p[1]),n,100),h=eu(new ea.Cg(p[2],p[3]),n,100);l.lineWidth=1,l.clearRect(0,0,t,t),l.strokeStyle=c,l.beginPath(),l.moveTo(u.x,u.y),l.lineTo(a.x,a.y),l.lineTo(m.x,m.y),l.stroke(),l.beginPath(),l.moveTo(a.x,a.y),l.lineTo(r.x,r.y),l.stroke(),l.setLineDash([13,6]),l.lineDashOffset=6,l.beginPath(),l.moveTo(u.x,u.y),l.lineTo(r.x,r.y),l.lineTo(m.x,m.y),l.stroke(),l.fillStyle=s,l.beginPath(),l.arc(a.x,a.y,2,0,2*Math.PI,!1),l.fill(),l.beginPath(),l.arc(r.x,r.y,2,0,2*Math.PI,!1),l.fill(),l.strokeStyle=s,l.setLineDash([]),l.beginPath(),l.moveTo(a.x,a.y),l.lineTo(g.x,g.y),l.stroke(),l.beginPath(),l.moveTo(r.x,r.y),l.lineTo(h.x,h.y),l.stroke(),l.beginPath(),l.moveTo(a.x,a.y),l.bezierCurveTo(g.x,g.y,h.x,h.y,r.x,r.y),l.stroke();let _=(e,t)=>{switch(null!==f&&e===f.index?"SELECTED":1===e?0===p[0]&&0===p[1]?"RESET":"NORMAL":1===p[2]&&1===p[3]?"RESET":"NORMAL"){case"RESET":l.strokeStyle=s,l.fillStyle=o;break;case"NORMAL":l.strokeStyle=o,l.fillStyle=s;break;case"SELECTED":l.strokeStyle=o,l.fillStyle=d}l.lineWidth=1,l.beginPath(),l.arc(t.x,t.y,4.5,0,2*Math.PI),l.fill(),l.stroke()};_(1,g),_(2,h)},C=i.createElement("div",{className:e.isNarrowPanel?"prototype_easing_editor--bezierCurveContainerNarrow--3m-Op prototype_easing_editor--bezierCurveContainer--Myl0y":"prototype_easing_editor--bezierCurveContainer--Myl0y"},i.createElement("canvas",{ref:_,onMouseDown:w}));return(0,h.Ci)()?i.createElement(et.e,{appendedClassName:el.Ij},C):C});function ec(e,t,n,a,r){let l=new ea.Cg((e.x-a)/r,(a+r-e.y)/r);t=Math.max(.01,t);let s=l.subtract(n).divide(new ea.Cg(t,t)).add(n);return new ea.Cg(Math.max(Math.min(s.x,1),0),s.y)}function eu(e,t,n){return new ea.Cg(t+n*e.x,t+n*(1-e.y))}function ed(e,t,n){return ea.Cg.distance(e,t)<n/2}function ep(e,t,n){let a=ea.Cg.dot(ea.Cg.subtract(e,t),ea.Cg.subtract(n,t))/ea.Cg.distance(t,n)**2;a=Math.min(Math.max(a,0),1);let r=ea.Cg.add(t,ea.Cg.scale(a,ea.Cg.subtract(n,t)));return[ea.Cg.distance(e,r),a]}var em=n(125504),eg=n.n(em),eh=n(455200);class e_{constructor(e=1,t=0){this.m00=e,this.m10=t}translate(e){return this.m10+=e,this}scale(e){return this.m00*=e,this.m10*=e,this}static fromRangeMapping(e,t,n,a){return new e_().translate(-e).scale((a-n)/(t-e)).translate(n)}static fromConstant(e){return new e_().scale(0).translate(e)}static invert(e){return new e_(1/e.m00,-e.m10/e.m00)}transformValue(e){return e*this.m00+this.m10}transformDirection(e){return e*this.m00}}class ef{constructor(e,t){this.transform1=e,this.transform2=t}transformValue(e){return this.transform2.transformValue(this.transform1.transformValue(e))}}class ev{constructor({hardLimit:e,threshold:t,initialValue:n,slowFunction:a,slowFunctionInverse:r}){this.slowFunction=a,this.slowFunctionInverse=r,this.mapToSlowSpace=e_.fromRangeMapping(t,e,0,-1),this.mapToSlowSpaceInverse=e_.invert(this.mapToSlowSpace),this.initialValueInSlowSpace=this.mapToSlowSpace.transformValue(n)}transformValue(e){let t=this.mapToSlowSpace.transformValue(e);t>this.initialValueInSlowSpace&&(this.initialValueInSlowSpace=t);let n=this.slowFunctionInverse(this.initialValueInSlowSpace)-this.initialValueInSlowSpace;return this.mapToSlowSpaceInverse.transformValue(this.slowFunction(t+n))}}function ey(e){return e>=0?e:1/(1-e)-1}function eE(e){return e>=0?e:1-1/(e+1)}class ew extends ev{constructor({hardLimit:e,threshold:t,initialValue:n}){super({hardLimit:e,threshold:t,initialValue:n,slowFunction:ey,slowFunctionInverse:eE})}}class eb{}eb.MAX_W0=1e3,eb.MIN_W0=.1,eb.MAX_ZETA=1,eb.MIN_ZETA=1e-4,eb.MIN_MASS=.01,eb.MIN_STIFFNESS=.01,eb.MIN_DAMPING=.01,eb.MAX_MASS=100,eb.MAX_STIFFNESS=1e4,eb.MAX_DAMPING=1e3;let eS=Math.PI/eb.MAX_W0;function eT(e){let t=e[D.STIFFNESS],n=e[D.DAMPING],a=e[D.MASS];return{frequency:Math.sqrt(t/a),zeta:n/(2*Math.sqrt(t*a))}}function eC({frequency:e,zeta:t},n){let a=n[D.MASS]>0?(0,eh.qk)(n[D.MASS],eb.MIN_MASS,eb.MAX_MASS):1,r=e*e*a,l=2*t*Math.sqrt(r*a),s=n.slice();return s[D.MASS]=a,s[D.STIFFNESS]=r,s[D.DAMPING]=l,s}function eN(e){return function({frequency:e,zeta:t}){return{x:Math.max(Math.PI/e,0),y:2-2*Math.pow((0,eh.qk)(t,0,1),.87)}}(eT(e))}function eI(e,t){return e[D.STIFFNESS]=eA(e[D.STIFFNESS],t),e[D.DAMPING]=eA(e[D.DAMPING],t),e}function eA(e,t){return+e.toPrecision(t)}function ek(e){let{frequency:t,zeta:n}=eT(e);return eP/(t*n)}let eP=6;function eM(e){let t=eN(e),n=ek(e);return{mass:e[D.MASS],stiffness:e[D.STIFFNESS],damping:e[D.DAMPING],handleX:t.x,handleY:t.y,duration:n}}let ex="prototype_easing_spring_curve--springvisHandle--0mFVz",eO="prototype_easing_spring_curve--springvisHandleActive--5RaLT";function eR(e){return{x:(0,eh.qk)(e.x,0,1),y:(0,eh.qk)(e.y,0,2)}}function eL(e,t){var n;return eI((n=eR(e),eC({frequency:(0,eh.qk)(Math.PI/Math.max(eS,n.x),eb.MIN_W0,eb.MAX_W0),zeta:(0,eh.qk)(Math.pow((2-n.y)/2,1.1494252873563218),eb.MIN_ZETA,eb.MAX_ZETA)},t)),3)}function eD(e){return{handle:e,offset:null}}function eF(e){let t=215,n=128;e.isNarrowPanel&&(t=182,n=114);let a=e_.fromRangeMapping(0,1,8,t-8),r=e_.fromRangeMapping(2,0,8,n-8),l=e_.invert(a),s=e_.invert(r),c=l.transformDirection(1),u=(0,i.useRef)(null),[d,p]=(0,i.useState)(null),m=(0,o.OY)(),g=(0,i.useCallback)(e=>{let t=u.current.getBoundingClientRect();return{x:l.transformValue(e.clientX-t.left),y:s.transformValue(e.clientY-t.top)}},[l,s]),_=e.value,f=F(_),v=f&&eR(eN(_)),y=f&&ek(_);(0,i.useEffect)(()=>{if(!d)return;let t=t=>{t.stopPropagation();let n=g(t);if(v){if(d.offset)e.onInput(eL({x:d.offset.x.transformValue(n.x),y:d.offset.y.transformValue(n.y)},_));else if("SPRING_HANDLE"===d.handle){let e={x:new e_().translate(v.x-n.x),y:new e_().translate(v.y-n.y)};p({...d,offset:{x:new ef(e.x,new ew({hardLimit:0,threshold:.15,initialValue:v.x})),y:new ef(e.y,new ew({hardLimit:2,threshold:1.8,initialValue:v.y}))}})}else if("SCALE_BACKGROUND"===d.handle){let e=n.x>v.x?{x:new e_().scale(v.x/n.x),y:e_.fromConstant(v.y)}:{x:new e_().translate(v.x-n.x),y:e_.fromConstant(v.y)};p({...d,offset:{x:new ef(e.x,new ew({hardLimit:0,threshold:.08,initialValue:v.x})),y:e.y}})}else if("DURATION_HANDLE"===d.handle&&y){let e={x:new e_().translate(y-n.x).scale(v.x/y),y:e_.fromConstant(v.y)};p({...d,offset:{x:new ef(e.x,new ew({hardLimit:0,threshold:.08,initialValue:v.x})),y:e.y}})}}else e.onInput(eL(n,_)),p({...d,handle:"SPRING_HANDLE"})},n=t=>{t.stopPropagation(),p(null),F(_)&&e.onChange(_,d.handle)},a=e=>{e.stopPropagation()},r=e=>{e.stopPropagation()};return document.addEventListener("pointermove",t),document.addEventListener("pointerup",n),document.addEventListener("mousemove",r,!0),document.addEventListener("mouseup",a,!0),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n),document.removeEventListener("mousemove",r,!0),document.removeEventListener("mouseup",a,!0)}},[d,_,v,y,e,m,g]);let E=(0,i.useCallback)(t=>{let n=eL(g(t),_);e.onChange(n,"DOUBLE_CLICK")},[e,_,g]),w={cursor:"ew-resize"};return i.createElement("div",{onMouseDown:e=>{e.stopPropagation()},className:"prototype_easing_spring_curve--springvisContainer--6iDnn",style:(0,h.Ci)()?void 0:{width:t,height:n},ref:u},i.createElement("svg",{width:t,height:n,viewBox:`0 0 ${t} ${n}`,xmlns:"http://www.w3.org/2000/svg",onDoubleClick:E},i.createElement("line",{className:"prototype_easing_spring_curve--springvisGuideline--aYSpJ",x1:a.transformValue(0),y1:r.transformValue(1),x2:a.transformValue(1),y2:r.transformValue(1)}),f&&v&&y&&i.createElement(i.Fragment,null,i.createElement("path",{className:"prototype_easing_spring_curve--springvisSpringCurve--aOLEK",fill:"none",style:{transition:"none"},d:function(e,t,n,a){let r=`M ${t.transformValue(0)},${n.transformValue(0)}`;for(let l=0;l<=1;l+=a){let a=R(e,l);if(isNaN(a))return"";r+=`L ${t.transformValue(l)},${n.transformValue(a)}`}return r}(_,a,r,c)}),i.createElement("rect",{className:eg()(ex,d&&("DURATION_HANDLE"===d.handle||"SCALE_BACKGROUND"===d.handle)&&eO),x:a.transformValue(y)-2.5,y:r.transformValue(1)-7.5,width:5,height:15,rx:2.5,ry:2.5}),i.createElement("circle",{className:eg()(ex,d&&"SPRING_HANDLE"===d.handle&&eO),cx:a.transformValue(v.x),cy:r.transformValue(v.y),r:5})),i.createElement("rect",{x:0,y:0,width:t,height:n,fill:"transparent",style:w,onPointerDown:()=>{p(eD("SCALE_BACKGROUND")),Q.trigger("resetSpringAnimation")}}),y&&i.createElement(i.Fragment,null,i.createElement("circle",{cx:a.transformValue(y),cy:r.transformValue(1),r:20,fill:"transparent",style:w,onPointerDown:()=>{p(eD("DURATION_HANDLE")),Q.trigger("resetSpringAnimation")}})),v&&i.createElement(i.Fragment,null,i.createElement("circle",{cx:a.transformValue(v.x),cy:r.transformValue(v.y),r:20,fill:"transparent",onPointerDown:()=>{p(eD("SPRING_HANDLE")),Q.trigger("resetSpringAnimation")}}))))}function eK(e){if(!F(e)){let t=e[D.STIFFNESS],n=e[D.DAMPING];e[D.MASS]>0||(e[D.MASS]=1),t>0||(e[D.STIFFNESS]=eb.MIN_STIFFNESS),n>0||(e[D.DAMPING]=eb.MIN_DAMPING)}return e}let eG=i.memo(function(e){let t=(0,o.OY)(),n=(0,h.Ci)(),a=t=>{e.updateSelectionProperties({easingFunction:t}),j.trigger("activateBezierAnimation")},r=(n,a,r)=>{let l=L(n);e.updateSelectionProperties({easingFunction:n,transitionDuration:l}),Q.trigger("restartSpringAnimation"),r===E.MO.YES&&t((0,y.UV)({name:"Prototype Spring Animations Set Custom Value",params:{editedValue:a,...eM(n)}}))},l=(t,n)=>i.createElement(eF,{value:t,onInput:n,onChange:(e,t)=>{r(e,t,E.MO.YES)},recordingKey:u.Mx(e,"springCurve"),isNarrowPanel:e.isNarrowPanel});return i.createElement(I.Consumer,null,([s,o])=>i.createElement("div",null,"CUSTOM_BEZIER"===e.easingType?i.createElement(i.Fragment,null,i.createElement(eo,{tempBezierValues:s,setTempBezierValues:o,updateSelectionProperties:e.updateSelectionProperties,recordingKey:u.Mx(e,"cubicBezierCurve"),isNarrowPanel:e.isNarrowPanel}),i.createElement(k.WA,null,i.createElement(C.UP,{className:"prototype_easing_editor--input--2fhlq",formatter:T,property:s,onChange:a,recordingKey:u.Mx(e,"cubicBezierFunctionInput")}))):"CUSTOM_SPRING"===e.easingType?i.createElement(i.Fragment,null,n?i.createElement(et.e,{appendedClassName:el.Ij},l(s,o)):i.createElement("div",{className:"prototype_easing_editor--springCurveContainer--mNWzA"},l(s,o)),i.createElement(k.WA,null,i.createElement(k.iM,{className:ei,htmlFor:"easing-editor-spring-stiffness-input"},i.createElement(m.Tx,{id:"proto.easing_editor.spring_stiffness"})),i.createElement(b.oN,{id:"easing-editor-spring-stiffness-input",className:es,"data-tooltip-type":w.wL.TEXT,min:eb.MIN_STIFFNESS,max:eb.MAX_STIFFNESS,bigNudgeAmount:10,smallNudgeAmount:1,"data-tooltip":(0,m.t)("proto.easing_editor.spring_stiffness"),tooltipForScreenReadersOnly:!0,value:s[D.STIFFNESS],onValueChange:(e,t)=>{let n=eK(s.slice());n[D.STIFFNESS]=e,r(n,"STIFFNESS",t)},recordingKey:u.Mx(e,"springStiffnessInput"),dispatch:t})),i.createElement(k.WA,null,i.createElement(k.iM,{className:ei,htmlFor:"easing-editor-spring-damping-input"},i.createElement(m.Tx,{id:"proto.easing_editor.spring_damping"})),i.createElement(b.oN,{id:"easing-editor-spring-damping-input",className:es,"data-tooltip-type":w.wL.TEXT,min:eb.MIN_DAMPING,max:eb.MAX_DAMPING,bigNudgeAmount:10,smallNudgeAmount:1,"data-tooltip":(0,m.t)("proto.easing_editor.spring_damping"),tooltipForScreenReadersOnly:!0,value:s[D.DAMPING],onValueChange:(e,t)=>{let n=eK(s.slice());n[D.DAMPING]=e,r(n,"DAMPING",t)},recordingKey:u.Mx(e,"springDampingInput"),dispatch:t})),i.createElement(k.WA,null,i.createElement(k.iM,{className:ei,htmlFor:"easing-editor-spring-mass-input"},i.createElement(m.Tx,{id:"proto.easing_editor.spring_mass"})),i.createElement(b.oN,{id:"easing-editor-spring-mass-input",className:es,"data-tooltip-type":w.wL.TEXT,min:eb.MIN_MASS,max:eb.MAX_MASS,bigNudgeAmount:10,smallNudgeAmount:1,"data-tooltip":(0,m.t)("proto.easing_editor.spring_mass"),tooltipForScreenReadersOnly:!0,value:s[D.MASS],onValueChange:(e,t)=>{let n=eK(s.slice());n[D.MASS]=e,r(n,"MASS",t)},recordingKey:u.Mx(e,"springMassInput"),dispatch:t}))):null))});var eU=n(948860),eB=n(943344),eV=n(235020),eH=n(763456);let eW="prototype_animation_panel--transitionRightCol--3L083",eY="prototype_animation_panel--input--p60KV",eq="prototype_animation_panel--chevron--cje-0";var eX=n(660841),ez=n(57796),e$=n(292648),ej=n(613484),eQ=n(575015),eZ=n(942004),eJ=n(625532),e0=n(178604),e1=["LINEAR","SELECT_DIVIDER","EASE_IN","EASE_OUT","EASE_IN_AND_OUT","EASE_IN_BACK","EASE_OUT_BACK","EASE_IN_AND_OUT_BACK","CUSTOM_BEZIER","SELECT_DIVIDER","GENTLE","QUICK","BOUNCY","SLOW","CUSTOM_SPRING"];let e2={scrollTo:["INSTANT","SCROLL_ANIMATE"],nonScrollTo:["INSTANT","DISSOLVE","SMART_ANIMATE","SELECT_DIVIDER","MOVE","MOVE_OUT","PUSH","SLIDE","SLIDE_OUT"]};function e4(e,t,n){let a="DRAG"!==e||"INSTANT"!==n&&"DISSOLVE"!==n,r=!1;switch(t){case"NAVIGATE":r="SCROLL_ANIMATE"!==n;break;case"OVERLAY":r=["INSTANT","DISSOLVE","MOVE"].indexOf(n??"")>=0;break;case"SCROLL_TO":r=["INSTANT","SCROLL_ANIMATE"].indexOf(n??"")>=0;break;case"SWAP":r=["INSTANT","DISSOLVE","MOVE","SMART_ANIMATE"].indexOf(n??"")>=0;break;case"SWAP_STATE":r=["INSTANT","DISSOLVE","SMART_ANIMATE"].indexOf(n??"")>=0}return r&&a}let e5="RIGHT";function e6(e){switch(e.behavior){case"INSTANT":return{transitionType:"INSTANT_TRANSITION"};case"DISSOLVE":return{transitionType:"DISSOLVE"};case"FADE":return{transitionType:"FADE"};case"PUSH":case"SLIDE":case"MOVE":if(!e.direction)return{transitionType:`${e.behavior}_FROM_${e5}`};return{transitionType:`${e.behavior}_FROM_${e.direction}`};case"SLIDE_OUT":case"MOVE_OUT":if(!e.direction)return{transitionType:`${e.behavior}_TO_${e5}`};return{transitionType:`${e.behavior}_TO_${e.direction}`};case"SMART_ANIMATE":return{transitionType:"SMART_ANIMATE"};case"SCROLL_ANIMATE":return{transitionType:"SCROLL_ANIMATE"};default:return{}}}function e8(e){switch(e.easing){case"EASE_IN":return{easingType:"IN_CUBIC"};case"EASE_OUT":return{easingType:"OUT_CUBIC"};case"EASE_IN_AND_OUT":return{easingType:"INOUT_CUBIC"};case"LINEAR":return{easingType:"LINEAR"};case"EASE_IN_BACK":return{easingType:"IN_BACK_CUBIC"};case"EASE_OUT_BACK":return{easingType:"OUT_BACK_CUBIC"};case"EASE_IN_AND_OUT_BACK":return{easingType:"INOUT_BACK_CUBIC"};case"CUSTOM_BEZIER":return{easingType:"CUSTOM_CUBIC"};case"GENTLE":return{easingType:"GENTLE_SPRING"};case"QUICK":return{easingType:"SPRING_PRESET_ONE"};case"BOUNCY":return{easingType:"SPRING_PRESET_TWO"};case"SLOW":return{easingType:"SPRING_PRESET_THREE"};case"CUSTOM_SPRING":return{easingType:"CUSTOM_SPRING"};default:return{}}}function e7(e){return"GENTLE"===e||"QUICK"===e||"BOUNCY"===e||"SLOW"===e||"CUSTOM_SPRING"===e}function e3(e,t){switch(e.easing){case"EASE_IN":return{easingFunction:[.42,0,1,1]};case"EASE_OUT":return{easingFunction:[0,0,.58,1]};case"EASE_IN_AND_OUT":return{easingFunction:[.42,0,.58,1]};case"LINEAR":return{easingFunction:[0,0,1,1]};case"EASE_IN_BACK":return{easingFunction:[.3,-.05,.7,-.5]};case"EASE_OUT_BACK":return{easingFunction:[.45,1.45,.8,1]};case"EASE_IN_AND_OUT_BACK":return{easingFunction:[.7,-.4,.4,1.4]};case"CUSTOM_BEZIER":return!(0,f.EH)(e.easingFunction)||t?{easingFunction:[0,0,.58,1]}:{easingFunction:e.easingFunction};case"GENTLE":return{easingFunction:[1,100,15,0]};case"QUICK":return{easingFunction:[1,300,20,0]};case"BOUNCY":return{easingFunction:[1,600,15,0]};case"SLOW":return{easingFunction:[1,80,20,0]};case"CUSTOM_SPRING":return!(0,f.EH)(e.easingFunction)||t?{easingFunction:[1,100,15,0]}:{easingFunction:K(e.easingFunction)};default:return{}}}function e9(e,t){if((0,f.EH)(e.easing)){if(e7(e.easing)){let n=e3(e,t).easingFunction;if(n&&(0,f.EH)(n))return{transitionDuration:L(n)}}else if(t)return{transitionDuration:.3}}if((0,f.EH)(e.duration))return e.duration?{transitionDuration:e.duration}:{}}function te({transition:e,interactionType:t,navigationType:n,recordingKey:a,isNarrowPanel:r,stateManagementVersion:l,updateSelectionProperties:s}){let d=(0,o.OY)(),g=(0,v.g)(),T=(0,_.Yf)(),C=(0,c.m4)(eU.E),N=(0,h.Ci)(),P=(t,n)=>{let a=e.easingFunction;if((0,f.EH)(a)){let e=function(e,t){let n=eT(t).zeta;return eI(eC({frequency:eP/e/n,zeta:n},t),4)}(t,K(a)),r=L(e);s({easingFunction:e,transitionDuration:r}),Q.trigger("restartSpringAnimation"),n===E.MO.YES&&d((0,y.UV)({name:"Prototype Spring Animations Set Custom Value",params:{editedValue:"DURATION",...eM(e)}}))}},M=(0,f.kB)(e.behavior),x=(0,f.kB)(n),O="NAVIGATE"===x,R="INSTANT"!==e.behavior&&"DISSOLVE"!==e.behavior&&"SMART_ANIMATE"!==e.behavior&&"SCROLL_ANIMATE"!==e.behavior,D="INSTANT"!==e.behavior&&e4(t,x,(0,f.kB)(e.behavior)),F=D&&!C;D=e4(t,x,(0,f.kB)(e.behavior));let G=!e.isSpringTransition||"INSTANT"===e.behavior,U="INSTANT"===e.behavior,B=i.createElement(tc,{className:"prototype_animation_panel--transitionLeftCol--33VAT",property:e.easing,dispatch:d,dropdownShown:g,onChange:t=>{d((0,y.UV)({name:"Prototype Transition Easing Changed",params:{newEasing:t}}));let n={...e,easing:t},a=e.easing,r=!(0,f.EH)(a)||e7(t)!==e7(a);s({...e8(n),...e3(n,r),...e9(n,r)}),setTimeout(()=>{e7(t)?Q.trigger("restartSpringAnimation"):j.trigger("activateBezierAnimation")},0)},recordingKey:u.Mx(a,"easingDropdown")}),V=i.createElement(i.Fragment,null,G&&i.createElement(b.OK,{className:eW,dispatch:d,value:e.duration,onValueChange:t=>{d((0,y.UV)({name:"Prototype Transition Duration Changed",params:{newDuration:t}})),s({...e9({...e,duration:t})})},wheelMultiplier:T/10,scrubMultiplier:.004166666666666667,"data-tooltip-type":w.wL.TEXT,"data-tooltip":(0,m.t)("proto.animation_panel.easing_duration_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:u.Mx(a,"durationInput")}),!U&&(0,f.EH)(e.easing)&&e7(e.easing)&&(0,f.EH)(e.easingFunction)&&i.createElement(I.Consumer,null,([e])=>i.createElement(b.OK,{className:eW,dispatch:d,value:ek(K(e)),onValueChange:P,wheelMultiplier:T/10,scrubMultiplier:.004166666666666667,"data-tooltip-type":w.wL.TEXT,"data-tooltip":(0,m.t)("proto.animation_panel.easing_duration_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:u.Mx(a,"springDurationInput")}))),H=N?i.createElement(et.a,{left:B,right:V}):i.createElement(k.WA,null,B,V),W=i.createElement(ts,{className:N?void 0:R?"prototype_animation_panel--shortSelect--Hcoa7":"prototype_animation_panel--longSelect--JgkKH",interactionType:t,navigationType:x,property:e.behavior,dispatch:d,dropdownShown:g,onChange:t=>{d((0,y.UV)({name:"Prototype Transition Type Changed",params:{newType:t,oldType:(0,f.uc)(e.behavior,"MIXED"),smartAnimateMatchingLayers:(0,f.uc)(e.shouldSmartAnimate,null)}}));let n={...e,behavior:t};s({...e6(n),...e8(n),...e3(n),...e9(n),...function(e,t){if((0,f.EH)(e.preserveScroll)&&1!==t)return{transitionPreserveScroll:e.preserveScroll}}(n,l),...function(e){if((0,f.EH)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}(n)})},recordingKey:u.Mx(a,"behaviorDropdown")}),Y=R?i.createElement(tp,{className:"prototype_animation_panel--transitionDirection--Nmb6Y",property:e.direction?e.direction:null,onChange:t=>{d((0,y.UV)({name:"Prototype Transition Direction Changed",params:{newDirection:t,oldDirection:(0,f.uc)(e.direction,"MIXED")}})),s({...e6(e.direction?{...e,direction:t}:{...e,direction:t,behavior:"MOVE"})})},recordingKey:u.Mx(a,"directionControl")}):null,q=N?R?i.createElement(et.a,{left:W,right:Y}):i.createElement(et.e,null,W):i.createElement(k.WA,null,W,Y);return i.createElement(k.sF,{className:"prototype_animation_panel--animationPanel--9dIh2"},q,D&&!U&&O&&("MOVE"==M||"MOVE_OUT"==M||"PUSH"==M||"SLIDE"==M||"SLIDE_OUT"==M)&&i.createElement(i.Fragment,null,i.createElement(k.WA,{className:"prototype_animation_panel--checkboxRow----O-1 checkbox--_checkboxRow--oEhow","data-tooltip-type":w.wL.TEXT,"data-tooltip-show-above":!0,"data-tooltip":(0,m.t)("proto.animation_panel.smart_animate_matching_layers_tooltip")},i.createElement(S.K,{id:"transition-should-smart-animate",property:e.shouldSmartAnimate,onChange:t=>{let n=(0,f.kB)(e.behavior);d((0,y.UV)({name:"Smart Animate Changed",params:{newValue:t,transitionType:n}})),s({...function(e){if((0,f.EH)(e.shouldSmartAnimate))return{transitionShouldSmartAnimate:e.shouldSmartAnimate}}({...e,shouldSmartAnimate:t})})},recordingKey:u.Mx(a,"transition-should-smart-animate"),className:"prototype_animation_panel--checkbox--s8QFk"}),i.createElement(p.iM,{htmlFor:"transition-should-smart-animate",className:"prototype_animation_panel--label--i8ZCr checkbox--_checkboxLabelMultiline--kcM-C"},i.createElement(m.Tx,{id:"proto.animation_panel.animate_matching_layers"})))),i.createElement(A,{easingFunction:(0,f.EH)(e.easingFunction)?e.easingFunction:null},D&&!U&&H,D&&!U&&("CUSTOM_BEZIER"===e.easing||"CUSTOM_SPRING"===e.easing)&&(0,f.EH)(e.easingFunction)&&i.createElement(eG,{easingType:e.easing,easingFunction:e.easingFunction,duration:e.duration,updateSelectionProperties:s,recordingKey:u.Mx(a,"easingEditor"),isNarrowPanel:r})),F&&i.createElement("div",{className:"prototype_animation_panel--previewPane--q9Wvl"},!G&&i.createElement(Z,{transition:e,isNarrowPanel:r}),G&&i.createElement(ee,{transition:e,isNarrowPanel:r})))}class tt extends eV.M1{}class tn extends eV.cb{}let ta=new class{formatImpl(e,t){if(null==e)return"";switch(e){case"LINEAR":return(0,m.t)("proto.easing_behavior.linear");case"EASE_IN":return(0,m.t)("proto.easing_behavior.bezier_ease_in");case"EASE_OUT":return(0,m.t)("proto.easing_behavior.bezier_ease_out");case"EASE_IN_AND_OUT":return(0,m.t)("proto.easing_behavior.bezier_ease_in_and_out");case"EASE_IN_BACK":return(0,m.t)("proto.easing_behavior.bezier_ease_in_back");case"EASE_OUT_BACK":return(0,m.t)("proto.easing_behavior.bezier_ease_out_back");case"EASE_IN_AND_OUT_BACK":return(0,m.t)("proto.easing_behavior.bezier_ease_in_and_out_back");case"CUSTOM_BEZIER":return t?(0,m.t)("proto.easing_behavior.bezier_custom"):(0,m.t)("proto.easing_behavior.bezier_custom_short");case"GENTLE":return(0,m.t)("proto.easing_behavior.spring_gentle");case"QUICK":return(0,m.t)("proto.easing_behavior.spring_quick");case"BOUNCY":return(0,m.t)("proto.easing_behavior.spring_bouncy");case"SLOW":return(0,m.t)("proto.easing_behavior.spring_slow");case"CUSTOM_SPRING":return t?(0,m.t)("proto.easing_behavior.spring_custom"):(0,m.t)("proto.easing_behavior.spring_custom_short");default:return new g.UL().format(e)}}format(e){return this.formatImpl(e,!1)}formatExtended(e){return{text:this.formatImpl(e,!0)}}};class tr{constructor(){this.format=e=>{if(null==e)return"";switch(e){case"INSTANT":return(0,m.t)("proto.transition_behavior.instant");case"DISSOLVE":return(0,m.t)("proto.transition_behavior.dissolve");case"PUSH":return(0,m.t)("proto.transition_behavior.push");case"MOVE":return(0,m.t)("proto.transition_behavior.move_in");case"MOVE_OUT":return(0,m.t)("proto.transition_behavior.move_out");case"SLIDE":return(0,m.t)("proto.transition_behavior.slide_in");case"SLIDE_OUT":return(0,m.t)("proto.transition_behavior.slide_out");case"SMART_ANIMATE":return(0,m.t)("proto.transition_behavior.smart_animate");case"SCROLL_ANIMATE":return(0,m.t)("proto.transition_behavior.animate")}return""}}}let tl=new tr;class ts extends i.PureComponent{render(){let e="SCROLL_TO"===this.props.navigationType?e2.scrollTo:e2.nonScrollTo;return i.createElement(tt,{id:`animation-behavior-select-${this.props.recordingKey}`,className:this.props.className,chevronClassName:eq,inputClassName:eY,dropdownWidth:eH.G_1,property:this.props.property,formatter:tl,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:u.Mx(this.props,"select"),dataTestId:"transition-select",hideDropdownWhenContainerMoves:!(0,d.g9)(),dataOnboardingKey:"transition_behavior_select_onboarding_key"},e.map((e,t)=>"SELECT_DIVIDER"===e?i.createElement(eV.Wy,{key:t}):i.createElement(tn,{key:e,value:e,disabled:!e4(this.props.interactionType,this.props.navigationType,e),recordingKey:u.Mx(this.props,e)})))}}ts.displayName="TransitionBehaviorDropdown";class ti extends eV.M1{}class to extends eV.cb{}class tc extends i.PureComponent{render(){return i.createElement(ti,{id:`easing-type-select-${this.props.recordingKey}`,className:this.props.className,chevronClassName:eq,inputClassName:eY,dropdownWidth:eH.G_1,property:this.props.property,formatter:ta,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:u.Mx(this.props,"select"),dataOnboardingKey:"easing"},e1.map((e,t)=>"SELECT_DIVIDER"===e?i.createElement(eV.Wy,{key:t}):i.createElement(to,{key:t,value:e,disabled:!1,recordingKey:u.Mx(this.props,e)})))}}tc.displayName="TransitionEasingDropdown";class tu extends eB.G{}class td extends eB.n{}class tp extends i.PureComponent{render(){return i.createElement(tu,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},i.createElement(td,{value:"RIGHT",svg:e$.c,fallbackSvg:ej.c,recordingKey:u.Mx(this.props,"right")}),i.createElement(td,{value:"LEFT",svg:eQ.c,fallbackSvg:eZ.c,recordingKey:u.Mx(this.props,"left")}),i.createElement(td,{value:"TOP",svg:eX.c,fallbackSvg:ez.c,recordingKey:u.Mx(this.props,"top")}),i.createElement(td,{value:"BOTTOM",svg:eJ.c,fallbackSvg:e0.c,recordingKey:u.Mx(this.props,"bottom")}))}}tp.displayName="TransitionDirectionControl"},948860:(e,t,n)=>{n.d(t,{E:()=>a});let a=(0,n(623131).Zf)(!1)},860356:(e,t,n)=>{n.d(t,{w:()=>C});var a=n(307824),r=n(120304),l=n(125504),s=n.n(l),i=n(570464),o=n(929452),c=n(698240),u=n(59608),d=n(191352),p=n(34664),m=n(589440),g=n(120664),h=n(453496),_=n(560528),f=n(531008),v=n(802468),y=n(447600),E=n(363892),w=n(563040),b=n(679156),S=n(186776),T=n(533852);function C(e){let t=(0,m.O)(),{isPropertiesPanelCollapsed:n}=(0,g.I)(),l=(0,r.OY)(),C=(0,d.K4)(),N=(0,_.C)(e.selectedView),I=(0,u.yO)(),A=(0,d.c7)(),k=(0,h.an)(),P=a.useMemo(()=>e.multiplayer.allUsers.find(t=>t.sessionID===e.multiplayer.sessionID)||null,[e.multiplayer.allUsers,e.multiplayer.sessionID]),M=(0,o.wX)(),x=A?null:e.openFile,O=(0,p.SK)((null==x?void 0:x.key)||"").enabled,R="fullscreen"===e.selectedView.view&&e.selectedView.isRecoveryMode,L=!e.isIntegration&&!R&&C&&!I,D=a.useCallback(t=>{(0,v.Id)(t,null==P?void 0:P.sessionID,l,A,e.multiplayer,k,M)},[null==P?void 0:P.sessionID,l,A,e.multiplayer,k,M]);return t?a.createElement("div",{className:s()(T.QT,{[T.Cc]:n})},a.createElement("div",{className:T.I5},a.createElement("div",{className:T.kR},a.createElement(E.AZ,{fullHeightSidebarsEnabled:!0}),e.multiplayer&&e.openFile&&P&&a.createElement(v.qU,{dropdownShown:e.dropdownShown,multiplayer:e.multiplayer,currentUser:P,onUserClick:D,fullHeightSidebarsEnabled:!0})),n&&a.createElement("div",{className:T.kB},t&&!e.isIntegration&&a.createElement(b.OW,{item:w.zN,recordingKey:"header",numUnreadComments:0}),t&&a.createElement(S.Qr,{recordingKey:i.Mx("header","zoomMenu")})),a.createElement("div",{className:c.cx.flex.gap4.itemsCenter.$},L&&a.createElement(f.M,{extraPadding:!1,recordingKey:"ui3Header"}),x&&a.createElement(y.C,{user:e.user,editingFile:x,isFileInWorkshop:O,fullHeightSidebarsEnabled:!0}))),t&&!n&&a.createElement("div",{className:T.kB},a.createElement("div",null,!e.isIntegration&&a.createElement(b.OW,{item:N?w.Er:w.zN,recordingKey:e.recordingKey,numUnreadComments:0})),a.createElement(S.Qr,{recordingKey:i.Mx("header","zoomMenu")}))):null}},167640:(e,t,n)=>{n.d(t,{u:()=>I,M:()=>N});var a=n(307824),r=n(120304),l=n(125504),s=n.n(l),i=n(297608),o=n(570464),c=n(762820),u=n(979144),d=n(507076),p=n(784340),m=n(833492),g=n(570012),h=n(142548),_=n(513568),f=n(162280),v=n(159624),y=n(369528),E=n(219868),w=n(537096),b=n(235020),S=n(902784),T=n(662968),C=n(940020);function N(e,t){let[n,r,l]=(0,v.S0)([e],t),{clearVariableConsumption:s,consumedVariable:i}=(0,E.DT)([e]),o=(0,E.fR)(e),c=(0,v.c1)(i),u=(0,E.Wc)(e),d=!!o&&(0,f._q)(o);return{memoizedProviderValue:(0,a.useMemo)(()=>({showBindingUI:r,isShowingBindingUI:n,onVariableSelected:l,boundVariableId:c,isBoundVariableDeleted:d,mismatchedValue:u}),[c,d,n,u,l,r]),clearVariableConsumption:s,showBindingUI:r,boundVariable:o,consumedVariable:i}}function I({id:e,value:t,scrubStartValue:n,tooltipText:l,showTooltipOnTargetOnly:f,variableField:v,outerClassName:E,onChange:I,inputRef:A,inputClassName:k,iconId:P,icon:M,fallbackIcon:x,ui3Icon:O,disabled:R,scrubbingDisabled:L,noLeftBorder:D,squareRightBorder:F,onFocus:K,onBlur:G,onMouseEnter:U,onMouseEnterNonPropagating:B,onMouseLeave:V,onScrubBegin:H,onScrubEnd:W,onScrubClick:Y,onKeyDown:q,onKeyUp:X,onPaste:z,onNudge:$,recordingKey:j,inputTestId:Q,allowEmpty:Z,placeholder:J,options:ee,label:et,mixedMathHandler:en,onMixedMathNudge:ea,formatter:er,dropdownWidth:el,omitValueFromDropdown:es,shouldFocus:ei,onboardingKey:eo,openBelowTarget:ec,dropdownAlignment:eu,shiftVariableOptionToAlign:ed}){let ep=(0,m.g)(),{smallNudgeAmount:em,bigNudgeAmount:eg}=(0,u.i_)(),eh=(0,r.OY)(),e_=(0,a.useRef)(!1),ef=(0,i.e)(A),ev=(0,p.OG)([v]).data??[],{memoizedProviderValue:ey,showBindingUI:eE,consumedVariable:ew}=N(v,c.y6c.FLOAT),eb=o.S4(o.Mx(j,"scrub"),"click",()=>{null==Y||Y()}),eS=function(e,t,n){let r=[...e];if(t){let e=a.createElement(w.A,{className:T._N,svg:C.default});r.push(a.createElement(b.Wy,{key:"divider"})),r.push(a.createElement(b.cb,{iconToReplaceCheck:e,key:"apply_variable",value:S.oU,additionalStylesClassName:n?T.qK:void 0}))}return r}(ee,ev.length>0,ed),eT=(0,d.A9)("WIDTH"===v?"stackHorizontalSize":"stackVerticalSize")===c.MXH.FIXED||!["WIDTH","HEIGHT"].includes(v);return a.createElement(y.m.Provider,{value:eT?ey:void 0},a.createElement(_.CG,{className:s()("stack_apply_variable_combobox--scrubbableDropdown--IPQh4",E),id:e,formatter:er,isTokenizable:!0,forwardedRef:ef,inputClassName:s()(k),value:t,placeholder:J,scrubStartValue:n,wheelMultiplier:em,scrubMultiplier:em,smallNudgeAmount:em,bigNudgeAmount:eg,onValueChange:(e,t=g.MO.YES)=>{e===S.oU?eE(ef.current):I(e,t)},mixedMathHandler:en,onMixedMathNudge:ea,disabled:R,scrubbingDisabled:L,dispatch:eh,noBorderOnFocus:!0,noLeftBorder:D,squareRightBorder:F,"data-tooltip-type":h.wL.TEXT,"data-tooltip":l,"data-tooltip-proxy-element-id":ew?P:void 0,"data-tooltip-show-on-target-only":f||void 0,"data-tooltip-max-width":200,onFocus:K,onBlur:G,onMouseEnterNonPropagating:B,onMouseEnter:U,onMouseLeave:V,onScrubBegin:e=>{e_.current=!0,null==H||H(e)},onScrubEnd:e=>{e_.current=!1,null==W||W(e)},onScrubClick:Y?eb:void 0,onKeyDown:q,onKeyUp:X,onPaste:z,onNudge:$,recordingKey:j,dataTestId:Q,dropdownShown:ep,svg:M,fallbackSvg:x,ui3Icon:O,label:et,allowEmpty:Z,unNamespacedInputRecordingKey:!0,dropdownWidth:el??130,omitValueFromDropdown:es,autoFocus:ei,noPlaceholderLine:!0,onboardingKey:eo,openBelowTarget:ec,chevronClassName:"stack_apply_variable_combobox--chevron--T0dhq combo_box--smallChevronSizing--uySoZ",dropdownAlignment:eu,disableSelectFocus:!0},eS))}},443304:(e,t,n)=>{n.d(t,{m:()=>N});var a=n(307824),r=n(120304),l=n(598292),s=n(125504),i=n.n(s),o=n(937620),c=n(537096),u=n(560072),d=n(762820),p=n(979144),m=n(540696),g=n(507076),h=n(407552),_=n(570012),f=n(142548),v=n(513568),y=n(381748),E=n(235020),w=n(167640),b=n(902784),S=n(202096),T=n(202885);let C="STACK_COUNTER_SPACING";function N({focusOnMount:e,source:t,onCanvasUI:n,...s}){let N=(0,r.OY)(),{smallNudgeAmount:I,bigNudgeAmount:A}=(0,p.i_)(),[k,P]=(0,g.H4)("stackCounterSpacing"),M=(0,g.A9)("stackCounterSpacingSynced"),[x,O]=(0,g.H4)("stackCounterAlignContent"),R=(0,o.e6)(),L=(0,a.useRef)(!1),D=(0,m.Er)(x)?m.ee:"SPACE_BETWEEN"===x?m.CO:k,F=(0,a.useRef)(null);a.useEffect(()=>{var t,n;e&&(null==(t=F.current)||t.focus(),null==(n=F.current)||n.select())},[e]);let{boundVariable:K,consumedVariable:G}=(0,w.M)(C,d.y6c.FLOAT);(0,a.useEffect)(()=>{K&&"SPACE_BETWEEN"===x&&O("AUTO",_.MO.NO)},[K,x,O]);let{clearVariableConsumption:U}=(0,w.M)(C,d.y6c.FLOAT),B=(0,b.SE)({smallNudgeAmount:I,bigNudgeAmount:A,min:0,allowEmpty:!0}),V=(e,n)=>{n&&(R("autolayout_counter_spacing_changed",{source:t,input:L.current?"scrub":"textfield",value:(0,m.ED)(e)?"Auto":e}),d.i46.temporarilyHideOverlay(d.mcG.SELECTION)),"number"==typeof e||null===e?(O("AUTO",_.MO.NO),P(e,n)):(U(),O("SPACE_BETWEEN",n))},H=(0,u.t)("fullscreen.properties_panel.stack_panel.gap_rows_vertical"),W="spacing-rows-vertical-icon",Y=[a.createElement(E.cb,{key:"value",value:(0,h.I)(k)?k:A}),a.createElement(E.cb,{key:"auto",value:m.CO})],q=M&&"SPACE_BETWEEN"!==x;return n?a.createElement(y.eY,{recordingKey:s.recordingKey,inputClassName:s.outerClassName,fields:[C],currentFieldValue:(0,m.EH)(k)?k:void 0,resolvedType:d.y6c.FLOAT,disableEntryPoint:n},a.createElement(v.IN,{noBorderOnHover:!0,isTokenizable:!0,forwardedRef:F,inputClassName:i()(S.Yh,s.inputClassName),value:q?void 0:D,scrubStartValue:q?D:void 0,allowEmpty:!0,wheelMultiplier:I,scrubMultiplier:I,smallNudgeAmount:I,bigNudgeAmount:A,onValueChange:V,mixedMathHandler:b.aS,dispatch:N,noBorderOnFocus:s.noBorderOnFocus,noLeftBorder:s.noLeftBorder,squareRightBorder:s.squareRightBorder,"data-tooltip-type":f.wL.TEXT,"data-tooltip":H,"data-tooltip-proxy-element-id":G?W:void 0,onFocus:s.onFocus,onBlur:s.onBlur,onMouseEnter:s.onMouseEnter,onMouseLeave:s.onMouseLeave,onScrubBegin:e=>{var t;L.current=!0,null==(t=s.onScrubBegin)||t.call(s,e)},onScrubEnd:e=>{var t;L.current=!1,null==(t=s.onScrubEnd)||t.call(s,e)},onKeyDown:s.onKeyDown,onPaste:s.onPaste,onNudge:s.onNudge,recordingKey:s.recordingKey,dataTestId:s.inputTestId,min:0,placeholder:q&&(0,m.EH)(D)?B.format(D):void 0},a.createElement(c.A,{className:i()(S.CA,s.svgClassName),svg:T.c,"data-tooltip-type":G?f.wL.TEXT:void 0,"data-tooltip":G?H:void 0,id:W}))):a.createElement(w.u,{id:"stackCounterSpacing",options:Y,outerClassName:s.outerClassName,mixedMathHandler:b.Qn,inputRef:F,inputClassName:s.inputClassName,value:q?void 0:D,scrubStartValue:q?D:void 0,formatter:B,onChange:V,noBorderOnFocus:s.noBorderOnFocus,noLeftBorder:s.noLeftBorder,squareRightBorder:s.squareRightBorder,tooltipText:H,iconId:W,ui3Icon:a.createElement(l.I,null),onFocus:s.onFocus,onBlur:s.onBlur,onMouseEnter:s.onMouseEnter,onMouseLeave:s.onMouseLeave,onScrubBegin:s.onScrubBegin,onScrubEnd:s.onScrubEnd,onKeyDown:s.onKeyDown,onPaste:s.onPaste,onNudge:s.onNudge,recordingKey:s.recordingKey,inputTestId:s.inputTestId,icon:T.c,variableField:C,source:t,placeholder:q&&(0,m.EH)(D)?B.format(D):void 0,allowEmpty:!0,shiftVariableOptionToAlign:!0,dropdownWidth:140})}},135456:(e,t,n)=>{n.d(t,{S:()=>E,i:()=>w});var a=n(307824),r=n(120304),l=n(125504),s=n.n(l),i=n(139776),o=n(537096),c=n(762820),u=n(979144),d=n(540696),p=n(570012),m=n(142548),g=n(513568),h=n(381748),_=n(219868),f=n(184e3),v=n(902784),y=n(202096);function E({paddingSelection:e,focusOnMount:t,source:n,disableVariablesEntryPoint:l,...E}){let w=(0,r.OY)(),[S,T]=(0,v.Q5)(e),{smallNudgeAmount:C,bigNudgeAmount:N}=(0,u.i_)(),I=(0,a.useRef)(!1),A=(0,f._O)(),k=v.LY[e],P=`stack-padding-input-icon-${e}`,M=(0,v.q6)(e),x=(0,a.useRef)(null);a.useEffect(()=>{var e,n;t&&(null==(e=x.current)||e.focus(),null==(n=x.current)||n.select())},[e,t]);let O=a.useMemo(()=>(0,v.Ud)(e),[e]),R=b(e),{consumedVariable:L}=(0,_.DT)(R);return a.createElement(h.eY,{recordingKey:E.recordingKey,fields:R,disableEntryPoint:l,resolvedType:c.y6c.FLOAT,inputClassName:E.outerClassName,currentFieldValue:(0,d.EH)(S)&&(0,i.MP)(S)?S[0]:void 0},a.createElement(g.wB,{noBorderOnHover:!0,isTokenizable:!0,forwardedRef:x,inputClassName:s()(y.Yh,E.inputClassName),value:S,wheelMultiplier:C,scrubMultiplier:C,smallNudgeAmount:C,bigNudgeAmount:N,onValueChange:(e,t)=>{t===p.MO.YES&&c.i46.temporarilyHideOverlay(c.mcG.SELECTION),T(e,t,{source:n,input:I.current?"scrub":"textfield"})},mixedMathHandler:O,dispatch:w,noBorderOnFocus:E.noBorderOnFocus,noLeftBorder:E.noLeftBorder,squareRightBorder:E.squareRightBorder,"data-tooltip-type":m.wL.TEXT,"data-tooltip":M,"data-tooltip-proxy-element-id":L?P:void 0,"data-tooltip-show-on-target-only":A||void 0,onFocus:E.onFocus,onBlur:E.onBlur,onNudge:E.onNudge,onMouseEnter:E.onMouseEnter,onMouseLeave:E.onMouseLeave,onClick:E.onClick,onKeyDown:E.onKeyDown,onPaste:E.onPaste,onScrubBegin:e=>{var t;I.current=!0,null==(t=E.onScrubBegin)||t.call(E,e)},onScrubEnd:e=>{var t;I.current=!1,null==(t=E.onScrubEnd)||t.call(E,e)},recordingKey:E.recordingKey,dataTestId:E.inputTestId},a.createElement(o.A,{className:s()(y.CA,E.svgClassName),svg:k,"data-tooltip-type":L?m.wL.TEXT:void 0,"data-tooltip":L?M:void 0,id:P})))}function w(){let e=b(v.WS.HORIZONTAL),{consumedVariable:t}=(0,_.DT)(e),n=b(v.WS.VERTICAL),{consumedVariable:a}=(0,_.DT)(n);return!(0,d.EH)(t)||!(0,d.EH)(a)}function b(e){switch(e){case v.WS.TOP:return["STACK_PADDING_TOP"];case v.WS.RIGHT:return["STACK_PADDING_RIGHT"];case v.WS.BOTTOM:return["STACK_PADDING_BOTTOM"];case v.WS.LEFT:return["STACK_PADDING_LEFT"];case v.WS.HORIZONTAL:return["STACK_PADDING_LEFT","STACK_PADDING_RIGHT"];case v.WS.VERTICAL:return["STACK_PADDING_TOP","STACK_PADDING_BOTTOM"];case v.WS.ALL:return[]}}},267920:(e,t,n)=>{n.d(t,{QR:()=>h,T:()=>g,ek:()=>_});var a=n(307824),r=n(937620),l=n(667492),s=n(843148),i=n(540696),o=n(507076),c=n(397888),u=n(287540),d=n(570012),p=n(15416),m=n(902784);function g(){let[e,t]=(0,o.H4)("stackCounterAlignItems"),n=(0,r.e6)(),l=f(e,"CENTER",e=>!e||(0,i.Er)(e)||"BASELINE"===e);return(0,a.useCallback)((e,a)=>{t(e?"BASELINE":l),n(e?"Enable baseline alignment":"Disable baseline alignment",{source:a})},[t,n,l])}function h(){let e=(0,p._k)(),t=(0,u.eM)((e,t)=>t?t.map(t=>{let n=e.get(t);return n?n.childrenGuids.length:0}):null,e);return{selection:e??[],selectedChildCount:t}}function _(){let[e,t]=(0,o.H4)("stackPrimaryAlignItems"),n=(0,r.e6)(),{selection:l,selectedChildCount:c}=h(),u=f(e,"CENTER",e=>!e||(0,i.Er)(e)||(0,m.Qt)(e));return(0,a.useCallback)((e,a,r=d.MO.YES)=>{let o=(0,s.Ub)().ce_stack_justify_space_between?"SPACE_BETWEEN":"SPACE_EVENLY",p=e?o:u;t(p,r),n("Autolayout spacing mode changed",{mode:(0,i.Er)(p)?"MIXED":p,source:a,selectedGuids:l,selectedCount:l.length,selectionChildCount:c})},[t,n,u,l,c])}function f(e,t,n){let r=(0,c.Ig)(),s=(0,l.C)(r),i=(0,a.useRef)(void 0);return n(e)?(s&&(i.current=t),i.current):(i.current=e,e)}},902784:(e,t,n)=>{let a,r;n.d(t,{CO:()=>ef,EV:()=>eS,GM:()=>j,Gg:()=>ee,Gs:()=>eF,LY:()=>z,Mh:()=>ep,N3:()=>ek,Q5:()=>et,QP:()=>ew,Qd:()=>eK,Qj:()=>eb,Qn:()=>el,Qt:()=>Q,SE:()=>eu,Ud:()=>eo,WS:()=>X,WU:()=>e_,YD:()=>ey,Ys:()=>eI,a0:()=>eP,aO:()=>eN,aS:()=>ei,aq:()=>eh,eC:()=>$,em:()=>em,iI:()=>eO,m4:()=>eL,oU:()=>eC,q6:()=>Z,qi:()=>eA,qk:()=>eG,qu:()=>ex,s5:()=>eT,ue:()=>eM,yW:()=>eU,yq:()=>ed,ys:()=>en});var l=n(307824),s=n(120304),i=n(404920),o=n(916924),c=n(937620),u=n(819584),d=n(4580),p=n(843148),m=n(372152),g=n(623131),h=n(365224),_=n(560072),f=n(23604),v=n(131748),y=n(585508),E=n(762820),w=n(555168),b=n(979144),S=n(241896),T=n(540696),C=n(782220),N=n(507076),I=n(117648),A=n(570012),k=n(234980),P=n(682828),M=n(529764),x=n(268320),O=n(135564),R=n(870840),L=n(285736),D=n(894696),F=n(59968),K=n(389960),G=n(245948),U=n(668560),B=n(223780),V=n(139940),H=n(974936),W=n(381400),Y=n(397332),q=n(255440),X=((a=X||{})[a.TOP=0]="TOP",a[a.RIGHT=1]="RIGHT",a[a.BOTTOM=2]="BOTTOM",a[a.LEFT=3]="LEFT",a[a.HORIZONTAL=4]="HORIZONTAL",a[a.VERTICAL=5]="VERTICAL",a[a.ALL=6]="ALL",a);let z={0:Y.c,1:W.c,2:B.c,3:H.c,5:q.c,4:V.c,6:U.c},$={minWidth:[D.c,F.c],maxWidth:[x.c,O.c],minHeight:[R.c,L.c],maxHeight:[P.c,M.c],removeWidthLimit:[G.c,G.c],removeHeightLimit:[K.c,K.c]};function j(e){switch(e.widthOrHeight){case"width":return"min"===e.minOrMax?$.minWidth:$.maxWidth;case"height":return"min"===e.minOrMax?$.minHeight:$.maxHeight}}function Q(e){return"SPACE_EVENLY"===e||"SPACE_BETWEEN"===e}function Z(e){switch(e){case 0:return(0,_.t)("fullscreen.properties_panel.stack_panel.top_padding");case 1:return(0,_.t)("fullscreen.properties_panel.stack_panel.right_padding");case 2:return(0,_.t)("fullscreen.properties_panel.stack_panel.bottom_padding");case 3:return(0,_.t)("fullscreen.properties_panel.stack_panel.left_padding");case 4:return(0,_.t)("fullscreen.properties_panel.stack_panel.horizontal_padding");case 5:return(0,_.t)("fullscreen.properties_panel.stack_panel.vertical_padding");case 6:return(0,_.t)("fullscreen.properties_panel.stack_panel.all_paddings")}}function J(e,t){let n=1===e.length,a=e[0],r=a,l=a;switch(t){case 0:return{stackVerticalPadding:a};case 1:return{stackPaddingRight:r};case 2:return{stackPaddingBottom:l};case 3:return{stackHorizontalPadding:a};case 4:return n||(r=e[1]),{stackHorizontalPadding:a,stackPaddingRight:r};case 5:return n||(l=e[1]),{stackVerticalPadding:a,stackPaddingBottom:l};case 6:return function(e){let t=e[0],n=e[0],a=e[0],r=e[0];return e.length>=2&&(n=e[1],r=e[1]),e.length>=3&&(a=e[2]),e.length>=4&&(r=e[3]),{stackHorizontalPadding:r,stackVerticalPadding:t,stackPaddingRight:n,stackPaddingBottom:a}}(e)}}function ee(){return(0,i.c)((0,l.useCallback)((e,t)=>{null==e?E._8i.setHoverStackLayoutSize(E.MXH.FIXED,E.kfI.X,!1):E._8i.setHoverStackLayoutSize(e,t,!0)},[]),100)}function et(e){let t=function(){let e=(0,c.e6)(),{stackPaddingBottom:t,stackVerticalPadding:n,stackPaddingRight:a,stackHorizontalPadding:r}=(0,s.w1)(e=>e.mirror.selectionProperties);return(0,l.useCallback)((l,s)=>{e("Autolayout Padding Changed",{side:X[l],top:n,bottom:t,left:r,right:a,...s})},[n,t,r,a,e])}(),n=(0,s.w1)(t=>{let n=function(e,t){switch(e){case 0:return[t.stackVerticalPadding];case 1:return[t.stackPaddingRight];case 2:return[t.stackPaddingBottom];case 3:return[t.stackHorizontalPadding];case 4:return[t.stackHorizontalPadding,t.stackPaddingRight];case 5:return[t.stackVerticalPadding,t.stackPaddingBottom];case 6:return[t.stackVerticalPadding,t.stackPaddingRight,t.stackPaddingBottom,t.stackHorizontalPadding]}}(e,t.mirror.selectionProperties);return(0,T.aO)(n)});return[(0,u.ac)(n),(0,l.useCallback)((n,a,r)=>{a&&r&&t(e,r);let l=J(n,e);y.CA.updateSelectionProperties(l,{shouldCommit:a})},[e,t])]}function en(e,t){e===E.YXl.SPACE_BETWEEN?w.Pc.user("set-stack-distribution-mode",()=>{E._8i.setDistributeOnSelectedStacks()}):e===E.YXl.PACKED&&t!==E.YXl.PACKED&&y.CA.updateSelectionProperties({stackPrimaryAlignItems:"MIN"},{shouldCommit:A.MO.NO})}function ea(e,t,n){return e!==t&&(v.qM.reportAnyPropertyChange([n]),!0)}class er extends C.m{getValueForNode(e){return Q(e.stackPrimaryAlignItems)?null:e.stackSpacing}setValueForNode(e,t){!Q(e.stackPrimaryAlignItems)&&ea(e.stackSpacing,t,"stackSpacing")&&w.Pc.user("set-stack-spacing",()=>{e.stackSpacing=t})}}let el=new er;class es extends C.m{getValueForNode(e){return e.stackCounterSpacing}setValueForNode(e,t){ea(e.stackCounterSpacing,t,"stackCounterSizing")&&w.Pc.user("set-stack-counter-spacing",()=>{e.stackSpacing=t})}}let ei=new es;function eo(e){let t=(e,t)=>{ec("stackTopPadding","stackVerticalPadding",e,t),ec("stackBottomPadding","stackPaddingBottom",e,t),ec("stackLeftPadding","stackHorizontalPadding",e,t),ec("stackRightPadding","stackPaddingRight",e,t)};class n extends C.m{getValueForNode(t){return function(e,t){switch(t){case 0:return[e.stackTopPadding];case 1:return[e.stackRightPadding];case 2:return[e.stackBottomPadding];case 3:return[e.stackLeftPadding];case 4:return[e.stackLeftPadding,e.stackRightPadding];case 5:return[e.stackTopPadding,e.stackBottomPadding];case 6:return[e.stackTopPadding,e.stackRightPadding,e.stackBottomPadding,e.stackLeftPadding]}}(t,e)}setValueForNode(n,a){w.Pc.user("set-stack-padding",()=>{t(n,J(a,e))})}}return new n}function ec(e,t,n,a){let r=a[t];null!=r&&ea(n[e],r,t)&&(n[e]=r)}function eu(e){let{min:t,max:n,smallNudgeAmount:a,bigNudgeAmount:r,allowUnformatted:s,allowEmpty:i}=e;return(0,l.useMemo)(()=>new ev({min:t,max:n,smallNudgeAmount:a,bigNudgeAmount:r,allowUnformatted:s,allowEmpty:i}),[i,s,r,n,t,a])}function ed(e,t){let n=eh(),{smallNudgeAmount:a,bigNudgeAmount:r}=(0,b.i_)();return(0,l.useMemo)(()=>new ey({min:(0,p.Ub)().editor_zero_width_input?1e-4:0,smallNudgeAmount:a,bigNudgeAmount:r,onEvaluateExpressionError:t},n,e),[r,a,n,t,e])}function ep(e){let{smallNudgeAmount:t,bigNudgeAmount:n}=(0,b.i_)();return(0,l.useMemo)(()=>new eE({min:"max"===e.minOrMax?1:0,smallNudgeAmount:t,bigNudgeAmount:n},e),[t,n,e])}function em(e,t,n,a){let r;r="width"===a?new S.C(t,e.size.y):new S.C(e.size.x,t);let l=E._8i.sizeClampedToMinAndMaxIfFixed(r,e.guid);return(0,I.G)(l.x,r.x,.1)&&(0,I.G)(l.y,r.y,.1)?t:n}function eg(e,t,n){(0,k.Qx)().forEach(a=>{let r=em(a,e,t,n);r!==("width"===n?a.size.x:a.size.y)&&E.GqY.setNodeTransformProperties(a.guid,{[n]:r,sizeChangeIsAutomatic:!0})})}function eh(){let e=(0,c.e6)(),[t,n]=(0,N.H4)("minHeight"),[a,r]=(0,N.H4)("maxHeight"),[s,i]=(0,N.H4)("minWidth"),[o,u]=(0,N.H4)("maxWidth"),d=(0,N.A9)("width"),p=(0,N.A9)("height"),m=(0,N.A9)("stackMode"),g="VERTICAL"===m?"vertical":"HORIZONTAL"===m?"horizontal":void 0,h=(0,l.useMemo)(()=>({minOrMax:"min",widthOrHeight:"height",minOrMaxWidthOrHeight:"minHeight",enabled:null!=t,value:t,set:(a,r,l)=>{e("Min max updated",{minOrMax:"min",axis:"height",oldValue:null==t?void 0:t.toString(),newValue:null==a?void 0:a.toString(),currentValueInAxis:null==p?void 0:p.toString(),stackMode:g}),n(a,r),l&&eg(l,a,"height")}}),[t,n,g,p,e]),_=(0,l.useMemo)(()=>({minOrMax:"max",widthOrHeight:"height",minOrMaxWidthOrHeight:"maxHeight",enabled:null!=a,value:a,set:(t,n,l)=>{e("Min max updated",{minOrMax:"max",axis:"height",oldValue:null==a?void 0:a.toString(),newValue:null==t?void 0:t.toString(),currentValueInAxis:null==p?void 0:p.toString(),stackMode:g}),r(t,n),l&&eg(l,t,"height")}}),[a,r,g,p,e]),f=(0,l.useMemo)(()=>({minOrMax:"min",widthOrHeight:"width",minOrMaxWidthOrHeight:"minWidth",enabled:null!=s,value:s,set:(t,n,a)=>{e("Min max updated",{minOrMax:"min",axis:"width",oldValue:null==s?void 0:s.toString(),newValue:null==t?void 0:t.toString(),currentValueInAxis:null==d?void 0:d.toString(),stackMode:g}),i(t,n),a&&eg(a,t,"width")}}),[s,i,g,d,e]),v=(0,l.useMemo)(()=>({minOrMax:"max",widthOrHeight:"width",minOrMaxWidthOrHeight:"maxWidth",enabled:null!=o,value:o,set:(t,n,a)=>{e("Min max updated",{minOrMax:"max",axis:"width",oldValue:null==o?void 0:o.toString(),newValue:null==t?void 0:t.toString(),currentValueInAxis:null==d?void 0:d.toString(),stackMode:g}),u(t,n),a&&eg(a,t,"width")}}),[o,u,g,d,e]);return(0,l.useMemo)(()=>({width:{min:f,max:v,actual:{value:d}},height:{min:h,max:_,actual:{value:p}}}),[_,v,h,f,d,p])}function e_(){let{minWidth:e,maxWidth:t,minHeight:n,maxHeight:a}=(0,d.q)(e=>e.mirror.selectionProperties);return(0,l.useMemo)(()=>({width:{min:null!=e,max:null!=t},height:{min:null!=n,max:null!=a}}),[e,t,n,a])}function ef(){return(0,s.w1)(e=>{let{stackMode:t,nodesAreAllInsideStacks:n,isInstanceSublayerSelected:a}=e.mirror.selectionProperties;return(null!=t&&"NONE"!==(0,T.kB)(t)||!!n)&&!a})}class ev extends f.Ab{format(e){return null==e?"":"number"!=typeof e&&e!==T.CO?e===eC?(0,_.t)("fullscreen.properties_panel.apply_variable_ellipses"):((0,o.kz)(!0,"Unknown stack spacing dropdown option: '"+e+"'"),""):super.format(e)}}class ey extends f.kb{constructor(e,t,n){super(e),this.minmax=t,this.activeDimension=n}format(e){if(null==e)return"";if("number"!=typeof e){let t=e=>(0,T.Er)(e)?(0,_.t)("fullscreen.mixed"):null==e?"":e.toFixed(0);switch(e){case E.MXH[E.MXH.FILL_CONTAINER]:return(0,_.t)("fullscreen.properties_panel.stack_panel.al.fill");case E.MXH[E.MXH.FIXED]:return"width"===this.activeDimension?(0,_.t)("fullscreen.properties_panel.stack_panel.al.fixed.width",{value:t(this.minmax.width.actual.value)}):(0,_.t)("fullscreen.properties_panel.stack_panel.al.fixed.height",{value:t(this.minmax.height.actual.value)});case E.MXH[E.MXH.HUG_CONTENT]:return(0,_.t)("fullscreen.properties_panel.stack_panel.al.hug");case ew:return this.minmax.width.min.enabled?(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.min_width_value",{value:t(this.minmax.width.min.value)}):(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.min_width_add");case eb:return this.minmax.width.max.enabled?(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.max_width_value",{value:t(this.minmax.width.max.value)}):(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.max_width_add");case eS:return this.minmax.height.min.enabled?(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.min_height_value",{value:t(this.minmax.height.min.value)}):(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.min_height_add");case eT:return this.minmax.height.max.enabled?(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.max_height_value",{value:t(this.minmax.height.max.value)}):(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.max_height_add");case eC:return(0,_.t)("fullscreen.properties_panel.apply_variable_ellipses");case eA:return(0,_.t)("fullscreen.properties_panel.stack_panel.remove_min_and_max");default:return(0,o.kz)(!0,"Unknown width/height dropdown option: '"+e+"'"),""}}return super.format(e)}}class eE extends f.kb{constructor(e,t){super(e),this.minmaxApi=t}format(e){if(null==e)return"";if("number"!=typeof e)switch(e){case eN:return this.getCurrentSizeString();case eI:return this.getRemoveLimitString();case eC:return(0,_.t)("fullscreen.properties_panel.apply_variable_ellipses");default:return(0,o.kz)(!0,"Unknown width/height dropdown option: '"+e+"'"),""}return super.format(e)}getCurrentSizeString(){return"width"===this.minmaxApi.widthOrHeight?(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.apply_current_width"):(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.apply_current_height")}getRemoveLimitString(){switch(this.minmaxApi.widthOrHeight){case"width":return"min"===this.minmaxApi.minOrMax?(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.remove_min_width"):(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.remove_max_width");case"height":return"min"===this.minmaxApi.minOrMax?(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.remove_min_height"):(0,_.t)("fullscreen.properties_panel.stack_panel.minmax.remove_max_height")}}}let ew="minWidth",eb="maxWidth",eS="minHeight",eT="maxHeight",eC="apply-variable",eN="set-to-current-size",eI="remove-size-limit",eA="remove-min-and-max",ek={width:{min:!1,max:!1},height:{min:!1,max:!1}},eP=(0,m.SQ)((0,g.Zf)(ek));function eM(e){return e.width.min||e.width.max||e.height.min||e.height.max}let ex=(0,m.SQ)((0,g.Zf)(null));function eO(e){let t=e_(),[n,a]=(0,m.lZ)(eP),r=(0,h.my)(ex);return(0,l.useCallback)(()=>{r(null);let l=n[e];if(l.min||l.max){a({...n,[e]:ek[e]});return}a({...n,[e]:t[e]})},[t,n,r,a,e])}let eR=(0,m.SQ)((0,g.Zf)(null));var eL=((r=eL||{})[r.NO=0]="NO",r[r.YES=1]="YES",r[r.YES_ONLY_MIN_MAX=2]="YES_ONLY_MIN_MAX",r);let eD={count:0};function eF(){let[e,t]=(0,m.lZ)(eR),n=(0,i.c)((0,l.useCallback)((t,n,a,r)=>{if(r!==eD.count)return;let l=!(null==e?void 0:e.minMaxOnly)||"minmax"===t;E._8i.setMinMaxVisuals(n||(1!==a&&l?(null==e?void 0:e.visuals)??null:n))},[e]),100);return(0,l.useCallback)((a,r,l=0)=>{let s=(null==e?void 0:e.minMaxOnly)&&"minmax"===a;if(0!==l||!s){let e=0!==l||s?r:null;t(e?{visuals:e,minMaxOnly:2===l}:null)}n(a,r,l,++eD.count)},[n,null==e?void 0:e.minMaxOnly,t])}function eK(){let e=eF();return(0,l.useCallback)((t,n)=>{n?E._8i.setMinMaxVisuals(null):e("other",null),E._8i.setFocusStackPanelInput(t,n)},[e])}function eG(){let e=eF();return(0,l.useCallback)((t,n)=>{n?E._8i.setMinMaxVisuals(null):e("other",null),E._8i.setHoverStackPanelInput(t,n)},[e])}function eU(e,t,...n){let a=(0,u.ac)(n);(0,l.useEffect)(()=>{if(!e)return;let n=e=>{a.some(t=>{var n;return null==(n=t.current)?void 0:n.contains(e.target)})||t()};return document.addEventListener("mousedown",n,!0),document.addEventListener("pointerdown",n,!0),document.addEventListener("keydown",n,!0),()=>{document.removeEventListener("mousedown",n,!0),document.removeEventListener("pointerdown",n,!0),document.removeEventListener("keydown",n,!0)}},[t,e,a])}},390696:(e,t,n)=>{n.d(t,{q:()=>O});var a=n(307824),r=n(120304);function l(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 15.5h.25a.75.75 0 0 0 .75-.75v-6.5a.75.75 0 0 0-.75-.75H7.5m8 8h-.25a.75.75 0 0 1-.75-.75v-6.5a.75.75 0 0 1 .75-.75h.25m-4 6v-4"}))}var s=n(598292),i=n(125504),o=n.n(i),c=n(937620),u=n(537096),d=n(560072),p=n(585508),m=n(762820),g=n(555168),h=n(979144),_=n(540696),f=n(312452),v=n(507076),y=n(407552),E=n(570012),w=n(142548),b=n(513568),S=n(381748),T=n(235020),C=n(184e3),N=n(167640),I=n(267920),A=n(902784),k=n(202096),P=n(149760),M=n(202885);let x="STACK_SPACING";function O({focusOnMount:e,source:t,onCanvasUI:n,...i}){let O=(0,r.OY)(),{smallNudgeAmount:R,bigNudgeAmount:L}=(0,h.i_)(),D=(0,v.A9)("stackDistributionMode"),F=(0,v.A9)("stackMode"),[K,G]=(0,v.H4)("stackSpacing"),U=(0,c.e6)(),{selection:B,selectedChildCount:V}=(0,I.QR)(),H=(0,C._O)(),W=(0,a.useRef)(!1),Y=(0,a.useRef)(null);a.useEffect(()=>{var t,n;e&&(null==(t=Y.current)||t.focus(),null==(n=Y.current)||n.select())},[e]);let q="HORIZONTAL"===F||(0,_.Er)(F)?P.c:M.c,X=`stack-spacing-input-icon-${F}`,z=H&&("HORIZONTAL"===F||(0,_.Er)(F))?a.createElement(l,null):a.createElement(s.I,null),{boundVariable:$,consumedVariable:j}=(0,N.M)(x,m.y6c.FLOAT);(0,a.useEffect)(()=>{$&&D===f.YXl.SPACE_BETWEEN&&(0,A.ys)(f.YXl.PACKED,D)},[$,D]);let Q=(0,A.SE)({bigNudgeAmount:L,smallNudgeAmount:R}),Z=(0,_.Er)(D)?_.ee:D===f.YXl.SPACE_BETWEEN?_.CO:K,J=D===f.YXl.SPACE_BETWEEN,ee="HORIZONTAL"===F?H?(0,d.t)("fullscreen.properties_panel.section_autoLayout.tooltip_horizontalGap"):(0,d.t)("fullscreen.properties_panel.stack_panel.gap_items_horizontal"):"VERTICAL"===F?H?(0,d.t)("fullscreen.properties_panel.section_autoLayout.tooltip_verticalGap"):(0,d.t)("fullscreen.properties_panel.stack_panel.gap_items_vertical"):H?(0,d.t)("fullscreen.properties_panel.section_autoLayout.tooltip_mixedGap"):(0,d.t)("fullscreen.properties_panel.stack_panel.gap_items"),{clearVariableConsumption:et}=(0,N.M)(x,m.y6c.FLOAT),en=(e,n)=>{n&&(U("Autolayout Spacing Changed",{source:t,input:W.current?"scrub":"textfield",spacing:(0,_.ED)(e)?"auto":e,numericSpacing:(0,_.ED)(e)?void 0:e,autoSpacing:(0,_.ED)(e),selectedGuids:B,selectedCount:B.length,selectionChildCount:V}),m.i46.temporarilyHideOverlay(m.mcG.SELECTION)),"number"==typeof e?g.Pc.user("set-stack-spacing",()=>{(0,A.ys)(f.YXl.PACKED,D),G(e,E.MO.NO)}):g.Pc.user("unset-stack-spacing",()=>{et(),m._8i.unsyncStackCounterSpacing(),(0,A.ys)(f.YXl.SPACE_BETWEEN,D)}),n===E.MO.YES&&p.CA.triggerAction("commit")},ea=[a.createElement(T.cb,{key:"value",value:(0,y.I)(K)?K:L}),a.createElement(T.cb,{key:"auto",value:_.CO})];return n?a.createElement(S.eY,{recordingKey:i.recordingKey,inputClassName:i.outerClassName,fields:[x],currentFieldValue:"number"==typeof Z?Z:void 0,resolvedType:m.y6c.FLOAT,disableEntryPoint:n},a.createElement(b.IN,{noBorderOnHover:!0,isTokenizable:!0,forwardedRef:Y,inputClassName:o()(k.Yh,i.inputClassName),value:Z,wheelMultiplier:R,scrubMultiplier:R,smallNudgeAmount:R,bigNudgeAmount:L,onValueChange:en,mixedMathHandler:A.Qn,scrubbingDisabled:J,dispatch:O,noBorderOnFocus:i.noBorderOnFocus,noLeftBorder:i.noLeftBorder,squareRightBorder:i.squareRightBorder,"data-tooltip-type":w.wL.TEXT,"data-tooltip":ee,"data-tooltip-show-on-target-only":H||void 0,"data-tooltip-proxy-element-id":j?X:void 0,"data-tooltip-max-width":200,onFocus:i.onFocus,onBlur:i.onBlur,onMouseEnter:i.onMouseEnter,onMouseLeave:i.onMouseLeave,onScrubBegin:e=>{var t;W.current=!0,null==(t=i.onScrubBegin)||t.call(i,e)},onScrubEnd:e=>{var t;W.current=!1,null==(t=i.onScrubEnd)||t.call(i,e)},onKeyDown:i.onKeyDown,onPaste:i.onPaste,onNudge:i.onNudge,recordingKey:i.recordingKey,dataTestId:i.inputTestId},a.createElement(u.A,{className:o()(k.CA,i.svgClassName),svg:q,"data-tooltip-type":j?w.wL.TEXT:void 0,"data-tooltip":j?ee:void 0,"data-tooltip-max-width":j?200:void 0,id:j?X:void 0}))):a.createElement(N.u,{id:"stackSpacing",options:ea,inputRef:Y,inputClassName:i.inputClassName,outerClassName:i.outerClassName,value:Z,formatter:Q,variableField:x,mixedMathHandler:A.Qn,onChange:en,scrubbingDisabled:J,noBorderOnFocus:i.noBorderOnFocus,noLeftBorder:i.noLeftBorder,squareRightBorder:i.squareRightBorder,tooltipText:ee,showTooltipOnTargetOnly:H,iconId:X,"data-tooltip-max-width":200,onFocus:i.onFocus,onBlur:i.onBlur,onMouseEnter:i.onMouseEnter,onMouseLeave:i.onMouseLeave,onScrubBegin:i.onScrubBegin,onScrubEnd:i.onScrubEnd,onKeyDown:i.onKeyDown,onPaste:i.onPaste,onNudge:i.onNudge,recordingKey:i.recordingKey,inputTestId:i.inputTestId,icon:q,ui3Icon:z,source:t,onboardingKey:i.onboardingKey,shiftVariableOptionToAlign:!0,dropdownWidth:140})}},292520:(e,t,n)=>{n.d(t,{OQ:()=>E,S_:()=>y,Ww:()=>v});var a=n(307824),r=n(120304),l=n(4580),s=n(570464),i=n(971672),o=n(540696),c=n(142548),u=n(24588),d=n(235020),p=n(529332),m=n(707576),g=n(807200),h=n(868976);let _={format:e=>e||g.y};function f(e){let{propertyValueEntries:t,selectedStatesPropertyValues:n,stateGroupPropertyValues:r,onSelectProperty:l,dropdownShown:g,hideErrorsPanel:f,dispatch:v,shouldIndent:y,extended:E}=e,w=a.useRef([]),b=a.useCallback(e=>{if(!w.current)return!1;let t=w.current[e];return!!t&&t.offsetWidth<t.scrollWidth},[]);return a.createElement(u.sF,{className:h.y6},t.length>0&&a.createElement("div",{className:h.is},t.map((t,u)=>{let{property:m,label:f}=t,S=n[m],T=r[m],C=h.OQ;return y&&(C=E?h.iS:h.yO),a.createElement(a.Fragment,{key:m},a.createElement("p",{ref:e=>{var t;return null==(t=w.current)?void 0:t.push(e)},className:C,"data-tooltip-type":c.wL.TEXT,"data-tooltip":b(u)?m:null},f),"TOGGLE"===t.type?a.createElement(p.q,{toggleClassName:E?h.Eo:h.Y3,on:(0,o.EH)(S)?S===t.toggleTokenPair[0]:o.ee,onChange:e=>{l(m,t.toggleTokenPair[e?0:1])},recordingKey:s.Mx(e,`toggle-${m}`),forwardEventsToFullscreen:!0}):a.createElement(d.M1,{id:`states-property-select-${m}-${e.recordingKey}`,className:E?h.Yl:h.GG,property:S,formatter:_,onChange:e=>{l(m,e)},dispatch:v,dropdownShown:g,onMouseDown:()=>v(i.c),recordingKey:s.Mx(e,`select-${m}`)},[...T].map(t=>a.createElement(d.cb,{key:t,value:t,truncateInMiddle:!0,recordingKey:s.Mx(e,`select-${m}-option-${t}`)}))))})),!f&&a.createElement(m.GM,null))}function v(e,t,n){let a=[{property:t,value:n}];for(let n of e)n.property!==t&&a.push({...n});return a}function y(e,t){let n=t.map(e=>e.toLowerCase()),a=null;if(2===t.length)for(let e of g.gF){let r=n.indexOf(e[0]),l=n.indexOf(e[1]);-1!==r&&-1!==l&&(a=[t[r],t[l]])}return a?{property:e,type:"TOGGLE",label:e,toggleTokenPair:a}:{property:e,type:"SELECT",label:e}}let E=a.memo(function(e){let{sortedProperties:t,stateGroupPropertyValues:n,selectedStatesPropertyValues:s,selectedStates:i,allStates:o,onSelectProperty:c,recordingKey:u,hideErrorsPanel:d,shouldIndent:p,extended:m}=e,h=(0,r.OY)(),{dropdownShown:_,sceneGraphSelection:E}=(0,l.q)(e=>({dropdownShown:e.dropdownShown,sceneGraphSelection:e.mirror.sceneGraphSelection})),[w,b]=a.useState([]);a.useEffect(()=>{b([])},[E]);let S=n?t.map(e=>y(e,n[e])):[];return a.createElement(f,{propertyValueEntries:S,selectedStatesPropertyValues:s,stateGroupPropertyValues:n,onSelectProperty:function(e,t){let n=v(w,e,t),a={};for(let r of i){let{propertyValues:l}=r.stateInfo,s={...l,[e]:t},i=(0,g.wT)(s,n,o);null!==i&&(a[r.symbol.node_id]=i)}c(a),b(n)},dropdownShown:_,recordingKey:u,hideErrorsPanel:d,dispatch:h,shouldIndent:p,extended:m})})},165272:(e,t,n)=>{n.d(t,{_G:()=>m,UT:()=>d,wL:()=>u,sJ:()=>p});var a=n(307824),r=n(125504),l=n.n(r),s=n(698240),i=n(195260);let o="ui3_derived_rows--ui3PanelTitleRow--bFK9n",c="ui3_derived_rows--ui3FadedRow--z2u7o",u=a.forwardRef(function({titleTx:e,icon:t,faded:n,...r},s){return a.createElement(i.gn,{...r,ref:s,appendedClassName:l()(o,{[c]:n}),input:a.createElement(i._o,null,e),label:null,icon:t})}),d=a.forwardRef(function({titleTx:e,faded:t,children:n,...r},s){return a.createElement(i.GQ,{...r,ref:s,appendedClassName:l()(o,{[c]:t}),input:a.createElement(i._o,null,e)},n)}),p=a.forwardRef(function({titleTx:e,leftIcon:t,rightIcon:n,faded:r,...s},u){return a.createElement(i.m2,{...s,ref:u,appendedClassName:l()(o,{[c]:r}),input:a.createElement(i._o,null,e),leftIcon:t,rightIcon:n})}),m=a.forwardRef(function({labelTx:e,input:t,icon:n},r){return a.createElement(i.np,{ref:r,leftInput:a.createElement("span",{className:s.cx.textBodyMedium.pl1.flex.$},e),rightInput:t,icon:n,leftLabel:null,rightLabel:null})})},480856:(e,t,n)=>{n.d(t,{Ap:()=>D,YH:()=>F});var a=n(307824),r=n(120304),l=n(280584),s=n(801928),i=n(484564),o=n.n(i),c=n(886420),u=n(656716),d=n(843148),p=n(570464),m=n(326660),g=n(537096),h=n(560072),_=n(219096),f=n(323576),v=n(979144),y=n(84656),E=n(491776),w=n(790184),b=n(142548),S=n(235020),T=n(219868),C=n(23124),N=n(293580),I=n(24588),A=n(184e3),k=n(165272),P=n(912480),M=n(513252),x=n(873956);class O extends S.M1{}class R extends S.cb{}function L({modeOptions:e,inheritedModeID:t,isShowingGuids:n}){return{format:a=>{var r;if(a===T.WC.LEARN_MORE)return(0,h.t)("variables.modes.option.learn_more");if(a===T.WC.REVIEW_UPDATES)return(0,h.t)("variables.modes.option.review_updates");if(a===T.GC){if(t===T.aO)return(0,h.t)("variables.mode_properties_panel.select.option.auto_with_name",{modeName:(0,h.t)("variables.mode_properties_panel.select.option.mixed")});let n=null==(r=e.find(e=>(0,c.QZ)(e.modeId,t)))?void 0:r.name;return n?(0,h.t)("variables.mode_properties_panel.select.option.auto_with_name",{modeName:n}):(0,h.t)("variables.mode_properties_panel.select.option.auto")}{if(a===T.c4)return 0===e.length&&(0,m.WI)("variables","No mode options available"),(0,h.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:e[0].name??""});if(a===T.aO)return(0,h.t)("variables.mode_properties_panel.select.option.mixed");if(a===T.cs)return(0,h.t)("variables.mode_properties_panel.select.option.deleted");let t=e.find(e=>(0,c.QZ)(e.modeId,a));return t?n?`${t.name} (${t.modeId.guid})`:t.name:((0,m.WI)("variables","Option does not exist in modeOptions"),(0,h.t)("variables.mode_properties_panel.select.option.deleted"))}},isEqual:(e,t)=>(0,c.QZ)(e,t)}}function D({fill:e,showExplicitOnly:t,recordingKey:n}){let l=(0,r.OY)(),s=(0,T.gp)(),i=(0,T.oh)(),o=(0,T._E)(),c=(0,y.s5)((0,v.EB)().showGuids),u=(0,r.w1)(E.qg),d=a.useMemo(()=>JSON.stringify(u),[u]),m=(0,T.fu)(),g=Object.entries(s),h=a.useMemo(()=>g.sort(([e,t],[n,a])=>t.fileKey!==a.fileKey?t.fileKey?a.fileKey?t.fileKey.localeCompare(a.fileKey):1:-1:t.collectionName.localeCompare(a.collectionName)),[g]);return a.createElement(a.Fragment,null,h.map(([r,s])=>{let u=s.inheritMode,g=s.explicitMode;return a.createElement(F,{key:`variable-mode-entry-${r}-${t}-${d}`,fill:e,showExplicitOnly:t,variableSetName:s.collectionName,variableSetKey:r,modeOptions:s.modeOptions,inheritedModeID:u,explicitModeID:g,showInheritedModeOption:!0,onChange:(e,t)=>{o[r]&&i[r]?l((0,_.cz)({item:i[r],callback:t=>{m(r,e)}})):m(r,e,t)},isShowingGuids:c,recordingKey:p.Mx(n,`variableModeEntry-${t}`)})}))}function F(e){let{fill:t,showExplicitOnly:n,variableSetName:i,variableSetKey:m,modeOptions:_,explicitModeID:v,inheritedModeID:y,isShowingGuids:E,recordingKey:D,showInheritedModeOption:F,onChange:K}=e,G=(0,r.OY)(),U=(0,r.w1)(e=>e.dropdownShown),B=(0,T.gN)(),V=(0,A.O2)(),H=v&&v!==T.aO&&_.every(e=>!(0,c.QZ)(e.modeId,v)),W=T.c4;H?W=T.cs:v?W=v:y&&(W=F?T.GC:y);let Y=L({modeOptions:_,inheritedModeID:y,isShowingGuids:E}).format(W),[q,X]=a.useState(n),z=a.useCallback((e,t)=>{K(e,t),X(!1)},[K]),$=a.useMemo(()=>(function(e,t,n,r){let l=[];if(0===t.length)return l;let s=o()(t,e=>e.modeId.collectionKey),i=!!(0,d.Ub)().ds_variables_relax_modes,c=a.createElement("div",{className:M.Oe},a.createElement(g.A,{className:M.O,svg:x.c}));return Object.entries(s).map(([t,r])=>{for(let s of(l.length>0&&r.length>0&&l.push(a.createElement(S.Wy,null)),r))l.push(a.createElement(R,{key:`mode-option-${t}-${s.modeId.guid}-${n}`,value:s.modeId,recordingKey:p.Mx(e,`varSetSelect=${t}`,`value=${s.modeId.guid}`,`varSetKey=${t}`),disabled:!i&&!s.isCompatible,fullWidth:!0,rightSettingsIcon:i&&!s.isCompatible?c:void 0}))}),i&&t.some(e=>!e.isCompatible)&&(l.push(a.createElement(S.Wy,null)),r===T.WC.REVIEW_UPDATES?l.push(a.createElement(R,{key:"incompatible-modes-updates",value:T.WC.REVIEW_UPDATES,iconToReplaceCheck:c,recordingKey:p.Mx(e,"incompatible-modes-review-updates"),additionalStylesClassName:M.In})):r===T.WC.LEARN_MORE&&l.push(a.createElement(R,{key:"incompatible-modes-learn-more",value:T.WC.LEARN_MORE,iconToReplaceCheck:c,recordingKey:p.Mx(e,"incompatible-modes-learn-more"),additionalStylesClassName:M.In}))),l})(D,_,n,B),[D,_,n,B]);if(_.length<2||q&&!v)return null;let j=W===T.aO,Q=function(e,t,n,r,l,s){let i=[];return n&&i.push(a.createElement(R,{key:T.aO,value:T.aO,recordingKey:p.Mx(e,"value:MIXED"),selected:!0}),a.createElement(S.Wy,null)),r?l&&i.push(a.createElement(R,{key:T.GC,value:T.GC,recordingKey:p.Mx(e,"value:INHERIT")}),a.createElement(S.Wy,null)):s.length>0&&i.push(a.createElement(R,{key:T.c4,value:T.c4,recordingKey:p.Mx(e,"value:DEFAULT"),disabled:!s[0].isCompatible,selected:t===T.c4}),a.createElement(S.Wy,null)),t===T.cs&&i.push(a.createElement(R,{key:T.cs,value:T.cs,recordingKey:p.Mx(e,"value:DELETED"),disabled:!0,selected:!0})),i}(D,W,j,!!y,F,_),Z=a.createElement(O,{fill:t,id:`var-set-mode-${m}-${n}`,dropdownWidth:200,dropdownAlignment:"right",dispatch:G,inputClassName:V?P.aG:void 0,chevronClassName:V?P.KY:void 0,dropdownShown:U,formatter:L({modeOptions:_,inheritedModeID:y,isShowingGuids:E}),property:W,recordingKey:p.Mx(D,`varSetSelect=${m}`),onChange:e=>{e===T.WC.LEARN_MORE?u.default.unsafeRedirect(T.sf,"_blank"):e===T.WC.REVIEW_UPDATES?G(f.A5({type:N._A,data:{initialTab:w.Er.UPDATES,entrypoint:C.Yj.VARIABLE_MODE_INCOMPATIBLE_REVIEW_UPDATES_DROPDOWN_OPTION}})):z(e,L({modeOptions:_,inheritedModeID:y,isShowingGuids:E}).format(e))},tooltip:Y},...Q,...$);return V?"INHERIT"===W?null:a.createElement(k._G,{labelTx:a.createElement("span",{className:M.wt},i),input:Z,icon:a.createElement(l.w,{"data-tooltip":(0,h.t)("general.remove"),"data-tooltip-type":b.wL.TEXT,"aria-label":(0,h.t)("general.remove"),onClick:()=>z("INHERIT"),actionOnPointerDown:!0},a.createElement(s.e,null))}):a.createElement(I.WA,{className:M.CE,dataTestId:"variableModeEntry"},a.createElement("div",{className:M.o0},i),a.createElement("div",{className:M.Wu},Z))}},531008:(e,t,n)=>{n.d(t,{M:()=>q});var a=n(307824),r=n(120304),l=n(125504),s=n.n(l),i=n(843148),o=n(570464),c=n(234284),u=n(148276),d=n(537096),p=n(560072),m=n(317704),g=n(58352),h=n(288448),_=n(760780),f=n(849208),v=n(144459),y=n(974636),E=n(362592),w=n(357532),b=n(753268),S=n(101040),T=n(518256),C=n(881467);function N(){return(0,h.kD)()?a.createElement(I,null):null}function I(){let e=(0,b.u)("upsell"),t=(0,r.OY)(),{show:n,isShowing:l,complete:s}=(0,y.W)({overlay:C.k9g,priority:E.g.DEFAULT_MODAL}),i=(0,a.useCallback)(()=>{s(),e("handoff"),t(f.s({dev_mode_notified_of_approved_org_request:!0}))},[s,t,e]),o=(0,a.useCallback)(()=>{s(),t(f.s({dev_mode_notified_of_approved_org_request:!0}))},[s,t]);return(0,_.u)(()=>{n()}),a.createElement(w.Y5,{isShowing:l,targetKey:T.yW,shouldCenterArrow:S.yi.BEST_EFFORT,trackingContextName:"Dev Mode Approved Access Hint",title:a.createElement(p.Tx,{id:"dev_handoff.paywall.approved.title"}),description:a.createElement(p.Tx,{id:"dev_handoff.paywall.approved.description"}),primaryCta:{label:a.createElement(p.Tx,{id:"fullscreen_actions.enter-inspect-mode"}),type:"button",onClick:i,ctaTrackingDescriptor:v.O.DEV_MODE_APPROVED_ACCESS_HINT_SWITCH_MODE},onClose:o,emphasized:!0,disableHighlight:!0})}var A=n(372152),k=n(805220),P=n(193284);let M="dev_mode_has_seen_direct_link_hint",x=(0,k.Ww)(M);function O(){return(0,A.m4)(P.o)?a.createElement(R,null):null}function R(){let e=(0,h.U9)(),t=(0,A.m4)(x),n=(0,r.OY)(),{show:l,isShowing:s,complete:i}=(0,y.W)({overlay:C.ItU,priority:E.g.DEFAULT_MODAL},[t]),o=(0,a.useCallback)(()=>{i(),n(f.s({[M]:!0}))},[i,n]),c=(0,a.useCallback)(()=>{e||l({canShow:e=>!e})},[l,e]);return((0,_.u)(()=>{c()}),a.useEffect(()=>{e&&s&&o()},[e,s,o]),s)?a.createElement(w.Y5,{isShowing:s,targetKey:T.yW,shouldCenterArrow:S.yi.BEST_EFFORT,trackingContextName:"Dev Mode Direct Link Hint",title:a.createElement(p.Tx,{id:"dev_handoff.paywall.direct_link_hint.title"}),description:a.createElement(p.Tx,{id:"dev_handoff.paywall.direct_link_hint.description"}),primaryCta:{label:a.createElement(p.Tx,{id:"general.got_it"}),type:"button",onClick:o,variantOverride:"secondary",ctaTrackingDescriptor:v.O.DEV_MODE_DIRECT_LINK_HINT},onClose:o,emphasized:!1,disableHighlight:!0}):null}var L=n(403132),D=n(397888),F=n(392992),K=n(251596),G=n(142548),U=n(740200),B=n(927976);let V="mode_switcher_toggle--toggled---c0DA";var H=n(161700);function W({disabled:e,extraPadding:t,toggled:n,handleOnPointerDown:r,handleOnKeyDown:l,recordingKey:o}){return a.createElement("div",{className:s()("mode_switcher_toggle--switchWithButtonBase--EtDrb",(0,i.Ub)().ds_updates_toast_deprecation&&"mode_switcher_toggle--dsUpdatesToastDeprecationSwitchWithButtonBase---Q2OY",t&&"mode_switcher_toggle--extraPadding--slSfm",e&&"mode_switcher_toggle--disabled--y1Es8",n&&V),role:"button",onPointerDown:r},a.createElement(u.qe,{disabled:e,defaultClass:s()("mode_switcher_toggle--switchButton--i3ZP2",n&&V),"data-onboarding-key":g.g,"data-fullscreen-intercept":!0,onKeyDown:l},a.createElement(d.A,{svg:H.c})))}function Y({disabled:e,extraPadding:t,isDevHandoff:n,recordingKey:r,tooltip:l,tooltipType:i}){let c=(0,b.u)("toggle"),u=(0,D._o)(),d=(0,K.C2)(),m=(0,F.AL)(),g=(0,o.Wk)(o.Mx(r,"switchToDevModeButton"),"pointerdown",t=>{e||0!==t.button||(t.preventDefault(),c(n?"design":"handoff"))}),h=(0,o.ag)(o.Mx(r,"switchToDevModeToggle"),"keydown",e=>{("Enter"===e.code||"Space"===e.code)&&c(n?"design":"handoff")}),_=!!m&&(null==d?void 0:d.id)===m.creatorId;return a.createElement(a.Fragment,null,a.createElement("div",{className:s()("mode_switcher_toggle--toggleWrapper--kHykz",n?V:""),role:"button","aria-pressed":n,"data-tooltip-type":i??G.wL.TEXT,"data-tooltip":l??(0,p.t)("general.dev_mode"),"data-tooltip-shortcut-key":l?void 0:n?"enter-design-mode":"enter-inspect-mode","data-tooltip-offset-y":4,"data-tooltip-interactive":i===G.wL.SPECIAL,"data-tooltip-is-current-user-file-owner":JSON.stringify(_),"data-onboarding-key":T.yW},a.createElement(W,{disabled:e,extraPadding:t,toggled:n,handleOnPointerDown:g,handleOnKeyDown:h})),a.createElement(U.i,null,!u&&a.createElement(O,null),!u&&a.createElement(N,null)))}function q({recordingKey:e,extraPadding:t}){let n=(0,B.AR)(),l=(0,r.OY)(),s=(0,F.K0)(),i=(0,F.AL)(),o=(0,r.w1)(e=>{var t;return null==(t=e.openFile)?void 0:t.canEdit}),u=(0,r.w1)(e=>e.selectedView),d=(0,h.eI)(),g=!(0,K.C2)(),_=n?"handoff":"design";(0,a.useEffect)(()=>{g&&"handoff"===_&&l(L.Ej({...u,view:"fullscreen",editorType:"design"}))},[g,_,l,u]);let f="handoff"===_,v=(0,a.useRef)(f);if((0,a.useEffect)(()=>{if(v.current!==f){let e=f?(0,p.t)("dev_handoff.inspect_mode.switched_to_inspect"):(0,p.t)("dev_handoff.inspect_mode.switched_to_design");l(m.A.dequeue({matchType:"switched_editor_mode"})),l(m.A.enqueue({type:"switched_editor_mode",message:e,delay:200,timeoutOverride:1200}))}v.current=f},[f,l]),g)return null;let y=!f&&!d&&!(0,c.g9)(),E=!!i&&!i.parentOrgId&&!i.teamId;return a.createElement(Y,{canEdit:o,disabled:!s||y,extraPadding:t,tooltip:y?E?G.oz.DEVMODE_TOGGLE_DISABLED_PERSONAL_DRAFT:G.oz.DEVMODE_TOGGLE_DISABLED_TRACKED_TOOLTIP:void 0,tooltipType:y?G.wL.SPECIAL:G.wL.TEXT,isDevHandoff:f,recordingKey:e})}},740468:(e,t,n)=>{n.d(t,{w:()=>i});var a=n(307824),r=n(836912),l=n(530304),s=n(112840);function i(){let{isLeftPanelCollapsed:e}=(0,s.uA)();return e?a.createElement(r.I,null):a.createElement(l.I,null)}},433072:(e,t,n)=>{n.d(t,{K1:()=>ew,Gy:()=>eb,yS:()=>eF,m8:()=>ek,EL:()=>eA,iA:()=>eN,c9:()=>eS,c:()=>ey,or:()=>eP,Sk:()=>ex,mE:()=>eR,_O:()=>eL,aC:()=>eM,S6:()=>eE,aE:()=>eT});var a=n(307824),r=n(602216),l=n(120304),s=n(280584),i=n(763976);function o(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m7.798 17-.2-.02a4 4 0 0 1 .074-7.967l.558-.045.253-.5a4.5 4.5 0 0 1 8.506 1.722l.05.724.702.178A3.002 3.002 0 0 1 17 17H7.798ZM3 13a5 5 0 0 0 4.5 4.975V18H17a4 4 0 0 0 .987-7.877A5.5 5.5 0 0 0 7.591 8.016 5 5 0 0 0 3 13Zm7.354-2.854a.5.5 0 0 0-.708.708l1.647 1.646-1.647 1.646a.5.5 0 0 0 .708.708L12 13.207l1.646 1.647a.5.5 0 0 0 .708-.708L12.707 12.5l1.647-1.646a.5.5 0 0 0-.708-.708L12 11.793l-1.646-1.647Z",clipRule:"evenodd"}))}function c(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m17.038 10.914-.048-.724a4.5 4.5 0 0 0-8.507-1.72l-.253.5-.558.044A4 4 0 0 0 8 17h2a.5.5 0 0 1 0 1H8a5 5 0 0 1-.409-9.984 5.5 5.5 0 0 1 10.396 2.106A4.002 4.002 0 0 1 17 18h-3a.5.5 0 0 1 0-1h3a3 3 0 0 0 .741-5.908l-.703-.178Zm-4.684.232a.5.5 0 0 0-.708 0l-2.5 2.5a.5.5 0 0 0 .708.708l1.646-1.647V19a.5.5 0 0 0 1 0v-6.293l1.646 1.647a.5.5 0 0 0 .708-.708l-2.5-2.5Z",clipRule:"evenodd"}))}function u(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 7c0 1.043.533 1.963 1.341 2.5A2.997 2.997 0 0 0 6 12c0 1.043.533 1.963 1.341 2.5A3 3 0 1 0 12 17v-2.764A3 3 0 1 0 15.659 9.5 3 3 0 0 0 14 4H9a3 3 0 0 0-3 3Zm8 2a2 2 0 1 0 0-4h-2v4h2Zm-2 3a2 2 0 1 0 4 0 2 2 0 0 0-4 0Zm-1 2H9a2 2 0 1 1 0-4h2v4Zm-2 1h2v2a2 2 0 1 1-2-2Zm2-6H9a2 2 0 1 1 0-4h2v4Z",clipRule:"evenodd"}))}var d=n(125504),p=n.n(d),m=n(656716),g=n(4580),h=n(506616),_=n(617292),f=n(570464),v=n(234284),y=n(418084),E=n(816596),w=n(578412),b=n(537096),S=n(968240),T=n(588900),C=n(778524),N=n(560072),I=n(403132),A=n(323576),k=n(560900),P=n(883528),M=n(997108),x=n(441388),O=n(34664),R=n(589440),L=n(309812),D=n(506940),F=n(859264),K=n(585508),G=n(600680),U=n(762820),B=n(300711),V=n(299988),H=n(982868),W=n(312452),Y=n(833492),q=n(402980),X=n(708168),z=n(84656),$=n(142548),j=n(784528),Q=n(518413),Z=n(767876),J=n(129388),ee=n(585320),et=n(518256),en=n(33416),ea=n(907152),er=n(108688);function el(e){let t=(0,l.w1)(e=>e.mirror.appModel.pagesList),n=(0,l.w1)(e=>e.mirror.appModel.currentPage),r=(0,l.OY)();if(!t)return null;let s=async e=>{await ea.TSSceneGraph.instance.setCurrentPageFromNodeAsync(e.nodeId)},i=t.map(e=>({displayText:e.name,disabled:!1,isChecked:n===e.nodeId,nodeId:e.nodeId}));return a.createElement(er.I,{dispatch:r,items:i,showPoint:!0,parentRect:e.dropdown.data.targetRect,onSelectItem:s,recordingKey:"pagesPicker"})}var es=n(563040),ei=n(896784),eo=n(596392),ec=n(400103),eu=n(784476),ed=n(308680),ep=n(682352),em=n(919564),eg=n(822328),eh=n(688556);let e_=[J.Q3.type];function ef(e){return e.iconOverride?{svg:e.iconOverride,ui3Icon:a.createElement(i.A,null)}:e.type===es.FP.TOOL?(0,H.ot)(e.tool):e.type===es.FP.ACTION||e.type===es.FP.TEXT_BUTTON?(0,H.O1)(e.action):(console.error(`Couldn't find icon for item ${e}`),null)}function ev(e){return e.type===es.FP.ACTION?(0,H.Sw)(e.action):null}class ey extends f.UR{constructor(){super(...arguments),this.onClick=f.yw(this,"click",F.Qb.get(this.props.action,"toolbar"))}render(){let{action:e,text:t}=this.props;return a.createElement("div",{className:eo._t},a.createElement("div",{key:`toolbar-action-button-${e}`,className:`${eo.Oy} ${this.props.className?this.props.className:""}`,onClick:this.props.onClick||this.onClick,"data-tooltip-type":$.wL.LOOKUP,"data-tooltip":e},t))}}function eE(e,t){return{ui2ClassName:p()(eo.eS,(0,ei.i)(e,t),{[eo.uo]:t}),tooltipProps:{"data-tooltip-type":$.wL.TEXT,"data-tooltip":t?(0,N.t)("fullscreen.focus_mode.toggle_variants.exit"):(0,N.t)("fullscreen.focus_mode.toggle_variants.enter"),"data-tooltip-submenu-open":!1,"data-tooltip-shortcut-key":"focus-mode-component-set-toggle"}}}function ew(e){let{item:t,isEnabled:n,isActive:r,showBadge:l,recordingKey:i}=e,o=(0,L.Ci)();if(!n)return null;let c=ef(t),u=null==c?void 0:c.svg,d=ev(t),m=null==c?void 0:c.ui3Icon,g=`toolbar-action-${t.action}`,h=e=>{F.Qb.get(t.action,"toolbar")(),o&&e.stopPropagation()},_={"data-tooltip-type":$.wL.LOOKUP,"data-tooltip":t.action,"data-onboarding-key":t.onboardingKey,"data-tooltip-submenu-open":r},f="focus-mode-component-set-toggle"===t.action?eE(n,r):null,v=null==f?void 0:f.tooltipProps,y=null==f?void 0:f.ui2ClassName;return u?a.createElement("span",{className:eo.Ux},o?a.createElement(s.w,{recordingKey:i,onClick:n?h:void 0,"aria-label":t.action,..._,...v},m):a.createElement(T._,{id:g,key:g,svg:u,fallbackSvg:d||void 0,recordingKey:i,className:y??p()(eo.eS,(0,ei.i)(n,r)),onMouseDown:n?h:void 0,..._,...v}),l&&a.createElement("div",{className:eo.s1},a.createElement(b.A,{svg:ep.c}))):a.createElement(a.Fragment,null)}ey.displayName="TextButton";let eb=a.memo(function({recordingKey:e}){let t=(0,Y.g)(),n=(0,l.w1)(e=>(0,j.Ib)(e.mirror.appModel,es.mq.action)&&!!e.openFile),r=(0,l.w1)(e=>e.mirror.appModel.currentTool===es.mq.tool),s=(0,k.EB)(),i=(0,l.w1)(e=>e.mirror.appModel.topLevelMode);return a.createElement(eP,{key:`tool-button-${es.mq.tool}`,dropdownShown:t,isEnabled:n,isActive:r,item:es.mq,numUnreadComments:s,recordingKey:e,topLevelMode:i})});function eS(){return(0,z.s5)((0,G.W)().showTimeSlicingEditRenderingDot)?a.createElement("div",{className:eo.eo,"data-tooltip-type":$.wL.TEXT,"data-tooltip":(0,N.t)("time_sliced_edit_rendering.active"),"data-onboarding-key":"tsmer-status"},a.createElement(b.A,{className:eo.yh,svg:ed.c})):null}function eT(){let[e,t]=a.useState(!1),[n,r]=a.useState(void 0),s=(0,l.w1)(e=>{var t;return null==(t=e.saveStatus)?void 0:t.hasUnsavedChanges}),i=(0,l.w1)(e=>e.autosave.onboardingTooltipVisible),o=(0,h.wZ)()===h.cv.CONNECTED||(0,v.MZ)(),c=!!(0,l.w1)(e=>e.openFile);return a.useEffect(()=>(s||i||!o?void 0!==n||e||r(setTimeout(()=>{t(!0),r(void 0)},c?3e3:1e4)):(t(!1),clearTimeout(n),r(void 0)),()=>{clearTimeout(n)}),[s,i,e,n,o,c]),e}let eC=e=>{switch(e){case U.kL5.SUPPRESS_UNSAVED_CHANGES_UI:case U.kL5.NONE:return"";case U.kL5.DISCONNECTED_AUTOSAVE_DISABLED:return(0,N.t)("unsaved_changes.disconnected.autosave_disabled");case U.kL5.DISCONNECTED_SERVER_ISSUES:return(0,N.t)("unsaved_changes.disconnected.server_issues");case U.kL5.DISCONNECTED_OTHER:return(0,N.t)("unsaved_changes.disconnected.other");case U.kL5.SYNCING_AUTOSAVE_DISABLED:return(0,N.t)("unsaved_changes.syncing.autosave_disabled");case U.kL5.SYNCING_SERVER_ISSUES:return(0,N.t)("unsaved_changes.syncing.server_issues");case U.kL5.SYNCING_OTHER:return(0,N.t)("unsaved_changes.syncing.other");default:throw Error(`Unhandled tab close text enum value ${e}`)}},eN=a.memo(function(){let e=(0,l.w1)(e=>e.mirror.appModel.multiplayerSessionState===U.XcX.JOINED),t=(0,l.w1)(e=>{var t;return null==(t=e.saveStatus)?void 0:t.tabCloseText}),n=(0,h.wZ)()===h.cv.CONNECTED||(0,v.MZ)(),r=eT(),s=t?eC(t):"",i=ec.c,u=a.createElement(o,null);return e&&(n?(i=eu.c,u=a.createElement(c,null)):(s=(0,N.t)("unsaved_changes.disconnected.live_updates"),i=ec.c)),r?a.createElement("div",{className:eo.eo,"data-tooltip-type":$.wL.TEXT,"data-tooltip":s,"data-onboarding-key":"multiplayer-save-status"},a.createElement(S.e,{svg:i},u)):null}),eI=e=>e===es.mq?(0,N.t)("fullscreen.accessibility.view_comments"):(0,P.W)(e.action),eA="fullscreen_menu_visible",ek="fullscreen_menu_hidden";function eP(e){var t;let{isEnabled:n,isActive:r,item:l,numUnreadComments:s,recordingKey:i,isWide:o}=e,c=(null==(t=ef(l))?void 0:t.svg)||null,u=ev(l),d=V.kr.getIsExtension(),m=a.useRef(null);if(!r&&m.current&&m.current===document.activeElement&&(0,D.gd)(),!c)return null;function g(e){return t=>{n&&(r&&l.tool===W.w3X.COMMENTS?(K.CA.triggerAction("set-tool-default"),e&&(0,D.kr)()):F.Qb.get(l.action,"toolbar")(t))}}return a.createElement("div",{key:l.action,"data-testid":l.action,className:eo.UG},a.createElement(T._,{svg:c,fallbackSvg:u||void 0,recordingKey:i,className:p()(eo.eS,(0,ei.i)(n,r),o?eo.Bn:null),onMouseDown:g(!1),"data-tooltip-type":$.wL.LOOKUP,"data-tooltip":l.action,"data-onboarding-key":l.onboardingKey,role:"button",tabIndex:0,onKeyDown:e=>(0,D.CI)({e,onClickHandler:g(!0)}),ariaLabel:eI(l),"aria-pressed":r,"data-fullscreen-intercept":!0,innerSpanRef:m}),!d&&s>0&&l.tool===W.w3X.COMMENTS&&a.createElement("div",{className:r?eo.eE:eo.qe}))}function eM(){return"main-menu"}let ex=a.memo(function(e){let t=a.createRef(),n=(0,l.OY)(),s=(0,y.c)(),{dropdownShown:i,modalShown:o,user:c,selectedView:d}=(0,g.q)(e=>({dropdownShown:e.dropdownShown,modalShown:e.modalShown,user:e.user,selectedView:e.selectedView})),p=(0,O.q6)(),h=(0,R.O)(),_=(0,L.Ci)();a.useEffect(()=>{(0,j.SY)(i)?(0,C.Y9)({id:eA}):(0,C.Y9)({id:ek})},[i]);let f=a.useRef(null);return(0,B.S2)()?null:a.createElement(Z.S,{key:"toggle-menu-button",id:"toggle-menu-button",ref:t,className:`${h?eo.ku:eo.mk} ${e.hideToolsClassName}`,recordingKey:"toggleMenuTopbarButton",selected:(0,j.SY)(i),svg:eg.c,fallbackSvg:eh.c,showChevron:!0,chevronRef:f,positionOnChevron:!0,"data-tooltip-type":$.wL.LOOKUP,"data-tooltip":eM(),onClick:()=>{let e=t.current,a=r.findDOMNode(e);if(!c||c.appData&&c.appData.loggedOut){a&&("fullscreen"===d.view&&"whiteboard"===d.editorType?(n(E.a.init({origin:"logged_out_main_menu_toolbar",redirectUrl:m.default.location.pathname,signedUpFromOpenSession:p})),n(A.A5({type:Q.A,data:{headerText:(0,N.t)("fullscreen.toolbar.create_an_account_to_do_more_with_fig_jam")}}))):n(I.Qn({type:j.Gs,data:{targetRect:a.getBoundingClientRect()}})));return}if((null==o?void 0:o.type)&&e_.includes(null==o?void 0:o.type)&&n(A.ek({type:o.type})),(0,j.SY)(i))n(I.yi());else if(a){let e={type:j.EX,data:{targetRect:a.getBoundingClientRect()},hasOwnEscKeyHandler:!0};n(I.Qn(e))}},ariaLabel:(0,N.t)("fullscreen_actions.main_menu"),"aria-haspopup":"menu","aria-expanded":(0,j.SY)(i),"aria-controls":s,onboardingKey:et.Ir,isUI3:_,ui3Icon:a.createElement(u,null)},(0,j.SY)(i)&&a.createElement(en.w,{id:s,key:"fullscreen-menu","aria-labelledby":"toggle-menu-button",controlledByID:"toggle-menu-button",dropdown:i,recordingKey:"mainMenu",chevronRef:f,positionOnChevron:!0}),(0,j.wj)(i)&&a.createElement(el,{dropdown:i}))}),eO=(0,x.wB)(ey),eR=a.memo(function(){let{openFile:e,selectedView:t}=(0,g.q)(e=>({openFile:e.openFile,selectedView:e.selectedView})),n=(0,O.q6)(),r=(0,l.OY)();return a.createElement(eO,{text:(0,N.t)("fullscreen.toolbar.log_in"),isEnabled:!0,action:"",onClick:()=>{let a="";"fullscreen"===t.view&&"DUPLICATE"===t.landingState?a=e?(0,N.t)("fullscreen.toolbar.log_in_or_create_an_account_to_get_a_copy_of",{file:e.name}):(0,N.t)("fullscreen.toolbar.log_in_or_create_an_account"):n&&(a=(0,N.t)("fullscreen.toolbar.log_in_to_do_more_with_figjam"));let l=(0,_.K0)(m.default.location.search)["node-id"];r(E.a.init({origin:"logged_out_footer",formState:w.o9.SIGN_IN,redirectUrl:l?`${m.default.location.pathname}?node-id=${encodeURIComponent((0,X.W)(l))}`:m.default.location.pathname})),r(A.A5({type:Q.A,data:{headerText:a}}))},className:eo.ai,innerText:(0,N.t)("fullscreen.toolbar.log_in")})}),eL=a.memo(function(e){return a.createElement(Z.k,{ariaLabel:(0,N.t)("fullscreen.toolbar.missing_fonts"),key:"missing-fonts-button",svg:em.c,className:eo.Q5,onClick:()=>{U.i46.findMissingFontsAndShowPopover()},recordingKey:f.Mx(e,"missingFontsButton"),"data-tooltip-type":$.wL.TEXT,"data-tooltip":(0,N.t)("fullscreen.toolbar.missing_fonts")})});function eD(){return window.matchMedia("(max-width:900px)").matches}function eF(e){let{user:t,editingFile:n}=e,r=(0,q.gT)(n),s=(0,l.w1)(e=>e.selectedView),[i,o]=a.useState(eD()),c=()=>{o(eD())};return(a.useEffect(()=>(window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)),[]),!i&&!r&&(0,M.hq)(t))?a.createElement(ee.MJ,{selectedView:s,fileKey:n.key,isFigJamTry:n.isTryFile,userId:t.id}):null}},679156:(e,t,n)=>{n.d(t,{OW:()=>C,_S:()=>I,cP:()=>N,qS:()=>b});var a=n(307824),r=n(120304),l=n(916924),s=n(4580),i=n(843148),o=n(570464),c=n(883528),u=n(435176),d=n(299988),p=n(312452),m=n(833492),g=n(784528),h=n(576448),_=n(433072),f=n(563040),v=n(596392);let y=a.memo(function({item:e}){let t=(0,r.w1)(t=>(0,c.W)(e.label));return a.createElement("div",{key:`label-${e.label}`,className:v.Sq},t)}),E=a.memo(function({item:e,recordingKey:t}){let n=(0,r.w1)(t=>(0,g.Ib)(t.mirror.appModel,e.action)),l=(0,r.w1)(t=>(0,c.W)(e.action));return a.createElement(_.c,{key:`text-button-${e.action}`,action:e.action,isEnabled:n,text:l,recordingKey:t})}),w=a.memo(function({item:e,disabled:t,recordingKey:n}){let l=e.children.filter(e=>!(0,f.iw)(e)||!e.featureFlags||e.featureFlags.every(e=>(0,i.Ub)()[e])),o=(0,s.q)(e=>l.filter(t=>(0,f.iw)(t)&&(0,g.Ib)(e.mirror.appModel,t.action))),c=(0,r.w1)(e=>o.length>0&&b(o[0],e));if(0===o.length)return null;if(e.flyoutHideOptionsIfSingleEnabledAction&&1===o.length){var u;return a.createElement(_.K1,{key:`action-button-${o[0].action}`,item:(u=o[0],{type:f.FP.ACTION,...u}),isEnabled:!0,isActive:c,recordingKey:n})}return 1===o.length&&"flatten-selection"===o[0].action?null:a.createElement(h.po,{key:`flyout-${e.name}`,item:{...e,children:l},disabled:t,recordingKey:n,styleActiveItem:!e.flyoutDoNotStyleActiveItem})});function b(e,t){return"isActive"in e&&e.isActive?e.isActive(t):"propertyValue"in e&&void 0!==e.propertyValue&&t.mirror.appModel[e.property]===e.propertyValue}let S=a.memo(function({item:e,recordingKey:t}){let n=(0,r.w1)(t=>b(e,t)),l=I();return a.createElement(_.K1,{key:`action-button-${e.action}`,item:e,isEnabled:l(e),isActive:n,recordingKey:t})}),T=a.memo(function({item:e,numUnreadComments:t,recordingKey:n,canEdit:l}){let s=(0,r.w1)(t=>(0,g.Ib)(t.mirror.appModel,e.action)),o=(0,m.g)(),c=(0,r.w1)(t=>e.tool!==p.w3X.NONE&&e.tool===t.mirror.appModel.currentTool&&!(0,g.SY)(o)),u=(0,r.w1)(e=>e.mirror.appModel.topLevelMode);return e.featureFlags&&!e.featureFlags.every(e=>(0,i.Ub)()[e])?null:a.createElement(_.or,{key:`tool-button-${e.tool}`,dropdownShown:o,isEnabled:s,isActive:c,item:e,numUnreadComments:t,recordingKey:n,topLevelMode:u,isWide:e.isWideForEditors&&l})}),C=a.memo(function({item:e,numUnreadComments:t,recordingKey:n}){let s=N(),i=(0,r.w1)(e=>e.progressBarState.mode),c=(0,r.w1)(e=>e.openFile),d=(0,u.K)(i);if(!s(e))return null;let p=e.dontChainRecordingKeys?e.recordingKey:o.Mx(n,e.recordingKey);switch(e.type){case f.FP.LABEL:return a.createElement(y,{item:e});case f.FP.TEXT_BUTTON:return a.createElement(E,{item:e,recordingKey:p});case f.FP.FLYOUT:return a.createElement(w,{item:e,disabled:d,recordingKey:p});case f.FP.ACTION:return a.createElement(S,{item:e,recordingKey:p});case f.FP.TOOL:return a.createElement(T,{item:e,numUnreadComments:t,recordingKey:p,canEdit:(null==c?void 0:c.canEdit)||!1});default:(0,l.gy)(e)}});function N(){let e=(0,r.w1)(e=>e.mirror.appModel.activeCanvasEditModeType),t=(0,r.w1)(e=>e.mirror.appModel.currentTool),n=(0,r.w1)(e=>e.openFile),a=(0,r.w1)(e=>e.progressBarState.mode),l=(0,u.K)(a),s=(0,r.w1)(e=>l?!(null==n?void 0:n.canEdit):e.mirror.appModel.isReadOnly),i=(0,r.w1)(e=>e.mirror.appModel.isSceneReadOnly),o=(0,r.w1)(e=>!!e.user);return r=>!(!r||i&&!r.nonEditorsAllowed||r.onlyShowInReadOnly&&!(s&&a!==p.Mty.HIDE_UI)||r.hideInExtension&&d.kr.getIsExtension())&&(!!n||!r.newFileDisabled)&&(!!o||!!r.loggedOutAllowed)&&(!r.editModes||-1!==r.editModes.indexOf(e))&&(!r.showForTools||-1!==r.showForTools.indexOf(t))}function I(){return(0,r.w1)(e=>t=>{let{featureFlags:n=[]}=t;return(0,g.Ib)(e.mirror.appModel,t.action)&&n.every(e=>(0,i.Ub)()[e])&&(!t.isAvailable||t.isAvailable(e))})}},573432:(e,t,n)=>{n.d(t,{g:()=>d,s:()=>u});var a=n(307824),r=n(760780),l=n(560072),s=n(526768),i=n(101040),o=n(363636),c=n(628128);let u="design-panel-container";function d(e){let[t,n]=a.useState(!1),d=(0,s.i)();return((0,r.u)(()=>{queueMicrotask(async function(){var t;let a=null==(t=e.getNodeForViewportFocus)?void 0:t.call(e),r=e.getNodeToSelect();r&&"FRAME"===r.type?(await (0,c.MJ)({navigate:d,guidToFocus:null==a?void 0:a.guid,guidToSelect:r.guid}),n(!0)):e.flowDirection===c.sE.FORWARD?e.onNext():e.onPrevious()})}),t)?a.createElement(o.S2,{dismissModal:e.onClose,disableHighlight:!0,targetKey:u,title:a.createElement(l.Tx,{id:"tooltips_plus_onboarding.design_panel.title"}),trackingContextName:"Tooltips+ Design Panel Step",lowerLeftText:a.createElement(o.wd,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onSecondaryCtaClick:e.onPrevious,onPrimaryCtaClick:e.onNext,arrowPosition:i.Wp.RIGHT_BODY,shouldCenterArrow:i.yi.FALLBACK,pointsTo:"designPanel"},a.createElement(l.Tx,{id:"tooltips_plus_onboarding.design_panel.description"})):null}},395384:(e,t,n)=>{n.d(t,{E$:()=>d,y_:()=>c,mu:()=>u});var a=n(307824),r=n(120304),l=n(105516),s=n(323576),i=n(203736),o=n(158196);let c="/privacy",u="/tos",d=(0,i.U9)(function({url:e,title:t}){let n=(0,r.OY)(),i=a.useRef(null);return a.createElement(o.wJ,{dispatch:n},a.createElement(l.w3,{onClick:()=>n(s.Kw())}),a.createElement("iframe",{className:"google_device_disclaimer_modals--iframeContainer--0XCRs",title:t,ref:i,src:e}))},"GOOGLE_DEVICE_IFRAME_MODAL")},431324:(e,t,n)=>{n.d(t,{y:()=>u});var a=n(307824),r=n(120304),l=n(888932),s=n(148276),i=n(323576),o=n(395384),c=n(600239);function u({url:e,title:t}){let n=(0,r.OY)();return l.cp.isMeetDevice?a.createElement(s.gf,{className:c.cn,onClick:()=>n(i.A5({type:o.E$,data:{url:e,title:t}})),trusted:!0},t):a.createElement(s.gf,{className:c.cn,href:e,target:"_blank",trusted:!0},t)}},179940:(e,t,n)=>{n.d(t,{c:()=>l});var a=n(203736),r=n(506508);let l="WORKSHOP_ONBOARDING";(0,a.U9)(r.g5,l)},506508:(e,t,n)=>{n.d(t,{g5:()=>K,J_:()=>U,cz:()=>G});var a=n(307824),r=n(120304),l=n(125504),s=n.n(l),i=n(161400),o=n(656716),c=n(888932),u=n(901676),d=n(816596),p=n(578412),m=n(532812),g=n(148276),h=n(994880),_=n(560072),f=n(578700),v=n(323576),y=n(373388),E=n(441388),w=n(34664),b=n(90340),S=n(103840),T=n(392992),C=n(251596),N=n(622623),I=n(518413),A=n(395384),k=n(492084),P=n(158196),M=n(431324);let x="workshop_modals--textContainer--Fn3Oc",O="workshop_modals--disclaimer--wFoqk text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI",R="workshop_modals--figjamTryDisclaimer--g4iHA text--fontPos12--YsUAh text--_fontBase--QdLsd";function L({user:e,file:t}){let n=(0,r.OY)(),l=(0,a.useMemo)(()=>c.cp.isMeetDevice?(0,_.t)("figjam_try.google_meet_user_name"):localStorage.getItem((0,N.Et)())||"",[]),[s,i]=(0,a.useState)(l),[u,m]=(0,a.useState)(!1),g=(0,w.S)(),h=g.enabled?g.id:null,E=!e,S=!!(null==t?void 0:t.isTryFile);return{openLoginModal:()=>{n(d.a.init({origin:"logged_out_footer",formState:p.o9.SIGN_IN,redirectUrl:o.default.location.pathname})),n(v.A5({type:I.A,data:{headerText:"Log In",disableClickOutsideToHide:!0}}))},name:s,onNameChanged:e=>{i(e.target.value)},isNameError:u,onSubmit:a=>{if(a.preventDefault(),a.stopPropagation(),E&&(null==s||0===s.trim().length)){m(!0);return}E?(n(y.Uh({name:s})),S&&(null==t?void 0:t.name)===(0,_.t)("fullscreen.fullscreen_view_selector.untitled")&&n(f.w({userName:s,file_key:t.key}))):G(h,e.email),(0,b.a2)({name:"Jam Session access file button",isAnonymous:E,isFigjamTry:S,userID:(null==e?void 0:e.id)??null,userName:E?s:null,fileKey:null==t?void 0:t.key}),n(v.oN())},onClose:e=>{e.preventDefault(),e.stopPropagation(),n(y.Uh({name:(0,_.t)("figjam_try.google_meet_user_name")})),S&&(null==t?void 0:t.name)===(0,_.t)("fullscreen.fullscreen_view_selector.untitled")&&n(f.w({userName:s,file_key:t.key})),n(v.oN())}}}function D({file:e}){let{openLoginModal:t,name:n,onNameChanged:r,isNameError:l,onSubmit:i,onClose:o}=L({file:e}),u=(0,S.k1)(),d=!(null==u?void 0:u.shouldOptimizeForIpadApp);return a.createElement(a.Fragment,null,a.createElement("img",{src:"https://static.figma.com/uploads/ff519560b46a66403ec0c45887a8f336270b7033",alt:"",className:"workshop_modals--figjamTryImage--pnbwF"}),a.createElement("div",{className:x},a.createElement("h1",{className:"workshop_modals--figjamTryHeader--5gdQ2 text--fontPos20--Bcz97 text--_fontBase--QdLsd"},a.createElement(_.Tx,{id:"figjam_try.onboarding_title"}))),a.createElement(h.ay,{multiple:1}),a.createElement("div",{className:x},a.createElement("div",{className:"workshop_modals--figjamTrySubtitle--XIYgl text--fontPos13--xW8hS text--_fontBase--QdLsd"},a.createElement(_.Tx,{id:"figjam_try.onboarding_subtext"}))),a.createElement(h.ay,{multiple:3}),c.cp.isMeetDevice?a.createElement(g.cv,{type:"close",fullWidth:!0,onClick:o},a.createElement(_.Tx,{id:"figjam_try.onboarding_submit"})):a.createElement("form",{onSubmit:i},a.createElement(g.qM,{autoFocus:!0,className:s()("workshop_modals--figjamTryInput--vCslR",l&&"workshop_modals--figjamTryInputError--wUBqP"),placeholder:(0,_.t)("figjam_try.name_input_placeholder"),onChange:r,value:n}),l&&a.createElement("div",{className:"workshop_modals--figjamTryError--tCLy- text--fontPos14--OL9Hp text--_fontBase--QdLsd"},a.createElement(_.Tx,{id:"figjam_try.onboarding_name_validation_error"})),a.createElement(h.ay,{multiple:2}),a.createElement(g.cv,{type:"submit",fullWidth:!0},a.createElement(_.Tx,{id:"figjam_try.onboarding_submit"}))),a.createElement(h.ay,{multiple:3}),a.createElement("div",{className:R},a.createElement(_.Tx,{id:"figjam_try.onboarding_disclaimer",tos:a.createElement(M.y,{url:A.mu,title:(0,_.t)("figjam_try.onboarding_disclaimer_tos")}),privacy_policy:a.createElement(M.y,{url:A.y_,title:(0,_.t)("figjam_try.onboarding_disclaimer_privacy_policy")})})),a.createElement(h.ay,{multiple:1}),d&&!c.cp.isMeetDevice&&a.createElement("div",{className:R},a.createElement(_.Tx,{id:"figjam_try.already_have_an_account",log_in:a.createElement(g.gf,{className:"workshop_modals--figjamTryInlineLink--R8U28",onClick:t,trusted:!0},a.createElement(_.Tx,{id:"figjam_try.already_have_an_account_log_in"}))})))}function F({user:e,file:t}){let{openLoginModal:n,name:r,onNameChanged:l,isNameError:s,onSubmit:i}=L({user:e,file:t}),o=!e;return a.createElement(a.Fragment,null,a.createElement("div",{className:x},a.createElement("h1",{className:"workshop_modals--header--1TwZ- text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI"},a.createElement(_.Tx,{id:"whiteboard.open_sessions.onboarding_title"})),a.createElement("h1",{className:"workshop_modals--headerFilename--Z60l0 workshop_modals--header--1TwZ- text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI"},null==t?void 0:t.name)),a.createElement(h.ay,{multiple:2}),a.createElement("div",{className:x},a.createElement("div",{className:"workshop_modals--subtitle---dQsr text--fontPos16Whyte--OfwSP text--_fontBaseWhyte--efAjI"},a.createElement(_.Tx,{id:"whiteboard.open_sessions.onboarding_subtext"}))),a.createElement(h.ay,{multiple:2}),a.createElement("form",{onSubmit:i},o&&!c.cp.isMeetDevice&&a.createElement(a.Fragment,null,a.createElement(m.OY,{autoFocus:!0,placeholder:(0,_.t)("whiteboard.open_sessions.onboarding_name_input_placeholder"),onChange:l,value:r}),s&&a.createElement("div",{className:"workshop_modals--brandError--wMV-m text--fontPos16Whyte--OfwSP text--_fontBaseWhyte--efAjI"},a.createElement(_.Tx,{id:"whiteboard.open_sessions.onboarding_name_validation_error"})),a.createElement(h.ay,{multiple:2})),a.createElement(h.aO,{type:"submit"},o?(0,_.t)("whiteboard.open_sessions.onboarding_anonymous_submit"):(0,_.t)("whiteboard.open_sessions.onboarding_viewer_submit",{email:e.email}))),o&&a.createElement(a.Fragment,null,a.createElement(h.ay,{multiple:2}),a.createElement("div",{className:x},a.createElement("div",{className:O},a.createElement(_.Tx,{id:"whiteboard.open_sessions.onboarding_disclaimer",button_text:o?(0,_.t)("whiteboard.open_sessions.onboarding_disclaimer_access_file"):(0,_.t)("whiteboard.open_sessions.onboarding_disclaimer_continue"),tos:a.createElement(M.y,{url:A.mu,title:(0,_.t)("whiteboard.open_sessions.onboarding_disclaimer_tos")}),privacy_policy:a.createElement(M.y,{url:A.y_,title:(0,_.t)("whiteboard.open_sessions.onboarding_disclaimer_privacy_policy")})})),!c.cp.isMeetDevice&&a.createElement(a.Fragment,null,a.createElement(h.ay,{multiple:1}),a.createElement("div",{className:O},a.createElement(_.Tx,{id:"whiteboard.open_sessions.already_have_an_account",log_in:a.createElement(g.gf,{className:"workshop_modals--inlineLink--knuU8",onClick:n,trusted:!0},a.createElement(_.Tx,{id:"whiteboard.open_sessions.already_have_an_account_log_in"}))}))))))}function K(){let e=(0,r.OY)(),t=(0,C.C2)(),n=(0,T.AL)(),l=!!(null==n?void 0:n.isTryFile),s=i.x.getState().selectedView;return((null==s?void 0:s.view)==="fullscreen"?s.claim:null)?null:a.createElement(P.wJ,{dispatch:e,disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,className:"workshop_modals--workshopOnboardModal---pZ-B"},a.createElement(E.kH,{name:"Jam Session Onboarding Modal",properties:{isAnonymous:!t,isFigjamTry:l,userID:(null==t?void 0:t.id)??null,fileKey:null==n?void 0:n.key}},l?a.createElement(D,{file:n}):a.createElement(F,{user:t,file:n})))}let G=(0,k.m)((e,t)=>{let n=(0,u.AP)();try{let a=n.get(U(e));if(!a){n.set(U(e),[t]);return}let r=JSON.parse(a);r.includes(t)||(r.push(t),n.set(U(e),r))}catch(a){n.set(U(e),[t])}});function U(e){return`workshop_logged_in_accpeted_${e}`}},462144:(e,t,n)=>{n.d(t,{$:()=>u});var a=n(307824),r=n(250008),l=n(675695),s=n(585508),i=n(762820),o=n(555168),c=n(190144);function u({inheritStyleKeyField:e,initialStyleCreationPaint:t,isCreatingFromSelection:n,trackingOptions:u}){let[d,p]=a.useState(null),m=a.useRef(!1),g=o.wH.user("create-style",()=>{if(m.current=!0,d){let{key:e,version:t}=d,n=i.i46.getSoftDeletedStyleNodeId(e,t);s.CA.restoreStyle(n),(0,r.we)("Style Created",{styleType:u.styleType,styleKey:d.key,styleVersion:d.version})}});return a.useEffect(()=>{let a=o.Pc.system("create-soft-deleted-style",()=>(function({initialStyleCreationPaint:e,isCreatingFromSelection:t,inheritStyleKeyField:n}){if(!e)return i.i46.createSoftDeletedStyle(n,"","",t);{let t=(0,c.OG)(e);return i.uSk.createSoftDeletedStyleFromPaintData(t,"")}})({initialStyleCreationPaint:t,inheritStyleKeyField:e,isCreatingFromSelection:n}));if(!a){p(null);return}return p(a),()=>{i.i46.selectStyle(l.YT.INVALID,l.SI.INVALID),o.Pc.system("style-creation-cleanup",()=>{if(a&&!m.current){let e=i.i46.getSoftDeletedStyleNodeId(a.key,a.version);i.i46.detachAllConsumersOfStyle(e),i.i46.hardDeleteSoftDeletedNode(e)}})}},[t,e,n]),{styleRef:d,createStyle:g}}},752640:(e,t,n)=>{n.d(t,{C:()=>F});var a=n(307824),r=n(602216),l=n(120304),s=n(125504),i=n.n(s),o=n(250008),c=n(721500),u=n(87975),d=n(570464),p=n(71556),m=n(4596),g=n(560072),h=n(597624),_=n(448604),f=n(266772),v=n(803644),y=n(131748),E=n(148812),w=n(585508),b=n(762820),S=n(555168),T=n(138884),C=n(540696),N=n(783932),I=n(777868),A=n(293368),k=n(92072),P=n(926920),M=n(24588),x=n(902848),O=n(763456),R=n(962064);let L=2*(0,c.I)(O.ycA),D=(0,c.I)(O.Oi7);function F({selectedStyleProperties:e,styleName:t,styleNameInputPrefix:n,styleDescription:r,isRenaming:l,isInspectPanel:s,viewOnly:i,hideNameDescription:o,recordingKey:c,showProperties:u=!0,onEnterPressed:m}){return a.createElement(h.g,{direction:"vertical",spacing:0,height:"hug-contents"},a.createElement(K,{selectedStyleProperties:e,bottomPadding:o?0:void 0}),a.createElement(p.f,{maxHeight:300,width:D},!o&&a.createElement(G,{styleName:t,styleNameInputPrefix:n,styleDescription:r,selectedStyleProperties:e,isRenaming:l,isInspectPanel:s,viewOnly:i,recordingKey:c,onEnterPressed:m}),u&&(s?a.createElement(A.w,{recordingKey:d.Mx(c,"inspectionPanel"),inStyleModal:!0}):a.createElement(U,{selectedStyleProperties:e,recordingKey:c}))))}function K({selectedStyleProperties:e,bottomPadding:t}){let[n,r]=a.useState(!1),l=e.styleType,s="TEXT"===l,o="FILL"===l,c="dark"===(0,f.qG)(),{containerClassName:u,previewClassName:d}=a.useMemo(()=>({containerClassName:i()({[R.yu]:s,[R.wl]:!n&&o,[R.k5]:n&&o,[R.WW]:!s&&!o}),previewClassName:i()({[R.OS]:!n,[R._S]:n,[R.oV]:!0,[R.Uh]:s,[R.hG]:s&&c,[R.iu]:o})}),[n,s,o,c]),p=a.useMemo(()=>{let e={};if(e.backgroundImage=`url('${(0,v.c)()}')`,!s)return o?n?e:void 0:e},[n,s,o]);return a.createElement(h.g,{spacing:0,height:"hug-contents",padding:{left:o?L:0,right:o?L:0,top:o?L:0,bottom:t??L},verticalAlignItems:"start"},a.createElement("div",{style:p,className:u},e.url?a.createElement("img",{src:e.url,className:d,alt:"",onLoad:()=>{r(!0)}}):a.createElement(x.wv,{dsStyle:{style_type:e.styleType}})))}function G({selectedStyleProperties:e,styleName:t,styleNameInputPrefix:n,styleDescription:s,recordingKey:i,viewOnly:p,onEnterPressed:f}){let[v,A]=a.useState((n??"")+(t?(0,N.G4)(t):"")),[P,x]=a.useState((0,C.uc)(s,"")),D=(0,l.OY)(),F=e.guid,K=e.styleType,G=a.useRef(null),U=a.useContext(k.Oi),B=d.Un(d.Mx(i,"styleName"),"submit",()=>{if(""===v)return;let n=t?(0,N.Mv)(t):void 0,a=n?n+"/"+v:v;S.Pc.user("rename-style",()=>b.i46.renameNode((0,m.MR)(F),(0,E.i4)(a))),w.CA.triggerAction("commit"),V(),(0,o.we)("Style Renamed",{styleType:e.styleType})}),V=()=>{D(_.st({isRenaming:!1}))},H=d.ag(i,"keydown",e=>{if(e.keyCode===u.as.TAB)B();else if(e.keyCode===u.as.ENTER)B(),U===k.yS.EDIT_STYLE&&""===v||null==f||f();else{if(e.keyCode!==u.as.ESCAPE)return d.Cy;(0,r.flushSync)(()=>{A(t?(0,N.G4)(t):"")}),V();let n=r.findDOMNode(G.current);n&&n.blur()}}),W=()=>{S.Pc.user("set-style-description",()=>(0,T.AX)((0,m.MR)(F),P)),(0,o.we)("Style Description Changed",{styleType:K,length:P.length,guid:(0,m.MR)(F)})};return a.createElement("div",{className:R.VU},a.createElement(h.g,{direction:"vertical",height:"hug-contents"},a.createElement(h.g,{spacing:0,horizontalAlignItems:"space-between",height:"hug-contents",padding:{horizontal:L}},a.createElement(M.iM,{disabled:p},a.createElement(g.Tx,{id:"design_systems.create_style.name"})),p?a.createElement(h.g,{padding:{vertical:(0,c.I)(O.ycA)},width:"hug-contents",height:"hug-contents",verticalAlignItems:"start"},t):a.createElement(M.gf,{ref:G,className:R.MT,name:"styleName",value:v,placeholder:function(e){switch(e){case"FILL":return(0,g.t)("design_systems.create_style.placeholder_name_color");case"TEXT":return(0,g.t)("design_systems.create_style.placeholder_name_text");case"EFFECT":return(0,g.t)("design_systems.create_style.placeholder_name_effect");case"GRID":return(0,g.t)("design_systems.create_style.placeholder_name_grid");default:return(0,g.t)("design_systems.create_style.placeholder_name_create_new_style_generic")}}(K),onFocus:()=>(D(_.st({isRenaming:!0})),A(v),d.Cy),onBlur:B,onChange:e=>{let n=e.target.value;A(n),t!==n&&y.qM.reportEditAction("style-rename")},onKeyDown:H,recordingKey:d.Mx(i,"styleName"),delay:50,autoFocus:!0,autoComplete:"off"})),(s||!p)&&a.createElement(h.g,{spacing:16,horizontalAlignItems:"space-between",height:"hug-contents",padding:{horizontal:L},verticalAlignItems:"start"},a.createElement(M.iM,{disabled:p,className:R._e},(0,g.t)("design_systems.create_style.description")),p?a.createElement(h.g,{spacing:0,padding:{vertical:(0,c.I)(O.ycA)},width:"hug-contents",height:"hug-contents",verticalAlignItems:"start",horizontalAlignItems:"end"},a.createElement("div",{className:R.GF},s)):a.createElement(I.s,{className:`${R.MT} ${R.mg}`,name:"styleDescription",value:P,placeholder:(0,g.t)("design_systems.create_style.placeholder_description"),onBlur:W,spellCheck:!1,onChange:e=>{x(e.target.value),y.qM.reportEditAction("change-style-description")},submit:W,recordingKey:d.Mx(i,"styleDescription"),autoComplete:"off",delay:50}))))}function U({selectedStyleProperties:e,recordingKey:t}){return a.createElement("div",null,"FILL"===e.styleType&&a.createElement(P.yo,{key:"fill",selectionProperties:e,recordingKey:t}),"GRID"===e.styleType&&a.createElement(P.au,{key:"grids",selectionProperties:e,recordingKey:t}),"TEXT"===e.styleType&&a.createElement(P.eM,{key:"type",selectionProperties:e,recordingKey:t}),"EFFECT"===e.styleType&&a.createElement(P.UL,{key:"effects",selectionProperties:e,recordingKey:t}))}},53872:(e,t,n)=>{n.d(t,{w:()=>r});var a=n(672696);function r(e,t){return a.highlight(t,a.languages[e],e)}n(564264),n(129007),n(714128),n(613168)},865916:(e,t,n)=>{n.d(t,{G:()=>r});var a=n(649496);function r(e,t){let n=e[a.mq[t]];return e[a.Qx[t]]?void 0:n}},562200:(e,t,n)=>{n.d(t,{a:()=>u});var a=n(307824),r=n(125504),l=n.n(r),s=n(537096),i=n(506940),o=n(599628),c=n(1196);function u({children:e,isInitiallyOpen:t,title:n,titleClassName:r}){let[u,d]=a.useState(t),p=()=>d(e=>!e);return a.createElement("div",null,a.createElement("div",{className:l()("collapse--collapseTitle---N1bR",r),onClick:p,onKeyDown:e=>(0,i.CI)({e,onClickHandler:p}),role:"button",tabIndex:0},a.createElement(s.A,{className:"collapse--expandCaret--FzvQ9 library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad",svg:u?o.c:c.c}),n),u&&e)}},443736:(e,t,n)=>{n.d(t,{w:()=>r});var a=n(307824);function r(e){return a.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 3a1 1 0 0 1 .872.51l4.5 8A1 1 0 0 1 12.5 13h-9a1 1 0 0 1-.872-1.49l4.5-8A1 1 0 0 1 8 3Zm0 1-.574 1.02L4.062 11 3.5 12h9l-.563-1-3.363-5.98L8 4Z",clipRule:"evenodd"}))}},414148:(e,t,n)=>{n.d(t,{C:()=>r});var a=n(307824);function r(e){return a.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9 4h2.5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5V7h4.5a.5.5 0 0 0 .5-.5V4ZM8 4H4.5a.5.5 0 0 0-.5.5V6h4V4Zm-5 .5A1.5 1.5 0 0 1 4.5 3h7A1.5 1.5 0 0 1 13 4.5v7a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 3 11.5v-7Z",clipRule:"evenodd"}))}},264916:(e,t,n)=>{n.d(t,{m:()=>r});var a=n(307824);function r(e){return a.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5V5a.5.5 0 0 1-1 0V4H8.5v8h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V4H4v1a.5.5 0 0 1-1 0V3.5Z",clipRule:"evenodd"}))}},598292:(e,t,n)=>{n.d(t,{I:()=>r});var a=n(307824);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 7.5v.25c0 .414.336.75.75.75h6.5a.75.75 0 0 0 .75-.75V7.5m-8 8v-.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 .75.75v.25m-6-4h4"}))}},880448:(e,t,n)=>{n.d(t,{k:()=>r});var a=n(307824);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{stroke:"var(--color-icon)",d:"m6.237 11.47 5.233-5.233a.75.75 0 0 1 1.06 0l5.233 5.233a.75.75 0 0 1 0 1.06l-5.233 5.233a.75.75 0 0 1-1.06 0L6.237 12.53a.75.75 0 0 1 0-1.06Z"}))}},117080:(e,t,n)=>{n.d(t,{_:()=>r});var a=n(307824);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M3.293 7.793a1 1 0 0 0 0 1.414l11.5 11.5a1 1 0 0 0 1.414 0l4.5-4.5a1 1 0 0 0 0-1.414l-11.5-11.5a1 1 0 0 0-1.414 0l-4.5 4.5ZM4 8.5l.707.707.69.69.75-.75a.5.5 0 1 1 .707.707l-.75.75 1.292 1.292 2.25-2.25a.5.5 0 0 1 .708.708l-2.25 2.25 1.292 1.292.75-.75a.5.5 0 0 1 .708.708l-.75.75 1.292 1.292 2.25-2.25a.5.5 0 0 1 .708.708l-2.25 2.25 2.689 2.689.707.707.707-.707 3.086-3.086L20 15.5l-.707-.707L9.207 4.707 8.5 4l-.707.707-3.086 3.086L4 8.5ZM16 17a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}},738056:(e,t,n)=>{n.d(t,{Y:()=>r});var a=n(307824);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 7a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 7.5 6h9A1.5 1.5 0 0 1 18 7.5v9a1.5 1.5 0 0 1-1.5 1.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-9ZM6 12a1 1 0 0 1 1-1h2.5a.5.5 0 0 1 0 1H7v5h5v-2.5a.5.5 0 0 1 1 0V17a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-5Zm5.5-3a.5.5 0 0 0 0 1h1.793l-4.147 4.146a.5.5 0 0 0 .708.708L14 10.707V12.5a.5.5 0 0 0 1 0v-3a.5.5 0 0 0-.5-.5h-3Z",clipRule:"evenodd"}))}},530304:(e,t,n)=>{n.d(t,{I:()=>r});var a=n(307824);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10 7h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-8V7ZM9 7H6a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h3V7ZM4 8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8Z",clipRule:"evenodd"}))}},836912:(e,t,n)=>{n.d(t,{I:()=>r});var a=n(307824);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10 7h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-8V7ZM9 7H6a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h3V7ZM4 8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8Z",clipRule:"evenodd"}))}},275712:(e,t,n)=>{n.d(t,{K:()=>r});var a=n(307824);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m10.257 6.06-5.04 8.96C4.467 16.352 5.43 18 6.96 18h10.08c1.53 0 2.493-1.647 1.743-2.98l-5.04-8.96c-.764-1.36-2.722-1.36-3.486 0Zm.872.49-5.04 8.96a1 1 0 0 0 .87 1.49H17.04a1 1 0 0 0 .872-1.49l-5.04-8.96a1 1 0 0 0-1.743 0Zm1.477 3.068a.605.605 0 1 0-1.21 0l.078 3.489a.526.526 0 0 0 1.052 0l.08-3.489Zm-1.104 5.793a.685.685 0 0 0 .498.205.667.667 0 0 0 .348-.093.735.735 0 0 0 .256-.256.66.66 0 0 0 .1-.354.66.66 0 0 0-.212-.492.678.678 0 0 0-.492-.205.685.685 0 0 0-.498.205.67.67 0 0 0-.205.492c0 .196.068.362.204.498Z",clipRule:"evenodd"}))}}}]);

//# debugId=17b18e98-d04b-52f1-bc26-d4dac1f950d0

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/b84ade5d909058fab589d8d18c95f051fae27d70/168-a93370e35d195021.min.js.map